import{a as y,b as x}from"./chunk-263TMA4R-cached.js";import{a as v}from"./chunk-CI7HF2OD-cached.js";import"./chunk-WH7WRYFK-cached.js";import"./chunk-OYX4NVDU-cached.js";import"./chunk-3V7YD6RE-cached.js";import{a as g,c as C}from"./chunk-AZT5ZK4I-cached.js";import"./chunk-ALM2LSB6-cached.js";import"./chunk-ZWHVW34C-cached.js";import"./chunk-KRTYB7RO-cached.js";import"./chunk-WYFJ56Q7-cached.js";import"./chunk-GWRDICTQ-cached.js";import{a as _}from"./chunk-CJC5SPHT-cached.js";import"./chunk-YGZ33QYP-cached.js";import"./chunk-QD6O46IB-cached.js";import"./chunk-WMVHT3GJ-cached.js";import{n as h}from"./chunk-VUYUNB2W-cached.js";import"./chunk-SZPI64OI-cached.js";import"./chunk-SVSS5DEP-cached.js";import"./chunk-MEHASGB7-cached.js";import"./chunk-Z7X5SDSD-cached.js";import"./chunk-M3EDVPDK-cached.js";import"./chunk-33M5GGRR-cached.js";import"./chunk-OMOH7TRL-cached.js";import"./chunk-WBBXU2FL-cached.js";import"./chunk-XMZXE55N-cached.js";C();var w={name:"SendPayemntsViaLightning",components:{ModalBaseTemplate:_,RecordPaymentsList:v,CopyableInput:x,QrCode:y},props:{todoItems:{type:Array}},data(){return{ephemeral:{displayMemo:!1,addDonationFee:!0},config:{debouncedMemoUpdate:h(this.onMemoUpdate,650)},form:{memo:"",paymentsToSend:[]}}},created(){this.form.paymentsToSend=this.todoItems.map((e,i)=>({...e,index:i,checked:!1}))},computed:{dummyQueryString(){let e=this.form.paymentsToSend.filter(t=>t.checked).map(({username:t,amount:d})=>`to=${t}_amount=${d}`).join("?"),i=[e,this.ephemeral.displayMemo&&this.form.memo&&`memo=${this.form.memo}`,this.ephemeral.addDonationFee&&e&&"donation=true"].filter(Boolean).join("?");return i?`?${i}`:""},dummyLinkToCopy(){return`https://groupincome.org/dummy-pay-link/f4k3_H45h_t0_5h4r3${this.dummyQueryString}`},dummyQRstring(){return`https://groupincome.org/dummy-qr${this.dummyQueryString}`}},methods:{updateItem({index:e,...i}){g.set(this.form.paymentsToSend,e,{...this.form.paymentsToSend[e],...i})},onMemoUpdate({target:e}){this.form.memo=e.value}}},S=function(){var e=this,i=e.$createElement,t=e._self._c||i;return t("modal-base-template",{staticClass:"has-background",attrs:{fullscreen:!0,a11yTitle:e.L("Send payments via Lightning")}},[t("div",{staticClass:"c-header"},[t("i18n",{staticClass:"is-title-2 c-title",attrs:{tag:"h2"}},[e._v("Send payment via Lightning")])],1),t("div",{staticClass:"c-content"},[t("form",{staticClass:"card c-card",attrs:{novalidate:"true"},on:{submit:function(d){d.preventDefault()}}},[t("div",{staticClass:"c-section-payments-list"},[t("i18n",{staticClass:"is-title-3 c-sub-title",attrs:{tag:"h3"}},[e._v("Send payment")]),t("record-payments-list",{attrs:{paymentsList:e.form.paymentsToSend,addDonationFee:e.ephemeral.addDonationFee,paymentType:"lightning"},on:{update:e.updateItem}}),t("div",{staticClass:"c-toggles-wrapper"},[t("div",{staticClass:"c-toggle-comment"},[t("div",{staticClass:"c-toggle-flex"},[t("div",{staticClass:"c-toggle-flex-info"},[t("i18n",{staticClass:"has-text-bold",attrs:{tag:"h4",args:{span_:'<span class="has-text-small has-text-1 has-text-normal">',_span:"</span>"}}},[e._v("Add a note {span_}(optional){_span}")]),t("i18n",{staticClass:"has-text-small has-text-1",attrs:{tag:"p"}},[e._v("Leave a message to the group members selected above.")])],1),t("div",{staticClass:"c-toggle-flex-action"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.ephemeral.displayMemo,expression:"ephemeral.displayMemo"}],staticClass:"switch",attrs:{type:"checkbox",name:"displayComment"},domProps:{checked:Array.isArray(e.ephemeral.displayMemo)?e._i(e.ephemeral.displayMemo,null)>-1:e.ephemeral.displayMemo},on:{change:function(d){var o=e.ephemeral.displayMemo,c=d.target,n=!!c.checked;if(Array.isArray(o)){var r=null,s=e._i(o,r);c.checked?s<0&&e.$set(e.ephemeral,"displayMemo",o.concat([r])):s>-1&&e.$set(e.ephemeral,"displayMemo",o.slice(0,s).concat(o.slice(s+1)))}else e.$set(e.ephemeral,"displayMemo",n)}}}),t("i18n",{staticClass:"sr-only",attrs:{tag:"label",for:"displayComment"}},[e._v("Toggle comment box")])],1)]),t("transition",{attrs:{name:"slidedown"}},[e.ephemeral.displayMemo?t("label",{staticClass:"field"},[t("i18n",{staticClass:"sr-only label"},[e._v("Leave a message")]),t("textarea",{staticClass:"textarea c-comment",attrs:{rows:"4"},domProps:{value:e.form.memo},on:{input:e.config.debouncedMemoUpdate}})],1):e._e()])],1),t("div",{staticClass:"c-toggle-donation c-toggle-flex"},[t("div",{staticClass:"c-toggle-flex-info"},[t("i18n",{staticClass:"has-text-bold",attrs:{tag:"h4"}},[e._v("Donation fee")]),t("i18n",{staticClass:"has-text-small has-text-1",attrs:{tag:"p"}},[e._v("Donate 1% to support the development of Group Income")])],1),t("div",{staticClass:"c-toggle-flex-action"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.ephemeral.addDonationFee,expression:"ephemeral.addDonationFee"}],staticClass:"switch",attrs:{type:"checkbox",name:"addDonationFee"},domProps:{checked:Array.isArray(e.ephemeral.addDonationFee)?e._i(e.ephemeral.addDonationFee,null)>-1:e.ephemeral.addDonationFee},on:{change:function(d){var o=e.ephemeral.addDonationFee,c=d.target,n=!!c.checked;if(Array.isArray(o)){var r=null,s=e._i(o,r);c.checked?s<0&&e.$set(e.ephemeral,"addDonationFee",o.concat([r])):s>-1&&e.$set(e.ephemeral,"addDonationFee",o.slice(0,s).concat(o.slice(s+1)))}else e.$set(e.ephemeral,"addDonationFee",n)}}}),t("i18n",{staticClass:"sr-only",attrs:{tag:"label",for:"addDonationFee"}},[e._v("Toggle donation fee")])],1)])])],1),t("div",{staticClass:"c-section-qr-code"},[t("i18n",{staticClass:"has-text-bold c-qr-code-header",attrs:{tag:"h4"}},[e._v("QR code payment")]),t("qr-code",{staticClass:"c-qr-code-img",attrs:{sideLength:172,value:e.dummyQRstring}}),t("i18n",{staticClass:"c-qr-code-instruction has-text-1",attrs:{tag:"p"}},[e._v(`To complete your payment,
please use your payment app to scan the QR code with your phone or copy the payment link.`)]),t("copyable-input",{staticClass:"c-copy-link",attrs:{uneditable:!0,value:e.dummyLinkToCopy,tooltipDirection:"top"}})],1)])])])},k=[],T=function(e){e&&e("data-v-7facac7d_0",{source:".c-header[data-v-7facac7d]{position:absolute;top:0;left:0;background:var(--background_0);padding:1.5rem 0 1.5rem 2rem;width:100%}@media screen and (min-width:769px),print{.c-header[data-v-7facac7d]{text-align:center}}@media screen and (min-width:1200px){.c-header[data-v-7facac7d]{position:relative;background:0 0;max-width:50.25rem;text-align:left}}.c-card[data-v-7facac7d]{position:relative;display:flex;flex-direction:column;gap:1.375rem}@media screen and (min-width:1200px){.c-card[data-v-7facac7d]{padding:2.5rem 2rem 2.5rem 0;flex-direction:row;align-items:flex-start;gap:2.25rem}}@media screen and (min-width:769px),print{.c-section-payments-list[data-v-7facac7d]{flex-grow:1}}.c-section-qr-code[data-v-7facac7d]{position:relative;display:flex;flex-direction:column;align-items:center;width:100%;max-width:19.375rem;margin:0 auto;min-height:12.875rem;border:1px solid transparent;border-radius:3px}@media screen and (min-width:769px),print{.c-section-qr-code[data-v-7facac7d]{border-color:var(--general_0);align-items:stretch;max-width:unset;padding:1rem 13rem 1rem 1rem}}@media screen and (min-width:1200px){.c-section-qr-code[data-v-7facac7d]{width:13.75rem;padding:2.5rem 1.5rem 1.5rem}}.c-qr-code-header[data-v-7facac7d]{margin-bottom:.75rem}.c-qr-code-img[data-v-7facac7d]{margin-bottom:.75rem}@media screen and (min-width:769px) and (max-width:1199px){.c-qr-code-img[data-v-7facac7d]{position:absolute!important;right:1rem;top:50%;transform:translateY(-50%);z-index:1;margin-bottom:0}}.c-qr-code-instruction[data-v-7facac7d]{font-size:.875rem;margin-bottom:1.375rem}@media screen and (min-width:1200px){.c-qr-code-instruction[data-v-7facac7d]{margin-bottom:3.25rem}}.c-content[data-v-7facac7d]{position:relative;display:block;padding-top:7.25rem;width:100%;max-width:33.375rem}@media screen and (min-width:1200px){.c-content[data-v-7facac7d]{padding-top:0;max-width:50.25rem}}.c-sub-title[data-v-7facac7d]{padding-left:.5rem}@media screen and (min-width:1200px){.c-sub-title[data-v-7facac7d]{padding-left:2.5rem}}.c-toggle-comment[data-v-7facac7d],.c-toggle-donation[data-v-7facac7d]{padding:.75rem 0 .75rem .5rem;box-shadow:inset 0 -2px 0 var(--general_2)}@media screen and (min-width:1200px){.c-toggle-comment[data-v-7facac7d],.c-toggle-donation[data-v-7facac7d]{padding-left:2.5rem;box-shadow:none}}.c-toggle-comment[data-v-7facac7d]{box-shadow:inset 0 -2px 0 var(--general_2)}.c-toggle-flex[data-v-7facac7d]{display:flex;align-items:center;justify-content:space-between}.c-comment[data-v-7facac7d]{margin-top:1rem}.c-copy-link[data-v-7facac7d]{align-self:stretch}@media screen and (max-width:768px){.c-copy-link[data-v-7facac7d]{margin-bottom:.5rem}}",map:void 0,media:void 0})},D="data-v-7facac7d",F=void 0,R=!1;function M(e,i,t,d,o,c,n,r,s,l){let a=(typeof t=="function"?t.options:t)||{};a.__file=`style>
`,a.render||(a.render=e.render,a.staticRenderFns=e.staticRenderFns,a._compiled=!0,o&&(a.functional=!0)),a._scopeId=d;{let p;if(i&&(p=n?function(m){i.call(this,l(m,this.$root.$options.shadowRoot))}:function(m){i.call(this,r(m))}),p!==void 0)if(a.functional){let m=a.render;a.render=function(b,u){return p.call(u),m(b,u)}}else{let m=a.beforeCreate;a.beforeCreate=m?[].concat(m,p):[p]}}return a}function f(){let e=f.styles||(f.styles={}),i=typeof navigator<"u"&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());return function(d,o){if(document.querySelector('style[data-vue-ssr-id~="'+d+'"]'))return;let c=i?o.media||"default":d,n=e[c]||(e[c]={ids:[],parts:[],element:void 0});if(!n.ids.includes(d)){let r=o.source,s=n.ids.length;if(n.ids.push(d),o.map&&(r+=`
/*# sourceURL=`+o.map.sources[0]+" */",r+=`
/*# sourceMappingURL=data:application/json;base64,`+btoa(unescape(encodeURIComponent(JSON.stringify(o.map))))+" */"),i&&(n.element=n.element||document.querySelector("style[data-group="+c+"]")),!n.element){let l=document.head||document.getElementsByTagName("head")[0],a=n.element=document.createElement("style");a.type="text/css",o.media&&a.setAttribute("media",o.media),i&&(a.setAttribute("data-group",c),a.setAttribute("data-next-index","0")),l.appendChild(a)}if(i&&(s=parseInt(n.element.getAttribute("data-next-index")),n.element.setAttribute("data-next-index",s+1)),n.element.styleSheet)n.parts.push(r),n.element.styleSheet.cssText=n.parts.filter(Boolean).join(`
`);else{let l=document.createTextNode(r),a=n.element.childNodes;a[s]&&n.element.removeChild(a[s]),a.length?n.element.insertBefore(l,a[s]):n.element.appendChild(l)}}}}var q=M({render:S,staticRenderFns:k},T,w,D,R,F,!1,f,void 0,void 0),E=q;export{E as default};
//# sourceMappingURL=SendPaymentsViaLightning-QP6PMMXE-cached.js.map
