import{a as P}from"./chunk-VJZRITMK-cached.js";import{f as h}from"./chunk-QD6O46IB-cached.js";import{a as b}from"./chunk-WMVHT3GJ-cached.js";import"./chunk-XHZPFS4B-cached.js";import{c as y}from"./chunk-6P74MMKF-cached.js";import"./chunk-VUYUNB2W-cached.js";import{a as M,b as T}from"./chunk-B4L7IMS4-cached.js";import"./chunk-SZPI64OI-cached.js";import"./chunk-R4DRX7L2-cached.js";import{a as I}from"./chunk-FTWBMR5D-cached.js";import{a as C}from"./chunk-BZWIYGWR-cached.js";import"./chunk-SVSS5DEP-cached.js";import"./chunk-MEHASGB7-cached.js";import"./chunk-Z7X5SDSD-cached.js";import"./chunk-M3EDVPDK-cached.js";import{b as d}from"./chunk-33M5GGRR-cached.js";import{a as v}from"./chunk-OMOH7TRL-cached.js";import"./chunk-WBBXU2FL-cached.js";import{e as p}from"./chunk-XMZXE55N-cached.js";var S=p(I());var f=p(T()),R=p(M());var A={name:"PasswordModal",mixins:[S.validationMixin],data(){return{form:{current:null,newPassword:null,confirm:null},processing:!1}},validations:{form:{current:{[d("Your current password is required.")]:f.required},newPassword:{[d("A password is required.")]:f.required,nonWhitespace:e=>/^\S+$/.test(e),[d("Your password must be at least {minChars} characters long.",{minChars:7})]:(0,f.minLength)(7)},confirm:{[d("Please confirm your password.")]:f.required,[d("Passwords do not match.")]:(0,R.default)("newPassword")}}},components:{BannerScoped:y,ButtonSubmit:b,ModalTemplate:C,PasswordForm:P},methods:{closeModal(){this.$refs.modalTemplate.close()},changePassword(){this.processing||(this.processing=!0,(async()=>{try{await v("gi.app/identity/changePassword",new h(this.form.current),new h(this.form.newPassword)),this.closeModal()}catch(e){console.error("[PasswordModal.vue]",e),this.$refs.formMsg.danger(d("Invalid password"))}})().finally(()=>{this.processing=!1}))}}},L=function(){var e=this,s=e.$createElement,o=e._self._c||s;return o("modal-template",{ref:"modalTemplate",staticClass:"is-centered is-left-aligned",attrs:{"back-on-mobile":"back-on-mobile","data-test":"PasswordModal",a11yTitle:e.L("Change Password")}},[o("template",{slot:"title"},[e._v("Change password")]),o("form",{ref:"form",attrs:{novalidate:"novalidate",name:"formData"},on:{submit:function(r){return r.preventDefault(),e.changePassword(r)}}},[o("password-form",{attrs:{name:"current",label:e.L("Current Password"),value:e.form,$v:e.$v,hasIconRight:!0,showPlaceholder:!1,showPassword:!1,size:"is-large"},on:{enter:e.changePassword}}),o("password-form",{attrs:{name:"newPassword",label:e.L("New Password"),value:e.form,$v:e.$v,hasIconRight:!0,showPlaceholder:!1,showPassword:!1,size:"is-large"},on:{enter:e.changePassword}}),o("password-form",{attrs:{name:"confirm",label:e.L("Confirm new Password"),value:e.form,$v:e.$v,hasIconRight:!0,showPlaceholder:!1,showPassword:!1,size:"is-large"},on:{enter:e.changePassword}}),o("banner-scoped",{ref:"formMsg"}),o("div",{staticClass:"buttons"},[o("i18n",{staticClass:"is-outlined",attrs:{tag:"button",type:"button","data-test":"cancel"},on:{click:e.closeModal}},[e._v("Cancel")]),o("button-submit",{attrs:{"data-test":"submit",disabled:e.$v.form.$invalid||e.processing},on:{click:e.changePassword}},[e._v(e._s(e.L("Change password")))])],1)],1)],2)},N=[],E=function(e){e&&e("data-v-f07d478e_0",{source:".modal-card-body[data-v-f07d478e]{padding-top:0}",map:void 0,media:void 0})},k="data-v-f07d478e",j=void 0,q=!1;function B(e,s,o,r,a,u,n,l,c,m){let t=(typeof o=="function"?o.options:o)||{};t.__file=`style>
`,t.render||(t.render=e.render,t.staticRenderFns=e.staticRenderFns,t._compiled=!0,a&&(t.functional=!0)),t._scopeId=r;{let _;if(s&&(_=n?function(i){s.call(this,m(i,this.$root.$options.shadowRoot))}:function(i){s.call(this,l(i))}),_!==void 0)if(t.functional){let i=t.render;t.render=function($,g){return _.call(g),i($,g)}}else{let i=t.beforeCreate;t.beforeCreate=i?[].concat(i,_):[_]}}return t}function w(){let e=w.styles||(w.styles={}),s=typeof navigator<"u"&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());return function(r,a){if(document.querySelector('style[data-vue-ssr-id~="'+r+'"]'))return;let u=s?a.media||"default":r,n=e[u]||(e[u]={ids:[],parts:[],element:void 0});if(!n.ids.includes(r)){let l=a.source,c=n.ids.length;if(n.ids.push(r),a.map&&(l+=`
/*# sourceURL=`+a.map.sources[0]+" */",l+=`
/*# sourceMappingURL=data:application/json;base64,`+btoa(unescape(encodeURIComponent(JSON.stringify(a.map))))+" */"),s&&(n.element=n.element||document.querySelector("style[data-group="+u+"]")),!n.element){let m=document.head||document.getElementsByTagName("head")[0],t=n.element=document.createElement("style");t.type="text/css",a.media&&t.setAttribute("media",a.media),s&&(t.setAttribute("data-group",u),t.setAttribute("data-next-index","0")),m.appendChild(t)}if(s&&(c=parseInt(n.element.getAttribute("data-next-index")),n.element.setAttribute("data-next-index",c+1)),n.element.styleSheet)n.parts.push(l),n.element.styleSheet.cssText=n.parts.filter(Boolean).join(`
`);else{let m=document.createTextNode(l),t=n.element.childNodes;t[c]&&n.element.removeChild(t[c]),t.length?n.element.insertBefore(m,t[c]):n.element.appendChild(m)}}}}var F=B({render:L,staticRenderFns:N},E,A,k,q,j,!1,w,void 0,void 0),J=F;export{J as default};
//# sourceMappingURL=PasswordModal-H6CS6I4N-cached.js.map
