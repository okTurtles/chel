import{a as pe}from"./chunk-UWTGHGXL-cached.js";import{a as _e,b as I,c as fe}from"./chunk-WYPTE7LD-cached.js";import{a as C}from"./chunk-VKP2RDLS-cached.js";import{a as S}from"./chunk-B5ICR36M-cached.js";import"./chunk-PEWCYRBF-cached.js";import"./chunk-3CVZTLRE-cached.js";import{a as ue}from"./chunk-BJ3O63BX-cached.js";import{a as N}from"./chunk-LUHQ5IUR-cached.js";import{a as de,b as ce}from"./chunk-4SBJY7CH-cached.js";import{a as le}from"./chunk-J7GSI7JG-cached.js";import"./chunk-YUSBLCIF-cached.js";import"./chunk-GB4D3I4D-cached.js";import"./chunk-NUXCLDQR-cached.js";import"./chunk-EDZL4VNV-cached.js";import"./chunk-FMXZTXSJ-cached.js";import{c as me}from"./chunk-I2AIXHXH-cached.js";import{c as oe}from"./chunk-GEXW5JDJ-cached.js";import"./chunk-YN7ARXYA-cached.js";import{d as w}from"./chunk-OYX4NVDU-cached.js";import"./chunk-MMWHE4QG-cached.js";import"./chunk-FRTBM6HW-cached.js";import{c as y,i as te,l as ne,m as x}from"./chunk-3V7YD6RE-cached.js";import"./chunk-AZT5ZK4I-cached.js";import{a as ae}from"./chunk-K6DJLR2Y-cached.js";import{a as ie}from"./chunk-WIK6L7P3-cached.js";import{a as A}from"./chunk-ALM2LSB6-cached.js";import"./chunk-ZWHVW34C-cached.js";import{a as se}from"./chunk-KRTYB7RO-cached.js";import{a as k}from"./chunk-WYFJ56Q7-cached.js";import{a as P}from"./chunk-GWRDICTQ-cached.js";import"./chunk-YGZ33QYP-cached.js";import"./chunk-QD6O46IB-cached.js";import"./chunk-WMVHT3GJ-cached.js";import{a as re}from"./chunk-6P74MMKF-cached.js";import"./chunk-VUYUNB2W-cached.js";import{A as Z,B as ee,C as O,D as $,o as j,q as T,u as Q}from"./chunk-SZPI64OI-cached.js";import"./chunk-MEHASGB7-cached.js";import"./chunk-Z7X5SDSD-cached.js";import{F as D,u as b}from"./chunk-M3EDVPDK-cached.js";import{a as M,b as p}from"./chunk-33M5GGRR-cached.js";import{a as g}from"./chunk-OMOH7TRL-cached.js";import{b as R,d as h}from"./chunk-WBBXU2FL-cached.js";import"./chunk-XMZXE55N-cached.js";var Ae={name:"StartInvitingWidget",components:{CalloutCard:C,SvgConversation:I},data(){return{SvgConversation:I}},methods:{openModal(){g("okTurtles.events/emit",b,"InvitationLinkModal")}}},Ne=function(){var e=this,r=e.$createElement,n=e._self._c||r;return n("callout-card",{attrs:{isCard:!0,title:e.L("Invite members to your group"),svg:e.SvgConversation}},[n("i18n",{attrs:{tag:"p"}},[e._v("Start sharing your resources with the ones who matter to you!")]),n("i18n",{attrs:{tag:"button"},on:{click:e.openModal}},[e._v("Add members")])],1)},Ee=[],Me=void 0,De=void 0,je=void 0,Oe=!1;function $e(e,r,n,a,s,d,o,c,l,u){let t=(typeof n=="function"?n.options:n)||{};return t.__file=`script>
`,t.render||(t.render=e.render,t.staticRenderFns=e.staticRenderFns,t._compiled=!0,s&&(t.functional=!0)),t._scopeId=a,t}var Le=$e({render:Ne,staticRenderFns:Ee},Me,Ae,De,Oe,je,!1,void 0,void 0,void 0),he=Le;var Ue={name:"Overview",components:{GraphLegendItem:ce,Bars:de},computed:{...h(["groupProfiles","groupSettings","groupIncomeDistribution"]),mincome(){return this.groupSettings.mincomeAmount},distribution(){return this.groupIncomeDistribution},members(){let e={};return this.distribution.length===0?Object.keys(this.groupProfiles).forEach(r=>{let n=this.groupProfiles[r];n.incomeDetailsType&&(e[r]={amount:0,total:n.incomeDetailsType==="incomeAmount"?n.incomeAmount-this.mincome:n.pledgeAmount})}):this.distribution.forEach(r=>{e=this.addToList(e,r.fromMemberID,r.amount),e=this.addToList(e,r.toMemberID,-r.amount)}),e=Object.values(e).sort((r,n)=>r.total-n.total),e},totals(){return this.members.map(e=>e.total)},amounts(){return this.members.map(e=>e.amount)},totalCovered(){let e=this.amounts.filter(r=>r>0);return e.length>0?e.reduce((r,n)=>r+n):0},surplus(){let e=this.totals.filter(s=>s<0),r=e.length>0?Math.abs(e.reduce((s,d)=>s+d)):0,n=this.totals.filter(s=>s>0);return(n.length>0?Math.abs(n.reduce((s,d)=>s+d)):0)-r}},methods:{withCurrency(e){return w[this.groupSettings.mincomeCurrency].displayWithCurrency(e)},addToList(e,r,n){let a=e[r];return typeof a<"u"?e[r].amount=a.amount+n:e[r]={amount:n,total:n>0?this.groupProfiles[r].pledgeAmount:this.groupProfiles[r].incomeAmount-this.mincome},e}}},Fe=function(){var e=this,r=e.$createElement,n=e._self._c||r;return n("div",[n("i18n",{staticClass:"is-title-3",attrs:{tag:"h2"}},[e._v("This month's overview")]),n("i18n",{staticClass:"has-text-1",attrs:{tag:"p"}},[e._v("Group members and their pledges")]),n("div",{staticClass:"c-chart"},[n("ul",{staticClass:"c-chart-legends"},[n("graph-legend-item",{attrs:{amount:e.withCurrency(e.totalCovered),color:"warning-solid",variant:"inline"}},[e._v(e._s(e.L("Total covered")))]),n("graph-legend-item",{attrs:{amount:e.withCurrency(e.totalCovered),color:"primary-solid",variant:"inline"}},[e._v(e._s(e.L("Total given")))]),e.surplus>0?n("graph-legend-item",{attrs:{amount:e.withCurrency(e.surplus),color:"success-solid",variant:"inline"}},[e._v(e._s(e.L("Surplus")))]):n("graph-legend-item",{attrs:{amount:e.withCurrency(Math.abs(e.surplus)),color:"danger-solid",variant:"inline"}},[e._v(e._s(e.L("Total needed")))])],1),n("bars",{attrs:{totals:e.totals,members:e.members}})],1)],1)},Be=[],Ge=function(e){e&&e("data-v-411148c3_0",{source:"@media screen and (max-width:768px){.c-chart[data-v-411148c3]{display:flex;flex-direction:column-reverse;padding-top:1.5rem}}.c-chart-legends[data-v-411148c3]{display:flex}@media screen and (max-width:768px){.c-chart-legends[data-v-411148c3]{display:flex;flex-direction:column}}",map:void 0,media:void 0})},Ve="data-v-411148c3",qe=void 0,Xe=!1;function We(e,r,n,a,s,d,o,c,l,u){let t=(typeof n=="function"?n.options:n)||{};t.__file=`style>
`,t.render||(t.render=e.render,t.staticRenderFns=e.staticRenderFns,t._compiled=!0,s&&(t.functional=!0)),t._scopeId=a;{let m;if(r&&(m=o?function(i){r.call(this,u(i,this.$root.$options.shadowRoot))}:function(i){r.call(this,c(i))}),m!==void 0)if(t.functional){let i=t.render;t.render=function(f,_){return m.call(_),i(f,_)}}else{let i=t.beforeCreate;t.beforeCreate=i?[].concat(i,m):[m]}}return t}function L(){let e=L.styles||(L.styles={}),r=typeof navigator<"u"&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());return function(a,s){if(document.querySelector('style[data-vue-ssr-id~="'+a+'"]'))return;let d=r?s.media||"default":a,o=e[d]||(e[d]={ids:[],parts:[],element:void 0});if(!o.ids.includes(a)){let c=s.source,l=o.ids.length;if(o.ids.push(a),s.map&&(c+=`
/*# sourceURL=`+s.map.sources[0]+" */",c+=`
/*# sourceMappingURL=data:application/json;base64,`+btoa(unescape(encodeURIComponent(JSON.stringify(s.map))))+" */"),r&&(o.element=o.element||document.querySelector("style[data-group="+d+"]")),!o.element){let u=document.head||document.getElementsByTagName("head")[0],t=o.element=document.createElement("style");t.type="text/css",s.media&&t.setAttribute("media",s.media),r&&(t.setAttribute("data-group",d),t.setAttribute("data-next-index","0")),u.appendChild(t)}if(r&&(l=parseInt(o.element.getAttribute("data-next-index")),o.element.setAttribute("data-next-index",l+1)),o.element.styleSheet)o.parts.push(c),o.element.styleSheet.cssText=o.parts.filter(Boolean).join(`
`);else{let u=document.createTextNode(c),t=o.element.childNodes;t[l]&&o.element.removeChild(t[l]),t.length?o.element.insertBefore(u,t[l]):o.element.appendChild(u)}}}}var ze=We({render:Fe,staticRenderFns:Be},Ge,Ue,Ve,Xe,qe,!1,L,void 0,void 0),ge=ze;var He={name:"SingleBar",props:{data:{type:Object,required:!0}},data(){return{ephemeral:{tooltipVisible:!1}}},methods:{getPercentage(e){return e>=1?"100%":`${Math.floor(e*100)}%`},getResult(e){return e<.6?"danger":e<1?"warning":"success"},isLow(e){return e<=.35},toggleTooltip(){this.ephemeral.tooltipVisible=!this.ephemeral.tooltipVisible}},filters:{toPercent:ie}},Ye=function(){var e=this,r=e.$createElement,n=e._self._c||r;return n("div",{staticClass:"bar-graph",on:{mouseenter:function(a){e.ephemeral.tooltipVisible=!0},mouseleave:function(a){e.ephemeral.tooltipVisible=!1},click:e.toggleTooltip}},[n("div",{staticClass:"bar-graph-column",class:"has-background-"+e.getResult(e.data.total)},[n("div",{staticClass:"bar-graph-progress",class:[{isLow:e.isLow(e.data.total)},"has-background-"+e.getResult(e.data.total)+"-solid"],style:{height:e.getPercentage(e.data.total),width:e.getPercentage(e.data.total)}},[n("div",{staticClass:"bar-graph-content"},[n("h4",{staticClass:"bar-graph-title"},[e._v(e._s(e.data.title))]),n("p",{staticClass:"bar-graph-txt"},[e._v(e._s(e._f("toPercent")(e.data.total))+"%")])])]),e.data.tooltipContent&&e.ephemeral.tooltipVisible?n("div",{staticClass:"c-bar-tooltip hide-phone"},e._l(e.data.tooltipContent,function(a,s){return n("div",{staticClass:"c-tooltip-content"},[e._v(e._s(a))])}),0):e._e()])])},Je=[],Ke=function(e){e&&e("data-v-bc1fe77e_0",{source:'.bar-graph[data-v-bc1fe77e]{width:100%}@media screen and (min-width:769px),print{.bar-graph[data-v-bc1fe77e]{max-width:7.5rem}}.bar-graph-column[data-v-bc1fe77e]{position:relative;width:100%;display:inline-block;min-height:12.5rem;color:var(--background_0);text-align:center;font-size:2rem;line-height:1.2}@media screen and (max-width:768px){.bar-graph-column[data-v-bc1fe77e]{display:block;min-height:2.5rem}}.bar-graph-column[data-v-bc1fe77e]:first-child{border-left:0}.bar-graph-column[data-v-bc1fe77e]:last-child{border-right:0}.bar-graph-column[data-v-bc1fe77e]::before{position:absolute;top:0;left:0;content:"";width:100%;height:100%;opacity:.5;background-color:var(--background_0)}.bar-graph-content[data-v-bc1fe77e]{position:absolute;top:0;left:50%;transform:translateX(-50%);display:flex;flex-direction:column;align-items:center;width:100%}@media screen and (max-width:768px){.bar-graph-content[data-v-bc1fe77e]{align-items:flex-end;text-align:right;top:50%;left:unset;right:.5rem;transform:translateY(-50%)}}.bar-graph-title[data-v-bc1fe77e],.bar-graph-txt[data-v-bc1fe77e]{position:relative;font-size:.875rem;color:#fff;z-index:2;transition:opacity .7s ease-out}.bar-graph-title[data-v-bc1fe77e]{font-weight:600}@media screen and (min-width:769px){.bar-graph-title[data-v-bc1fe77e]{padding:.5rem .3rem .2rem .3rem}}@media screen and (max-width:768px){.bar-graph-title[data-v-bc1fe77e]{width:max-content}}.bar-graph-progress[data-v-bc1fe77e]{transition:width .7s ease-out,height .7s ease-out;position:absolute;display:flex;flex-direction:column;justify-content:flex-start;align-items:center;left:0;bottom:0;width:100%}@media screen and (min-width:769px){.bar-graph-progress[data-v-bc1fe77e]{width:100%!important}}@media screen and (max-width:768px){.bar-graph-progress[data-v-bc1fe77e]{height:100%!important}}.isLow .bar-graph-content[data-v-bc1fe77e]{top:-.5rem;transform:translate(-50%,-100%)}@media screen and (max-width:768px){.isLow .bar-graph-content[data-v-bc1fe77e]{align-items:flex-start;text-align:left;top:50%;right:-.5rem;transform:translate(100%,-50%)}}.isLow .bar-graph-title[data-v-bc1fe77e],.isLow .bar-graph-txt[data-v-bc1fe77e]{color:var(--danger_0)}.c-bar-tooltip[data-v-bc1fe77e]{position:absolute;top:20%;left:50%;transform:translateX(-50%);min-width:10rem;max-width:16rem;width:max-content;border-radius:3px;padding:.5rem;z-index:50;pointer-events:none;background-color:var(--text_0);opacity:.95;color:var(--background_0);text-align:center;font-size:.875rem}',map:void 0,media:void 0})},Qe="data-v-bc1fe77e",Ze=void 0,et=!1;function tt(e,r,n,a,s,d,o,c,l,u){let t=(typeof n=="function"?n.options:n)||{};t.__file=`style>
`,t.render||(t.render=e.render,t.staticRenderFns=e.staticRenderFns,t._compiled=!0,s&&(t.functional=!0)),t._scopeId=a;{let m;if(r&&(m=o?function(i){r.call(this,u(i,this.$root.$options.shadowRoot))}:function(i){r.call(this,c(i))}),m!==void 0)if(t.functional){let i=t.render;t.render=function(f,_){return m.call(_),i(f,_)}}else{let i=t.beforeCreate;t.beforeCreate=i?[].concat(i,m):[m]}}return t}function U(){let e=U.styles||(U.styles={}),r=typeof navigator<"u"&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());return function(a,s){if(document.querySelector('style[data-vue-ssr-id~="'+a+'"]'))return;let d=r?s.media||"default":a,o=e[d]||(e[d]={ids:[],parts:[],element:void 0});if(!o.ids.includes(a)){let c=s.source,l=o.ids.length;if(o.ids.push(a),s.map&&(c+=`
/*# sourceURL=`+s.map.sources[0]+" */",c+=`
/*# sourceMappingURL=data:application/json;base64,`+btoa(unescape(encodeURIComponent(JSON.stringify(s.map))))+" */"),r&&(o.element=o.element||document.querySelector("style[data-group="+d+"]")),!o.element){let u=document.head||document.getElementsByTagName("head")[0],t=o.element=document.createElement("style");t.type="text/css",s.media&&t.setAttribute("media",s.media),r&&(t.setAttribute("data-group",d),t.setAttribute("data-next-index","0")),u.appendChild(t)}if(r&&(l=parseInt(o.element.getAttribute("data-next-index")),o.element.setAttribute("data-next-index",l+1)),o.element.styleSheet)o.parts.push(c),o.element.styleSheet.cssText=o.parts.filter(Boolean).join(`
`);else{let u=document.createTextNode(c),t=o.element.childNodes;t[l]&&o.element.removeChild(t[l]),t.length?o.element.insertBefore(u,t[l]):o.element.appendChild(u)}}}}var nt=tt({render:Ye,staticRenderFns:Je},Ke,He,Qe,et,Ze,!1,U,void 0,void 0),ve=nt;var ot={name:"BarGraph",components:{SingleBar:ve},props:{bars:{type:Array,default(){return[]}}},data(){return{isReady:!1}},mounted(){setTimeout(()=>{this.isReady=!0},0)}},rt=function(){var e=this,r=e.$createElement,n=e._self._c||r;return n("div",{staticClass:"bar-graph-container",class:{"c-getting-ready":!e.isReady}},e._l(e.bars,function(a,s){return n("single-bar",{key:"percentage-"+s,attrs:{data:a}})}),1)},st=[],at=function(e){e&&e("data-v-0b3bab87_0",{source:".bar-graph-container[data-v-0b3bab87]{display:flex;margin:1.5rem 0 1rem 0;gap:1rem}@media screen and (max-width:768px){.bar-graph-container[data-v-0b3bab87]{flex-direction:column-reverse;overflow:hidden}}.c-getting-ready[data-v-0b3bab87]  .bar-graph-progress{height:0%!important}@media screen and (max-width:768px){.c-getting-ready[data-v-0b3bab87]  .bar-graph-progress{width:0%!important;height:100%!important}}.c-getting-ready[data-v-0b3bab87]  .bar-graph-title,.c-getting-ready[data-v-0b3bab87]  .bar-graph-txt{opacity:0}",map:void 0,media:void 0})},it="data-v-0b3bab87",dt=void 0,ct=!1;function lt(e,r,n,a,s,d,o,c,l,u){let t=(typeof n=="function"?n.options:n)||{};t.__file=`style>
`,t.render||(t.render=e.render,t.staticRenderFns=e.staticRenderFns,t._compiled=!0,s&&(t.functional=!0)),t._scopeId=a;{let m;if(r&&(m=o?function(i){r.call(this,u(i,this.$root.$options.shadowRoot))}:function(i){r.call(this,c(i))}),m!==void 0)if(t.functional){let i=t.render;t.render=function(f,_){return m.call(_),i(f,_)}}else{let i=t.beforeCreate;t.beforeCreate=i?[].concat(i,m):[m]}}return t}function F(){let e=F.styles||(F.styles={}),r=typeof navigator<"u"&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());return function(a,s){if(document.querySelector('style[data-vue-ssr-id~="'+a+'"]'))return;let d=r?s.media||"default":a,o=e[d]||(e[d]={ids:[],parts:[],element:void 0});if(!o.ids.includes(a)){let c=s.source,l=o.ids.length;if(o.ids.push(a),s.map&&(c+=`
/*# sourceURL=`+s.map.sources[0]+" */",c+=`
/*# sourceMappingURL=data:application/json;base64,`+btoa(unescape(encodeURIComponent(JSON.stringify(s.map))))+" */"),r&&(o.element=o.element||document.querySelector("style[data-group="+d+"]")),!o.element){let u=document.head||document.getElementsByTagName("head")[0],t=o.element=document.createElement("style");t.type="text/css",s.media&&t.setAttribute("media",s.media),r&&(t.setAttribute("data-group",d),t.setAttribute("data-next-index","0")),u.appendChild(t)}if(r&&(l=parseInt(o.element.getAttribute("data-next-index")),o.element.setAttribute("data-next-index",l+1)),o.element.styleSheet)o.parts.push(c),o.element.styleSheet.cssText=o.parts.filter(Boolean).join(`
`);else{let u=document.createTextNode(c),t=o.element.childNodes;t[l]&&o.element.removeChild(t[l]),t.length?o.element.insertBefore(u,t[l]):o.element.appendChild(u)}}}}var ut=lt({render:rt,staticRenderFns:st},at,ot,it,ct,dt,!1,F,void 0,void 0),E=ut;var mt={name:"SupportHistory",data(){return{isReady:!1,history:[]}},mixins:[N],components:{BarGraph:E},computed:{...h(["currentPaymentPeriod","withGroupCurrency","groupTotalPledgeAmount","groupCreatedDate","thisPeriodPaymentInfo"])},mounted(){this.updateHistory()},methods:{async updateHistory(){let r=(await this.getAllSortedPeriodKeys()).slice(-T);this.history=await Promise.all(r.map(async n=>{let a=await this.getTotalTodoAmountForPeriod(n),s=await this.getTotalPledgesDoneForPeriod(n);return{total:s===0||a===0?0:s/a,title:this.getPeriodFromStartToDueDate(n,r),tooltipContent:[p("Needed: {todo}",{todo:this.withGroupCurrency(a)}),p("Distributed: {done}",{done:this.withGroupCurrency(s)})]}}))}},watch:{currentPaymentPeriod(){this.updateHistory()},thisPeriodPaymentInfo(){this.updateHistory()}}},pt=function(){var e=this,r=e.$createElement,n=e._self._c||r;return n("div",{class:e.isReady?"":"c-ready"},[n("i18n",{staticClass:"is-title-3",attrs:{tag:"h2"}},[e._v("Support history")]),n("i18n",{attrs:{tag:"p"}},[e._v("Percentage of the group income goal reached by the group.")]),e.history.length===0?n("p",[n("i18n",[e._v("The first distribution period hasn't started yet.")])],1):n("div",[n("bar-graph",{attrs:{bars:e.history}}),n("i18n",{staticClass:"has-text-1",attrs:{tag:"p"}},[e._v("* This month contains delayed payments for prior months.")]),n("i18n",{staticClass:"has-text-bold c-total-distribution-txt",attrs:{tag:"p",args:{amount:e.withGroupCurrency(e.groupTotalPledgeAmount)}}},[e._v("Total distributed since start: {amount}")])],1)],1)},_t=[],ft=function(e){e&&e("data-v-26a6e258_0",{source:".c-total-distribution-txt[data-v-26a6e258]{margin-top:.5rem}",map:void 0,media:void 0})},ht="data-v-26a6e258",gt=void 0,vt=!1;function bt(e,r,n,a,s,d,o,c,l,u){let t=(typeof n=="function"?n.options:n)||{};t.__file=`style>
`,t.render||(t.render=e.render,t.staticRenderFns=e.staticRenderFns,t._compiled=!0,s&&(t.functional=!0)),t._scopeId=a;{let m;if(r&&(m=o?function(i){r.call(this,u(i,this.$root.$options.shadowRoot))}:function(i){r.call(this,c(i))}),m!==void 0)if(t.functional){let i=t.render;t.render=function(f,_){return m.call(_),i(f,_)}}else{let i=t.beforeCreate;t.beforeCreate=i?[].concat(i,m):[m]}}return t}function B(){let e=B.styles||(B.styles={}),r=typeof navigator<"u"&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());return function(a,s){if(document.querySelector('style[data-vue-ssr-id~="'+a+'"]'))return;let d=r?s.media||"default":a,o=e[d]||(e[d]={ids:[],parts:[],element:void 0});if(!o.ids.includes(a)){let c=s.source,l=o.ids.length;if(o.ids.push(a),s.map&&(c+=`
/*# sourceURL=`+s.map.sources[0]+" */",c+=`
/*# sourceMappingURL=data:application/json;base64,`+btoa(unescape(encodeURIComponent(JSON.stringify(s.map))))+" */"),r&&(o.element=o.element||document.querySelector("style[data-group="+d+"]")),!o.element){let u=document.head||document.getElementsByTagName("head")[0],t=o.element=document.createElement("style");t.type="text/css",s.media&&t.setAttribute("media",s.media),r&&(t.setAttribute("data-group",d),t.setAttribute("data-next-index","0")),u.appendChild(t)}if(r&&(l=parseInt(o.element.getAttribute("data-next-index")),o.element.setAttribute("data-next-index",l+1)),o.element.styleSheet)o.parts.push(c),o.element.styleSheet.cssText=o.parts.filter(Boolean).join(`
`);else{let u=document.createTextNode(c),t=o.element.childNodes;t[l]&&o.element.removeChild(t[l]),t.length?o.element.insertBefore(u,t[l]):o.element.appendChild(u)}}}}var yt=bt({render:pt,staticRenderFns:_t},ft,mt,ht,vt,gt,!1,B,void 0,void 0),be=yt;var xt={name:"TodoHistory",data(){return{isReady:!1,history:[]}},mixins:[N],components:{BarGraph:E},computed:{...h(["currentPaymentPeriod","groupCreatedDate","thisPeriodPaymentInfo"])},created(){this.updateHistory()},methods:{async updateHistory(){let e=a=>Object.keys(a).length,n=(await this.getAllSortedPeriodKeys()).slice(-T);this.history=await Promise.all(n.map(async a=>{let s=await this.getPaymentDetailsByPeriod(a),{lastAdjustedDistribution:d}=await this.getPaymentPeriod(a),o=e(s),c=Object.values(s).filter(({data:u})=>u.status===oe).length,l=e(d||{});return{total:o===0?0:(o-c)/(o+l),title:this.getPeriodFromStartToDueDate(a,n),tooltipContent:[p("Total: {total}",{total:o+l}),p("Completed: {completed}",{completed:o-c})]}}))}},watch:{currentPaymentPeriod(){this.updateHistory()},thisPeriodPaymentInfo(){this.updateHistory()}}},Ct=function(){var e=this,r=e.$createElement,n=e._self._c||r;return n("div",{class:e.isReady?"":"c-ready"},[n("i18n",{staticClass:"is-title-3",attrs:{tag:"h2"}},[e._v("TODO history")]),n("i18n",{attrs:{tag:"p"}},[e._v("Percentage of payments completed by those pledging.")]),e.history.length===0?n("p",[n("i18n",[e._v("The first distribution period hasn't started yet.")])],1):n("div",[n("bar-graph",{attrs:{bars:e.history}}),n("i18n",{staticClass:"has-text-1",attrs:{tag:"p"}},[e._v("* This month contains delayed payments for prior months.")])],1)],1)},St=[],It=void 0,Rt=void 0,Tt=void 0,wt=!1;function Pt(e,r,n,a,s,d,o,c,l,u){let t=(typeof n=="function"?n.options:n)||{};return t.__file=`script>
`,t.render||(t.render=e.render,t.staticRenderFns=e.staticRenderFns,t._compiled=!0,s&&(t.functional=!0)),t._scopeId=a,t}var kt=Pt({render:Ct,staticRenderFns:St},It,xt,Rt,wt,Tt,!1,void 0,void 0,void 0),ye=kt;var At={name:"SentenceWithMemberTooltip",components:{Tooltip:se},props:{members:Array,noEllpsis:{type:Boolean,default:!1}}},Nt=function(){var e=this,r=e.$createElement,n=e._self._c||r;return n("Tooltip",{key:e.members.length,tag:"component",attrs:{opacity:e.members.length===0?0:.95,triggerElementSelector:".t-trigger",direction:"bottom-left",anchorToElement:!0}},[e._t("default"),e.members&&e.members.length?n("template",{slot:"tooltip"},e._l(e.members,function(a,s){return n("div",{key:"member-"+s,staticClass:"c-member-name"},[e.noEllpsis?n("div",[e._v(e._s(a))]):n("div",{staticClass:"has-ellipsis"},[e._v(e._s(a))])])}),0):e._e()],2)},Et=[],Mt=function(e){e&&e("data-v-73d29eb9_0",{source:".c-member-name[data-v-73d29eb9]{position:relative;display:flex;flex-direction:column;align-items:stretch;font-weight:400;word-break:break-word}",map:void 0,media:void 0})},Dt="data-v-73d29eb9",jt=void 0,Ot=!1;function $t(e,r,n,a,s,d,o,c,l,u){let t=(typeof n=="function"?n.options:n)||{};t.__file=`style>\r
`,t.render||(t.render=e.render,t.staticRenderFns=e.staticRenderFns,t._compiled=!0,s&&(t.functional=!0)),t._scopeId=a;{let m;if(r&&(m=o?function(i){r.call(this,u(i,this.$root.$options.shadowRoot))}:function(i){r.call(this,c(i))}),m!==void 0)if(t.functional){let i=t.render;t.render=function(f,_){return m.call(_),i(f,_)}}else{let i=t.beforeCreate;t.beforeCreate=i?[].concat(i,m):[m]}}return t}function G(){let e=G.styles||(G.styles={}),r=typeof navigator<"u"&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());return function(a,s){if(document.querySelector('style[data-vue-ssr-id~="'+a+'"]'))return;let d=r?s.media||"default":a,o=e[d]||(e[d]={ids:[],parts:[],element:void 0});if(!o.ids.includes(a)){let c=s.source,l=o.ids.length;if(o.ids.push(a),s.map&&(c+=`
/*# sourceURL=`+s.map.sources[0]+" */",c+=`
/*# sourceMappingURL=data:application/json;base64,`+btoa(unescape(encodeURIComponent(JSON.stringify(s.map))))+" */"),r&&(o.element=o.element||document.querySelector("style[data-group="+d+"]")),!o.element){let u=document.head||document.getElementsByTagName("head")[0],t=o.element=document.createElement("style");t.type="text/css",s.media&&t.setAttribute("media",s.media),r&&(t.setAttribute("data-group",d),t.setAttribute("data-next-index","0")),u.appendChild(t)}if(r&&(l=parseInt(o.element.getAttribute("data-next-index")),o.element.setAttribute("data-next-index",l+1)),o.element.styleSheet)o.parts.push(c),o.element.styleSheet.cssText=o.parts.filter(Boolean).join(`
`);else{let u=document.createTextNode(c),t=o.element.childNodes;t[l]&&o.element.removeChild(t[l]),t.length?o.element.insertBefore(u,t[l]):o.element.appendChild(u)}}}}var Lt=$t({render:Nt,staticRenderFns:Et},Mt,At,Dt,Ot,jt,!1,G,void 0,void 0),xe=Lt;var Ut={name:"GroupMembersActivity",components:{SentenceWithMemberTooltip:xe},data(){return{isReady:!1,history:[],config:{proposalNumber:O,notLoggedInDays:$}}},computed:{...h(["groupStreaks","userDisplayNameFromID","groupProfiles"]),onTimePayments(){return Object.entries(this.groupStreaks.onTimePayments||{}).filter(([,e])=>e>=Z).sort((e,r)=>r[1]-e[1]).map(([e,r])=>p("{user} - {count} month streak",{user:this.userDisplayNameFromID(e),count:r}))},missedPayments(){return Object.entries(this.groupStreaks.missedPayments||{}).filter(([,e])=>e>=ee).map(([e,r])=>{let n={user:this.userDisplayNameFromID(e),streak:r};return r>=2?p("{user} missed {streak} payments",n):p("{user} missed {streak} payment",n)})},haventLoggedIn(){let e=new Date().toISOString();return Object.entries(this.groupProfiles).filter(([,r])=>ne(e,r.lastLoggedIn)>=$*y).map(([r])=>this.userDisplayNameFromID(r))},noIncomeDetails(){return Object.entries(this.groupProfiles).filter(([,e])=>!e.incomeDetailsType).map(([e])=>this.userDisplayNameFromID(e))},noVotes(){return Object.entries(this.groupStreaks.noVotes||{}).filter(([,e])=>e>=O).map(([e,r])=>{let n={user:this.userDisplayNameFromID(e),streak:r};return r>=2?p("{user} missed {streak} votes",n):p("{user} missed {streak} vote",n)})},groupStreaksSentences(){return{fullMonthlyPledges:this.groupStreaks.fullMonthlyPledges===1?p("100% completed TODO streak of: 1 month"):p("100% completed TODO streak of: {streak} months",{streak:this.groupStreaks.fullMonthlyPledges||0}),fullMonthlySupport:this.groupStreaks.fullMonthlySupport===1?p("Mincome goal streak of: 1 month"):p("Mincome goal streak of: {streak} months",{streak:this.groupStreaks.fullMonthlySupport||0})}},memberCountSentences(){let e={...this.LTags("strong"),btn_:'<button type="button" class="is-unstyled link t-trigger">',_btn:"</button>"},r={onTimePayments:{...e,membercount:this.onTimePayments.length},haventLoggedIn:{...e,days:this.config.notLoggedInDays,membercount:this.haventLoggedIn.length},noIncomeDetails:{...e,membercount:this.noIncomeDetails.length},missedPayments:{...e,membercount:this.missedPayments.length},noVotes:{...e,membercount:this.noVotes.length,proposalcount:this.config.proposalNumber}};return{onTimePayments:this.onTimePayments.length===1?p("{btn_}1 member{_btn} has {strong_} on-time payment streaks{_strong}",r.onTimePayments):p("{btn_}{membercount} members{_btn} have {strong_} on-time payment streaks{_strong}",r.onTimePayments),haventLoggedIn:this.haventLoggedIn.length===1?p("{btn_}1 member{_btn} hasn't {strong_} logged in past {days} days or more {_strong}",r.haventLoggedIn):p("{btn_}{membercount} members{_btn} haven't {strong_} logged in past {days} days or more {_strong}",r.haventLoggedIn),noIncomeDetails:this.noIncomeDetails.length===1?p("{btn_}1 member{_btn} hasn't {strong_} entered income details{_strong}",r.noIncomeDetails):p("{btn_}{membercount} members{_btn} haven't {strong_} entered income details{_strong}",r.noIncomeDetails),missedPayments:this.missedPayments.length===1?p("{btn_}1 member{_btn} has {strong_} missed payments {_strong}",r.missedPayments):p("{btn_}{membercount} members{_btn} have {strong_} missed payments {_strong}",r.missedPayments),noVotes:this.noVotes.length===1?p("{btn_}1 member{_btn} hasn't {strong_} voted in the last {proposalcount} proposals {_strong}",r.noVotes):p("{btn_}{membercount} members{_btn} haven't {strong_} voted in the last {proposalcount} proposals {_strong}",r.noVotes)}}}},Ft=function(){var e=this,r=e.$createElement,n=e._self._c||r;return n("div",{staticClass:"c-wrapper"},[n("div",{staticClass:"c-columns"},[n("div",{staticClass:"c-column"},[n("i18n",{staticClass:"is-title-3",attrs:{tag:"h2"}},[e._v("Streaks")]),n("i18n",{staticClass:"has-text-1 c-para"},[e._v("Information about your pledges streaks and other streak members appears here.")]),n("ul",{staticClass:"spacer"},[n("li",{staticClass:"c-item-wrapper"},[n("div",{staticClass:"c-item"},[n("div",{staticClass:"icon-star icon-round has-background-success has-text-success"}),n("div",{staticClass:"c-item-copy"},[n("strong",{directives:[{name:"safe-html",rawName:"v-safe-html",value:e.groupStreaksSentences.fullMonthlyPledges,expression:"groupStreaksSentences.fullMonthlyPledges"}]})])])]),n("li",{staticClass:"c-item wrapper"},[n("div",{staticClass:"c-item"},[n("div",{staticClass:"icon-star icon-round has-background-success has-text-success"}),n("div",{staticClass:"c-item-copy"},[n("strong",{directives:[{name:"safe-html",rawName:"v-safe-html",value:e.groupStreaksSentences.fullMonthlySupport,expression:"groupStreaksSentences.fullMonthlySupport"}]})])])]),n("li",{staticClass:"c-item-wrapper"},[n("div",{staticClass:"c-item"},[n("div",{staticClass:"icon-star icon-round has-background-success has-text-success"}),n("div",{staticClass:"c-item-copy"},[n("sentence-with-member-tooltip",{attrs:{members:e.onTimePayments,noEllpsis:!0}},[n("div",{directives:[{name:"safe-html",rawName:"v-safe-html:button",value:e.memberCountSentences.onTimePayments,expression:'memberCountSentences["onTimePayments"]',arg:"button"}],staticClass:"member-count-sentence"})])],1)])])])],1),n("div",{staticClass:"c-column"},[n("i18n",{staticClass:"is-title-3",attrs:{tag:"h2"}},[e._v("Inactivity")]),n("div",{staticClass:"has-text-1 c-para"},[e._v("Members that haven\u2019t logged in, missed their pledges or haven\xB4t voted last proposals will appear here.")]),n("ul",{staticClass:"spacer"},[n("li",{staticClass:"c-item-wrapper"},[n("div",{staticClass:"c-item"},[n("div",{staticClass:"icon-user icon-round has-background-general"}),n("div",{staticClass:"c-item-copy"},[n("sentence-with-member-tooltip",{attrs:{members:e.haventLoggedIn}},[n("div",{directives:[{name:"safe-html",rawName:"v-safe-html:button",value:e.memberCountSentences.haventLoggedIn,expression:'memberCountSentences["haventLoggedIn"]',arg:"button"}],staticClass:"member-count-sentence"})])],1)])]),n("li",{staticClass:"c-item-wrapper"},[n("div",{staticClass:"c-item"},[n("div",{staticClass:"icon-comment-dollar icon-round has-background-general"}),n("div",{staticClass:"c-item-copy"},[n("sentence-with-member-tooltip",{attrs:{members:e.noIncomeDetails}},[n("div",{directives:[{name:"safe-html",rawName:"v-safe-html:button",value:e.memberCountSentences.noIncomeDetails,expression:'memberCountSentences["noIncomeDetails"]',arg:"button"}],staticClass:"member-count-sentence"})])],1)])]),n("li",{staticClass:"c-item-wrapper"},[n("div",{staticClass:"c-item"},[n("div",{staticClass:"icon-dollar-sign icon-round has-background-general"}),n("div",{staticClass:"c-item-copy"},[n("sentence-with-member-tooltip",{attrs:{members:e.missedPayments}},[n("div",{directives:[{name:"safe-html",rawName:"v-safe-html:button",value:e.memberCountSentences.missedPayments,expression:'memberCountSentences["missedPayments"]',arg:"button"}],staticClass:"member-count-sentence"})])],1)])]),n("li",{staticClass:"c-item-wrapper"},[n("div",{staticClass:"c-item"},[n("div",{staticClass:"icon-vote-yea icon-round has-background-general"}),n("div",{staticClass:"c-item-copy"},[n("sentence-with-member-tooltip",{attrs:{members:e.noVotes}},[n("div",{directives:[{name:"safe-html",rawName:"v-safe-html:button",value:e.memberCountSentences.noVotes,expression:'memberCountSentences["noVotes"]',arg:"button"}],staticClass:"member-count-sentence"})])],1)])])])],1)])])},Bt=[],Gt=function(e){e&&e("data-v-fb01f28e_0",{source:".c-columns[data-v-fb01f28e]{display:flex;flex-wrap:wrap;gap:2rem}@media screen and (min-width:769px),print{.c-columns[data-v-fb01f28e]{flex-wrap:nowrap}}.c-columns+.c-columns[data-v-fb01f28e],.c-columns+.c-inactive[data-v-fb01f28e]{margin-top:2rem}@media screen and (min-width:769px),print{.c-column[data-v-fb01f28e]{width:50%}}.c-member-count[data-v-fb01f28e]{display:inline-block;margin-right:.25rem}.c-para[data-v-fb01f28e]{margin:1rem 1rem 1rem 0;display:block}.c-item-wrapper[data-v-fb01f28e]{display:flex}.c-item[data-v-fb01f28e]{display:flex;align-items:center;margin:.5rem 0}.icon-round[data-v-fb01f28e]{width:2rem;height:2rem;margin-right:1rem;flex-shrink:0;border-radius:50%;text-align:center;line-height:2rem}.table[data-v-fb01f28e]{margin-top:1rem}",map:void 0,media:void 0})},Vt="data-v-fb01f28e",qt=void 0,Xt=!1;function Wt(e,r,n,a,s,d,o,c,l,u){let t=(typeof n=="function"?n.options:n)||{};t.__file=`style>
`,t.render||(t.render=e.render,t.staticRenderFns=e.staticRenderFns,t._compiled=!0,s&&(t.functional=!0)),t._scopeId=a;{let m;if(r&&(m=o?function(i){r.call(this,u(i,this.$root.$options.shadowRoot))}:function(i){r.call(this,c(i))}),m!==void 0)if(t.functional){let i=t.render;t.render=function(f,_){return m.call(_),i(f,_)}}else{let i=t.beforeCreate;t.beforeCreate=i?[].concat(i,m):[m]}}return t}function V(){let e=V.styles||(V.styles={}),r=typeof navigator<"u"&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());return function(a,s){if(document.querySelector('style[data-vue-ssr-id~="'+a+'"]'))return;let d=r?s.media||"default":a,o=e[d]||(e[d]={ids:[],parts:[],element:void 0});if(!o.ids.includes(a)){let c=s.source,l=o.ids.length;if(o.ids.push(a),s.map&&(c+=`
/*# sourceURL=`+s.map.sources[0]+" */",c+=`
/*# sourceMappingURL=data:application/json;base64,`+btoa(unescape(encodeURIComponent(JSON.stringify(s.map))))+" */"),r&&(o.element=o.element||document.querySelector("style[data-group="+d+"]")),!o.element){let u=document.head||document.getElementsByTagName("head")[0],t=o.element=document.createElement("style");t.type="text/css",s.media&&t.setAttribute("media",s.media),r&&(t.setAttribute("data-group",d),t.setAttribute("data-next-index","0")),u.appendChild(t)}if(r&&(l=parseInt(o.element.getAttribute("data-next-index")),o.element.setAttribute("data-next-index",l+1)),o.element.styleSheet)o.parts.push(c),o.element.styleSheet.cssText=o.parts.filter(Boolean).join(`
`);else{let u=document.createTextNode(c),t=o.element.childNodes;t[l]&&o.element.removeChild(t[l]),t.length?o.element.insertBefore(u,t[l]):o.element.appendChild(u)}}}}var zt=Wt({render:Ft,staticRenderFns:Bt},Gt,Ut,Vt,Xt,qt,!1,V,void 0,void 0),Ce=zt;var Ht={name:"GroupActivity",data(){return{tabItems:[{title:p("Overview"),url:"Overview"},{title:p("Support %"),url:"SupportHistory"},{title:p("Todo %"),url:"TodoHistory"},{title:p("Activity"),url:"GroupMembersActivity"}],ephemeral:{activeTab:"Overview"}}},components:{Overview:ge,SupportHistory:be,TodoHistory:ye,GroupMembersActivity:Ce},methods:{handleTabClick(e){this.ephemeral.activeTab=e}}},Yt=function(){var e=this,r=e.$createElement,n=e._self._c||r;return n("section",{staticClass:"card"},[e.tabItems.length>0?n("nav",{staticClass:"tabs",attrs:{"aria-label":e.L("Payments type"),"data-test":"payNav"}},e._l(e.tabItems,function(a,s){return n("button",{key:s,staticClass:"is-unstyled tabs-link",class:{"is-active":e.ephemeral.activeTab===a.url},attrs:{"data-test":"link-"+a.url,"aria-expanded":e.ephemeral.activeTab===a.url},on:{click:function(d){return e.handleTabClick(a.url)}}},[e._v(e._s(a.title))])}),0):e._e(),n("div",{staticClass:"tab-section"},[n("div",{staticClass:"c-container"},[n(e.ephemeral.activeTab,{tag:"component"})],1)])])},Jt=[],Kt=function(e){e&&e("data-v-3c37bf79_0",{source:".c-container[data-v-3c37bf79]{margin-top:2rem}.tabs[data-v-3c37bf79]{max-width:calc(100vw - 2rem)}.tabs-link[data-v-3c37bf79]{min-width:0}",map:void 0,media:void 0})},Qt="data-v-3c37bf79",Zt=void 0,en=!1;function tn(e,r,n,a,s,d,o,c,l,u){let t=(typeof n=="function"?n.options:n)||{};t.__file=`style>
`,t.render||(t.render=e.render,t.staticRenderFns=e.staticRenderFns,t._compiled=!0,s&&(t.functional=!0)),t._scopeId=a;{let m;if(r&&(m=o?function(i){r.call(this,u(i,this.$root.$options.shadowRoot))}:function(i){r.call(this,c(i))}),m!==void 0)if(t.functional){let i=t.render;t.render=function(f,_){return m.call(_),i(f,_)}}else{let i=t.beforeCreate;t.beforeCreate=i?[].concat(i,m):[m]}}return t}function q(){let e=q.styles||(q.styles={}),r=typeof navigator<"u"&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());return function(a,s){if(document.querySelector('style[data-vue-ssr-id~="'+a+'"]'))return;let d=r?s.media||"default":a,o=e[d]||(e[d]={ids:[],parts:[],element:void 0});if(!o.ids.includes(a)){let c=s.source,l=o.ids.length;if(o.ids.push(a),s.map&&(c+=`
/*# sourceURL=`+s.map.sources[0]+" */",c+=`
/*# sourceMappingURL=data:application/json;base64,`+btoa(unescape(encodeURIComponent(JSON.stringify(s.map))))+" */"),r&&(o.element=o.element||document.querySelector("style[data-group="+d+"]")),!o.element){let u=document.head||document.getElementsByTagName("head")[0],t=o.element=document.createElement("style");t.type="text/css",s.media&&t.setAttribute("media",s.media),r&&(t.setAttribute("data-group",d),t.setAttribute("data-next-index","0")),u.appendChild(t)}if(r&&(l=parseInt(o.element.getAttribute("data-next-index")),o.element.setAttribute("data-next-index",l+1)),o.element.styleSheet)o.parts.push(c),o.element.styleSheet.cssText=o.parts.filter(Boolean).join(`
`);else{let u=document.createTextNode(c),t=o.element.childNodes;t[l]&&o.element.removeChild(t[l]),t.length?o.element.insertBefore(u,t[l]):o.element.appendChild(u)}}}}var nn=tn({render:Yt,staticRenderFns:Jt},Kt,Ht,Qt,en,Zt,!1,q,void 0,void 0),Se=nn;var on={name:"ContributionsWidget",components:{PageSection:S,ProgressBar:le},computed:{...h(["groupSettings","currentGroupState","groupProfiles","currentIdentityState","ourGroupProfile","ourContributionSummary","ourPaymentsSummary"]),distributionStart(){return x(this.groupSettings.distributionDate,{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"})},distributionStarted(){return Date.now()>=new Date(this.groupSettings.distributionDate).getTime()},withCurrency(){return w[this.groupSettings.mincomeCurrency].displayWithCurrency},copy(){let{givingMonetary:e,givingNonMonetary:r,receivingMonetary:n,receivingNonMonetary:a}=this.ourContributionSummary,s={};if(n)s.payments={title:!n.total&&p("Payments received"),status:!n.total&&p("No members in the group are pledging yet! \u{1F614}"),ctaText:n.total&&p("See more")},s.monetary={title:p("You need {br_}{amount}",{...M(),amount:this.withCurrency(n.needed)}),status:p("You will receive {amount}.",{amount:this.withCurrency(n.total)})};else if(e){let d=o=>p("You are pledging {br_}{amount}",{...M(),amount:this.withCurrency(o)});if(e.pledged>0){let o=this.ourPaymentsSummary.paymentsTotal===this.ourPaymentsSummary.paymentsDone;s.payments={title:!e.total&&p("Payments sent"),status:!e.total&&p("At the moment, no one is in need of contributions."),ctaText:e.total?o?p("Review payments"):p("Send payments"):null,ctaClass:o&&"is-outlined"},s.monetary={title:d(e.pledged),status:p("{amount} will be used.",{amount:this.withCurrency(e.total)})}}else s.payments={title:p("Payments"),status:p("{b1}Make a pledge{b2} to start contributing to other members.",{b1:'<button class="link js-btnPledge">',b2:"</button>"})},s.monetary={title:d(e.total)}}return s.nonMonetary=(()=>{let d;if(a){let o=a.who.length,c=o===1;d=r?c?p("You and 1 other member are contributing."):p("You and {count} other members are contributing.",{count:o}):c?p("1 member is contributing."):p("{count} members are contributing.",{count:o})}else d=r?p("You are contributing."):p("There are no non-monetary contributions.");return{title:p("Non-monetary"),status:d}})(),s},pSummary(){let{paymentsTotal:e,paymentsDone:r,hasPartials:n}=this.ourPaymentsSummary;return{title:this.ourGroupProfile.incomeDetailsType==="incomeAmount"?p("Payments received"):p("Payments sent"),value:r,max:e,hasMarks:!0,hasPartials:n,label:p("{value} out of {max}",{value:r,max:e})}}},methods:{openModal(e){g("okTurtles.events/emit",b,e)},handlePaymentStatusClick(e){e.target.classList.contains("js-btnPledge")&&this.openModal("incomeDetails")}}},rn=function(){var e=this,r=e.$createElement,n=e._self._c||r;return n("page-section",{attrs:{title:e.L("Contributions")}},[n("div",{staticClass:"c-widget",attrs:{"data-test":"contributionsWidget"}},[n("div",{staticClass:"c-column"},[e.distributionStarted?[e.copy.payments.title?n("div",{staticClass:"c-status"},[n("h3",{staticClass:"is-title-4 c-title",attrs:{"data-test":"paymentsTitle"}},[e._v(e._s(e.copy.payments.title))]),n("div",{directives:[{name:"safe-html",rawName:"v-safe-html",value:e.copy.payments.status,expression:"copy.payments.status"}],staticClass:"has-text-1",attrs:{"data-test":"paymentsStatus"},on:{click:e.handlePaymentStatusClick}})]):n("div",{staticClass:"c-status",attrs:{"data-test":"paymentsSummary"}},[n("div",{staticClass:"c-pSummary"},[n("h3",{staticClass:"is-title-4"},[e._v(e._s(e.pSummary.title))]),n("p",{staticClass:"c-pSummary-status",class:{"has-text-success":e.pSummary.max===e.pSummary.value}},[e.pSummary.max===e.pSummary.value?n("i",{staticClass:"icon-check is-prefix"}):e._e(),n("span",{staticClass:"has-text-1"},[e._v(e._s(e.pSummary.label))])])]),n("progress-bar",{staticClass:"c-progress",attrs:{max:e.pSummary.max,value:e.pSummary.value,hasMarks:e.pSummary.hasMarks}})],1),e.copy.payments.ctaText?n("router-link",{staticClass:"button is-small",class:e.copy.payments.ctaClass,attrs:{to:"/payments"}},[e._v(e._s(e.copy.payments.ctaText))]):e._e()]:n("div",{staticClass:"c-status"},[n("h3",{staticClass:"is-title-4 c-title",attrs:{"data-test":"paymentsTitle"}},[e._v(e._s(e.pSummary.title))]),n("i18n",{staticClass:"has-text-1",attrs:{tag:"p","data-test":"paymentsStatus",args:{startDate:e.distributionStart}}},[e._v("The distribution period begins on: {startDate}")])],1)],2),n("div",{staticClass:"c-column"},[n("h3",{directives:[{name:"safe-html",rawName:"v-safe-html",value:e.copy.monetary.title,expression:"copy.monetary.title"}],staticClass:"is-title-4 c-title",attrs:{"data-test":"monetaryTitle"}}),n("div",{staticClass:"has-text-1 c-status",attrs:{"data-test":"monetaryStatus"}},[e._v(e._s(e.copy.monetary.status))]),n("i18n",{staticClass:"link",attrs:{tag:"button"},on:{click:function(a){return e.openModal("IncomeDetails")}}},[e._v("Change")])],1),n("div",{staticClass:"c-column"},[n("h3",{staticClass:"is-title-4 c-title"},[e._v(e._s(e.copy.nonMonetary.title))]),n("div",{staticClass:"has-text-1 c-status",attrs:{"data-test":"nonMonetaryStatus"}},[e._v(e._s(e.copy.nonMonetary.status))]),n("router-link",{staticClass:"link",attrs:{to:"/contributions"}},[e._v(e._s(e.L("See all contributions")))])],1)])])},sn=[],an=function(e){e&&e("data-v-4b3eb66f_0",{source:'.c-widget[data-v-4b3eb66f]{margin-top:1rem;display:grid;grid-template-columns:1fr 1fr;grid-template-areas:"payments payments" "monetary nonMonetary";grid-column-gap:1.5rem;grid-row-gap:1.5rem}@media screen and (min-width:769px),print{.c-widget[data-v-4b3eb66f]{grid-template-columns:2fr 1fr 1fr;grid-template-areas:"payments monetary nonMonetary"}}.c-column[data-v-4b3eb66f]:nth-child(1){grid-area:payments}.c-column[data-v-4b3eb66f]:nth-child(2){grid-area:monetary}.c-column[data-v-4b3eb66f]:nth-child(3){grid-area:nonMonetary}.c-title[data-v-4b3eb66f]{margin-bottom:.5rem}.c-status[data-v-4b3eb66f]{margin-bottom:1.5rem}.c-pSummary[data-v-4b3eb66f]{display:flex;margin-bottom:1rem}.c-pSummary-status[data-v-4b3eb66f]{margin-left:.5rem}',map:void 0,media:void 0})},dn="data-v-4b3eb66f",cn=void 0,ln=!1;function un(e,r,n,a,s,d,o,c,l,u){let t=(typeof n=="function"?n.options:n)||{};t.__file=`style>
`,t.render||(t.render=e.render,t.staticRenderFns=e.staticRenderFns,t._compiled=!0,s&&(t.functional=!0)),t._scopeId=a;{let m;if(r&&(m=o?function(i){r.call(this,u(i,this.$root.$options.shadowRoot))}:function(i){r.call(this,c(i))}),m!==void 0)if(t.functional){let i=t.render;t.render=function(f,_){return m.call(_),i(f,_)}}else{let i=t.beforeCreate;t.beforeCreate=i?[].concat(i,m):[m]}}return t}function X(){let e=X.styles||(X.styles={}),r=typeof navigator<"u"&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());return function(a,s){if(document.querySelector('style[data-vue-ssr-id~="'+a+'"]'))return;let d=r?s.media||"default":a,o=e[d]||(e[d]={ids:[],parts:[],element:void 0});if(!o.ids.includes(a)){let c=s.source,l=o.ids.length;if(o.ids.push(a),s.map&&(c+=`
/*# sourceURL=`+s.map.sources[0]+" */",c+=`
/*# sourceMappingURL=data:application/json;base64,`+btoa(unescape(encodeURIComponent(JSON.stringify(s.map))))+" */"),r&&(o.element=o.element||document.querySelector("style[data-group="+d+"]")),!o.element){let u=document.head||document.getElementsByTagName("head")[0],t=o.element=document.createElement("style");t.type="text/css",s.media&&t.setAttribute("media",s.media),r&&(t.setAttribute("data-group",d),t.setAttribute("data-next-index","0")),u.appendChild(t)}if(r&&(l=parseInt(o.element.getAttribute("data-next-index")),o.element.setAttribute("data-next-index",l+1)),o.element.styleSheet)o.parts.push(c),o.element.styleSheet.cssText=o.parts.filter(Boolean).join(`
`);else{let u=document.createTextNode(c),t=o.element.childNodes;t[l]&&o.element.removeChild(t[l]),t.length?o.element.insertBefore(u,t[l]):o.element.appendChild(u)}}}}var mn=un({render:rn,staticRenderFns:sn},an,on,dn,ln,cn,!1,X,void 0,void 0),Ie=mn;var pn={name:"ProposalsWidget",components:{ProposalItem:ue,ButtonDropdownMenu:_e},mounted(){this.refreshArchivedProposals(),g("okTurtles.events/on",j,this.onProposalArchived),this.matchMediaPhone=window.matchMedia("screen and (max-width: 515px)"),this.ephemeral.isPhone=this.matchMediaPhone.matches,this.matchMediaPhone.onchange=e=>{this.ephemeral.isPhone=e.matches}},beforeDestroy(){g("okTurtles.events/off",j,this.onProposalArchived),this.matchMediaPhone.onchange=null,this.clearTimeouts()},data(){return{matchMediaPhone:null,ephemeral:{archivedProposals:[],timeouts:[],isPhone:!1,isMenuOpen:!1}}},computed:{...R(["currentGroupId"]),...h(["currentGroupState","currentWelcomeInvite","currentIdentityState","groupDistributionStarted","groupShouldPropose","currentGroupOwnerID","ourIdentityContractId","groupMembersCount"]),hasProposals(){return Object.keys(this.currentGroupState.proposals).length>0||this.ephemeral.archivedProposals.length>0},proposals(){return Object.entries(this.currentGroupState.proposals).sort((r,n)=>n[1].data.expires_date_ms-r[1].data.expires_date_ms).map(r=>r[0])},componentData(){return{type:this.hasProposals?S:C,props:this.hasProposals?{title:p("Proposals"),anchor:"proposals"}:{title:p("Proposals"),svg:fe,isCard:!0}}},proposalOptions(){let e=this.ourIdentityContractId===this.currentGroupOwnerID,r=!this.groupShouldPropose&&!e;return[{type:"header",name:p("Group Members")},{type:"item",id:"add-new-member",name:p("Add new member"),icon:"user-plus"},{type:"item",id:"remove-member",name:p("Remove member"),icon:"user-minus",isDisabled:this.groupMembersCount<(e?2:3)},{type:"header",name:p("Voting Systems")},{type:"item",id:"change-voting-threshold",name:p("Change voting threshold"),icon:"vote-yea",isDisabled:r},{type:"header",name:p("Other Proposals")},{type:"item",id:"change-mincome",name:p("Change mincome"),icon:"dollar-sign",isDisabled:r},{type:"item",id:"change-distribution-date",name:p("Change distribution date"),icon:"chart-pie",isDisabled:this.groupDistributionStarted(new Date().toISOString())||r},{type:"item",id:"generic-proposal",name:p("Generic proposal"),icon:"envelope-open-text",isDisabled:!this.groupShouldPropose}]}},methods:{onProposalArchived(e,r,n){e===this.currentGroupId&&(this.ephemeral.archivedProposals.unshift([r,n]),this.ephemeral.timeouts.push(setTimeout(()=>{this.ephemeral.archivedProposals=this.ephemeral.archivedProposals.filter(a=>a[0]!==r)},new Date(n.dateClosed).getTime()-Date.now()+y)))},async refreshArchivedProposals(){let e=`proposals/${this.ourIdentityContractId}/${this.currentGroupId}`,r=await g("gi.db/archive/load",e)||[];this.ephemeral.archivedProposals=r.filter(([n,a])=>Date.now()-new Date(a.dateClosed).getTime()<y).sort(([n,a],[s,d])=>new Date(d.dateClosed).getTime()-new Date(a.dateClosed).getTime()),this.clearTimeouts();for(let[n,a]of this.ephemeral.archivedProposals)this.ephemeral.timeouts.push(setTimeout(()=>{this.ephemeral.archivedProposals=this.ephemeral.archivedProposals.filter(s=>s[0]!==n)},new Date(a.dateClosed).getTime()-Date.now()+y))},clearTimeouts(){for(;this.ephemeral.timeouts.length>0;)clearTimeout(this.ephemeral.timeouts.pop())},hadVoted(e){return e.votes[this.currentIdentityState.attributes.username]||e.status!==Q},openModal(e,r){g("okTurtles.events/emit",b,e,r)},onDropdownItemSelect(e){let r={"add-new-member":"InvitationLinkModal","remove-member":"GroupMembersAllModal","change-mincome":"MincomeProposal","change-distribution-date":"DistributionDateProposal","generic-proposal":"GenericProposal","change-disagreeing-number":"ChangeVotingRules","change-voting-threshold":"ChangeVotingRules"},n={"change-disagreeing-number":{rule:"disagreement"},"change-voting-threshold":{rule:"percentage"},"remove-member":{toRemove:!0}},a=this.currentWelcomeInvite.expires<Date.now();if(e==="add-new-member"&&(this.groupShouldPropose||a))return g("gi.app/group/checkGroupSizeAndProposeMember",{contractID:this.$store.state.currentGroupId});this.openModal(r[e],n[e]||void 0)},onMenuOpen(){this.ephemeral.isMenuOpen=!0,this.$nextTick(()=>{let e=document.querySelector(".c-proposals-menu");e&&e.scrollIntoView({behavior:"smooth",block:"start"})})},onMenuClose(){this.ephemeral.isMenuOpen=!1}},watch:{currentGroupId(){this.refreshArchivedProposals()}}},_n=function(){var e=this,r=e.$createElement,n=e._self._c||r;return n(e.componentData.type,e._b({tag:"component",class:{"c-has-extra-bottom-margin":e.ephemeral.isMenuOpen},attrs:{"data-test":"proposalsSection"},scopedSlots:e._u([{key:"cta",fn:function(){return[n("div",{staticClass:"c-all-actions"},[n("i18n",{staticClass:"button is-outlined is-small",attrs:{tag:"span","data-test":"openAllProposals"},on:{click:function(a){return e.openModal("PropositionsAllModal")}}},[e._v("Archived proposals")]),n("button-dropdown-menu",{staticClass:"c-proposals-menu",attrs:{buttonText:e.L("Create proposal"),options:e.proposalOptions,boundEdge:e.ephemeral.isPhone?"left":"right"},on:{select:e.onDropdownItemSelect,"menu-open":e.onMenuOpen,"menu-close":e.onMenuClose}})],1)]},proxy:!0}])},"component",e.componentData.props,!1),[e.hasProposals?n("ul",{staticClass:"c-proposals",attrs:{"data-test":"proposalsWidget"}},[e._l(e.proposals,function(a){return n("proposal-item",{key:"proposal-"+a,attrs:{proposalHash:a}})}),e._l(e.ephemeral.archivedProposals,function(a){var s=a[0],d=a[1];return n("proposal-item",{key:"archived-proposal-"+s,attrs:{proposalHash:s,proposalObject:d}})})],2):n("div",{staticClass:"c-description"},[n("i18n",{attrs:{tag:"p"}},[e._v("In Group Income, every member of the group gets to vote on important decisions, like removing or adding members, changing the mincome value and others.")]),n("i18n",{staticClass:"has-text-1",attrs:{tag:"p"}},[e._v("There are no open proposals.")])],1)])},fn=[],hn=function(e){e&&e("data-v-6a22a6ed_0",{source:".card[data-v-6a22a6ed]{position:relative}.c-all-actions[data-v-6a22a6ed]{display:flex;gap:.75rem;flex-wrap:wrap;align-items:baseline}.c-all-actions .c-see-all-proposal-btn[data-v-6a22a6ed]{font-weight:400}@media screen and (max-width:768px){.c-all-actions .c-see-all-proposal-btn[data-v-6a22a6ed]{display:none}}@media screen and (min-width:1200px){.c-all-actions[data-v-6a22a6ed]{top:1rem}}.c-description p[data-v-6a22a6ed]{margin-top:1rem}.c-has-extra-bottom-margin[data-v-6a22a6ed]{margin-bottom:12rem}",map:void 0,media:void 0})},gn="data-v-6a22a6ed",vn=void 0,bn=!1;function yn(e,r,n,a,s,d,o,c,l,u){let t=(typeof n=="function"?n.options:n)||{};t.__file=`style>
`,t.render||(t.render=e.render,t.staticRenderFns=e.staticRenderFns,t._compiled=!0,s&&(t.functional=!0)),t._scopeId=a;{let m;if(r&&(m=o?function(i){r.call(this,u(i,this.$root.$options.shadowRoot))}:function(i){r.call(this,c(i))}),m!==void 0)if(t.functional){let i=t.render;t.render=function(f,_){return m.call(_),i(f,_)}}else{let i=t.beforeCreate;t.beforeCreate=i?[].concat(i,m):[m]}}return t}function W(){let e=W.styles||(W.styles={}),r=typeof navigator<"u"&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());return function(a,s){if(document.querySelector('style[data-vue-ssr-id~="'+a+'"]'))return;let d=r?s.media||"default":a,o=e[d]||(e[d]={ids:[],parts:[],element:void 0});if(!o.ids.includes(a)){let c=s.source,l=o.ids.length;if(o.ids.push(a),s.map&&(c+=`
/*# sourceURL=`+s.map.sources[0]+" */",c+=`
/*# sourceMappingURL=data:application/json;base64,`+btoa(unescape(encodeURIComponent(JSON.stringify(s.map))))+" */"),r&&(o.element=o.element||document.querySelector("style[data-group="+d+"]")),!o.element){let u=document.head||document.getElementsByTagName("head")[0],t=o.element=document.createElement("style");t.type="text/css",s.media&&t.setAttribute("media",s.media),r&&(t.setAttribute("data-group",d),t.setAttribute("data-next-index","0")),u.appendChild(t)}if(r&&(l=parseInt(o.element.getAttribute("data-next-index")),o.element.setAttribute("data-next-index",l+1)),o.element.styleSheet)o.parts.push(c),o.element.styleSheet.cssText=o.parts.filter(Boolean).join(`
`);else{let u=document.createTextNode(c),t=o.element.childNodes;t[l]&&o.element.removeChild(t[l]),t.length?o.element.insertBefore(u,t[l]):o.element.appendChild(u)}}}}var xn=yn({render:_n,staticRenderFns:fn},hn,pn,gn,bn,vn,!1,W,void 0,void 0),Re=xn;var Cn={name:"MemberRequest",components:{CalloutCard:C,SvgConversation:I,PageSection:S,Avatar:P,AvatarUser:k,ProfileCard:A},data(){return{SvgConversation:I,requestsSorted:[{contractID:"1",username:"Pierre",date:new Date().toISOString(),displayName:"Pierre",status:"requested"},{contractID:"2",username:"Pierre",date:new Date().toISOString(),displayName:"Pierre",status:"rejected"},{contractID:"3",username:"Greg",date:new Date().toISOString(),displayName:"Greg",status:"approuved"}]}},computed:{...h(["currentGroupState","ourUserIdentityContract"]),hasMemberRequest(){return this.requests},requests(){return this.requestsSorted?this.requestsSorted:[]}},methods:{humanDate:x,approve(e){return!0},reject(e){return!0},approveAll(){return!0},rejectAll(){return!0},undo(){return!0}}},Sn=function(){var e=this,r=e.$createElement,n=e._self._c||r;return e.hasMemberRequest?n("page-section",{attrs:{title:e.L("Member Requests")}},[n("div",{staticClass:"c-all-actions"},[n("i18n",{staticClass:"button is-outlined is-small",attrs:{tag:"span"},on:{click:e.approveAll}},[e._v("Approve All")]),n("i18n",{staticClass:"button is-outlined is-small",attrs:{tag:"span"},on:{click:e.rejectAll}},[e._v("Reject All")])],1),n("ul",{staticClass:"c-group-list"},e._l(e.requestsSorted,function(a){var s=a.contractID,d=a.username,o=a.displayName,c=a.status,l=a.date;return n("li",{key:s,staticClass:"c-group-member",attrs:{"data-test":"request-"+d}},[n("profile-card",{attrs:{contractID:s}},[n("avatar-user",{attrs:{contractID:s,size:"sm"}}),n("div",{staticClass:"c-name has-text-bold"},[e._v(e._s(d))]),n("div",{staticClass:"c-date has-text-1"},[e._v(e._s(e.humanDate(l,{month:"long",day:"numeric",year:"numeric"})))]),c==="requested"?n("div",{staticClass:"c-action-container"},[n("i18n",{staticClass:"button is-outlined is-small",attrs:{tag:"span"},on:{click:e.approve}},[e._v("Approve")]),n("i18n",{staticClass:"button is-outlined is-small",attrs:{tag:"span"},on:{click:e.reject}},[e._v("Reject")])],1):n("div",{staticClass:"c-action-container c-undo-container"},[c==="rejected"?n("div",{staticClass:"has-text-danger"},[n("i",{staticClass:"icon-times"}),n("i18n",{attrs:{tag:"span"}},[e._v("Request Rejected.")])],1):n("div",{staticClass:"has-text-success"},[n("i",{staticClass:"icon-check"}),n("i18n",{attrs:{tag:"span"}},[e._v("Request Approved.")])],1),n("i18n",{staticClass:"is-link-inherit has-text-1",attrs:{tag:"span"},on:{click:e.undo}},[e._v("Undo")])],1)],1)],1)}),0)]):n("callout-card",{attrs:{title:e.L("Member Requests"),svg:e.SvgConversation,isCard:!0}},[n("i18n",{attrs:{tag:"p"}},[e._v("In Group Income, you can use an invitation link to add members to the group and invite up to 60 people. Once someone uses that link to join the group, they\u2019ll need to be approved by a member of the group with member approval permissions.")]),n("i18n",{staticClass:"has-text-1",attrs:{tag:"p"}},[e._v("There are no open requests right now.")]),n("i18n",{staticClass:"c-all-requests button is-outlined is-small",attrs:{tag:"span"},on:{click:e.toggleHistory}},[e._v("See all requests")])],1)},In=[],Rn=function(e){e&&e("data-v-ed902b30_0",{source:".card[data-v-ed902b30]{position:relative}.c-all-requests[data-v-ed902b30]{position:absolute;right:2.5rem;top:1rem}.c-all-actions[data-v-ed902b30]{margin-top:1.5rem}@media screen and (min-width:769px),print{.c-all-actions[data-v-ed902b30]{position:absolute;right:2.5rem;top:1rem}}.c-calloutCard p+.has-text-1[data-v-ed902b30]{margin-top:1rem}.c-action-container[data-v-ed902b30]{margin-top:.5rem}@media screen and (min-width:769px),print{.c-action-container[data-v-ed902b30]{margin-left:auto;margin-top:0}}.button+.button[data-v-ed902b30]{margin-left:1rem}.c-name[data-v-ed902b30]{margin:0 1rem}.c-group-members[data-v-ed902b30]{margin-top:1.5rem;padding-top:1.5rem;position:relative}.c-group-members-header[data-v-ed902b30]{display:flex;justify-content:space-between;align-items:center;margin-bottom:.5rem}.c-group-list[data-v-ed902b30]{margin-bottom:1.5rem;margin-top:1.5rem}.c-group-member[data-v-ed902b30]{display:flex;justify-content:space-between;align-items:center;min-height:4.625rem;padding:.5rem 0;border-bottom:1px solid var(--general_0)}.c-group-member[data-v-ed902b30]:first-child{border-top:1px solid var(--general_0)}.c-group-member>.c-twrapper[data-v-ed902b30]{width:100%;flex-wrap:wrap}.c-avatar[data-v-ed902b30]{width:2rem;height:2rem;margin-bottom:0}.c-undo-container[data-v-ed902b30]{display:flex}.c-undo-container>div[data-v-ed902b30]{min-width:9rem}.c-undo-container i[data-v-ed902b30],.c-undo-container span[data-v-ed902b30]{margin-left:.5rem}",map:void 0,media:void 0})},Tn="data-v-ed902b30",wn=void 0,Pn=!1;function kn(e,r,n,a,s,d,o,c,l,u){let t=(typeof n=="function"?n.options:n)||{};t.__file=`style>
`,t.render||(t.render=e.render,t.staticRenderFns=e.staticRenderFns,t._compiled=!0,s&&(t.functional=!0)),t._scopeId=a;{let m;if(r&&(m=o?function(i){r.call(this,u(i,this.$root.$options.shadowRoot))}:function(i){r.call(this,c(i))}),m!==void 0)if(t.functional){let i=t.render;t.render=function(f,_){return m.call(_),i(f,_)}}else{let i=t.beforeCreate;t.beforeCreate=i?[].concat(i,m):[m]}}return t}function z(){let e=z.styles||(z.styles={}),r=typeof navigator<"u"&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());return function(a,s){if(document.querySelector('style[data-vue-ssr-id~="'+a+'"]'))return;let d=r?s.media||"default":a,o=e[d]||(e[d]={ids:[],parts:[],element:void 0});if(!o.ids.includes(a)){let c=s.source,l=o.ids.length;if(o.ids.push(a),s.map&&(c+=`
/*# sourceURL=`+s.map.sources[0]+" */",c+=`
/*# sourceMappingURL=data:application/json;base64,`+btoa(unescape(encodeURIComponent(JSON.stringify(s.map))))+" */"),r&&(o.element=o.element||document.querySelector("style[data-group="+d+"]")),!o.element){let u=document.head||document.getElementsByTagName("head")[0],t=o.element=document.createElement("style");t.type="text/css",s.media&&t.setAttribute("media",s.media),r&&(t.setAttribute("data-group",d),t.setAttribute("data-next-index","0")),u.appendChild(t)}if(r&&(l=parseInt(o.element.getAttribute("data-next-index")),o.element.setAttribute("data-next-index",l+1)),o.element.styleSheet)o.parts.push(c),o.element.styleSheet.cssText=o.parts.filter(Boolean).join(`
`);else{let u=document.createTextNode(c),t=o.element.childNodes;t[l]&&o.element.removeChild(t[l]),t.length?o.element.insertBefore(u,t[l]):o.element.appendChild(u)}}}}var An=kn({render:Sn,staticRenderFns:In},Rn,Cn,Tn,Pn,wn,!1,z,void 0,void 0),Te=An;var Nn={name:"GroupMincome",computed:{...h(["groupSettings","groupMincomeFormatted"])},methods:{openProposal(){g("okTurtles.events/emit",b,"MincomeProposal")}}},En=function(){var e=this,r=e.$createElement,n=e._self._c||r;return n("div",{attrs:{"data-test":"groupMincome"}},[n("i18n",{staticClass:"is-title-4",attrs:{tag:"h3"}},[e._v("Minimum Income")]),n("p",{staticClass:"is-title-2 income",attrs:{"data-test":"minIncome"}},[e._v(e._s(e.groupMincomeFormatted))]),n("i18n",{staticClass:"link",attrs:{tag:"button","aria-label":e.L("Change Mincome")},on:{click:e.openProposal}},[e._v("Change")])],1)},Mn=[],Dn=function(e){e&&e("data-v-0f672185_0",{source:".income[data-v-0f672185]{margin:.25rem 0}",map:void 0,media:void 0})},jn="data-v-0f672185",On=void 0,$n=!1;function Ln(e,r,n,a,s,d,o,c,l,u){let t=(typeof n=="function"?n.options:n)||{};t.__file=`style>
`,t.render||(t.render=e.render,t.staticRenderFns=e.staticRenderFns,t._compiled=!0,s&&(t.functional=!0)),t._scopeId=a;{let m;if(r&&(m=o?function(i){r.call(this,u(i,this.$root.$options.shadowRoot))}:function(i){r.call(this,c(i))}),m!==void 0)if(t.functional){let i=t.render;t.render=function(f,_){return m.call(_),i(f,_)}}else{let i=t.beforeCreate;t.beforeCreate=i?[].concat(i,m):[m]}}return t}function H(){let e=H.styles||(H.styles={}),r=typeof navigator<"u"&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());return function(a,s){if(document.querySelector('style[data-vue-ssr-id~="'+a+'"]'))return;let d=r?s.media||"default":a,o=e[d]||(e[d]={ids:[],parts:[],element:void 0});if(!o.ids.includes(a)){let c=s.source,l=o.ids.length;if(o.ids.push(a),s.map&&(c+=`
/*# sourceURL=`+s.map.sources[0]+" */",c+=`
/*# sourceMappingURL=data:application/json;base64,`+btoa(unescape(encodeURIComponent(JSON.stringify(s.map))))+" */"),r&&(o.element=o.element||document.querySelector("style[data-group="+d+"]")),!o.element){let u=document.head||document.getElementsByTagName("head")[0],t=o.element=document.createElement("style");t.type="text/css",s.media&&t.setAttribute("media",s.media),r&&(t.setAttribute("data-group",d),t.setAttribute("data-next-index","0")),u.appendChild(t)}if(r&&(l=parseInt(o.element.getAttribute("data-next-index")),o.element.setAttribute("data-next-index",l+1)),o.element.styleSheet)o.parts.push(c),o.element.styleSheet.cssText=o.parts.filter(Boolean).join(`
`);else{let u=document.createTextNode(c),t=o.element.childNodes;t[l]&&o.element.removeChild(t[l]),t.length?o.element.insertBefore(u,t[l]):o.element.appendChild(u)}}}}var Un=Ln({render:En,staticRenderFns:Mn},Dn,Nn,jn,$n,On,!1,H,void 0,void 0),we=Un;var Fn={name:"GroupMembers",components:{Avatar:P,AvatarUser:k,ProfileCard:A,GroupMembersTooltipPending:ae},props:{title:{type:String,default:p("Members")}},computed:{...h(["groupMembersCount","groupMembersSorted","groupShouldPropose","currentWelcomeInvite","ourIdentityContractId"]),firstTenMembers(){return this.groupMembersSorted.slice(0,10)}},methods:{invite(){this.$router.push({path:"/invite"})},openModal(e,r){g("okTurtles.events/emit",b,e,r)},localizedName(e,r){let n=r;return e===this.ourIdentityContractId?p("{name} (you)",{name:n}):n},headerButtonAction(){if(!this.groupShouldPropose)this.openModal("InvitationLinkModal");else{let e=this.$store.state.currentGroupId;g("gi.app/group/checkGroupSizeAndProposeMember",{contractID:e}).catch(r=>{console.error(`Error on action checkGroupSizeAndProposeMember (headerButtonAction) for ${e}`,r)})}}}},Bn=function(){var e=this,r=e.$createElement,n=e._self._c||r;return n("div",{staticClass:"c-group-members",attrs:{"data-test":"groupMembers"}},[n("div",{staticClass:"c-group-members-header"},[n("h3",{staticClass:"is-title-4"},[e._v(e._s(e.title))]),n("button",{staticClass:"button is-small is-outlined",attrs:{"data-test":"inviteButton"},on:{click:e.headerButtonAction}},[n("i",{staticClass:"icon-plus is-prefix"}),n("i18n",[e._v("Add")])],1)]),n("ul",{staticClass:"c-group-list"},e._l(e.firstTenMembers,function(a){var s=a.id,d=a.contractID,o=a.username,c=a.displayName,l=a.invitedBy,u=a.isNew;return n("li",{key:s,staticClass:"c-group-member",class:l&&"is-pending",attrs:{"data-test":c}},[n("profile-card",{attrs:{contractID:d}},[l?n("avatar",{attrs:{src:"/assets/images/user-avatar-pending.png",size:"sm","data-test":"openMembersProfileCard"}}):n("avatar-user",{attrs:{contractID:d,size:"sm","data-test":"openMemberProfileCard"}}),n("button",{staticClass:"is-unstyled c-name has-ellipsis",attrs:{"data-test":"username"}},[e._v(e._s(e.localizedName(d,c)))]),l?n("i18n",{staticClass:"pill is-neutral",attrs:{"data-test":"pillPending"}},[e._v("pending")]):u?n("i18n",{staticClass:"pill is-primary",attrs:{"data-test":"pillNew"}},[e._v("new")]):e._e(),l?n("group-members-tooltip-pending",{staticClass:"c-menu",attrs:{contractID:d,data:l}}):e._e()],1)],1)}),0),e.groupMembersCount>10?n("i18n",{staticClass:"link",attrs:{tag:"button",args:{groupMembersCount:e.groupMembersCount},"data-test":"seeAllMembers"},on:{click:function(a){return e.openModal("GroupMembersAllModal")}}},[e._v("See all {groupMembersCount} members")]):e._e()],1)},Gn=[],Vn=function(e){e&&e("data-v-8d82fdf8_0",{source:".c-group-members[data-v-8d82fdf8]{margin-top:1.5rem;padding-top:1.5rem;position:relative}.c-group-members-header[data-v-8d82fdf8]{display:flex;justify-content:space-between;align-items:center;margin-bottom:.5rem}.c-group-list[data-v-8d82fdf8]{margin-bottom:1.5rem}.c-group-member[data-v-8d82fdf8]{display:flex;justify-content:space-between;align-items:center;height:3rem;padding:.5rem 1.5rem .5rem 1.5rem;margin:0 -.5rem 0 -1.5rem}.c-group-member[data-v-8d82fdf8]:hover{background-color:var(--general_1);cursor:pointer}.c-group-member>.c-twrapper[data-v-8d82fdf8]{width:100%}.c-avatar[data-v-8d82fdf8]{width:2rem;height:2rem;margin-bottom:0}.c-name[data-v-8d82fdf8]{display:inline-block;margin-right:.5rem;margin-left:.5rem;font-family:inherit;border-bottom:1px solid transparent}.c-name[data-v-8d82fdf8]:focus,.c-name[data-v-8d82fdf8]:hover{border-bottom-color:var(--text_0)}.c-menu[data-v-8d82fdf8]{margin-left:.5rem}.c-actions-content.c-content[data-v-8d82fdf8]{top:calc(100% + .5rem);left:auto;min-width:13rem}",map:void 0,media:void 0})},qn="data-v-8d82fdf8",Xn=void 0,Wn=!1;function zn(e,r,n,a,s,d,o,c,l,u){let t=(typeof n=="function"?n.options:n)||{};t.__file=`style>
`,t.render||(t.render=e.render,t.staticRenderFns=e.staticRenderFns,t._compiled=!0,s&&(t.functional=!0)),t._scopeId=a;{let m;if(r&&(m=o?function(i){r.call(this,u(i,this.$root.$options.shadowRoot))}:function(i){r.call(this,c(i))}),m!==void 0)if(t.functional){let i=t.render;t.render=function(f,_){return m.call(_),i(f,_)}}else{let i=t.beforeCreate;t.beforeCreate=i?[].concat(i,m):[m]}}return t}function Y(){let e=Y.styles||(Y.styles={}),r=typeof navigator<"u"&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());return function(a,s){if(document.querySelector('style[data-vue-ssr-id~="'+a+'"]'))return;let d=r?s.media||"default":a,o=e[d]||(e[d]={ids:[],parts:[],element:void 0});if(!o.ids.includes(a)){let c=s.source,l=o.ids.length;if(o.ids.push(a),s.map&&(c+=`
/*# sourceURL=`+s.map.sources[0]+" */",c+=`
/*# sourceMappingURL=data:application/json;base64,`+btoa(unescape(encodeURIComponent(JSON.stringify(s.map))))+" */"),r&&(o.element=o.element||document.querySelector("style[data-group="+d+"]")),!o.element){let u=document.head||document.getElementsByTagName("head")[0],t=o.element=document.createElement("style");t.type="text/css",s.media&&t.setAttribute("media",s.media),r&&(t.setAttribute("data-group",d),t.setAttribute("data-next-index","0")),u.appendChild(t)}if(r&&(l=parseInt(o.element.getAttribute("data-next-index")),o.element.setAttribute("data-next-index",l+1)),o.element.styleSheet)o.parts.push(c),o.element.styleSheet.cssText=o.parts.filter(Boolean).join(`
`);else{let u=document.createTextNode(c),t=o.element.childNodes;t[l]&&o.element.removeChild(t[l]),t.length?o.element.insertBefore(u,t[l]):o.element.appendChild(u)}}}}var Hn=zn({render:Bn,staticRenderFns:Gn},Vn,Fn,qn,Wn,Xn,!1,Y,void 0,void 0),Pe=Hn;var Yn={name:"GroupPurpose",computed:{...h(["groupSettings"])},methods:{updateSharedValues(){console.log("Open shared value form")}}},Jn=function(){var e=this,r=e.$createElement,n=e._self._c||r;return n("div",{staticClass:"c-group-purpose"},[n("div",{staticClass:"c-group-purpose-header"},[n("i18n",{staticClass:"is-title-4",attrs:{tag:"h3"}},[e._v("About the group")])],1),e.groupSettings.sharedValues?n("div",[n("p",{staticClass:"c-text has-text-1",attrs:{"data-test":"sharedValues"}},[e._v(e._s(e.groupSettings.sharedValues))]),n("router-link",{staticClass:"link",attrs:{to:"/group-settings"}},[n("i18n",[e._v("Edit")])],1)],1):n("router-link",{staticClass:"link",attrs:{to:"/group-settings"}},[n("i18n",[e._v("Add description")])],1),e._t("default")],2)},Kn=[],Qn=function(e){e&&e("data-v-5093f233_0",{source:".c-group-purpose-header[data-v-5093f233]{display:flex;justify-content:space-between;align-items:center}.c-group-purpose[data-v-5093f233]{margin-top:1.5rem;padding-top:1.5rem;position:relative}.c-text[data-v-5093f233]{margin:.5rem 0}",map:void 0,media:void 0})},Zn="data-v-5093f233",eo=void 0,to=!1;function no(e,r,n,a,s,d,o,c,l,u){let t=(typeof n=="function"?n.options:n)||{};t.__file=`style>
`,t.render||(t.render=e.render,t.staticRenderFns=e.staticRenderFns,t._compiled=!0,s&&(t.functional=!0)),t._scopeId=a;{let m;if(r&&(m=o?function(i){r.call(this,u(i,this.$root.$options.shadowRoot))}:function(i){r.call(this,c(i))}),m!==void 0)if(t.functional){let i=t.render;t.render=function(f,_){return m.call(_),i(f,_)}}else{let i=t.beforeCreate;t.beforeCreate=i?[].concat(i,m):[m]}}return t}function J(){let e=J.styles||(J.styles={}),r=typeof navigator<"u"&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());return function(a,s){if(document.querySelector('style[data-vue-ssr-id~="'+a+'"]'))return;let d=r?s.media||"default":a,o=e[d]||(e[d]={ids:[],parts:[],element:void 0});if(!o.ids.includes(a)){let c=s.source,l=o.ids.length;if(o.ids.push(a),s.map&&(c+=`
/*# sourceURL=`+s.map.sources[0]+" */",c+=`
/*# sourceMappingURL=data:application/json;base64,`+btoa(unescape(encodeURIComponent(JSON.stringify(s.map))))+" */"),r&&(o.element=o.element||document.querySelector("style[data-group="+d+"]")),!o.element){let u=document.head||document.getElementsByTagName("head")[0],t=o.element=document.createElement("style");t.type="text/css",s.media&&t.setAttribute("media",s.media),r&&(t.setAttribute("data-group",d),t.setAttribute("data-next-index","0")),u.appendChild(t)}if(r&&(l=parseInt(o.element.getAttribute("data-next-index")),o.element.setAttribute("data-next-index",l+1)),o.element.styleSheet)o.parts.push(c),o.element.styleSheet.cssText=o.parts.filter(Boolean).join(`
`);else{let u=document.createTextNode(c),t=o.element.childNodes;t[l]&&o.element.removeChild(t[l]),t.length?o.element.insertBefore(u,t[l]):o.element.appendChild(u)}}}}var oo=no({render:Jn,staticRenderFns:Kn},Qn,Yn,Zn,to,eo,!1,J,void 0,void 0),ke=oo;var ro={name:"GroupDashboard",components:{Page:me,AddIncomeDetailsWidget:pe,StartInvitingWidget:he,GroupActivity:Se,ContributionsSummaryWidget:Ie,ProposalsWidget:Re,MemberRequest:Te,GroupMincome:we,GroupMembers:Pe,GroupPurpose:ke,BannerSimple:re},computed:{...R(["currentGroupId"]),...h(["currentGroupState","ourPreferences","groupSettings","groupsByName","groupMembersCount","groupProfiles","ourGroupProfile"]),canDisplayGraph(){return Object.values(this.groupProfiles).filter(e=>e.incomeDetailsType).length>0},shouldHideBanner(e,r){return this.ourPreferences.hideDistributionBanner?.[this.currentGroupId]},hasIncomeDetails(){return!!this.ourGroupProfile?.incomeDetailsType},isCloseToDistributionTime(){let e=new Date(this.groupSettings.distributionDate),r=te(e,-7*y);return Date.now()>=new Date(r).getTime()&&Date.now()<e.getTime()},shouldShowBanner(){return this.isCloseToDistributionTime&&!this.shouldHideBanner},hasMemberRequest(){return this.requests&&!1}},beforeMount(){g("okTurtles.events/on",D,this.hideBanner),this.isCloseToDistributionTime||this.showBanner()},beforeDestroy(){g("okTurtles.events/off",D,this.hideBanner)},methods:{humanDate:x,handleIncomeClick(e){e.target.classList.contains("js-btnInvite")&&g("okTurtles.events/emit",b,"IncomeDetails")},hideBanner(){g("gi.actions/identity/kv/updateDistributionBannerVisibility",{contractID:this.currentGroupId,hidden:!0})},showBanner(){g("gi.actions/identity/kv/updateDistributionBannerVisibility",{contractID:this.currentGroupId,hidden:!1})}}},so=function(){var e=this,r=e.$createElement,n=e._self._c||r;return e.groupSettings.groupName?n("page",{attrs:{pageTestName:"dashboard",pageTestHeaderName:"groupName"},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(e._s(e.groupSettings.groupName))]},proxy:!0},{key:"sidebar",fn:function(){return[n("group-mincome"),n("group-members"),n("group-purpose")]},proxy:!0}],null,!1,2835352694)},[e.shouldShowBanner?n("banner-simple",{staticClass:"c-banner",attrs:{severity:"warning"}},[n("i18n",{attrs:{args:{r1:'<button class="link js-btnInvite" data-test="openWarningIncomeDetailsModal">',r2:"</button>",date:e.humanDate(e.groupSettings.distributionDate,{month:"long",day:"numeric"})}},on:{click:e.handleIncomeClick}},[e._v("Next distribution date is on {date}. Make sure to update your {r1}income details{r2} by then.")]),n("button",{staticClass:"is-unstyled",on:{click:e.hideBanner}},[n("i",{staticClass:"icon-times"})])],1):e._e(),e.hasIncomeDetails?[e.groupMembersCount===1?n("start-inviting-widget"):e._e(),e.canDisplayGraph?n("group-activity"):e._e(),n("contributions-summary-widget")]:n("add-income-details-widget",{attrs:{welcomeMessage:!0}}),n("proposals-widget"),e.hasMemberRequest?n("member-request"):e._e()],2):e._e()},ao=[],io=function(e){e&&e("data-v-03823d72_0",{source:".c-banner.c-message[data-v-03823d72]{margin-bottom:1rem;display:flex;align-items:center}.c-banner.c-message button[data-v-03823d72]{float:right;margin-left:.5rem;margin-top:.2rem}.c-banner.c-message[data-v-03823d72]  .c-body{display:flex;align-content:center;justify-content:space-between}",map:void 0,media:void 0})},co="data-v-03823d72",lo=void 0,uo=!1;function mo(e,r,n,a,s,d,o,c,l,u){let t=(typeof n=="function"?n.options:n)||{};t.__file=`style>
`,t.render||(t.render=e.render,t.staticRenderFns=e.staticRenderFns,t._compiled=!0,s&&(t.functional=!0)),t._scopeId=a;{let m;if(r&&(m=o?function(i){r.call(this,u(i,this.$root.$options.shadowRoot))}:function(i){r.call(this,c(i))}),m!==void 0)if(t.functional){let i=t.render;t.render=function(f,_){return m.call(_),i(f,_)}}else{let i=t.beforeCreate;t.beforeCreate=i?[].concat(i,m):[m]}}return t}function K(){let e=K.styles||(K.styles={}),r=typeof navigator<"u"&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());return function(a,s){if(document.querySelector('style[data-vue-ssr-id~="'+a+'"]'))return;let d=r?s.media||"default":a,o=e[d]||(e[d]={ids:[],parts:[],element:void 0});if(!o.ids.includes(a)){let c=s.source,l=o.ids.length;if(o.ids.push(a),s.map&&(c+=`
/*# sourceURL=`+s.map.sources[0]+" */",c+=`
/*# sourceMappingURL=data:application/json;base64,`+btoa(unescape(encodeURIComponent(JSON.stringify(s.map))))+" */"),r&&(o.element=o.element||document.querySelector("style[data-group="+d+"]")),!o.element){let u=document.head||document.getElementsByTagName("head")[0],t=o.element=document.createElement("style");t.type="text/css",s.media&&t.setAttribute("media",s.media),r&&(t.setAttribute("data-group",d),t.setAttribute("data-next-index","0")),u.appendChild(t)}if(r&&(l=parseInt(o.element.getAttribute("data-next-index")),o.element.setAttribute("data-next-index",l+1)),o.element.styleSheet)o.parts.push(c),o.element.styleSheet.cssText=o.parts.filter(Boolean).join(`
`);else{let u=document.createTextNode(c),t=o.element.childNodes;t[l]&&o.element.removeChild(t[l]),t.length?o.element.insertBefore(u,t[l]):o.element.appendChild(u)}}}}var po=mo({render:so,staticRenderFns:ao},io,ro,co,uo,lo,!1,K,void 0,void 0),as=po;export{as as default};
//# sourceMappingURL=GroupDashboard-VHLUMYUF-cached.js.map
