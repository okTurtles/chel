import{a as i}from"./chunk-OYX4NVDU-cached.js";import{b as f}from"./chunk-VUYUNB2W-cached.js";function c(t){let m=0,r=0,e=[],a=[];for(let n of t)n.haveNeed>0?(e.push(n),m+=n.haveNeed):n.haveNeed<0&&(a.push(n),r+=Math.abs(n.haveNeed));let u=Math.min(1,r/m),o=[];for(let n of e){let s=u*n.haveNeed;for(let b of a){let l=Math.abs(b.haveNeed)/r;o.push({amount:s*l,fromMemberID:n.memberID,toMemberID:b.memberID})}}return o}function D(t){let m={},r={},e=[],a=[],u=[];for(let o of t)m[o.toMemberID]=(m[o.toMemberID]||0)+o.amount,r[o.fromMemberID]=(r[o.fromMemberID]||0)+o.amount;for(let o in r)e.push({memberID:o,amount:r[o]});for(let o in m)a.push({memberID:o,amount:m[o]});for(e.sort((o,n)=>n.amount-o.amount),a.sort((o,n)=>n.amount-o.amount);e.length>0&&a.length>0;){let o=e.pop(),n=a.pop(),s=o.amount-n.amount;s<0?(u.push({amount:o.amount,fromMemberID:o.memberID,toMemberID:n.memberID}),n.amount-=o.amount,a.push(n)):s>0?(u.push({amount:n.amount,fromMemberID:o.memberID,toMemberID:n.memberID}),o.amount-=n.amount,e.push(o)):u.push({amount:n.amount,fromMemberID:o.memberID,toMemberID:n.memberID})}return u}var h=1/Math.pow(10,8);function T({haveNeeds:t=[],minimize:m=!0}){let r=c(t);return m?D(r):r}function j({distribution:t,payments:m,dueOn:r}){t=f(t);for(let e of t)e.total=e.amount;t=p(t,m).filter(e=>e.amount>=h);for(let e of t)e.amount=i(e.amount),e.total=i(e.total),e.partial=e.total!==e.amount,e.isLate=!1,e.dueOn=r;return t}function M(t){t=f(t);for(let m=0;m<t.length;m++){let r=t[m];for(let e=m+1;e<t.length;e++){let a=t[e];(r.fromMemberID===a.fromMemberID&&r.toMemberID===a.toMemberID||r.toMemberID===a.fromMemberID&&r.fromMemberID===a.toMemberID)&&(r.amount+=(r.fromMemberID===a.fromMemberID?1:-1)*a.amount,r.total+=(r.fromMemberID===a.fromMemberID?1:-1)*a.total,t.splice(e,1),e--)}}return t}function d(t,m){return M([...t,...m])}function p(t,m){m=f(m);for(let r of m)r.amount*=-1,r.total*=-1;return d(t,m)}export{T as a,j as b};
//# sourceMappingURL=chunk-URDQIHOO-cached.js.map
