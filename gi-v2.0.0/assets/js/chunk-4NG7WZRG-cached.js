import{a as m,b as _,c as d,d as g,e as G,h as $}from"./chunk-GB4D3I4D-cached.js";import{a as D}from"./chunk-SXKMOEKE-cached.js";import{b as U,c as E,d as x,f as j}from"./chunk-MMWHE4QG-cached.js";import{c as w}from"./chunk-3V7YD6RE-cached.js";import{a as V,b as k}from"./chunk-6P74MMKF-cached.js";import{i as T,j as C,k as P,l as M,m as I,n as L,v as h,w as N}from"./chunk-SZPI64OI-cached.js";import{b as A}from"./chunk-33M5GGRR-cached.js";import{a as u}from"./chunk-OMOH7TRL-cached.js";function v({state:e,proposalHash:o,proposal:n,contractID:r,meta:a,height:i}){delete e.proposals[o],u("gi.contracts/group/pushSideEffect",r,["gi.contracts/group/makeNotificationWhenProposalClosed",e,r,a,i,o,n]),u("gi.contracts/group/pushSideEffect",r,["gi.contracts/group/archiveProposal",r,o,n])}var ie=E({rule:G,expires_ms:x,ruleSettings:E({[d]:E({threshold:x}),[g]:E({threshold:x})})});function y(e,{meta:o,data:n,contractID:r,height:a}){let{proposalHash:i}=n,t=e.proposals[i];t.status=N,u("okTurtles.events/emit",T,e,m,n),v({state:e,proposalHash:i,proposal:t,contractID:r,meta:o,height:a})}var R={rule:d,expires_ms:14*w,ruleSettings:{[d]:{threshold:.66},[g]:{threshold:1}}},F={[C]:{defaults:R,[_]:async function(e,o){let{data:n,contractID:r,meta:a,height:i}=o,{proposalHash:t}=n,l=e.proposals[t];l.payload=n.passPayload,l.status=h;let c={...o,data:n.passPayload};await u("gi.contracts/group/invite/process",c,e),u("okTurtles.events/emit",T,e,_,n),v({state:e,proposalHash:t,proposal:l,contractID:r,meta:a,height:i})},[m]:y},[P]:{defaults:R,[_]:async function(e,o){let{data:n,contractID:r,meta:a,height:i}=o,{proposalHash:t,passPayload:l}=n,c=e.proposals[t];c.status=h,c.payload=l;let p=c.data.proposalData,s={...o,data:p,proposalHash:t};await u("gi.contracts/group/removeMember/process",s,e),u("gi.contracts/group/pushSideEffect",r,["gi.contracts/group/removeMember/sideEffect",s]),v({state:e,proposalHash:t,proposal:c,contractID:r,meta:a,height:i})},[m]:y},[M]:{defaults:R,[_]:async function(e,o){let{data:n,contractID:r,meta:a,height:i}=o,{proposalHash:t}=n,l=e.proposals[t];l.status=h;let{setting:c,proposedValue:p}=l.data.proposalData,s={...o,data:{[c]:p},proposalHash:t};await u("gi.contracts/group/updateSettings/process",s,e),u("gi.contracts/group/pushSideEffect",r,["gi.contracts/group/updateSettings/sideEffect",s]),v({state:e,proposalHash:t,proposal:l,contractID:r,meta:a,height:i})},[m]:y},[I]:{defaults:R,[_]:async function(e,o){let{data:n,contractID:r,meta:a,height:i}=o,{proposalHash:t}=n,l=e.proposals[t];l.status=h;let c={...o,data:l.data.proposalData,proposalHash:t};await u("gi.contracts/group/updateAllVotingRules/process",c,e),v({state:e,proposalHash:t,proposal:l,contractID:r,meta:a,height:i})},[m]:y},[L]:{defaults:R,[_]:function(e,{data:o,contractID:n,meta:r,height:a}){let{proposalHash:i}=o,t=e.proposals[i];t.status=h,u("okTurtles.events/emit",T,e,_,o),v({state:e,proposalHash:i,proposal:t,contractID:n,meta:r,height:a})},[m]:y}},le=F,ce=j(...Object.keys(F).map(e=>U(e)));var H=.6,W={name:"VotingRulesInput",components:{BannerSimple:V,SliderContinuous:D,TransitionExpand:k},props:{rule:{type:String,validator:e=>[d,g].includes(e)},value:[String,Number]},data:()=>({config:{[d]:{sliderLabel:A("What percentage of members need to agree to pass a proposal?"),sliderMin:1,sliderMax:100,sliderUnit:"%"},[g]:{sliderLabel:A('"No" votes required to block a proposal'),sliderMin:1,sliderMax:60,sliderUnit:""}},ephemeral:{sliderClass:""}}),created(){this.ephemeral.sliderClass=this.warnMajority?"is-warning":""},watch:{value(e){this.ephemeral.sliderClass=this.warnMajority?"is-warning":""}},computed:{sliderValue(){return this.rule===d?$(this.value):this.value},warnMajority(){return this.rule===d&&this.value<H}},methods:{handleInput(e){let o=this.rule===d?e.target.value/100:e.target.value;this.$emit("update",o)}}},q=function(){var e=this,o=e.$createElement,n=e._self._c||o;return n("div",[n("slider-continuous",{staticClass:"c-slider",class:e.ephemeral.sliderClass,attrs:{uid:e.rule,label:e.config[e.rule].sliderLabel,min:e.config[e.rule].sliderMin,max:e.config[e.rule].sliderMax,unit:e.config[e.rule].sliderUnit,value:e.sliderValue},on:{input:e.handleInput}}),n("transition-expand",[e.warnMajority?n("div",[n("banner-simple",{staticClass:"c-banner",attrs:{severity:"warning"}},[n("i18n",{attrs:{args:{a_:'<a class="link" href="https://groupincome.org/2016/09/deprecating-mays-theorem/#when-majority-rule-can-harm" target="_blank">',_a:"</a>"}}},[e._v("The percentage value you are choosing is most likely too low for a decision that can have a potentially significant impact on a person's life. Please consider using a {a_}supermajority threshold{_a}.")])],1)],1):e._e()])],1)},J=[],X=function(e){e&&e("data-v-629a4c10_0",{source:".c-slider.is-warning[data-v-629a4c10]  .slider{color:var(--warning_0)}.c-banner[data-v-629a4c10]{margin-top:1.5rem}",map:void 0,media:void 0})},Y="data-v-629a4c10",z=void 0,K=!1;function Q(e,o,n,r,a,i,t,l,c,p){let s=(typeof n=="function"?n.options:n)||{};s.__file=`style>
`,s.render||(s.render=e.render,s.staticRenderFns=e.staticRenderFns,s._compiled=!0,a&&(s.functional=!0)),s._scopeId=r;{let S;if(o&&(S=t?function(f){o.call(this,p(f,this.$root.$options.shadowRoot))}:function(f){o.call(this,l(f))}),S!==void 0)if(s.functional){let f=s.render;s.render=function(B,O){return S.call(O),f(B,O)}}else{let f=s.beforeCreate;s.beforeCreate=f?[].concat(f,S):[S]}}return s}function b(){let e=b.styles||(b.styles={}),o=typeof navigator<"u"&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());return function(r,a){if(document.querySelector('style[data-vue-ssr-id~="'+r+'"]'))return;let i=o?a.media||"default":r,t=e[i]||(e[i]={ids:[],parts:[],element:void 0});if(!t.ids.includes(r)){let l=a.source,c=t.ids.length;if(t.ids.push(r),a.map&&(l+=`
/*# sourceURL=`+a.map.sources[0]+" */",l+=`
/*# sourceMappingURL=data:application/json;base64,`+btoa(unescape(encodeURIComponent(JSON.stringify(a.map))))+" */"),o&&(t.element=t.element||document.querySelector("style[data-group="+i+"]")),!t.element){let p=document.head||document.getElementsByTagName("head")[0],s=t.element=document.createElement("style");s.type="text/css",a.media&&s.setAttribute("media",a.media),o&&(s.setAttribute("data-group",i),s.setAttribute("data-next-index","0")),p.appendChild(s)}if(o&&(c=parseInt(t.element.getAttribute("data-next-index")),t.element.setAttribute("data-next-index",c+1)),t.element.styleSheet)t.parts.push(l),t.element.styleSheet.cssText=t.parts.filter(Boolean).join(`
`);else{let p=document.createTextNode(l),s=t.element.childNodes;s[c]&&t.element.removeChild(s[c]),s.length?t.element.insertBefore(p,s[c]):t.element.appendChild(p)}}}}var Z=Q({render:q,staticRenderFns:J},X,W,Y,K,z,!1,b,void 0,void 0),he=Z;export{R as a,le as b,he as c};
//# sourceMappingURL=chunk-4NG7WZRG-cached.js.map
