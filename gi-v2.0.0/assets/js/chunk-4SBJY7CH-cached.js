import{d as x}from"./chunk-OYX4NVDU-cached.js";import{n as _}from"./chunk-VUYUNB2W-cached.js";import{d as y}from"./chunk-WBBXU2FL-cached.js";var C={name:"GraphLegendItem",props:{amount:{type:String,required:!0},color:{type:String,required:!0},variant:{type:String,default:"side"}}},S=function(){var e=this,a=e.$createElement,i=e._self._c||a;return i("li",{staticClass:"c-wlegend",class:"c-wlegend-"+e.variant},[i("div",{staticClass:"c-inner"},[i("span",{staticClass:"has-text-1 c-desc"},[e._t("default")],2),i("span",{staticClass:"is-title-4 c-amount"},[e._v(e._s(e.amount)),i("span",{staticClass:"c-marker",class:"has-background-"+e.color})])]),e.$slots.description?i("div",{staticClass:"c-description help"},[e._t("description")],2):e._e()])},w=[],R=function(e){e&&e("data-v-3057ee9e_0",{source:".c-wlegend[data-v-3057ee9e]{padding:1rem 0}.c-wlegend.c-wlegend-side[data-v-3057ee9e]:first-child{padding-top:0}.c-wlegend.c-wlegend-side[data-v-3057ee9e]:last-child{padding-bottom:0}.c-wlegend.c-wlegend-side[data-v-3057ee9e]:not(:last-child){border-bottom:1px solid var(--general_0)}.c-wlegend.c-wlegend-inline[data-v-3057ee9e]{padding:.25rem 0}.c-wlegend.c-wlegend-inline[data-v-3057ee9e]:first-child{padding-top:1rem}@media screen and (min-width:769px),print{.c-wlegend.c-wlegend-inline[data-v-3057ee9e]{padding:1rem 0;position:relative;margin-right:2.5rem;padding-left:1rem}.c-wlegend.c-wlegend-inline .c-marker[data-v-3057ee9e]{position:absolute;left:0;top:1.45rem;margin-left:0}}.c-inner[data-v-3057ee9e]{display:flex;align-items:center;justify-content:space-between}.c-desc[data-v-3057ee9e]{display:block;margin-right:.5rem}.c-amount[data-v-3057ee9e]{white-space:nowrap}.c-marker[data-v-3057ee9e]{display:inline-block;width:.5rem;height:.5rem;margin-left:.5rem;margin-bottom:.06rem;border-radius:1px;border:1px solid}.c-marker.has-background-blank[data-v-3057ee9e]{border-color:var(--general_0)}.c-marker.has-background-primary-solid[data-v-3057ee9e]{border-color:var(--primary_0)}.c-marker.has-background-success-solid[data-v-3057ee9e]{border-color:var(--success_0)}.c-marker.has-background-warning-solid[data-v-3057ee9e]{border-color:var(--warning_0)}.c-marker.has-background-danger-solid[data-v-3057ee9e]{border-color:var(--danger_3)}.c-description[data-v-3057ee9e]{margin-top:.5rem}",map:void 0,media:void 0})},M="data-v-3057ee9e",k=void 0,I=!1;function $(e,a,i,r,s,o,t,d,c,u){let n=(typeof i=="function"?i.options:i)||{};n.__file=`style>
`,n.render||(n.render=e.render,n.staticRenderFns=e.staticRenderFns,n._compiled=!0,s&&(n.functional=!0)),n._scopeId=r;{let m;if(a&&(m=t?function(l){a.call(this,u(l,this.$root.$options.shadowRoot))}:function(l){a.call(this,d(l))}),m!==void 0)if(n.functional){let l=n.render;n.render=function(h,f){return m.call(f),l(h,f)}}else{let l=n.beforeCreate;n.beforeCreate=l?[].concat(l,m):[m]}}return n}function p(){let e=p.styles||(p.styles={}),a=typeof navigator<"u"&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());return function(r,s){if(document.querySelector('style[data-vue-ssr-id~="'+r+'"]'))return;let o=a?s.media||"default":r,t=e[o]||(e[o]={ids:[],parts:[],element:void 0});if(!t.ids.includes(r)){let d=s.source,c=t.ids.length;if(t.ids.push(r),s.map&&(d+=`
/*# sourceURL=`+s.map.sources[0]+" */",d+=`
/*# sourceMappingURL=data:application/json;base64,`+btoa(unescape(encodeURIComponent(JSON.stringify(s.map))))+" */"),a&&(t.element=t.element||document.querySelector("style[data-group="+o+"]")),!t.element){let u=document.head||document.getElementsByTagName("head")[0],n=t.element=document.createElement("style");n.type="text/css",s.media&&n.setAttribute("media",s.media),a&&(n.setAttribute("data-group",o),n.setAttribute("data-next-index","0")),u.appendChild(n)}if(a&&(c=parseInt(t.element.getAttribute("data-next-index")),t.element.setAttribute("data-next-index",c+1)),t.element.styleSheet)t.parts.push(d),t.element.styleSheet.cssText=t.parts.filter(Boolean).join(`
`);else{let u=document.createTextNode(d),n=t.element.childNodes;n[c]&&t.element.removeChild(n[c]),n.length?t.element.insertBefore(u,n[c]):t.element.appendChild(u)}}}}var A=$({render:S,staticRenderFns:w},R,C,M,I,k,!1,p,void 0,void 0),T=A;var L={name:"PieChart",props:{slices:{type:Array,default(){return[]}},innerSlices:{type:Array,default(){return[]}}},data:()=>({ephemeral:{labelActiveIndex:0,labelStyle:{},isLabelVisible:!1}}),computed:{missingSlice(){let e=this.slices.length,i=1-this.getStartPercent(e);return i===0?!1:{data:this.sliceData({percent:i},e),color:"blank",percent:i}}},methods:{sliceClasses(e,a){return{[`c-slice u-has-fill-${e.color}`]:!0,"c-inner":a,"c-full":e.percent===1}},sliceData(e,a){let i=this.getStartPercent(a),[r,s]=this.getCoordinatesForPercent(i),[o,t]=this.getCoordinatesForPercent(i+e.percent),d=e.percent>.5?1:0;return[`M ${r} ${s}`,`A 1 1 0 ${d} 1 ${o} ${t}`,"L 0 0","Z"].join(" ")},getStartPercent(e){return this.slices.slice(0,e).reduce((a,i)=>a+i.percent,0)},getCoordinatesForPercent(e){return[Math.cos(2*Math.PI*e),Math.sin(2*Math.PI*e)]},showLabel:_(function(e,a){this.ephemeral.labelActiveIndex=a,this.ephemeral.labelStyle={position:"fixed",top:`${e.clientY}px`,left:`${e.clientX}px`},this.ephemeral.isLabelVisible=!0},100),hideLabel(e){this.ephemeral.isLabelVisible=!1}}},N=function(){var e=this,a=e.$createElement,i=e._self._c||a;return i("div",{staticClass:"c-container"},[i("svg",{staticClass:"c-piechart",attrs:{viewBox:"-1 -1 2 2","aria-hidden":"hidden"}},[e._l(e.slices,function(r,s){return i("path",{key:"slice-"+s,class:e.sliceClasses(r,!1),attrs:{d:e.sliceData(r,s),"data-id":r.id},on:{mouseenter:function(o){return e.showLabel(o,s)},mouseleave:function(o){return e.hideLabel(o,s)}}})}),e.missingSlice?i("path",{class:e.sliceClasses(e.missingSlice,!1),attrs:{d:e.missingSlice.data,"data-id":"_missingSlice_"}}):e._e(),i("circle",{staticClass:"c-pie-donut",attrs:{r:"39%"}}),e._l(e.innerSlices,function(r,s){return i("path",{key:"inner-slice-"+s,class:e.sliceClasses(r,!0),attrs:{d:e.sliceData(r,s),"data-id":r.id}})}),i("circle",{staticClass:"c-pie-donut",attrs:{r:"34%"}})],2),i("div",{staticClass:"c-slot"},[e._t("default")],2)])},E=[],P=function(e){e&&e("data-v-154833af_0",{source:".c-container[data-v-154833af]{position:relative;display:flex;justify-content:center;align-items:center}.c-piechart[data-v-154833af]{transform:rotate(-90deg)}.c-slice[data-v-154833af]{stroke:var(--general_2);stroke-width:.03}.c-slice.c-full[data-v-154833af]{stroke-width:0}.c-slice.c-inner[data-v-154833af]{transform:scale(.75)}.c-pie-donut[data-v-154833af]{fill:var(--general_2)}.c-slot[data-v-154833af]{position:absolute;width:53%;top:50%;left:50%;transform:translate(-50%,-50%);text-align:center;line-height:1.2}",map:void 0,media:void 0})},X="data-v-154833af",j=void 0,Y=!1;function W(e,a,i,r,s,o,t,d,c,u){let n=(typeof i=="function"?i.options:i)||{};n.__file=`style>
`,n.render||(n.render=e.render,n.staticRenderFns=e.staticRenderFns,n._compiled=!0,s&&(n.functional=!0)),n._scopeId=r;{let m;if(a&&(m=t?function(l){a.call(this,u(l,this.$root.$options.shadowRoot))}:function(l){a.call(this,d(l))}),m!==void 0)if(n.functional){let l=n.render;n.render=function(h,f){return m.call(f),l(h,f)}}else{let l=n.beforeCreate;n.beforeCreate=l?[].concat(l,m):[m]}}return n}function g(){let e=g.styles||(g.styles={}),a=typeof navigator<"u"&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());return function(r,s){if(document.querySelector('style[data-vue-ssr-id~="'+r+'"]'))return;let o=a?s.media||"default":r,t=e[o]||(e[o]={ids:[],parts:[],element:void 0});if(!t.ids.includes(r)){let d=s.source,c=t.ids.length;if(t.ids.push(r),s.map&&(d+=`
/*# sourceURL=`+s.map.sources[0]+" */",d+=`
/*# sourceMappingURL=data:application/json;base64,`+btoa(unescape(encodeURIComponent(JSON.stringify(s.map))))+" */"),a&&(t.element=t.element||document.querySelector("style[data-group="+o+"]")),!t.element){let u=document.head||document.getElementsByTagName("head")[0],n=t.element=document.createElement("style");n.type="text/css",s.media&&n.setAttribute("media",s.media),a&&(n.setAttribute("data-group",o),n.setAttribute("data-next-index","0")),u.appendChild(n)}if(a&&(c=parseInt(t.element.getAttribute("data-next-index")),t.element.setAttribute("data-next-index",c+1)),t.element.styleSheet)t.parts.push(d),t.element.styleSheet.cssText=t.parts.filter(Boolean).join(`
`);else{let u=document.createTextNode(d),n=t.element.childNodes;n[c]&&t.element.removeChild(n[c]),n.length?t.element.insertBefore(u,n[c]):t.element.appendChild(u)}}}}var F=W({render:N,staticRenderFns:E},P,L,X,Y,j,!1,g,void 0,void 0),U=F;var z={name:"Bars",props:{totals:Array,members:Array},data:()=>({ratioWidthPadding:1.5,ratioX:720,ratioY:160,labelPadding:10,maxWidth:48,isReady:!1,isMobile:!1,barTotal:0,barAmount:0,labelX:0,labelY:0}),mounted(){window.addEventListener("resize",this.handleResize),this.handleResize(),setTimeout(()=>{this.isReady=!0},0)},beforeDestroy:function(){window.removeEventListener("resize",this.handleResize)},computed:{...y(["groupProfiles","groupSettings"]),base(){return this.currency(0)},currency(){return x[this.groupSettings.mincomeCurrency].displayWithCurrency},membersNumber(){return this.members.length},width(){return Math.min(this.availableWidth/this.membersNumber/this.ratioWidthPadding,this.maxWidth)},availableWidth(){return this.ratioX-this.labelWidth},labelWidth(){return this.max.toString().length*9},max(){return Math.max.apply(Math,this.totals)>0?Math.max.apply(Math,this.totals):0},min(){let e=Math.min.apply(Math,this.totals);return e>0?0:e},middle(){return this.max>0?this.calculRatioY(this.max):0},middleTag(){return{transform:"translate(0,"+(this.middle-this.labelPadding)+"px)"}},createScale(){let e=this.max+Math.abs(this.min),i=this.toPrecision(e/4),r=[],s=Math.ceil(this.min/i)*i;for(;s<=this.max;){let o=this.currency(Math.abs(s));s<0&&(o="-"+o),r.push({label:o,position:this.calculRatioY(s)}),s=s+i}return r}},methods:{handleResize:_(function(){this.$refs.graph&&(this.isMobile=this.verifyIsMobile(),this.ratioX=this.$refs.graph.clientWidth)},100),toPrecision(e){if(typeof e!="number"||e===0)return 0;let a=Math.abs(e);e>10&&(e=parseInt(e));let i=e.toString().length>3?2:1,r=Math.ceil(Math.log(a)/Math.LN10),s=Math.pow(10,i-r),o=Math.round(a*s,0)/s;return a>1e3&&(o=parseInt(o)),e>0?o:-o},verifyIsMobile(){return window.innerWidth<769},calculRatioY(e){return e!==0?this.ratioY/(this.max+Math.abs(this.min))*e:0},height(e){return e!==0?this.calculRatioY(Math.abs(e)):0},calculPositionX(e){let a=Math.min((this.availableWidth-this.width*this.membersNumber)/this.membersNumber,28),i=this.membersNumber*(this.width+a),r=i/this.membersNumber*e,s=(this.availableWidth-i)/2-a;return r+a+s},positionX(e){return`translate(${this.calculPositionX(e)}, 0)`},positionY(e){return e>0?-this.calculRatioY(e):0},color(e,a){return e>=0?a?"g-positive":"g-surplus":a?"g-negative":"g-needed"},roundedRect(e,a,i,r,s,o,t){let d="M"+(i+t)+","+r;return d+="h"+(s-2*t),e&&!a?d+="a"+t+","+t+" 0 0 1 "+t+","+t:(d+="h"+t,d+="v"+t),d+="v"+(o-2*t),e||a?(d+="v"+t,d+="h"+-t):d+="a"+t+","+t+" 0 0 1 "+-t+","+t,d+="h"+(2*t-s),e||a?(d+="h"+-t,d+="v"+-t):d+="a"+t+","+t+" 0 0 1 "+-t+","+-t,d+="v"+(2*t-o),e&&!a?d+="a"+t+","+t+" 0 0 1 "+t+","+-t:(d+="v"+-t,d+="h"+t),d+="z",d},hideLabel(){this.barTotal=0,this.barAmount=0},showLabel(e,a){this.labelX=this.calculPositionX(e)+this.width/2,a&&(this.labelY=a.total>0?this.positionY(a.amount)+this.middle:this.height(a.amount)+this.middle,this.barTotal=a.total-a.amount,this.barAmount=a.amount)}}},O=function(){var e=this,a=e.$createElement,i=e._self._c||a;return i("div",{staticClass:"c-chart-wrapper"},[i("svg",{ref:"graph",attrs:{width:"100%",viewBox:"0 0 "+e.ratioX+" "+e.ratioY,preserveAspectRatio:"xMidYMid meet","aria-labelledby":"title",role:"img"},on:{mouseleave:function(r){return e.hideLabel()}}},[i("g",{attrs:{transform:"translate(0,"+e.middle+")"}},[i("g",{staticClass:"g-animate",style:"transform: scale3d(1,"+(e.isReady?1:0)+",1)"},[e._l(e.createScale,function(r){return i("g",{attrs:{transform:"translate(0,"+-r.position+")"}},[i("line",{staticClass:"g-animate g-animate-delay",style:"transform: scale3d("+(e.isReady?1:0)+",1,1)",attrs:{x1:"0",y1:"0",x2:e.ratioX,y2:"0",stroke:"#dbdbdb","stroke-width":"1","stroke-dasharray":"1"}})])}),e._l(e.members,function(r,s){return i("g",{staticClass:"graph-bar",attrs:{transform:e.positionX(s)},on:{mouseover:function(o){return e.showLabel(s,r)},mouseleave:function(o){return e.showLabel(s)}}},e._l([r.total,r.amount],function(o,t){return i("path",{class:e.color(o,t),attrs:{d:e.roundedRect(o>=0,t===1&&r.total!==Math.round(r.amount),0,e.positionY(o),e.width,e.height(o),e.width>15?3:1)}})}),0)})],2),i("line",{attrs:{x1:"0",y1:"0",x2:e.ratioX,y2:"0",stroke:"#dbdbdb","stroke-width":"1"}})])]),i("div",{staticClass:"c-tag-user",class:{positive:e.barTotal>=0},style:{opacity:e.barTotal||e.barAmount?1:0,transform:"translate3d("+e.labelX+"px,"+e.labelY+"px,0)"}},[Math.round(e.barTotal)!==0?i("div",{staticClass:"c-tag-total"},[e._v(e._s(e.currency(Math.abs(Math.round(e.barTotal)))))]):e._e(),e.barAmount!==0&&Math.round(e.barAmount)!==Math.round(e.barTotal)?i("div",{staticClass:"c-tag-amount"},[e._v(e._s(e.currency(Math.abs(Math.round(e.barAmount)))))]):e._e()]),i("div",{staticClass:"c-tag mincome",style:e.middleTag},[e._v(e._s(e.base))]),e._l(e.createScale,function(r){return i("div",{staticClass:"c-tag g-animate-opacity g-animate-delay",style:{opacity:e.isReady?1:0,transform:"translate(0,"+(-r.position+e.middle-e.labelPadding)+"px)"}},[e._v(e._s(r.label))])})],2)},V=[],q=function(e){e&&e("data-v-3fc5236d_0",{source:".c-chart-wrapper[data-v-3fc5236d]{display:flex;flex-wrap:wrap;position:relative;min-height:160px}.c-tag[data-v-3fc5236d]{position:absolute;right:0;font-size:.75rem;min-width:1.875rem;background-color:var(--background_0);color:var(--text_1);text-align:right;padding-left:.125rem}.c-tag-user[data-v-3fc5236d]{width:3.75rem;position:absolute;z-index:2;top:-1.5rem;left:-1.875rem;pointer-events:none;border-radius:3px;text-align:center;color:var(--danger_3);display:flex;flex-direction:column-reverse;align-items:center;transition:opacity .2s ease-in .2s,transform .2s ease-out}.c-tag-user .c-tag-amount[data-v-3fc5236d]{color:var(--warning_0);margin-bottom:.375rem}.c-tag-user .c-tag-amount[data-v-3fc5236d],.c-tag-user .c-tag-total[data-v-3fc5236d]{border-radius:3px;background:rgba(255,255,255,.4);padding:0 .125rem}.c-tag-user.positive[data-v-3fc5236d]{flex-direction:column}.c-tag-user.positive .c-tag-amount[data-v-3fc5236d]{color:var(--primary_0);margin-bottom:0}.c-tag-user.positive .c-tag-total[data-v-3fc5236d]{color:var(--success_0);margin-bottom:.375rem}.c-tag-user.positive .c-tag-total[data-v-3fc5236d]:last-child{margin-top:1.625rem}.c-no-activities[data-v-3fc5236d]{display:flex}.g-surplus[data-v-3fc5236d]{fill:var(--success_0)}.g-positive[data-v-3fc5236d]{fill:var(--primary_0)}.g-negative[data-v-3fc5236d]{fill:var(--warning_0)}.g-needed[data-v-3fc5236d]{fill:var(--danger_3)}.g-animate[data-v-3fc5236d]{transition:transform .7s ease-out}.g-animate-opacity[data-v-3fc5236d]{transition:opacity .7s ease-out}.g-animate-delay[data-v-3fc5236d]{transition-delay:.5s}",map:void 0,media:void 0})},D="data-v-3fc5236d",G=void 0,J=!1;function Z(e,a,i,r,s,o,t,d,c,u){let n=(typeof i=="function"?i.options:i)||{};n.__file=`style>
`,n.render||(n.render=e.render,n.staticRenderFns=e.staticRenderFns,n._compiled=!0,s&&(n.functional=!0)),n._scopeId=r;{let m;if(a&&(m=t?function(l){a.call(this,u(l,this.$root.$options.shadowRoot))}:function(l){a.call(this,d(l))}),m!==void 0)if(n.functional){let l=n.render;n.render=function(h,f){return m.call(f),l(h,f)}}else{let l=n.beforeCreate;n.beforeCreate=l?[].concat(l,m):[m]}}return n}function v(){let e=v.styles||(v.styles={}),a=typeof navigator<"u"&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());return function(r,s){if(document.querySelector('style[data-vue-ssr-id~="'+r+'"]'))return;let o=a?s.media||"default":r,t=e[o]||(e[o]={ids:[],parts:[],element:void 0});if(!t.ids.includes(r)){let d=s.source,c=t.ids.length;if(t.ids.push(r),s.map&&(d+=`
/*# sourceURL=`+s.map.sources[0]+" */",d+=`
/*# sourceMappingURL=data:application/json;base64,`+btoa(unescape(encodeURIComponent(JSON.stringify(s.map))))+" */"),a&&(t.element=t.element||document.querySelector("style[data-group="+o+"]")),!t.element){let u=document.head||document.getElementsByTagName("head")[0],n=t.element=document.createElement("style");n.type="text/css",s.media&&n.setAttribute("media",s.media),a&&(n.setAttribute("data-group",o),n.setAttribute("data-next-index","0")),u.appendChild(n)}if(a&&(c=parseInt(t.element.getAttribute("data-next-index")),t.element.setAttribute("data-next-index",c+1)),t.element.styleSheet)t.parts.push(d),t.element.styleSheet.cssText=t.parts.filter(Boolean).join(`
`);else{let u=document.createTextNode(d),n=t.element.childNodes;n[c]&&t.element.removeChild(n[c]),n.length?t.element.insertBefore(u,n[c]):t.element.appendChild(u)}}}}var H=Z({render:O,staticRenderFns:V},q,z,D,J,G,!1,v,void 0,void 0),K=H;export{K as a,T as b,U as c};
//# sourceMappingURL=chunk-4SBJY7CH-cached.js.map
