import{a as x}from"./chunk-NGBII4BC-cached.js";import"./chunk-GB4D3I4D-cached.js";import"./chunk-Q5WT7Z5S-cached.js";import"./chunk-MMWHE4QG-cached.js";import{a as S}from"./chunk-GWRDICTQ-cached.js";import"./chunk-QD6O46IB-cached.js";import"./chunk-LIW6QCF4-cached.js";import"./chunk-WMVHT3GJ-cached.js";import{c as I}from"./chunk-6P74MMKF-cached.js";import{k as f}from"./chunk-SZPI64OI-cached.js";import"./chunk-BZWIYGWR-cached.js";import"./chunk-SVSS5DEP-cached.js";import"./chunk-MEHASGB7-cached.js";import"./chunk-Z7X5SDSD-cached.js";import{v as g,x as v}from"./chunk-M3EDVPDK-cached.js";import"./chunk-33M5GGRR-cached.js";import{a as p}from"./chunk-OMOH7TRL-cached.js";import{b,d as y}from"./chunk-WBBXU2FL-cached.js";import"./chunk-XMZXE55N-cached.js";var P={name:"RemoveMember",components:{Avatar:S,BannerScoped:I,ProposalTemplate:x},data(){return{memberID:null,ephemeral:{currentStep:0},form:{useAdminPermission:!1},config:{steps:["RemoveMember"]}}},created(){let e=this.$route.query.memberID,n=this.groupProfiles[e];e&&p("okTurtles.events/emit",v,"RemoveMember",{memberID:e}),n?this.memberID=e:(console.warn('RemoveMember: Missing valid query "memberID".'),p("okTurtles.events/emit",g))},computed:{...b(["currentGroupId"]),...y(["currentGroupState","currentGroupOwnerID","globalProfile","groupProfiles","groupSettings","groupShouldPropose","groupMembersCount","ourIdentityContractId","userDisplayNameFromID"]),memberGlobalProfile(){return this.globalProfile(this.memberID)||{}},isGroupCreator(){return this.ourIdentityContractId===this.currentGroupOwnerID}},methods:{async submit(e){this.$refs.formMsg.clean();let n=this.memberID;if(this.groupShouldPropose&&!this.form.useAdminPermission){try{await p("gi.actions/group/proposal",{contractID:this.currentGroupId,data:{proposalType:f,proposalData:{memberID:n,reason:e.reason},votingRule:this.groupSettings.proposals[f].rule,expires_date_ms:Date.now()+this.groupSettings.proposals[f].expires_ms}}),this.ephemeral.currentStep+=1}catch(r){console.error("RemoveMember submit() error:",n,r),this.$refs.formMsg.danger(r.message),this.ephemeral.currentStep=0}return}try{await p("gi.actions/group/removeMember",{contractID:this.currentGroupId,data:{memberID:n}}),this.$refs.proposal.close()}catch(r){console.error(`Failed to remove member ${n}:`,r.message),this.$refs.formMsg.danger(r.message)}}}},R=function(){var e=this,n=e.$createElement,r=e._self._c||n;return r("proposal-template",{ref:"proposal",attrs:{variant:"removeMember",title:e.L("Remove Member"),maxSteps:e.config.steps.length,currentStep:e.ephemeral.currentStep,shouldImmediateChange:e.form.useAdminPermission},on:{"update:currentStep":function(i){return e.$set(e.ephemeral,"currentStep",i)},"update:current-step":function(i){return e.$set(e.ephemeral,"currentStep",i)},submit:e.submit}},[e.ephemeral.currentStep===0?r("div",{key:"0",staticClass:"c-step"},[r("avatar",{staticClass:"c-avatar",attrs:{src:e.memberGlobalProfile.picture,size:"lg"}}),r("p",{staticClass:"is-title-4 c-descr",attrs:{"data-test":"description"}},[e.groupShouldPropose?r("i18n",{attrs:{args:{name:e.userDisplayNameFromID(e.memberID)}}},[e._v("Remove {name} from the group")]):r("i18n",{attrs:{args:{name:e.userDisplayNameFromID(e.memberID)}}},[e._v("Are you sure you want to remove {name} from the group?")])],1),e.groupShouldPropose&&e.isGroupCreator?r("label",{staticClass:"checkbox c-use-admin-permissions"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.form.useAdminPermission,expression:"form.useAdminPermission"}],staticClass:"input",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.form.useAdminPermission)?e._i(e.form.useAdminPermission,null)>-1:e.form.useAdminPermission},on:{change:function(i){var s=e.form.useAdminPermission,u=i.target,o=!!u.checked;if(Array.isArray(s)){var m=null,a=e._i(s,m);u.checked?a<0&&e.$set(e.form,"useAdminPermission",s.concat([m])):a>-1&&e.$set(e.form,"useAdminPermission",s.slice(0,a).concat(s.slice(a+1)))}else e.$set(e.form,"useAdminPermission",o)}}}),r("i18n",[e._v("Use admin permissions to remove immediately")])],1):e._e()],1):e._e(),r("banner-scoped",{ref:"formMsg",attrs:{"data-test":"proposalError"}})],1)},C=[],D=function(e){e&&e("data-v-6fbc3d3e_0",{source:".c-step[data-v-6fbc3d3e]{width:100%;display:flex;flex-direction:column;align-items:center;margin-bottom:.5rem}.c-step .c-avatar[data-v-6fbc3d3e]{margin-bottom:1rem}.c-descr[data-v-6fbc3d3e]{text-align:center}.c-use-admin-permissions[data-v-6fbc3d3e]{margin-top:.5rem;margin-bottom:1.25rem;margin-right:0}",map:void 0,media:void 0})},M="data-v-6fbc3d3e",E=void 0,$=!1;function O(e,n,r,i,s,u,o,m,a,d){let t=(typeof r=="function"?r.options:r)||{};t.__file=`style>
`,t.render||(t.render=e.render,t.staticRenderFns=e.staticRenderFns,t._compiled=!0,s&&(t.functional=!0)),t._scopeId=i;{let l;if(n&&(l=o?function(c){n.call(this,d(c,this.$root.$options.shadowRoot))}:function(c){n.call(this,m(c))}),l!==void 0)if(t.functional){let c=t.render;t.render=function(A,h){return l.call(h),c(A,h)}}else{let c=t.beforeCreate;t.beforeCreate=c?[].concat(c,l):[l]}}return t}function _(){let e=_.styles||(_.styles={}),n=typeof navigator<"u"&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());return function(i,s){if(document.querySelector('style[data-vue-ssr-id~="'+i+'"]'))return;let u=n?s.media||"default":i,o=e[u]||(e[u]={ids:[],parts:[],element:void 0});if(!o.ids.includes(i)){let m=s.source,a=o.ids.length;if(o.ids.push(i),s.map&&(m+=`
/*# sourceURL=`+s.map.sources[0]+" */",m+=`
/*# sourceMappingURL=data:application/json;base64,`+btoa(unescape(encodeURIComponent(JSON.stringify(s.map))))+" */"),n&&(o.element=o.element||document.querySelector("style[data-group="+u+"]")),!o.element){let d=document.head||document.getElementsByTagName("head")[0],t=o.element=document.createElement("style");t.type="text/css",s.media&&t.setAttribute("media",s.media),n&&(t.setAttribute("data-group",u),t.setAttribute("data-next-index","0")),d.appendChild(t)}if(n&&(a=parseInt(o.element.getAttribute("data-next-index")),o.element.setAttribute("data-next-index",a+1)),o.element.styleSheet)o.parts.push(m),o.element.styleSheet.cssText=o.parts.filter(Boolean).join(`
`);else{let d=document.createTextNode(m),t=o.element.childNodes;t[a]&&o.element.removeChild(t[a]),t.length?o.element.insertBefore(d,t[a]):o.element.appendChild(d)}}}}var G=O({render:R,staticRenderFns:C},D,P,M,$,E,!1,_,void 0,void 0),B=G;export{B as default};
//# sourceMappingURL=RemoveMember-AAZLDIQL-cached.js.map
