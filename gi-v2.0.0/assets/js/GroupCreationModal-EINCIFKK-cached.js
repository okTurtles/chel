import{b as Z,c as ee}from"./chunk-4NG7WZRG-cached.js";import{c as N}from"./chunk-GB4D3I4D-cached.js";import"./chunk-SXKMOEKE-cached.js";import{b as B,c as D,d as $}from"./chunk-OYX4NVDU-cached.js";import"./chunk-MMWHE4QG-cached.js";import{a as Q}from"./chunk-XK3SURHI-cached.js";import"./chunk-F32NHZKM-cached.js";import{c as C,f as b,i as S,m as V}from"./chunk-3V7YD6RE-cached.js";import{a as W}from"./chunk-KRTYB7RO-cached.js";import{a as z}from"./chunk-GWRDICTQ-cached.js";import{a as Y}from"./chunk-CJC5SPHT-cached.js";import{b as X}from"./chunk-YGZ33QYP-cached.js";import"./chunk-QD6O46IB-cached.js";import{a as K}from"./chunk-LIW6QCF4-cached.js";import{a as q}from"./chunk-WMVHT3GJ-cached.js";import{b as H,c as J}from"./chunk-6P74MMKF-cached.js";import{b as oe}from"./chunk-B4L7IMS4-cached.js";import{c as x,d as g,h as T,n as F}from"./chunk-SZPI64OI-cached.js";import"./chunk-R4DRX7L2-cached.js";import{a as re}from"./chunk-FTWBMR5D-cached.js";import"./chunk-SVSS5DEP-cached.js";import"./chunk-MEHASGB7-cached.js";import"./chunk-Z7X5SDSD-cached.js";import{H as R,u as L}from"./chunk-M3EDVPDK-cached.js";import{b as h}from"./chunk-33M5GGRR-cached.js";import{a as v}from"./chunk-OMOH7TRL-cached.js";import"./chunk-WBBXU2FL-cached.js";import{e as U}from"./chunk-XMZXE55N-cached.js";var ne=U(re());var te={name:"StepAssistant",mounted(){this.redirect(this.config.steps[this.currentStep])},provide(){return{$assistant:this}},methods:{redirect(e){let o={name:e};this.$route.query.modal&&(o={query:{modal:this.$route.query.modal,step:e}}),this.$router.push(o).catch(X),this.content=e},next(){this.currentStep+1<this.config.steps.length&&this.redirect(this.config.steps[this.currentStep+1])},prev(){this.currentStep>0?this.redirect(this.config.steps[this.currentStep-1]):this.$router.push({query:{modal:null}})},finish(){this.$emit("done")}},data(){return{content:"",config:{steps:[]}}},computed:{currentStep(){let e=this.$route.name;return this.$route.query.modal&&(e=this.$route.query.step),Math.max(this.config.steps.indexOf(e),0)}}};var ie={name:"GroupName",props:{group:{type:Object},$v:{type:Object}},data(){return{config:{nameMaxChar:x}}},inject:["$assistant"],components:{Avatar:z,CharLengthIndicator:K},watch:{groupInitials:function(e){this.updatePictureCanvas(e)}},beforeMount(){v("okTurtles.events/on",R,this.updateGroupPictureByEditor)},mounted(){window.setTimeout(()=>{this.$refs.name.focus()},300);let e=this.$refs.pictureCanvas;e.width=256,e.height=256,this.$assistant.ephemeral.groupPictureType==="image"?this.$refs.pictureAvatar.setFromBlob(this.$assistant.ephemeral.groupPictureFile):this.updatePictureCanvas(this.groupInitials)},beforeDestroy(){if(v("okTurtles.events/off",R,this.updateGroupPictureByEditor),this.$assistant.ephemeral.groupPictureType!=="image"){let e=this.$refs.pictureCanvas.toDataURL("image/png");this.$v.form.groupPicture.$touch(),this.$assistant.ephemeral.groupPictureFile=Q(e),this.$assistant.ephemeral.groupPictureType="canvas"}},computed:{groupInitials(){let e=o=>o.split(/\s+/).map(n=>n.match(/\b\w/)?.[0]||"").join("").toUpperCase();return this.group.groupName?e(this.group.groupName).slice(0,2)??"":""}},methods:{updatePictureCanvas(e){let n=this.$refs.pictureCanvas.getContext("2d");n.rect(0,0,256,256),n.fillStyle="#7a7a7a",n.fill(),n.font="140px Lato",n.fillStyle="white",n.textAlign="center",n.fillText(e,256/2,180)},updateName(e){this.$v.form.groupName.$touch(),this.$emit("input",{data:{groupName:e.target.value}})},updateGroupPictureByEditor({blob:e}){this.$v.form.groupPicture.$touch(),this.$assistant.ephemeral.groupPictureFile=e,this.$refs.pictureAvatar.setFromBlob(e),this.$assistant.ephemeral.groupPictureType="image"},next(e){this.$v.form[e.target.name].$touch(),this.$v.form[e.target.name].$invalid||this.$emit("next")},fileChange(e){if(!e.length)return;let o=URL.createObjectURL(e[0]);v("okTurtles.events/emit",L,"AvatarEditorModal",{imageUrl:o})}}},ae=function(){var e=this,o=e.$createElement,n=e._self._c||o;return n("div",{staticClass:"wrapper"},[n("i18n",{staticClass:"is-title-4 steps-title",attrs:{tag:"h4"}},[e._v("1. Create a new group")]),n("label",{staticClass:"avatar",attrs:{for:"groupPicture"}},[n("canvas",{ref:"pictureCanvas",staticClass:"c-pictureCanvas",class:{isHidden:e.$assistant.ephemeral.groupPictureType==="image"}}),n("avatar",{ref:"pictureAvatar",staticClass:"c-pictureAvatar",attrs:{size:"xl",src:"/assets/images/group-avatar-default.png",alt:e.L("Group avatar")}}),n("i18n",{staticClass:"link"},[e._v("Upload an image")]),n("input",{staticClass:"groupPictureInput",class:{error:e.$v.form.groupPicture.$error},attrs:{id:"groupPicture",type:"file",name:"groupPicture",accept:"image/*",placeholder:"http://","data-test":"groupPicture"},on:{change:function(a){return e.fileChange(a.target.files)}}})],1),e.$v.form.groupPicture.$error?n("i18n",{staticClass:"error",attrs:{tag:"p"}},[e._v("The group picture must be a valid url")]):e._e(),n("div",{staticClass:"card"},[n("label",{staticClass:"field"},[n("div",{staticClass:"c-label-container"},[n("i18n",{staticClass:"label"},[e._v("What is the name of your group?")]),e.group.groupName?n("char-length-indicator",{attrs:{"current-length":e.group.groupName.length||0,max:e.config.nameMaxChar,error:e.$v.form.groupName.$error}}):e._e()],1),n("input",{directives:[{name:"error",rawName:"v-error:groupName",arg:"groupName"}],ref:"name",staticClass:"input is-large is-primary",class:{error:e.$v.form.groupName.$error},attrs:{type:"text",name:"groupName",maxlength:e.config.nameMaxChar,"data-test":"groupName"},domProps:{value:e.group.groupName},on:{input:e.updateName,keyup:function(a){return!a.type.indexOf("key")&&e._k(a.keyCode,"enter",13,a.key,"Enter")?null:e.next(a)}}})]),e._t("default")],2)],1)},se=[],ue=function(e){e&&e("data-v-418b4da4_0",{source:".avatar[data-v-418b4da4]{height:10rem;margin:2.5rem auto 2rem auto;text-align:center;display:flex;flex-direction:column;justify-content:space-between;align-items:center}.avatar .link[data-v-418b4da4]{display:inline-block;margin-top:.5rem}.c-pictureCanvas[data-v-418b4da4]{position:absolute;background:var(--text_1);width:8rem;height:8rem;border-radius:50%}.c-pictureCanvas.isHidden[data-v-418b4da4]{opacity:0;pointer-events:none}.groupPictureInput[data-v-418b4da4]{position:absolute;opacity:0}.c-label-container[data-v-418b4da4]{position:relative;width:100%;display:flex;align-items:flex-end;justify-content:space-between}",map:void 0,media:void 0})},ce="data-v-418b4da4",de=void 0,le=!1;function me(e,o,n,a,i,l,r,u,c,d){let t=(typeof n=="function"?n.options:n)||{};t.__file=`style>
`,t.render||(t.render=e.render,t.staticRenderFns=e.staticRenderFns,t._compiled=!0,i&&(t.functional=!0)),t._scopeId=a;{let m;if(o&&(m=r?function(s){o.call(this,d(s,this.$root.$options.shadowRoot))}:function(s){o.call(this,u(s))}),m!==void 0)if(t.functional){let s=t.render;t.render=function(_,p){return m.call(p),s(_,p)}}else{let s=t.beforeCreate;t.beforeCreate=s?[].concat(s,m):[m]}}return t}function I(){let e=I.styles||(I.styles={}),o=typeof navigator<"u"&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());return function(a,i){if(document.querySelector('style[data-vue-ssr-id~="'+a+'"]'))return;let l=o?i.media||"default":a,r=e[l]||(e[l]={ids:[],parts:[],element:void 0});if(!r.ids.includes(a)){let u=i.source,c=r.ids.length;if(r.ids.push(a),i.map&&(u+=`
/*# sourceURL=`+i.map.sources[0]+" */",u+=`
/*# sourceMappingURL=data:application/json;base64,`+btoa(unescape(encodeURIComponent(JSON.stringify(i.map))))+" */"),o&&(r.element=r.element||document.querySelector("style[data-group="+l+"]")),!r.element){let d=document.head||document.getElementsByTagName("head")[0],t=r.element=document.createElement("style");t.type="text/css",i.media&&t.setAttribute("media",i.media),o&&(t.setAttribute("data-group",l),t.setAttribute("data-next-index","0")),d.appendChild(t)}if(o&&(c=parseInt(r.element.getAttribute("data-next-index")),r.element.setAttribute("data-next-index",c+1)),r.element.styleSheet)r.parts.push(u),r.element.styleSheet.cssText=r.parts.filter(Boolean).join(`
`);else{let d=document.createTextNode(u),t=r.element.childNodes;t[c]&&r.element.removeChild(t[c]),t.length?r.element.insertBefore(d,t[c]):r.element.appendChild(d)}}}}var pe=me({render:ae,staticRenderFns:se},ue,ie,ce,le,de,!1,I,void 0,void 0),A=pe;var fe={name:"GroupPurpose",props:{group:{type:Object},$v:{type:Object}},mounted(){this.$refs.purpose.focus()},data(){return{config:{maxChar:g}}},computed:{isFieldError(){return this.$v.form.sharedValues.$error},charLen(){return`${this.group.sharedValues?.length||0}/${g}`}},methods:{update(e){this.$v.form.sharedValues.$touch(),this.$emit("input",{data:{sharedValues:e.target.value}})}}},_e=function(){var e=this,o=e.$createElement,n=e._self._c||o;return n("div",{staticClass:"wrapper"},[n("i18n",{staticClass:"is-title-4 steps-title",attrs:{tag:"h4"}},[e._v("2. Group Purpose")]),n("div",{staticClass:"card"},[n("label",{staticClass:"field c-label"},[n("div",{staticClass:"c-label-container"},[n("i18n",{staticClass:"label"},[e._v("How would you describe your group?")]),n("span",{staticClass:"c-char-len",class:{"is-error":e.isFieldError}},[e._v(e._s(e.charLen))])],1),n("textarea",{directives:[{name:"error",rawName:"v-error:sharedValues",arg:"sharedValues"}],ref:"purpose",staticClass:"textarea c-textarea",class:{error:e.isFieldError},attrs:{name:"sharedValues",placeholder:e.L("Group Purpose"),maxlength:e.config.maxChar},domProps:{value:e.group.sharedValues},on:{input:e.update}}),e.isFieldError?e._e():n("i18n",{staticClass:"helper"},[e._v("This is optional.")])],1),e._t("default")],2)],1)},he=[],ve=function(e){e&&e("data-v-8013e22e_0",{source:".c-label-container[data-v-8013e22e]{position:relative;display:flex;column-gap:.5rem;align-items:flex-end}.c-label-container .label[data-v-8013e22e]{flex-grow:1}.c-label-container .c-char-len[data-v-8013e22e]{display:inline-block;line-height:.875rem;font-size:.75rem;color:var(--text_1);flex-shrink:0;margin-bottom:.625rem}.c-label-container .c-char-len.is-error[data-v-8013e22e]{color:var(--danger_0)}",map:void 0,media:void 0})},ge="data-v-8013e22e",ye=void 0,xe=!1;function Ce(e,o,n,a,i,l,r,u,c,d){let t=(typeof n=="function"?n.options:n)||{};t.__file=`style>
`,t.render||(t.render=e.render,t.staticRenderFns=e.staticRenderFns,t._compiled=!0,i&&(t.functional=!0)),t._scopeId=a;{let m;if(o&&(m=r?function(s){o.call(this,d(s,this.$root.$options.shadowRoot))}:function(s){o.call(this,u(s))}),m!==void 0)if(t.functional){let s=t.render;t.render=function(_,p){return m.call(p),s(_,p)}}else{let s=t.beforeCreate;t.beforeCreate=s?[].concat(s,m):[m]}}return t}function E(){let e=E.styles||(E.styles={}),o=typeof navigator<"u"&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());return function(a,i){if(document.querySelector('style[data-vue-ssr-id~="'+a+'"]'))return;let l=o?i.media||"default":a,r=e[l]||(e[l]={ids:[],parts:[],element:void 0});if(!r.ids.includes(a)){let u=i.source,c=r.ids.length;if(r.ids.push(a),i.map&&(u+=`
/*# sourceURL=`+i.map.sources[0]+" */",u+=`
/*# sourceMappingURL=data:application/json;base64,`+btoa(unescape(encodeURIComponent(JSON.stringify(i.map))))+" */"),o&&(r.element=r.element||document.querySelector("style[data-group="+l+"]")),!r.element){let d=document.head||document.getElementsByTagName("head")[0],t=r.element=document.createElement("style");t.type="text/css",i.media&&t.setAttribute("media",i.media),o&&(t.setAttribute("data-group",l),t.setAttribute("data-next-index","0")),d.appendChild(t)}if(o&&(c=parseInt(r.element.getAttribute("data-next-index")),r.element.setAttribute("data-next-index",c+1)),r.element.styleSheet)r.parts.push(u),r.element.styleSheet.cssText=r.parts.filter(Boolean).join(`
`);else{let d=document.createTextNode(u),t=r.element.childNodes;t[c]&&r.element.removeChild(t[c]),t.length?r.element.insertBefore(d,t[c]):r.element.appendChild(d)}}}}var be=Ce({render:_e,staticRenderFns:he},ve,fe,ge,xe,ye,!1,E,void 0,void 0),P=be;var Se={name:"GroupMincome",components:{Tooltip:W},props:{group:{type:Object},$v:{type:Object}},data(){return{currencies:$,ephemeral:{distributionDayRange:[]}}},beforeMount(){for(let e=1;e<=30;e++)this.ephemeral.distributionDayRange.push(b(S(new Date().setUTCHours(0,0,0,0),e*C)))},mounted(){this.$refs.mincome.focus()},methods:{humanDate:V,update(e){this.$v.form[e.target.name].$touch(),this.$emit("input",{data:{[e.target.name]:e.target.value}})},next(e){this.$v.form[e.target.name].$touch(),this.$v.form[e.target.name].$invalid||this.$emit("next")}}},$e=function(){var e=this,o=e.$createElement,n=e._self._c||o;return n("div",{staticClass:"wrapper"},[n("i18n",{staticClass:"is-title-4 steps-title",attrs:{tag:"h4"}},[e._v("3. Minimum Income")]),n("div",{staticClass:"card"},[n("fieldset",{staticClass:"field"},[n("i18n",{staticClass:"label"},[e._v("What is the minimum monthly income this group is trying to ensure for its members?")]),n("div",{directives:[{name:"error",rawName:"v-error:mincomeAmount",arg:"mincomeAmount"}],staticClass:"selectgroup",class:{error:e.$v.form.mincomeAmount.$error}},[n("input",{ref:"mincome",staticClass:"input",attrs:{inputmode:"decimal",pattern:"[0-9]*",placeholder:"Amount","aria-label":e.L("Amount"),name:"mincomeAmount",step:"1",min:"0",required:""},domProps:{value:e.group.mincomeAmount},on:{input:e.update,keyup:function(a){return!a.type.indexOf("key")&&e._k(a.keyCode,"enter",13,a.key,"Enter")?null:e.next(a)}}}),n("select",{staticClass:"select",attrs:{"aria-label":e.L("Currency"),name:"mincomeCurrency",required:""},domProps:{value:e.group.mincomeCurrency},on:{input:e.update}},e._l(e.currencies,function(a,i){return n("option",{key:i,domProps:{value:i}},[e._v(e._s(a.symbolWithCode))])}),0)]),n("i18n",{staticClass:"helper"},[e._v("This value can be adjusted in the future.")])],1),n("fieldset",{staticClass:"field"},[n("div",{staticClass:"label c-label-tooltip"},[n("i18n",[e._v("On what day should the first payment distribution be calculated?")]),n("tooltip",{attrs:{direction:"bottom-right"}},[n("span",{staticClass:"button is-icon-small"},[n("i",{staticClass:"icon-question-circle"})]),n("template",{slot:"tooltip"},[n("i18n",{attrs:{tag:"p"}},[e._v("Select which day of the month the distribution should be calculated. Every group member will need to update their mincome details before this date to ensure that the algorithm can fairly distribute available funds between group members.")])],1)],2)],1),n("div",{staticClass:"selectbox"},[n("select",{staticClass:"select",attrs:{"aria-label":e.L("Choose your group's distribution date"),name:"distributionDate",required:""},domProps:{value:e.group.distributionDate},on:{change:e.update}},[n("i18n",{attrs:{tag:"option",disabled:"disabled",value:""}},[e._v("Choose your group's distribution date")]),e._l(e.ephemeral.distributionDayRange,function(a,i){return n("option",{key:i,domProps:{value:a}},[e._v(e._s(e.humanDate(a,{month:"long",year:"numeric",day:"numeric"})))])})],2)]),n("i18n",{staticClass:"helper"},[e._v("Payment distribution will be calculated every 30 days.")])],1),e._t("default")],2)],1)},Re=[],Te=function(e){e&&e("data-v-78c5d23b_0",{source:".c-label-tooltip[data-v-78c5d23b]{display:flex;justify-content:space-between}",map:void 0,media:void 0})},Ne="data-v-78c5d23b",Ie=void 0,Ae=!1;function Ee(e,o,n,a,i,l,r,u,c,d){let t=(typeof n=="function"?n.options:n)||{};t.__file=`style>
`,t.render||(t.render=e.render,t.staticRenderFns=e.staticRenderFns,t._compiled=!0,i&&(t.functional=!0)),t._scopeId=a;{let m;if(o&&(m=r?function(s){o.call(this,d(s,this.$root.$options.shadowRoot))}:function(s){o.call(this,u(s))}),m!==void 0)if(t.functional){let s=t.render;t.render=function(_,p){return m.call(p),s(_,p)}}else{let s=t.beforeCreate;t.beforeCreate=s?[].concat(s,m):[m]}}return t}function w(){let e=w.styles||(w.styles={}),o=typeof navigator<"u"&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());return function(a,i){if(document.querySelector('style[data-vue-ssr-id~="'+a+'"]'))return;let l=o?i.media||"default":a,r=e[l]||(e[l]={ids:[],parts:[],element:void 0});if(!r.ids.includes(a)){let u=i.source,c=r.ids.length;if(r.ids.push(a),i.map&&(u+=`
/*# sourceURL=`+i.map.sources[0]+" */",u+=`
/*# sourceMappingURL=data:application/json;base64,`+btoa(unescape(encodeURIComponent(JSON.stringify(i.map))))+" */"),o&&(r.element=r.element||document.querySelector("style[data-group="+l+"]")),!r.element){let d=document.head||document.getElementsByTagName("head")[0],t=r.element=document.createElement("style");t.type="text/css",i.media&&t.setAttribute("media",i.media),o&&(t.setAttribute("data-group",l),t.setAttribute("data-next-index","0")),d.appendChild(t)}if(o&&(c=parseInt(r.element.getAttribute("data-next-index")),r.element.setAttribute("data-next-index",c+1)),r.element.styleSheet)r.parts.push(u),r.element.styleSheet.cssText=r.parts.filter(Boolean).join(`
`);else{let d=document.createTextNode(u),t=r.element.childNodes;t[c]&&r.element.removeChild(t[c]),t.length?r.element.insertBefore(d,t[c]):r.element.appendChild(d)}}}}var Pe=Ee({render:$e,staticRenderFns:Re},Te,Se,Ne,Ae,Ie,!1,w,void 0,void 0),j=Pe;var we={name:"GroupRules",props:{group:{type:Object},$v:{type:Object}},components:{TransitionExpand:H,VotingRulesInput:ee},methods:{setThreshold(e){this.$v.form.ruleThreshold.$touch(),this.$emit("input",{data:{ruleThreshold:e}})}}},je=function(){var e=this,o=e.$createElement,n=e._self._c||o;return n("div",{staticClass:"wrapper",attrs:{"data-test":"rulesStep"}},[n("i18n",{staticClass:"is-title-4 steps-title",attrs:{tag:"h4"}},[e._v("4. Voting System")]),n("div",{staticClass:"card c-card"},[n("fieldset",{staticClass:"c-step"},[n("i18n",{staticClass:"has-text-bold",attrs:{tag:"legend"}},[e._v("Voting on proposals")]),n("i18n",{staticClass:"has-text-1 c-desc",attrs:{tag:"p"}},[e._v("Proposals are how the group makes decisions. You can propose for example, to add or remove members, or to change your group\u2019s mincome value.")]),n("voting-rules-input",{staticClass:"c-input",attrs:{rule:e.group.ruleName,value:e.group.ruleThreshold},on:{update:e.setThreshold}})],1),e._t("default")],2)],1)},ke=[],Oe=function(e){e&&e("data-v-6d3d0f6a_0",{source:".c-card[data-v-6d3d0f6a]{padding:1.5rem 1rem 2.5rem}@media screen and (min-width:769px),print{.c-card[data-v-6d3d0f6a]{padding:1.5rem 1.5rem 2.5rem}}@media screen and (min-width:1200px){.c-card[data-v-6d3d0f6a]{padding:2.5rem}}.c-step[data-v-6d3d0f6a]{margin-bottom:2rem}.c-desc[data-v-6d3d0f6a]{margin-top:.25rem;margin-bottom:1.5rem}",map:void 0,media:void 0})},Ge="data-v-6d3d0f6a",Me=void 0,Ue=!1;function Le(e,o,n,a,i,l,r,u,c,d){let t=(typeof n=="function"?n.options:n)||{};t.__file=`style>
`,t.render||(t.render=e.render,t.staticRenderFns=e.staticRenderFns,t._compiled=!0,i&&(t.functional=!0)),t._scopeId=a;{let m;if(o&&(m=r?function(s){o.call(this,d(s,this.$root.$options.shadowRoot))}:function(s){o.call(this,u(s))}),m!==void 0)if(t.functional){let s=t.render;t.render=function(_,p){return m.call(p),s(_,p)}}else{let s=t.beforeCreate;t.beforeCreate=s?[].concat(s,m):[m]}}return t}function k(){let e=k.styles||(k.styles={}),o=typeof navigator<"u"&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());return function(a,i){if(document.querySelector('style[data-vue-ssr-id~="'+a+'"]'))return;let l=o?i.media||"default":a,r=e[l]||(e[l]={ids:[],parts:[],element:void 0});if(!r.ids.includes(a)){let u=i.source,c=r.ids.length;if(r.ids.push(a),i.map&&(u+=`
/*# sourceURL=`+i.map.sources[0]+" */",u+=`
/*# sourceMappingURL=data:application/json;base64,`+btoa(unescape(encodeURIComponent(JSON.stringify(i.map))))+" */"),o&&(r.element=r.element||document.querySelector("style[data-group="+l+"]")),!r.element){let d=document.head||document.getElementsByTagName("head")[0],t=r.element=document.createElement("style");t.type="text/css",i.media&&t.setAttribute("media",i.media),o&&(t.setAttribute("data-group",l),t.setAttribute("data-next-index","0")),d.appendChild(t)}if(o&&(c=parseInt(r.element.getAttribute("data-next-index")),r.element.setAttribute("data-next-index",c+1)),r.element.styleSheet)r.parts.push(u),r.element.styleSheet.cssText=r.parts.filter(Boolean).join(`
`);else{let d=document.createTextNode(u),t=r.element.childNodes;t[c]&&r.element.removeChild(t[c]),t.length?r.element.insertBefore(d,t[c]):r.element.appendChild(d)}}}}var Fe=Le({render:je,staticRenderFns:ke},Oe,we,Ge,Ue,Me,!1,k,void 0,void 0),O=Fe;var Ve={name:"GroupPrivacy",props:{group:{type:Object}},mounted(){this.$emit("focusref","next")}},Be=function(){var e=this,o=e.$createElement,n=e._self._c||o;return n("div",[n("h1",{staticClass:"is-title-1",attrs:{"data-test":"privacyStep"}},[n("i18n",[e._v("Privacy Settings")])],1),n("p",[n("i18n",[e._v("This step is to be designed. What group privacy settings would you feel more comfortable having control over? Let us know at dunno@groupincome.org!")])],1)])},De=[],qe=void 0,Xe=void 0,We=void 0,ze=!1;function He(e,o,n,a,i,l,r,u,c,d){let t=(typeof n=="function"?n.options:n)||{};return t.__file=`script>
`,t.render||(t.render=e.render,t.staticRenderFns=e.staticRenderFns,t._compiled=!0,i&&(t.functional=!0)),t._scopeId=a,t}var Je=He({render:Be,staticRenderFns:De},qe,Ve,Xe,ze,We,!1,void 0,void 0,void 0),G=Je;var f=U(oe()),Ye={name:"GroupCreationModal",mixins:[te,ne.validationMixin],components:{ModalBaseTemplate:Y,BannerScoped:J,ButtonSubmit:q,GroupName:A,GroupPurpose:P,GroupMincome:j,GroupRules:O,GroupPrivacy:G},methods:{focusRef(e){this.$refs[e].focus()},updateGroupData(e){this.$refs.formMsg&&this.$refs.formMsg.clean(),Object.assign(this.form,e.data)},async submit(){if(this.$v.form.$invalid){this.$refs.formMsg.danger(h("Some information is invalid, please review it and try again."));return}try{this.$refs.formMsg.clean(),await v("gi.app/group/createAndSwitch",{data:{name:this.form.groupName,picture:this.ephemeral.groupPictureFile,sharedValues:this.form.sharedValues,mincomeAmount:B(this.form.mincomeAmount),mincomeCurrency:this.form.mincomeCurrency,ruleName:this.form.ruleName,ruleThreshold:this.form.ruleThreshold,distributionDate:this.form.distributionDate}}),this.$router.push({path:"/pending-approval",query:this.$route.query?.modal==="Prompt"?this.$route.query:void 0})}catch(e){console.error("CreateGroup.vue submit() error:",e),this.$refs.formMsg.danger(e.message)}}},data(){let e=Z[F].defaults.ruleSettings;return{form:{groupName:"",groupPicture:"",sharedValues:"",mincomeAmount:"",mincomeCurrency:"USD",distributionDate:b(S(new Date().setUTCHours(0,0,0,0),3*C)),ruleName:N,ruleThreshold:e[N].threshold},ephemeral:{groupPictureFile:"",groupPictureType:null},config:{steps:["GroupName","GroupPurpose","GroupMincome","GroupRules"]}}},mounted(){this.currentStep!==0&&!this.form.groupName&&this.redirect("GroupName")},validations:{form:{groupName:{[h("Group name is required")]:f.required,[h("Group name cannot exceed {maxchar} characters",{maxchar:x})]:(0,f.maxLength)(x)},groupPicture:{},sharedValues:{[h("Group purpose cannot exceed {maxchar} characters",{maxchar:g})]:(0,f.maxLength)(g)},mincomeAmount:{[h("This field is required")]:f.required,[h("The amount must be a number. (E.g. 100.75)")]:function(e){return $[this.form.mincomeCurrency].validate(e)},[h("Mincome must be greater than 0")]:D,[h("Mincome cannot exceed {max}",{max:T})]:(0,f.maxValue)(T)},mincomeCurrency:{required:f.required},distributionDate:{required:f.required},ruleThreshold:{required:f.required,between:(0,f.between)(0,100)}},steps:{GroupName:["form.groupName","form.groupPicture"],GroupPurpose:["form.sharedValues"],GroupMincome:["form.mincomeAmount","form.mincomeCurrency"],GroupRules:["form.changeThreshold","form.memberApprovalThreshold","form.memberRemovalThreshold"]}}},Ke=function(){var e=this,o=e.$createElement,n=e._self._c||o;return n("modal-base-template",{attrs:{"data-test":"groupCreationModal",fullscreen:!0,a11yTitle:e.L("Create Group")}},[e.currentStep<e.config.steps.length?n("div",{staticClass:"steps"},e._l(e.config.steps,function(a,i){return n("button",{key:i,staticClass:"step",class:[e.currentStep===i?"active":"",e.currentStep<i?"next":""],on:{click:function(l){return e.redirect(a)}}},[e._v(e._s(i+1))])}),0):e._e(),e.currentStep<e.config.steps.length?n("div",{staticClass:"wrapper mobile-steps subtitle"},[n("i18n",{staticClass:"is-subtitle",attrs:{args:{current:e.currentStep+1,max:e.config.steps.length}}},[e._v("Step {current} of {max}")])],1):e._e(),n("transition",{attrs:{name:"fade",mode:"out-in"}},[n(e.content,{tag:"component",attrs:{group:e.form,$v:e.$v},on:{next:e.next,focusref:e.focusRef,input:function(a){return e.updateGroupData(a)}}},[n("banner-scoped",{ref:"formMsg",attrs:{allowA:!0}}),e.currentStep<e.config.steps.length?n("div",{staticClass:"buttons"},[n("button",{staticClass:"is-outlined",attrs:{"data-test":"prevBtn"},on:{click:e.prev}},[e._v(e._s(e.currentStep===0?e.L("Cancel"):e.L("Back")))]),e.currentStep+1<e.config.steps.length?n("button",{ref:"next",staticClass:"is-primary",attrs:{disabled:e.$v.steps[e.content]&&e.$v.steps[e.content].$invalid,"data-test":"nextBtn"},on:{click:e.next}},[e._v(e._s(e.L("Next"))),n("i",{staticClass:"icon-arrow-right is-suffix"})]):n("button-submit",{ref:"finish",staticClass:"is-success",attrs:{"data-test":"finishBtn"},on:{click:e.submit}},[e._v(e._s(e.L("Create Group")))])],1):e._e()],1)],1)],1)},Qe=[],Ze=function(e){e&&e("data-v-97d978e4_0",{source:".steps[data-v-97d978e4]{width:100%;max-width:34rem;margin-top:3.5rem;flex-shrink:0}.wrapper[data-v-97d978e4]{width:100%;max-width:33rem}",map:void 0,media:void 0})},et="data-v-97d978e4",tt=void 0,nt=!1;function rt(e,o,n,a,i,l,r,u,c,d){let t=(typeof n=="function"?n.options:n)||{};t.__file=`style>
`,t.render||(t.render=e.render,t.staticRenderFns=e.staticRenderFns,t._compiled=!0,i&&(t.functional=!0)),t._scopeId=a;{let m;if(o&&(m=r?function(s){o.call(this,d(s,this.$root.$options.shadowRoot))}:function(s){o.call(this,u(s))}),m!==void 0)if(t.functional){let s=t.render;t.render=function(_,p){return m.call(p),s(_,p)}}else{let s=t.beforeCreate;t.beforeCreate=s?[].concat(s,m):[m]}}return t}function M(){let e=M.styles||(M.styles={}),o=typeof navigator<"u"&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());return function(a,i){if(document.querySelector('style[data-vue-ssr-id~="'+a+'"]'))return;let l=o?i.media||"default":a,r=e[l]||(e[l]={ids:[],parts:[],element:void 0});if(!r.ids.includes(a)){let u=i.source,c=r.ids.length;if(r.ids.push(a),i.map&&(u+=`
/*# sourceURL=`+i.map.sources[0]+" */",u+=`
/*# sourceMappingURL=data:application/json;base64,`+btoa(unescape(encodeURIComponent(JSON.stringify(i.map))))+" */"),o&&(r.element=r.element||document.querySelector("style[data-group="+l+"]")),!r.element){let d=document.head||document.getElementsByTagName("head")[0],t=r.element=document.createElement("style");t.type="text/css",i.media&&t.setAttribute("media",i.media),o&&(t.setAttribute("data-group",l),t.setAttribute("data-next-index","0")),d.appendChild(t)}if(o&&(c=parseInt(r.element.getAttribute("data-next-index")),r.element.setAttribute("data-next-index",c+1)),r.element.styleSheet)r.parts.push(u),r.element.styleSheet.cssText=r.parts.filter(Boolean).join(`
`);else{let d=document.createTextNode(u),t=r.element.childNodes;t[c]&&r.element.removeChild(t[c]),t.length?r.element.insertBefore(d,t[c]):r.element.appendChild(d)}}}}var ot=rt({render:Ke,staticRenderFns:Qe},Ze,Ye,et,nt,tt,!1,M,void 0,void 0),Bt=ot;export{Bt as default};
//# sourceMappingURL=GroupCreationModal-EINCIFKK-cached.js.map
