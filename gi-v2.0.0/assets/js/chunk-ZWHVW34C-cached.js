import{a as M}from"./chunk-KRTYB7RO-cached.js";import{a as R}from"./chunk-WYFJ56Q7-cached.js";import{b as S}from"./chunk-YGZ33QYP-cached.js";import{a as D}from"./chunk-WMVHT3GJ-cached.js";import{b as I}from"./chunk-SZPI64OI-cached.js";import{a as w}from"./chunk-MEHASGB7-cached.js";import{u as g,w as C}from"./chunk-M3EDVPDK-cached.js";import{b as h}from"./chunk-33M5GGRR-cached.js";import{a as p}from"./chunk-OMOH7TRL-cached.js";import{b as x,d as f}from"./chunk-WBBXU2FL-cached.js";var A={computed:{...f(["currentChatRoomId","isGroupDirectMessage","ourGroupDirectMessages","ourIdentityContractId","ourGroupDirectMessageFromUserIds"]),...x(["currentGroupId"])},methods:{async createDirectMessage(e){typeof e=="string"&&(e=[e]);try{let o=this.ourIdentityContractId,n=this.currentGroupId,i;return await p("gi.actions/identity/createDirectMessage",{contractID:o,data:{currentGroupId:n,memberIDs:e},hooks:{prepublish(r){i=r.contractID(),p("state/vuex/commit","setPendingChatRoomId",{chatRoomID:i,groupID:n})}}}),i}catch(o){console.error("[DMMixin.js] Failed to create a new chatroom",o),await p("gi.ui/prompt",{heading:h("Failed to create a new chatroom"),question:o.message,primaryButton:h("Close")})}},async setDMVisibility(e,o){try{await p("gi.actions/identity/setDirectMessageVisibility",{contractID:this.ourIdentityContractId,data:{contractID:e,visible:o}})}catch(n){await p("gi.ui/prompt",{heading:h("Failed to change the chatroom settings"),question:n.message,primaryButton:h("Close")})}},redirect(e){this.$router.push({name:"GroupChatConversation",params:{chatRoomID:e}}).catch(S)}}},P=A;var G={name:"UserName",props:{contractID:String},computed:{...f(["globalProfile","usernameFromID"]),username(){return this.usernameFromID(this.contractID)},displayName(){return this.globalProfile(this.contractID).displayName}}},N=function(){var e=this,o=e.$createElement,n=e._self._c||o;return n("div",{staticClass:"c-name",attrs:{"data-test":"username"}},[n("strong",{staticClass:"has-ellipsis"},[e._v(e._s(e.displayName?e.displayName:"@"+e.username))]),e.displayName?n("div",{staticClass:"c-display-name",attrs:{"data-test":"profileName"}},[e._v("@"+e._s(e.username))]):e._e()])},T=[],$=function(e){e&&e("data-v-8f94e382_0",{source:".c-name[data-v-8f94e382]{display:flex;flex-direction:column;padding-left:1rem;font-size:.875rem;flex-grow:1;width:calc(100% - 4.5rem)}.c-name strong[data-v-8f94e382]{position:relative;width:100%;font-size:1.5rem;color:var(--text_0);font-family:Poppins}@media screen and (max-width:768px){.c-name strong[data-v-8f94e382]{width:calc(100% - 2.75rem)}}.c-display-name[data-v-8f94e382]{color:var(--text_1)}",map:void 0,media:void 0})},F="data-v-8f94e382",U=void 0,O=!1;function j(e,o,n,i,r,u,a,d,c,l){let t=(typeof n=="function"?n.options:n)||{};t.__file=`style>
`,t.render||(t.render=e.render,t.staticRenderFns=e.staticRenderFns,t._compiled=!0,r&&(t.functional=!0)),t._scopeId=i;{let m;if(o&&(m=a?function(s){o.call(this,l(s,this.$root.$options.shadowRoot))}:function(s){o.call(this,d(s))}),m!==void 0)if(t.functional){let s=t.render;t.render=function(v,_){return m.call(_),s(v,_)}}else{let s=t.beforeCreate;t.beforeCreate=s?[].concat(s,m):[m]}}return t}function y(){let e=y.styles||(y.styles={}),o=typeof navigator<"u"&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());return function(i,r){if(document.querySelector('style[data-vue-ssr-id~="'+i+'"]'))return;let u=o?r.media||"default":i,a=e[u]||(e[u]={ids:[],parts:[],element:void 0});if(!a.ids.includes(i)){let d=r.source,c=a.ids.length;if(a.ids.push(i),r.map&&(d+=`
/*# sourceURL=`+r.map.sources[0]+" */",d+=`
/*# sourceMappingURL=data:application/json;base64,`+btoa(unescape(encodeURIComponent(JSON.stringify(r.map))))+" */"),o&&(a.element=a.element||document.querySelector("style[data-group="+u+"]")),!a.element){let l=document.head||document.getElementsByTagName("head")[0],t=a.element=document.createElement("style");t.type="text/css",r.media&&t.setAttribute("media",r.media),o&&(t.setAttribute("data-group",u),t.setAttribute("data-next-index","0")),l.appendChild(t)}if(o&&(c=parseInt(a.element.getAttribute("data-next-index")),a.element.setAttribute("data-next-index",c+1)),a.element.styleSheet)a.parts.push(d),a.element.styleSheet.cssText=a.parts.filter(Boolean).join(`
`);else{let l=document.createTextNode(d),t=a.element.childNodes;t[c]&&a.element.removeChild(t[c]),t.length?a.element.insertBefore(l,t[c]):a.element.appendChild(l)}}}}var B=j({render:N,staticRenderFns:T},$,G,F,O,U,!1,y,void 0,void 0),k=B;var L={name:"ProfileCardContent",mixins:[P],components:{AvatarUser:R,ModalClose:w,UserName:k,Tooltip:M,ButtonSubmit:D},props:{contractID:String,onPostCtaClick:Function,deactivated:{type:Boolean,default:!1}},computed:{...f(["groupProfiles","currentGroupOwnerID","globalProfile","groupShouldPropose","ourContributionSummary","ourGroupDirectMessageFromUserIds","ourIdentityContractId"]),profile(){return this.globalProfile(this.contractID)},userGroupProfile(){return this.groupProfiles[this.contractID]},isSelf(){return this.contractID===this.ourIdentityContractId},username(){return this.profile?.username||this.contractID},isGroupCreator(){return this.ourIdentityContractId===this.currentGroupOwnerID},isActiveGroupMember(){return this.userGroupProfile?.status===I.ACTIVE},paymentMethods(){return this.userGroupProfile?.paymentMethods},hasIncomeDetails(){return!!this.userGroupProfile?.incomeDetailsType},receivingMonetary(){return!!this.ourContributionSummary.receivingMonetary}},methods:{openModal(e,o){this.deactivated||(p("okTurtles.events/emit",g,e,o),this.onPostCtaClick&&this.onPostCtaClick())},onRemoveMemberClick(){this.deactivated||(p("okTurtles.events/emit",this.$route.query?.modal==="GroupMembersAllModal"?C:g,"RemoveMember",{memberID:this.contractID}),this.onPostCtaClick&&this.onPostCtaClick())},async sendMessage(){let e=this.ourGroupDirectMessageFromUserIds(this.contractID);if(e)this.ourGroupDirectMessages[e].visible?this.redirect(e):this.setDMVisibility(e,!0);else{let o=await this.createDirectMessage(this.contractID);o&&this.redirect(o)}this.onPostCtaClick&&this.onPostCtaClick()}}},V=function(){var e=this,o=e.$createElement,n=e._self._c||o;return n("div",{staticClass:"card c-profile",attrs:{role:"dialog","data-test":"memberProfileCard","aria-label":e.L("{username} profile",{username:e.username})}},[n("div",{staticClass:"c-identity",class:{"not-group-member":!e.isActiveGroupMember}},[n("avatar-user",{attrs:{contractID:e.contractID,size:"lg"}}),n("user-name",{attrs:{contractID:e.contractID}})],1),e.isActiveGroupMember?e._e():n("i18n",{staticClass:"has-text-1",attrs:{tag:"p"}},[e._v("No longer a member of the group")]),e.profile.bio?n("p",{staticClass:"c-bio"},[e._v(e._s(e.profile.bio)),e.isSelf?n("i18n",{staticClass:"c-bio-link is-unstyled link",attrs:{tag:"button","data-test":"linkEditBio"},on:{click:function(i){return e.openModal("UserSettingsModal")}}},[e._v("Edit bio")]):e._e()],1):e.isSelf&&e.hasIncomeDetails?n("i18n",{staticClass:"button is-small is-outlined c-bio-button",attrs:{tag:"button","data-test":"buttonEditBio"},on:{click:function(i){return e.openModal("UserSettingsModal")}}},[e._v("Add a bio")]):e._e(),e.hasIncomeDetails?n("div",{attrs:{"data-test":"profilePaymentMethods"}},[n("ul",{staticClass:"c-payment-list"},e._l(e.paymentMethods,function(i,r){return n("li",{staticClass:"c-payment-item",attrs:{"data-test":"profilePaymentMethod"}},[n("span",{staticClass:"c-payment-type has-text-0 has-text-bold"},[e._v(e._s(i.name))]),n("span",{staticClass:"has-text-1"},[e._v(e._s(i.value))])])}),0),e.isSelf&&e.receivingMonetary?n("i18n",{staticClass:"link",attrs:{tag:"button","data-test":"linkEditPayment"},on:{click:function(i){return e.openModal("incomeDetails")}}},[e._v("Edit payment info")]):e._e()],1):e.isSelf?n("div",{staticClass:"c-add-payment"},[n("i18n",{staticClass:"has-text-1",attrs:{tag:"p"}},[e._v("Help other users send monthly contributions your way by adding your payment information.")]),n("i18n",{staticClass:"button c-add-payment-button",attrs:{tag:"button","data-test":"buttonAddPayment"},on:{click:function(i){return e.openModal("incomeDetails")}}},[e._v("Add payment information")])],1):e._e(),e.isSelf?e._e():n("div",{staticClass:"buttons"},[n("button-submit",{staticClass:"is-outlined is-small",attrs:{type:"button","data-test":"buttonSendMessage"},on:{click:e.sendMessage}},[n("i18n",[e._v("Send message")])],1),e.groupShouldPropose||e.isGroupCreator?n("i18n",{staticClass:"button is-outlined is-small",attrs:{tag:"button","data-test":"buttonRemoveMember"},on:{click:function(i){return i.stopPropagation(),e.onRemoveMemberClick(i)}}},[e._v("Remove member")]):e._e()],1),n("modal-close",{staticClass:"c-close",attrs:{"aria-label":e.L("Close profile")},on:{close:function(i){return e.$emit("modal-close")}}})],1)},q=[],z=function(e){e&&e("data-v-a20e2ad8_0",{source:".card[data-v-a20e2ad8]{padding:1rem 1.5rem 1.5rem 1.5rem;color:var(--text_1);max-width:100vw;width:24.3rem;box-shadow:0 .5rem 1.25rem rgba(54,54,54,.3)}.card[data-v-a20e2ad8]:last-child{margin-bottom:0}@media screen and (max-width:768px){.card[data-v-a20e2ad8]{box-shadow:none;width:100vw;padding-bottom:4rem}}.c-profile[data-v-a20e2ad8]{position:relative;display:flex;flex-direction:column}.is-active .c-profile[data-v-a20e2ad8]{animation:zoom .1s both cubic-bezier(.165,.84,.44,1)}@media screen and (max-width:768px){.is-active .c-profile[data-v-a20e2ad8]{animation-name:enterFromBottom}}.c-identity[data-v-a20e2ad8]{display:flex;align-items:center;padding-bottom:1.5rem}.not-group-member[data-v-a20e2ad8]{filter:saturate(.3)}.c-bio-button[data-v-a20e2ad8]{width:100%;margin-bottom:.5rem}.c-bio-link[data-v-a20e2ad8]{margin-left:.3rem}.c-payment-list[data-v-a20e2ad8]{margin-top:1rem}.c-payment-item[data-v-a20e2ad8]{margin-bottom:.5rem}.c-payment-type[data-v-a20e2ad8]{padding-right:.5rem;user-select:none}.c-add-payment-button[data-v-a20e2ad8]{margin-top:1.5rem;width:100%}.c-bio+.c-add-payment[data-v-a20e2ad8]{margin-top:2rem}.buttons[data-v-a20e2ad8]{margin-top:1rem}.buttons .is-outlined[data-v-a20e2ad8]{width:calc(50% - .5rem)}.c-close[data-v-a20e2ad8]{position:absolute;left:calc(100vw - 4rem);top:1.5rem}@media screen and (min-width:769px),print{.c-close[data-v-a20e2ad8]{left:auto;right:1rem;opacity:0;pointer-events:none}.c-close[data-v-a20e2ad8]:focus{opacity:1}}",map:void 0,media:void 0})},X="data-v-a20e2ad8",J=void 0,W=!1;function H(e,o,n,i,r,u,a,d,c,l){let t=(typeof n=="function"?n.options:n)||{};t.__file=`style>
`,t.render||(t.render=e.render,t.staticRenderFns=e.staticRenderFns,t._compiled=!0,r&&(t.functional=!0)),t._scopeId=i;{let m;if(o&&(m=a?function(s){o.call(this,l(s,this.$root.$options.shadowRoot))}:function(s){o.call(this,d(s))}),m!==void 0)if(t.functional){let s=t.render;t.render=function(v,_){return m.call(_),s(v,_)}}else{let s=t.beforeCreate;t.beforeCreate=s?[].concat(s,m):[m]}}return t}function b(){let e=b.styles||(b.styles={}),o=typeof navigator<"u"&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());return function(i,r){if(document.querySelector('style[data-vue-ssr-id~="'+i+'"]'))return;let u=o?r.media||"default":i,a=e[u]||(e[u]={ids:[],parts:[],element:void 0});if(!a.ids.includes(i)){let d=r.source,c=a.ids.length;if(a.ids.push(i),r.map&&(d+=`
/*# sourceURL=`+r.map.sources[0]+" */",d+=`
/*# sourceMappingURL=data:application/json;base64,`+btoa(unescape(encodeURIComponent(JSON.stringify(r.map))))+" */"),o&&(a.element=a.element||document.querySelector("style[data-group="+u+"]")),!a.element){let l=document.head||document.getElementsByTagName("head")[0],t=a.element=document.createElement("style");t.type="text/css",r.media&&t.setAttribute("media",r.media),o&&(t.setAttribute("data-group",u),t.setAttribute("data-next-index","0")),l.appendChild(t)}if(o&&(c=parseInt(a.element.getAttribute("data-next-index")),a.element.setAttribute("data-next-index",c+1)),a.element.styleSheet)a.parts.push(d),a.element.styleSheet.cssText=a.parts.filter(Boolean).join(`
`);else{let l=document.createTextNode(d),t=a.element.childNodes;t[c]&&a.element.removeChild(t[c]),t.length?a.element.insertBefore(l,t[c]):a.element.appendChild(l)}}}}var K=H({render:V,staticRenderFns:q},z,L,X,W,J,!1,b,void 0,void 0),fe=K;export{P as a,fe as b};
//# sourceMappingURL=chunk-ZWHVW34C-cached.js.map
