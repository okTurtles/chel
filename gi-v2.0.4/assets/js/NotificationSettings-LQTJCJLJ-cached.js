import{a as C}from"./chunk-SXKMOEKE-cached.js";import{b as v,c as y}from"./chunk-6XMQ6J6P-cached.js";import"./chunk-NAVF63QR-cached.js";import{n as b}from"./chunk-VUYUNB2W-cached.js";import{b as f}from"./chunk-QVCKPSEU-cached.js";import"./chunk-OMOH7TRL-cached.js";import{c as _}from"./chunk-WBBXU2FL-cached.js";import"./chunk-XMZXE55N-cached.js";var k={name:"NotificationVolume",components:{SliderContinuous:C},data(){return{config:{sliderMin:0,sliderMax:100,sliderUnit:"%"},ephemeral:{volume:100}}},computed:{volumeFromStore(){return this.$store.getters.notificationVolume??1}},methods:{..._(["setNotificationVolume"]),handleVolumeUpdate(e){this.ephemeral.volume=e.target.value,this.debouncedPostVolumeChange()},debouncedPostVolumeChange:b(function(){let e=this.ephemeral.volume/100,n=this.$refs.exampleAudio;n.pause(),n.currentTime=0,n.volume=e,setTimeout(()=>{n.play()},10),this.setNotificationVolume(e)},350)},created(){this.ephemeral.volume=Math.round(this.volumeFromStore*100)},mounted(){this.$refs.exampleAudio.playbackRate=1.25,this.$refs.exampleAudio.volume=this.volumeFromStore}},w=function(){var e=this,n=e.$createElement,o=e._self._c||n;return o("div",{staticClass:"c-notification-volume"},[o("i18n",{staticClass:"c-title"},[e._v("Volume")]),o("div",{staticClass:"c-volume-slider-container"},[o("slider-continuous",{staticClass:"c-volume-slider",attrs:{uid:"notification-volume",min:e.config.sliderMin,max:e.config.sliderMax,unit:e.config.sliderUnit,hideText:!0,value:e.ephemeral.volume},on:{input:e.handleVolumeUpdate}}),o("div",{staticClass:"c-volume-value"},[e._v(e._s(e.ephemeral.volume)+e._s(e.config.sliderUnit))])],1),o("audio",{ref:"exampleAudio",attrs:{src:"/assets/audio/msg-received.mp3",type:"audio/mpeg"}})],1)},R=[],E=function(e){e&&e("data-v-36685c60_0",{source:".c-notification-volume[data-v-36685c60]{position:relative}.c-title[data-v-36685c60]{font-size:.875rem;font-weight:700}.c-volume-slider-container[data-v-36685c60]{position:relative;display:flex;align-items:flex-end;column-gap:.5rem}.c-volume-slider-container .c-volume-slider[data-v-36685c60]{flex-grow:1}.c-volume-slider-container .c-volume-slider[data-v-36685c60]  .marks{margin-top:1rem}.c-volume-slider-container .c-volume-value[data-v-36685c60]{position:relative;font-size:.875rem;color:var(--text_1);flex-shrink:0}",map:void 0,media:void 0})},V="data-v-36685c60",I=void 0,A=!1;function T(e,n,o,s,a,l,i,d,c,u){let t=(typeof o=="function"?o.options:o)||{};t.__file=`style>
`,t.render||(t.render=e.render,t.staticRenderFns=e.staticRenderFns,t._compiled=!0,a&&(t.functional=!0)),t._scopeId=s;{let m;if(n&&(m=i?function(r){n.call(this,u(r,this.$root.$options.shadowRoot))}:function(r){n.call(this,d(r))}),m!==void 0)if(t.functional){let r=t.render;t.render=function(h,p){return m.call(p),r(h,p)}}else{let r=t.beforeCreate;t.beforeCreate=r?[].concat(r,m):[m]}}return t}function g(){let e=g.styles||(g.styles={}),n=typeof navigator<"u"&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());return function(s,a){if(document.querySelector('style[data-vue-ssr-id~="'+s+'"]'))return;let l=n?a.media||"default":s,i=e[l]||(e[l]={ids:[],parts:[],element:void 0});if(!i.ids.includes(s)){let d=a.source,c=i.ids.length;if(i.ids.push(s),a.map&&(d+=`
/*# sourceURL=`+a.map.sources[0]+" */",d+=`
/*# sourceMappingURL=data:application/json;base64,`+btoa(unescape(encodeURIComponent(JSON.stringify(a.map))))+" */"),n&&(i.element=i.element||document.querySelector("style[data-group="+l+"]")),!i.element){let u=document.head||document.getElementsByTagName("head")[0],t=i.element=document.createElement("style");t.type="text/css",a.media&&t.setAttribute("media",a.media),n&&(t.setAttribute("data-group",l),t.setAttribute("data-next-index","0")),u.appendChild(t)}if(n&&(c=parseInt(i.element.getAttribute("data-next-index")),i.element.setAttribute("data-next-index",c+1)),i.element.styleSheet)i.parts.push(d),i.element.styleSheet.cssText=i.parts.filter(Boolean).join(`
`);else{let u=document.createTextNode(d),t=i.element.childNodes;t[c]&&i.element.removeChild(t[c]),t.length?i.element.insertBefore(u,t[c]):i.element.appendChild(u)}}}}var $=T({render:w,staticRenderFns:R},E,k,V,A,I,!1,g,void 0,void 0),N=$;var j={name:"NotificationSettings",components:{NotificationVolume:N},data(){return{pushNotificationSupported:!1,pushNotificationGranted:null,cancelListener:()=>{},checkboxValue:!1}},beforeMount(){if(typeof Notification!="function"||typeof PushManager!="function"||!navigator.serviceWorker){this.pushNotificationGranted=!1;return}this.pushNotificationSupported=!0;let e=s=>{let a=null;s==="granted"?a=!0:s==="denied"&&(a=!1),a!==this.pushNotificationGranted&&(this.pushNotificationGranted=a,this.checkboxValue=this.notificationEnabled===!0&&a,console.info("[NotifSettings] handler called with:",s,"and this.notificationsEnabled=",this.notificationEnabled))},n=()=>{e(Notification.permission);let s=setInterval(()=>{e(Notification.permission)},500);this.cancelListener=()=>clearInterval(s)};!(typeof navigator=="object"&&navigator.vendor==="Apple Computer, Inc.")&&typeof navigator.permissions=="object"&&typeof navigator.permissions.query=="function"?navigator.permissions.query({name:"notifications"}).then(s=>{let a=()=>{let l=s.state==="prompt"&&Notification.permission!=="default"?Notification.permission:s.state;e(l)};a(),s.addEventListener("change",a,!1),this.cancelListener=()=>s.removeEventListener("change",a,!1)},n):n()},destroyed(){this.cancelListener()},computed:{notificationEnabled(){return this.$store.state.settings.notificationEnabled},notificationsToggleDisabled(){return!this.pushNotificationSupported||!this.pushNotificationGranted&&this.notificationEnabled}},methods:{..._(["setNotificationEnabled"]),async handleNotificationSettings(e){if(typeof Notification!="function")return;let n=Notification.permission,o=()=>{this.$nextTick(()=>{this.checkboxValue=!1})};if(n==="default")if(n=await v(),n){if(n!=="granted")return o()}else return alert(f("There was a problem requesting notifications permission")),o();else if(n==="denied")if(n=await v(),n){if(n!=="granted")return alert(f("Try granting notifications permissions in your browser settings first")),o()}else return alert(f("There was a problem requesting notifications permission")),o();else n==="granted"&&this.notificationEnabled&&(n="denied");let s=n==="granted";this.setNotificationEnabled(s),s&&y({title:f("Congratulations"),body:f("You have granted browser notification!")})}}},U=function(){var e=this,n=e.$createElement,o=e._self._c||n;return o("div",{staticClass:"settings-container"},[o("section",{staticClass:"card"},[o("i18n",{staticClass:"is-title-3 c-title",attrs:{tag:"h2"}},[e._v("Browser notifications")]),o("div",{staticClass:"c-subcontent"},[o("div",{staticClass:"c-text-content"},[o("i18n",{staticClass:"c-smaller-title",attrs:{tag:"h3"}},[e._v("Allow browser notifications")]),o("i18n",{staticClass:"c-description",attrs:{tag:"p"}},[e._v("Get notifications to find out what's going on when you're not on Group Income. You can turn them off anytime.")]),o("p",[e.pushNotificationSupported?e.pushNotificationGranted===!1?o("i18n",{staticClass:"has-text-danger",attrs:{tag:"strong"}},[e._v("Push notifications are disabled because your browser settings have disabled them.")]):e._e():o("i18n",{staticClass:"c-description",attrs:{tag:"strong"}},[e._v("Your browser doesn't support push notifications")])],1)],1),o("div",{staticClass:"switch-wrapper"},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.checkboxValue,expression:"checkboxValue"}],staticClass:"switch",attrs:{type:"checkbox",name:"switch"},domProps:{checked:Array.isArray(e.checkboxValue)?e._i(e.checkboxValue,null)>-1:e.checkboxValue},on:{click:e.handleNotificationSettings,change:function(s){var a=e.checkboxValue,l=s.target,i=!!l.checked;if(Array.isArray(a)){var d=null,c=e._i(a,d);l.checked?c<0&&(e.checkboxValue=a.concat([d])):c>-1&&(e.checkboxValue=a.slice(0,c).concat(a.slice(c+1)))}else e.checkboxValue=i}}})])]),o("notification-volume")],1)])},L=[],F=function(e){e&&e("data-v-3569c8a2_0",{source:".settings-container[data-v-3569c8a2]{width:100%}@media screen and (min-width:1200px){.settings-container[data-v-3569c8a2]{padding-top:1.5rem}}.settings-container .c-title[data-v-3569c8a2]{margin-bottom:2rem}.c-subcontent[data-v-3569c8a2]{border:none;display:flex;justify-content:space-between;column-gap:1rem;margin-bottom:2.5rem}.c-subcontent[data-v-3569c8a2]:last-child{margin-bottom:1.5rem}.c-smaller-title[data-v-3569c8a2]{font-size:.875rem;font-weight:700}.c-description[data-v-3569c8a2]{margin-top:.125rem;font-size:.875rem;color:var(--text_1)}.c-divider[data-v-3569c8a2]{margin:-.5rem -1rem 1.5rem -1rem;border:solid 1px var(--general_1)}@media screen and (min-width:769px),print{.c-divider[data-v-3569c8a2]{margin:-.5rem -1.5rem 1.5rem -1.5rem}}@media screen and (min-width:1200px){.c-divider[data-v-3569c8a2]{margin:-.5rem -2.5rem 1.5rem -2.5rem}}.c-name[data-v-3569c8a2]{color:var(--text_1);text-transform:uppercase;font-size:.75rem;margin-top:-1rem;margin-bottom:1.5rem}",map:void 0,media:void 0})},M="data-v-3569c8a2",q=void 0,G=!1;function O(e,n,o,s,a,l,i,d,c,u){let t=(typeof o=="function"?o.options:o)||{};t.__file=`style>
`,t.render||(t.render=e.render,t.staticRenderFns=e.staticRenderFns,t._compiled=!0,a&&(t.functional=!0)),t._scopeId=s;{let m;if(n&&(m=i?function(r){n.call(this,u(r,this.$root.$options.shadowRoot))}:function(r){n.call(this,d(r))}),m!==void 0)if(t.functional){let r=t.render;t.render=function(h,p){return m.call(p),r(h,p)}}else{let r=t.beforeCreate;t.beforeCreate=r?[].concat(r,m):[m]}}return t}function x(){let e=x.styles||(x.styles={}),n=typeof navigator<"u"&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());return function(s,a){if(document.querySelector('style[data-vue-ssr-id~="'+s+'"]'))return;let l=n?a.media||"default":s,i=e[l]||(e[l]={ids:[],parts:[],element:void 0});if(!i.ids.includes(s)){let d=a.source,c=i.ids.length;if(i.ids.push(s),a.map&&(d+=`
/*# sourceURL=`+a.map.sources[0]+" */",d+=`
/*# sourceMappingURL=data:application/json;base64,`+btoa(unescape(encodeURIComponent(JSON.stringify(a.map))))+" */"),n&&(i.element=i.element||document.querySelector("style[data-group="+l+"]")),!i.element){let u=document.head||document.getElementsByTagName("head")[0],t=i.element=document.createElement("style");t.type="text/css",a.media&&t.setAttribute("media",a.media),n&&(t.setAttribute("data-group",l),t.setAttribute("data-next-index","0")),u.appendChild(t)}if(n&&(c=parseInt(i.element.getAttribute("data-next-index")),i.element.setAttribute("data-next-index",c+1)),i.element.styleSheet)i.parts.push(d),i.element.styleSheet.cssText=i.parts.filter(Boolean).join(`
`);else{let u=document.createTextNode(d),t=i.element.childNodes;t[c]&&i.element.removeChild(t[c]),t.length?i.element.insertBefore(u,t[c]):i.element.appendChild(u)}}}}var z=O({render:U,staticRenderFns:L},F,j,M,G,q,!1,x,void 0,void 0),K=z;export{K as default};
//# sourceMappingURL=NotificationSettings-LQTJCJLJ-cached.js.map
