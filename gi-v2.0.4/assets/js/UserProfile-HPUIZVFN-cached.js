import{a as S}from"./chunk-UZJ7R3QQ-cached.js";import"./chunk-XK3SURHI-cached.js";import"./chunk-WP4ONFFS-cached.js";import"./chunk-TMYX4GL6-cached.js";import"./chunk-4XLIKA67-cached.js";import{a as I}from"./chunk-LIW6QCF4-cached.js";import{a as x}from"./chunk-WMVHT3GJ-cached.js";import{a as N}from"./chunk-XHZPFS4B-cached.js";import{c as C}from"./chunk-6P74MMKF-cached.js";import{b as g}from"./chunk-VUYUNB2W-cached.js";import"./chunk-SZPI64OI-cached.js";import{a as k}from"./chunk-FTWBMR5D-cached.js";import{v as _}from"./chunk-TEH4GFTX-cached.js";import{b as p}from"./chunk-QVCKPSEU-cached.js";import{a as f}from"./chunk-OMOH7TRL-cached.js";import{b,d as y}from"./chunk-WBBXU2FL-cached.js";import{e as w}from"./chunk-XMZXE55N-cached.js";var R=w(k());var $={name:"UserProfile",mixins:[R.validationMixin,N],components:{AvatarUpload:S,BannerScoped:C,ButtonSubmit:x,CharLengthIndicator:I},data(){let e=g(this.$store.getters.currentIdentityState.attributes||{});return{form:{displayName:e.displayName,bio:e.bio},config:{bioMaxChar:500,displayNameMaxChar:80}}},validations:{form:{displayName:{[p("Reached character limit.")]:e=>!e||Number(e.length)<=80},bio:{[p("Reached character limit.")]:e=>!e||Number(e.length)<=500}}},computed:{...b(["loggedIn"]),...y(["ourUsername","currentIdentityState"]),attributes(){return this.currentIdentityState.attributes||{}},sbpParams(){return{selector:"gi.actions/identity/setAttributes",contractID:this.loggedIn.identityContractID,key:"picture"}}},methods:{openModal(e){return f("okTurtles.events/emit",_,e),!1},async saveProfile(){this.$refs.formMsg.clean();let e={};for(let r in this.form)this.form[r]!==this.attributes[r]&&(e[r]=this.form[r]);if(Object.keys(e).length)try{await f("gi.actions/identity/setAttributes",{data:e,contractID:this.loggedIn.identityContractID}),this.$refs.formMsg.success(p("Your changes were saved!"))}catch(r){console.error("UserProfile saveProfile() error:",r),this.$refs.formMsg.danger(r.message)}},handleDeleteAccount(){f("okTurtles.events/emit",_,"AccountRemovalModal")}}},P=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"settings-container"},[t("span",{staticClass:"c-username"},[e._v("@"+e._s(e.ourUsername))]),t("avatar-upload",{attrs:{avatar:e.attributes.picture,sbpParams:e.sbpParams,"avatar-type":"user"}}),t("section",{staticClass:"card"},[t("form",{on:{submit:function(i){i.preventDefault()}}},[t("label",{staticClass:"field"},[t("div",{staticClass:"c-display-name-label-container"},[t("i18n",{staticClass:"label"},[e._v("Display Name")]),e.form.displayName?t("char-length-indicator",{attrs:{"current-length":e.form.displayName.length||0,max:e.config.displayNameMaxChar,error:e.$v.form.displayName.$error}}):e._e()],1),t("input",{directives:[{name:"model",rawName:"v-model",value:e.form.displayName,expression:"form.displayName"}],staticClass:"input",attrs:{name:"displayName",type:"text",maxlength:e.config.displayNameMaxChar,placeholder:"Name","data-test":"displayName"},domProps:{value:e.form.displayName},on:{input:function(i){i.target.composing||e.$set(e.form,"displayName",i.target.value)}}}),t("i18n",{staticClass:"helper"},[e._v("This is how others will see your name accross the platform.")])],1),t("label",{staticClass:"field"},[t("div",{staticClass:"c-bio-label-container"},[t("i18n",{staticClass:"label"},[e._v("Bio")]),e.form.bio?t("char-length-indicator",{attrs:{"current-length":e.form.bio.length||0,max:e.config.bioMaxChar,error:e.$v.form.bio.$error}}):e._e()],1),t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.form.bio,expression:"form.bio"}],staticClass:"textarea",class:{error:e.$v.form.bio.$error},attrs:{name:"bio",maxlength:e.config.bioMaxChar,placeholder:"Bio","data-test":"bio"},domProps:{value:e.form.bio},on:{input:function(i){i.target.composing||e.$set(e.form,"bio",i.target.value)}}})]),t("label",{staticClass:"field"},[t("i18n",{staticClass:"label"},[e._v("Password")]),t("div",{staticClass:"fake-password",attrs:{"aria-hidden":"true"}},[e._v("**********")]),t("i18n",{staticClass:"link",attrs:{tag:"button",type:"button","data-test":"passwordBtn"},on:{click:function(i){return i.preventDefault(),e.openModal("PasswordModal")}}},[e._v("Update Password")])],1),t("banner-scoped",{ref:"formMsg",attrs:{"data-test":"profileMsg"}}),t("div",{staticClass:"buttons"},[t("button-submit",{staticClass:"is-success",attrs:{"data-test":"saveAccount"},on:{click:e.saveProfile}},[e._v(e._s(e.L("Save account changes")))])],1)],1)]),t("section",{staticClass:"card"},[t("form",{attrs:{name:"DeleteProfileForm"},on:{submit:function(i){i.preventDefault()}}},[t("i18n",{staticClass:"is-title-3 card-header",attrs:{tag:"h3"}},[e._v("Delete account")]),t("p",[t("i18n",[e._v("Deleting your account will erase all your data, and remove you from the groups you belong to.")]),e._v(e._s(" ")),t("i18n",{staticClass:"is-danger"},[e._v("This action cannot be undone.")])],1),t("div",{staticClass:"buttons"},[t("i18n",{staticClass:"button error is-outlined",attrs:{tag:"button",type:"submit","data-test":"deleteAccount"},on:{click:e.handleDeleteAccount}},[e._v("Delete account")])],1)],1)])],1)},T=[],E=function(e){e&&e("data-v-78e7dc92_0",{source:".c-username[data-v-78e7dc92]{display:none;margin-bottom:2rem;margin-top:.5rem;color:var(--text_1)}@media screen and (min-width:1200px){.c-username[data-v-78e7dc92]{display:block}}.c-bio-label-container[data-v-78e7dc92],.c-display-name-label-container[data-v-78e7dc92]{display:flex;align-items:flex-end;justify-content:space-between}.fake-password[data-v-78e7dc92]{display:inline-block;margin-top:.5rem;margin-left:-1px;margin-right:.5rem}.legend[data-v-78e7dc92]{font-size:.75rem;font-weight:700;padding-top:5px;padding-bottom:5px}.icon-check[data-v-78e7dc92]{margin-right:1rem}",map:void 0,media:void 0})},U="data-v-78e7dc92",B=void 0,j=!1;function O(e,r,t,i,o,m,n,c,l,d){let a=(typeof t=="function"?t.options:t)||{};a.__file=`style>
`,a.render||(a.render=e.render,a.staticRenderFns=e.staticRenderFns,a._compiled=!0,o&&(a.functional=!0)),a._scopeId=i;{let u;if(r&&(u=n?function(s){r.call(this,d(s,this.$root.$options.shadowRoot))}:function(s){r.call(this,c(s))}),u!==void 0)if(a.functional){let s=a.render;a.render=function(D,v){return u.call(v),s(D,v)}}else{let s=a.beforeCreate;a.beforeCreate=s?[].concat(s,u):[u]}}return a}function h(){let e=h.styles||(h.styles={}),r=typeof navigator<"u"&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());return function(i,o){if(document.querySelector('style[data-vue-ssr-id~="'+i+'"]'))return;let m=r?o.media||"default":i,n=e[m]||(e[m]={ids:[],parts:[],element:void 0});if(!n.ids.includes(i)){let c=o.source,l=n.ids.length;if(n.ids.push(i),o.map&&(c+=`
/*# sourceURL=`+o.map.sources[0]+" */",c+=`
/*# sourceMappingURL=data:application/json;base64,`+btoa(unescape(encodeURIComponent(JSON.stringify(o.map))))+" */"),r&&(n.element=n.element||document.querySelector("style[data-group="+m+"]")),!n.element){let d=document.head||document.getElementsByTagName("head")[0],a=n.element=document.createElement("style");a.type="text/css",o.media&&a.setAttribute("media",o.media),r&&(a.setAttribute("data-group",m),a.setAttribute("data-next-index","0")),d.appendChild(a)}if(r&&(l=parseInt(n.element.getAttribute("data-next-index")),n.element.setAttribute("data-next-index",l+1)),n.element.styleSheet)n.parts.push(c),n.element.styleSheet.cssText=n.parts.filter(Boolean).join(`
`);else{let d=document.createTextNode(c),a=n.element.childNodes;a[l]&&n.element.removeChild(a[l]),a.length?n.element.insertBefore(d,a[l]):n.element.appendChild(d)}}}}var L=O({render:P,staticRenderFns:T},E,$,U,j,B,!1,h,void 0,void 0),Z=L;export{Z as default};
//# sourceMappingURL=UserProfile-HPUIZVFN-cached.js.map
