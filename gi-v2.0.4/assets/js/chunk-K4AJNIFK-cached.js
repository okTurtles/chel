import{a as w}from"./chunk-VNKQZXVF-cached.js";import{b as h}from"./chunk-6XMQ6J6P-cached.js";import{a as S}from"./chunk-VJZRITMK-cached.js";import{f as b}from"./chunk-4XLIKA67-cached.js";import{a as x}from"./chunk-WMVHT3GJ-cached.js";import{a as $}from"./chunk-XHZPFS4B-cached.js";import{c as y}from"./chunk-6P74MMKF-cached.js";import{b as I}from"./chunk-B4L7IMS4-cached.js";import{a as N}from"./chunk-FTWBMR5D-cached.js";import{b as f}from"./chunk-QVCKPSEU-cached.js";import{a as v}from"./chunk-OMOH7TRL-cached.js";import{e as g}from"./chunk-XMZXE55N-cached.js";var C=g(N()),R=g(I());var E={name:"LoginForm",mixins:[C.validationMixin,$],props:{postSubmit:{type:Function,default:()=>{}}},components:{PasswordForm:S,BannerScoped:y,ButtonSubmit:x},data(){return{form:{username:"",password:""}}},mounted(){this.$nextTick(()=>{this.$refs.username.focus()})},methods:{async login(){if(this.$v.form.$invalid){this.$refs.formMsg.danger(f("The form is invalid."));return}try{this.$refs.formMsg.clean();let e=this.form.username;this.$emit("login-status","submitting"),await v("gi.app/identity/login",{username:e,password:new b(this.form.password)}),await this.postSubmit(),this.$emit("login-status","success"),h({enableIfGranted:!0})}catch(e){console.error("FormLogin.vue login() error:",e),this.$refs.formMsg.danger(e.message),this.$emit("login-status","error")}},forgotPassword(){alert(f("Coming soon"))}},validations:{form:{username:{...w},password:{[f("A password is required.")]:R.required}}}},L=function(){var e=this,s=e.$createElement,o=e._self._c||s;return o("form",{attrs:{"data-test":"login"},on:{submit:function(r){r.preventDefault()}}},[o("label",{staticClass:"field"},[o("i18n",{staticClass:"label"},[e._v("Username")]),o("input",{directives:[{name:"model",rawName:"v-model",value:e.form.username,expression:"form.username"},{name:"error",rawName:"v-error:username",value:{attrs:{"data-test":"badUsername"}},expression:'{ attrs: { "data-test": "badUsername" } }',arg:"username"}],ref:"username",staticClass:"input",class:{error:e.$v.form.username.$error},attrs:{autocapitalize:"off",name:"username","data-test":"loginName"},domProps:{value:e.form.username},on:{input:[function(r){r.target.composing||e.$set(e.form,"username",r.target.value)},function(r){return e.debounceField("username")}],blur:function(r){return e.updateField("username")}}})],1),o("password-form",{attrs:{label:e.L("Password"),name:"password",$v:e.$v}}),o("i18n",{staticClass:"link c-forgot",attrs:{tag:"button",type:"button"},on:{click:e.forgotPassword}},[e._v("Forgot your password?")]),o("banner-scoped",{ref:"formMsg",attrs:{"data-test":"loginError"}}),o("div",{staticClass:"buttons is-centered"},[o("button-submit",{attrs:{disabled:e.$v.form.$invalid,"data-test":"loginSubmit"},on:{click:e.login}},[e._v(e._s(e.L("Login")))])],1)],1)},T=[],k=function(e){e&&e("data-v-3ec02d79_0",{source:".c-forgot[data-v-3ec02d79]{display:inline-block;margin-top:1rem}",map:void 0,media:void 0})},U="data-v-3ec02d79",A=void 0,M=!1;function j(e,s,o,r,i,l,n,d,m,u){let t=(typeof o=="function"?o.options:o)||{};t.__file=`style>
`,t.render||(t.render=e.render,t.staticRenderFns=e.staticRenderFns,t._compiled=!0,i&&(t.functional=!0)),t._scopeId=r;{let c;if(s&&(c=n?function(a){s.call(this,u(a,this.$root.$options.shadowRoot))}:function(a){s.call(this,d(a))}),c!==void 0)if(t.functional){let a=t.render;t.render=function(F,p){return c.call(p),a(F,p)}}else{let a=t.beforeCreate;t.beforeCreate=a?[].concat(a,c):[c]}}return t}function _(){let e=_.styles||(_.styles={}),s=typeof navigator<"u"&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());return function(r,i){if(document.querySelector('style[data-vue-ssr-id~="'+r+'"]'))return;let l=s?i.media||"default":r,n=e[l]||(e[l]={ids:[],parts:[],element:void 0});if(!n.ids.includes(r)){let d=i.source,m=n.ids.length;if(n.ids.push(r),i.map&&(d+=`
/*# sourceURL=`+i.map.sources[0]+" */",d+=`
/*# sourceMappingURL=data:application/json;base64,`+btoa(unescape(encodeURIComponent(JSON.stringify(i.map))))+" */"),s&&(n.element=n.element||document.querySelector("style[data-group="+l+"]")),!n.element){let u=document.head||document.getElementsByTagName("head")[0],t=n.element=document.createElement("style");t.type="text/css",i.media&&t.setAttribute("media",i.media),s&&(t.setAttribute("data-group",l),t.setAttribute("data-next-index","0")),u.appendChild(t)}if(s&&(m=parseInt(n.element.getAttribute("data-next-index")),n.element.setAttribute("data-next-index",m+1)),n.element.styleSheet)n.parts.push(d),n.element.styleSheet.cssText=n.parts.filter(Boolean).join(`
`);else{let u=document.createTextNode(d),t=n.element.childNodes;t[m]&&n.element.removeChild(t[m]),t.length?n.element.insertBefore(u,t[m]):n.element.appendChild(u)}}}}var P=j({render:L,staticRenderFns:T},k,E,U,M,A,!1,_,void 0,void 0),H=P;export{H as a};
//# sourceMappingURL=chunk-K4AJNIFK-cached.js.map
