import{a as R}from"./chunk-5CRMMCPK-cached.js";import"./chunk-GB4D3I4D-cached.js";import"./chunk-Q5WT7Z5S-cached.js";import"./chunk-MMWHE4QG-cached.js";import{a as N}from"./chunk-KRTYB7RO-cached.js";import{a as $}from"./chunk-LIW6QCF4-cached.js";import"./chunk-WMVHT3GJ-cached.js";import{a as C}from"./chunk-XHZPFS4B-cached.js";import{c as y}from"./chunk-6P74MMKF-cached.js";import"./chunk-VUYUNB2W-cached.js";import{b as T}from"./chunk-B4L7IMS4-cached.js";import{n as u,s as S}from"./chunk-SZPI64OI-cached.js";import"./chunk-R4DRX7L2-cached.js";import{a as M}from"./chunk-FTWBMR5D-cached.js";import"./chunk-GA3LN23N-cached.js";import"./chunk-3VFZYJBQ-cached.js";import"./chunk-MEHASGB7-cached.js";import"./chunk-Z7X5SDSD-cached.js";import"./chunk-TEH4GFTX-cached.js";import{b as g}from"./chunk-QVCKPSEU-cached.js";import{a as v}from"./chunk-OMOH7TRL-cached.js";import{b as x,d as b}from"./chunk-WBBXU2FL-cached.js";import{e as h}from"./chunk-XMZXE55N-cached.js";var I=h(M()),A=h(T());var k={name:"GenericProposal",mixins:[I.validationMixin,C],components:{CharLengthIndicator:$,ProposalTemplate:R,Tooltip:N,BannerScoped:y},data(){return{config:{proposalNameMaxChar:S},form:{proposalName:null},ephemeral:{currentStep:0}}},computed:{...x(["currentGroupId"]),...b(["groupShouldPropose","groupSettings"])},mounted(){this.$refs.proposalname.focus()},methods:{async submit({reason:e}){let a=this.groupSettings.proposals[u];try{await v("gi.actions/group/proposal",{contractID:this.currentGroupId,data:{proposalType:u,proposalData:{name:this.form.proposalName,reason:e},votingRule:a.rule,expires_date_ms:Date.now()+a.expires_ms}})}catch(o){console.error(`Creating a generic proposal "${this.form.proposalName}"" failed!:`,o.message),this.$refs.formMsg.danger(o.message);return}this.ephemeral.currentStep+=1}},validations:{form:{proposalName:{[g("A proposal name is required.")]:A.required}}}},P=function(){var e=this,a=e.$createElement,o=e._self._c||a;return o("proposal-template",{attrs:{title:e.L("Generic Proposal"),maxSteps:0,disabled:e.$v.form.$invalid||!this.groupShouldPropose,currentStep:e.ephemeral.currentStep},on:{"update:currentStep":function(n){return e.$set(e.ephemeral,"currentStep",n)},"update:current-step":function(n){return e.$set(e.ephemeral,"currentStep",n)},submit:e.submit}},[o("banner-scoped",{ref:"formMsg"}),e.ephemeral.currentStep===0?o("label",{key:"0",staticClass:"field"},[o("div",{staticClass:"c-name-label-container"},[o("div",{staticClass:"label"},[o("i18n",[e._v("Name your proposal")]),o("tooltip",{staticClass:"c-name-tooltip",attrs:{direction:"top",isTextCenter:!0,text:e.L("Group members will be able to vote Yes/No on this proposal. Make sure it is clear and concise.")}},[o("button",{staticClass:"is-icon-smaller c-name-tooltip-btn"},[o("i",{staticClass:"icon-info"})])])],1),e.form.proposalName?o("char-length-indicator",{attrs:{"current-length":e.form.proposalName.length||0,max:e.config.proposalNameMaxChar,error:e.$v.form.proposalName.$error}}):e._e()],1),o("input",{directives:[{name:"model",rawName:"v-model",value:e.form.proposalName,expression:"form.proposalName"},{name:"error",rawName:"v-error:proposalName",arg:"proposalName"}],ref:"proposalname",staticClass:"input",class:{error:e.$v.form.proposalName.$error},attrs:{maxlength:e.config.proposalNameMaxChar,name:"proposalname",autofocus:"autofocus"},domProps:{value:e.form.proposalName},on:{input:[function(n){n.target.composing||e.$set(e.form,"proposalName",n.target.value)},function(n){return e.debounceField("proposalName")}],blur:function(n){return e.updateField("proposalName")}}})]):e._e()],1)},L=[],w=function(e){e&&e("data-v-9309f7ca_0",{source:".c-name-label-container[data-v-9309f7ca]{display:flex;align-items:flex-end;justify-content:space-between;column-gap:.5rem}.c-name-tooltip[data-v-9309f7ca]{display:inline-block;margin-left:.5rem}.c-name-tooltip-btn[data-v-9309f7ca]{background-color:var(--primary_0);color:var(--background_0)}.c-name-tooltip-btn[data-v-9309f7ca]:focus,.c-name-tooltip-btn[data-v-9309f7ca]:hover{background-color:var(--primary_0);color:var(--background_0)}",map:void 0,media:void 0})},O="data-v-9309f7ca",j=void 0,G=!1;function F(e,a,o,n,s,m,r,l,p,c){let t=(typeof o=="function"?o.options:o)||{};t.__file=`style>
`,t.render||(t.render=e.render,t.staticRenderFns=e.staticRenderFns,t._compiled=!0,s&&(t.functional=!0)),t._scopeId=n;{let d;if(a&&(d=r?function(i){a.call(this,c(i,this.$root.$options.shadowRoot))}:function(i){a.call(this,l(i))}),d!==void 0)if(t.functional){let i=t.render;t.render=function(E,_){return d.call(_),i(E,_)}}else{let i=t.beforeCreate;t.beforeCreate=i?[].concat(i,d):[d]}}return t}function f(){let e=f.styles||(f.styles={}),a=typeof navigator<"u"&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());return function(n,s){if(document.querySelector('style[data-vue-ssr-id~="'+n+'"]'))return;let m=a?s.media||"default":n,r=e[m]||(e[m]={ids:[],parts:[],element:void 0});if(!r.ids.includes(n)){let l=s.source,p=r.ids.length;if(r.ids.push(n),s.map&&(l+=`
/*# sourceURL=`+s.map.sources[0]+" */",l+=`
/*# sourceMappingURL=data:application/json;base64,`+btoa(unescape(encodeURIComponent(JSON.stringify(s.map))))+" */"),a&&(r.element=r.element||document.querySelector("style[data-group="+m+"]")),!r.element){let c=document.head||document.getElementsByTagName("head")[0],t=r.element=document.createElement("style");t.type="text/css",s.media&&t.setAttribute("media",s.media),a&&(t.setAttribute("data-group",m),t.setAttribute("data-next-index","0")),c.appendChild(t)}if(a&&(p=parseInt(r.element.getAttribute("data-next-index")),r.element.setAttribute("data-next-index",p+1)),r.element.styleSheet)r.parts.push(l),r.element.styleSheet.cssText=r.parts.filter(Boolean).join(`
`);else{let c=document.createTextNode(l),t=r.element.childNodes;t[p]&&r.element.removeChild(t[p]),t.length?r.element.insertBefore(c,t[p]):r.element.appendChild(c)}}}}var U=F({render:P,staticRenderFns:L},w,k,O,G,j,!1,f,void 0,void 0),K=U;export{K as default};
//# sourceMappingURL=GenericProposal-RIKM4CF6-cached.js.map
