import{a as S}from"./chunk-B5ICR36M-cached.js";import{a as N,b as O,c as P,e as L}from"./chunk-PEWCYRBF-cached.js";import{a as xe}from"./chunk-3CVZTLRE-cached.js";import{a as oe}from"./chunk-UZJ7R3QQ-cached.js";import{c as k,d as T,f as ne,g as ie,h as se}from"./chunk-GB4D3I4D-cached.js";import{a as ae}from"./chunk-CKMID5RP-cached.js";import{a as te}from"./chunk-NUXCLDQR-cached.js";import{a as ee}from"./chunk-CLLOOAK2-cached.js";import"./chunk-FMXZTXSJ-cached.js";import{c as re}from"./chunk-I2AIXHXH-cached.js";import{a as q}from"./chunk-OJPGIG5M-cached.js";import{d as X}from"./chunk-OYX4NVDU-cached.js";import"./chunk-MMWHE4QG-cached.js";import"./chunk-XK3SURHI-cached.js";import"./chunk-WP4ONFFS-cached.js";import"./chunk-AZT5ZK4I-cached.js";import{a as Y}from"./chunk-KRTYB7RO-cached.js";import{a as J}from"./chunk-TMYX4GL6-cached.js";import"./chunk-4XLIKA67-cached.js";import{a as Q}from"./chunk-LIW6QCF4-cached.js";import{a as H}from"./chunk-WMVHT3GJ-cached.js";import{a as Z}from"./chunk-XHZPFS4B-cached.js";import{a as W,c as C}from"./chunk-6P74MMKF-cached.js";import"./chunk-VUYUNB2W-cached.js";import{b as be}from"./chunk-B4L7IMS4-cached.js";import{E as _,F as g,G as w,a as $,c as E,d as M}from"./chunk-SZPI64OI-cached.js";import"./chunk-R4DRX7L2-cached.js";import{a as ge}from"./chunk-FTWBMR5D-cached.js";import{a as K}from"./chunk-MEHASGB7-cached.js";import"./chunk-Z7X5SDSD-cached.js";import{v as b}from"./chunk-TEH4GFTX-cached.js";import{b as c}from"./chunk-QVCKPSEU-cached.js";import{a as v}from"./chunk-OMOH7TRL-cached.js";import{b as A,d as y}from"./chunk-WBBXU2FL-cached.js";import{e as D}from"./chunk-XMZXE55N-cached.js";var ve=D(ge());var I=D(be());function le(e){let a=new Date,t=new Date(e);if(t<a)return{expired:!0,years:0,months:0,days:0,hours:0,minutes:0};let s=t.getFullYear()-a.getFullYear(),o=t.getMonth()-a.getMonth(),r=t.getDate()-a.getDate(),i=t.getHours()-a.getHours(),u=t.getMinutes()-a.getMinutes();if(u<0&&(u+=60,i--),i<0&&(i+=24,r--),r<0){let d=new Date(t.getFullYear(),t.getMonth(),0);r+=d.getDate(),o--}return o<0&&(o+=12,s--),{expired:!1,years:s,months:o,days:r,hours:i,minutes:u}}var ye={name:"InvitationsTable",components:{BannerScoped:C,PageSection:S,SvgInvitation:ae,Tooltip:Y,LinkToCopy:ee,MenuParent:N,MenuTrigger:O,MenuContent:P,MenuItem:L},data(){return{ephemeral:{selectbox:{focused:!1,selectedOption:"Active"},inviteRevokedNow:null,isMobile:!1},matchMediaMobile:null}},computed:{...y(["currentGroupState","ourIdentityContractId","ourUserDisplayName","currentGroupOwnerID","currentWelcomeInvite","groupShouldPropose"]),...A(["currentGroupId"]),invitesToShow(){let e=this.currentGroupState._vm?.invites;if(!e)return[];let a=this.currentGroupState.invites||{},t=Object.entries(e).map(([o,r])=>[o,{...r,creatorID:a[o]?.creatorID,invitee:a[o]?.invitee}]).filter(([,o])=>o.creatorID===$||o.creatorID===this.ourIdentityContractId).map(this.mapInvite);return{Active:()=>t.filter(o=>o.status.isActive||o.status.isRevoked&&o.id===this.ephemeral.inviteRevokedNow),All:()=>t}[this.ephemeral.selectbox.selectedOption]()},isUserGroupCreator(){return this.ourIdentityContractId===this.currentGroupOwnerID}},methods:{unfocusSelect(){this.$refs.select.blur()},copyInviteLink(e){let a=()=>{if(navigator.clipboard)navigator.clipboard.writeText(e);else{let t=this.$refs.copyInput;t.value=e,t.select(),this.$nextTick(()=>{document.execCommand("copy"),t.blur()})}};if(navigator.share){navigator.share({title:c("Your invite"),url:e}).catch(t=>{console.error("navigator.share failed with:",t),a()});return}a()},inviteStatusDescription({isAnyoneLink:e,isInviteExpired:a,isInviteRevoked:t,isAllInviteUsed:s,quantity:o,numberOfResponses:r}){return e?c("{numberOfResponses}/{quantity} used",{numberOfResponses:r,quantity:o}):s?c("Used"):t?c("Not used"):a||t?c("Not used"):c("Not used yet")},readableExpiryInfo(e){if(e==null)return c("Doesn't expire");let{expired:a,years:t,months:s,days:o,hours:r,minutes:i}=le(e);return a?c("Expired"):t?c("{years}y {months}mo {days}d left",{years:t,months:s,days:o+(r||i?1:0)}):s?c("{months}mo {days}d left",{months:s,days:o+(r||i?1:0)}):o?c("{days}d {hours}h {minutes}m left",{days:o,hours:r,minutes:i}):r?c("{hours}h {minutes}m left",{hours:r,minutes:i}):i?c("{minutes}m left",{minutes:i}):c("Expired")},mapInvite([e,{creatorID:a,expires:t,invitee:s,inviteSecret:o,initialQuantity:r,quantity:i,status:u}]){let d=a===$,m=t<Date.now(),n=u===q.REVOKED,p=r-i,l=i===0;return{id:e,isAnyoneLink:d,invitee:d?c("Anyone"):s,inviteSecret:o,inviteLink:te(this.currentGroupId,this.currentGroupState.settings?.groupName,o,d?void 0:this.ourIdentityContractId),description:this.inviteStatusDescription({isAnyoneLink:d,isInviteExpired:m,isInviteRevoked:n,isAllInviteUsed:l,quantity:r,numberOfResponses:p}),expiryInfo:m?c("Expired"):n?c("Revoked"):l?"":this.readableExpiryInfo(t),status:{isExpired:m,isActive:!m&&!n&&!l,isRevoked:n}}},showRevokeLinkMenu(e){return e.status.isActive?e.isAnyoneLink?this.isUserGroupCreator&&this.groupShouldPropose:!0:!1},handleInviteClick(e){if(e.target.classList.contains("js-btnInvite"))if(this.groupShouldPropose){let a=this.currentGroupId;v("gi.app/group/checkGroupSizeAndProposeMember",{contractID:a}).catch(t=>{console.error(`Error on action checkGroupSizeAndProposeMember (handleInviteClock) for ${a}`,t)})}else v("okTurtles.events/emit",b,"InvitationLinkModal")},async handleSeeOriginal(){await v("okTurtles.events/emit",b,"PropositionsAllModal")},async handleRevokeClick(e){if(!confirm(c("Are you sure you want to revoke this link? This action cannot be undone.")))return null;try{this.ephemeral.inviteRevokedNow=e,await v("gi.actions/group/inviteRevoke",{data:{inviteKeyId:e},contractID:this.currentGroupId}),setTimeout(()=>{this.ephemeral.inviteRevokedNow=null},2e3)}catch(a){this.ephemeral.inviteRevokedNow=null,console.error("InvitationsTable.vue handleRevokeClick() error:",a),this.$refs.inviteError.danger(a.message)}}},mounted(){this.matchMediaMobile=window.matchMedia("screen and (max-width: 769px)"),this.ephemeral.isMobile=this.matchMediaMobile.matches,this.matchMediaMobile.onchange=e=>{this.ephemeral.isMobile=e.matches}},beforeDestroy(){this.matchMediaMobile.onchange=null}},Ce=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("page-section",{staticClass:"c-section",attrs:{title:e.L("Invite links")},scopedSlots:e._u([{key:"cta",fn:function(){return[t("label",{staticClass:"selectsolo",class:{focus:e.ephemeral.selectbox.focused}},[t("i18n",{staticClass:"sr-only"},[e._v("Filter links")]),t("select",{directives:[{name:"model",rawName:"v-model",value:e.ephemeral.selectbox.selectedOption,expression:"ephemeral.selectbox.selectedOption"}],ref:"select",staticClass:"select",on:{change:[function(s){var o=Array.prototype.filter.call(s.target.options,function(r){return r.selected}).map(function(r){var i="_value"in r?r._value:r.value;return i});e.$set(e.ephemeral.selectbox,"selectedOption",s.target.multiple?o:o[0])},e.unfocusSelect]}},[t("option",{attrs:{value:"Active"}},[e._v(e._s(e.L("Active links")))]),t("option",{attrs:{value:"All"}},[e._v(e._s(e.L("All links")))])])],1)]},proxy:!0}])},[t("i18n",{staticClass:"has-text-1 c-invite-description",attrs:{tag:"p"}},[e._v("Here's a list of all invite links you own")]),t("banner-scoped",{ref:"inviteError",attrs:{"data-test":"inviteError"}}),e.invitesToShow&&e.invitesToShow.length!==0?t("table",{staticClass:"table table-in-card c-table"},[t("thead",[t("tr",[t("i18n",{staticClass:"c-name",attrs:{tag:"th"}},[e._v("created for")]),t("i18n",{staticClass:"c-invite-link",attrs:{tag:"th"}},[e._v("invite link")]),t("i18n",{staticClass:"c-state",attrs:{tag:"th"}},[e._v("state")]),t("th",{staticClass:"c-action",attrs:{"aria-label":e.L("action")}})],1)]),t("transition-group",{attrs:{name:"slidedown",tag:"tbody"}},e._l(e.invitesToShow,function(s,o){return t("tr",{key:o},[t("td",{staticClass:"c-name"},[e._v(e._s(s.invitee)),s.isAnyoneLink?t("tooltip",{staticClass:"c-name-tooltip",attrs:{direction:e.ephemeral.isMobile?"right":"top",isTextCenter:!0,anchorToElement:!0,text:e.L("Anyone with this link can join the group.")}},[t("div",{staticClass:"button is-icon-smaller is-primary c-tip"},[t("i",{staticClass:"icon-info"})])]):e._e()],1),t("td",{staticClass:"c-invite-link"},[t("link-to-copy",{staticClass:"c-invite-link-wrapper",attrs:{link:s.inviteLink}}),t("menu-parent",{staticClass:"c-invite-link-options-mobile hide-tablet"},[t("menu-trigger",{staticClass:"is-icon-small"},[t("i",{staticClass:"icon-ellipsis-v"})]),t("menu-content",{staticClass:"c-dropdown-invite-link"},[t("ul",[s.isAnyoneLink?e._e():t("menu-item",{attrs:{tag:"button","item-id":"original",icon:"check-to-slot"},on:{click:function(r){return e.handleSeeOriginal(s)}}},[t("i18n",[e._v("See original proposal")])],1),t("menu-item",{attrs:{tag:"button",icon:"link"},on:{click:function(r){return e.copyInviteLink(s.inviteLink)}}},[t("i18n",[e._v("Copy link")])],1),e.showRevokeLinkMenu(s)?t("menu-item",{attrs:{tag:"button","item-id":"revoke",icon:"times"},on:{click:function(r){return e.handleRevokeClick(s.id)}}},[t("i18n",[e._v("Revoke Link")])],1):e._e()],1)])],1)],1),t("td",{staticClass:"c-state"},[t("span",{staticClass:"c-state-description"},[e._v(e._s(s.description))]),s.expiryInfo?t("span",{staticClass:"c-state-expire",class:{"is-danger":s.status.isExpired||s.status.isRevoked}},[e._v(e._s(s.expiryInfo))]):e._e()]),t("td",{staticClass:"c-action"},[e.showRevokeLinkMenu(s)?t("menu-parent",[t("menu-trigger",{staticClass:"is-icon",attrs:{"aria-label":e.L("Show list")}},[t("i",{staticClass:"icon-ellipsis-v"})]),t("menu-content",{staticClass:"c-dropdown-action"},[t("ul",[s.isAnyoneLink?e._e():t("menu-item",{attrs:{tag:"button","item-id":"original",icon:"check-to-slot"},on:{click:function(r){return e.handleSeeOriginal(s)}}},[t("i18n",[e._v("See original proposal")])],1),s.status.isActive?t("menu-item",{attrs:{tag:"button","item-id":"revoke",icon:"times"},on:{click:function(r){return e.handleRevokeClick(s.id)}}},[t("i18n",[e._v("Revoke Link")])],1):e._e()],1)])],1):e._e()],1)])}),0)],1):t("div",{staticClass:"c-empty-list"},[t("SvgInvitation")],1),t("i18n",{staticClass:"c-invite-footer",attrs:{tag:"p",args:{r1:'<button class="link js-btnInvite">',r2:"</button>"}},on:{click:e.handleInviteClick}},[e._v("To generate a new link, you need to {r1}propose adding a new member{r2} to your group.")]),t("input",{ref:"copyInput",staticClass:"c-invisible-input",attrs:{type:"text"}})],1)},Se=[],Re=function(e){e&&e("data-v-4b16071c_0",{source:'@charset "UTF-8";.c-section[data-v-4b16071c]{position:relative}.c-title[data-v-4b16071c]{display:flex;align-items:center;justify-content:space-between}.c-invite-description[data-v-4b16071c]{margin:.5rem 0}.c-table[data-v-4b16071c]{table-layout:fixed;margin-top:1.5rem;margin-bottom:1.5rem}.c-table tr[data-v-4b16071c]{display:grid;grid-template-columns:28.4% 36.1% 23.7% auto;grid-template-areas:"name invite-link state action"}@media screen and (max-width:768px){.c-table thead tr[data-v-4b16071c]{grid-template-columns:81% auto;grid-template-areas:"name invite-link"}.c-table tbody tr[data-v-4b16071c]{grid-template-columns:81% auto;grid-template-rows:1fr 1fr;grid-template-areas:"name invite-link" "state invite-link"}}.c-table td[data-v-4b16071c],.c-table th[data-v-4b16071c]{display:flex;align-items:center}.c-table .c-name[data-v-4b16071c]{grid-area:name;padding-right:1.5rem;line-height:1.3125rem;align-items:center}.c-table .c-name .c-tip[data-v-4b16071c]{margin-left:.4375rem;line-height:1.3125rem}.c-table .c-invite-link[data-v-4b16071c]{position:relative;grid-area:invite-link;padding-right:1.5rem}.c-table .c-invite-link-wrapper[data-v-4b16071c]{display:inherit;align-items:inherit;width:100%}@media screen and (max-width:768px){.c-table .c-invite-link[data-v-4b16071c]{justify-content:flex-end;padding-right:.5rem}.c-table .c-invite-link-wrapper[data-v-4b16071c]{display:none}}@media screen and (max-width:768px){.c-table th.c-invite-link[data-v-4b16071c]{white-space:nowrap;opacity:0}}.c-table .c-state[data-v-4b16071c]{grid-area:state;padding-right:3px;display:flex;flex-direction:column;justify-content:center;align-items:flex-start}.c-table .c-state .c-state-expire[data-v-4b16071c]{line-height:1.125rem;font-size:.75rem;color:var(--text_1)}.c-table .c-state .c-state-expire.is-danger[data-v-4b16071c]{color:var(--danger_0)}@media screen and (max-width:768px){.c-table .c-state[data-v-4b16071c]{flex-direction:row;align-items:baseline;justify-content:flex-start;padding-left:1rem}}@media screen and (max-width:768px){.c-table th.c-state[data-v-4b16071c]{display:none}}@media screen and (max-width:768px){.c-table td.c-state .c-state-expire[data-v-4b16071c]::before{content:"\xB7";display:inline-block;color:var(--text_0);padding:0 .25rem}}.c-table .c-action[data-v-4b16071c]{grid-area:action;justify-content:flex-end}.c-table .c-action .c-invite-action-button[data-v-4b16071c]{margin-right:.5rem}@media screen and (max-width:768px){.c-table .c-action[data-v-4b16071c]{display:none}}.c-table .c-dropdown-action[data-v-4b16071c],.c-table .c-dropdown-invite-link[data-v-4b16071c]{width:max-content;transform:translateX(-100%)}.c-table .c-dropdown-action[data-v-4b16071c]{min-width:13.375rem;margin:3.5rem 0 0 3rem}.c-table .c-dropdown-invite-link[data-v-4b16071c]{min-width:8.5rem;margin-top:2rem;right:unset;left:2rem;top:.5rem}.c-table .c-webshare-fallback[data-v-4b16071c]{position:absolute;right:0;top:50%;transform:translateY(-50%);margin-right:.5rem;z-index:50}.c-empty-list[data-v-4b16071c]{margin:1.5rem 0;text-align:center}.c-name-tooltip[data-v-4b16071c]{text-align:center}.c-active-button .c-arrow[data-v-4b16071c]{margin-right:0}.c-invisible-input[data-v-4b16071c]{position:absolute;pointer-events:none;opacity:0}',map:void 0,media:void 0})},we="data-v-4b16071c",ke=void 0,Ie=!1;function Ae(e,a,t,s,o,r,i,u,d,m){let n=(typeof t=="function"?t.options:t)||{};n.__file=`style>
`,n.render||(n.render=e.render,n.staticRenderFns=e.staticRenderFns,n._compiled=!0,o&&(n.functional=!0)),n._scopeId=s;{let p;if(a&&(p=i?function(l){a.call(this,m(l,this.$root.$options.shadowRoot))}:function(l){a.call(this,u(l))}),p!==void 0)if(n.functional){let l=n.render;n.render=function(h,f){return p.call(f),l(h,f)}}else{let l=n.beforeCreate;n.beforeCreate=l?[].concat(l,p):[p]}}return n}function j(){let e=j.styles||(j.styles={}),a=typeof navigator<"u"&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());return function(s,o){if(document.querySelector('style[data-vue-ssr-id~="'+s+'"]'))return;let r=a?o.media||"default":s,i=e[r]||(e[r]={ids:[],parts:[],element:void 0});if(!i.ids.includes(s)){let u=o.source,d=i.ids.length;if(i.ids.push(s),o.map&&(u+=`
/*# sourceURL=`+o.map.sources[0]+" */",u+=`
/*# sourceMappingURL=data:application/json;base64,`+btoa(unescape(encodeURIComponent(JSON.stringify(o.map))))+" */"),a&&(i.element=i.element||document.querySelector("style[data-group="+r+"]")),!i.element){let m=document.head||document.getElementsByTagName("head")[0],n=i.element=document.createElement("style");n.type="text/css",o.media&&n.setAttribute("media",o.media),a&&(n.setAttribute("data-group",r),n.setAttribute("data-next-index","0")),m.appendChild(n)}if(a&&(d=parseInt(i.element.getAttribute("data-next-index")),i.element.setAttribute("data-next-index",d+1)),i.element.styleSheet)i.parts.push(u),i.element.styleSheet.cssText=i.parts.filter(Boolean).join(`
`);else{let m=document.createTextNode(u),n=i.element.childNodes;n[d]&&i.element.removeChild(n[d]),n.length?i.element.insertBefore(m,n[d]):i.element.appendChild(m)}}}}var Ee=Ae({render:Ce,staticRenderFns:Se},Re,ye,we,Ie,ke,!1,j,void 0,void 0),ce=Ee;var Me={name:"PermissionActionMenu",inject:["permissionsUtils"],components:{MenuParent:N,MenuContent:P,MenuTrigger:O,MenuItem:L},computed:{menuOptions(){return[{id:"edit",label:c("Edit permissions"),icon:"edit",enabled:()=>this.permissionsUtils.canDelegatePermissions},{id:"remove",label:c("Remove"),icon:"trash-alt",enabled:()=>this.permissionsUtils.canDelegatePermissions}].filter(a=>a.enabled())}},methods:{onMenuSelect(e){alert(c("Coming soon"))}}},Te=function(){var e=this,a=e.$createElement,t=e._self._c||a;return e.menuOptions.length?t("menu-parent",{staticClass:"c-permission-action-menu",on:{select:e.onMenuSelect}},[t("menu-trigger",{staticClass:"is-icon-small c-trigger-btn",attrs:{"aria-label":e.L("Open permission action menu")}},[t("i",{staticClass:"icon-ellipsis-v"})]),t("menu-content",{staticClass:"c-menu-content"},[t("ul",e._l(e.menuOptions,function(s){return t("menu-item",{key:s.id,staticClass:"c-menu-item",attrs:{tag:"button","item-id":s.id,icon:s.icon}},[e._v(e._s(s.label))])}),1)])],1):e._e()},Ne=[],Oe=function(e){e&&e("data-v-f837dd0a_0",{source:".c-permission-action-menu[data-v-f837dd0a]{position:relative;width:max-content}.c-permission-action-menu .c-menu-content[data-v-f837dd0a]{max-width:16rem;width:max-content;top:100%;margin-top:.5rem;margin-bottom:1rem;left:unset;right:0}",map:void 0,media:void 0})},Pe="data-v-f837dd0a",Le=void 0,De=!1;function $e(e,a,t,s,o,r,i,u,d,m){let n=(typeof t=="function"?t.options:t)||{};n.__file=`style>
`,n.render||(n.render=e.render,n.staticRenderFns=e.staticRenderFns,n._compiled=!0,o&&(n.functional=!0)),n._scopeId=s;{let p;if(a&&(p=i?function(l){a.call(this,m(l,this.$root.$options.shadowRoot))}:function(l){a.call(this,u(l))}),p!==void 0)if(n.functional){let l=n.render;n.render=function(h,f){return p.call(f),l(h,f)}}else{let l=n.beforeCreate;n.beforeCreate=l?[].concat(l,p):[p]}}return n}function U(){let e=U.styles||(U.styles={}),a=typeof navigator<"u"&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());return function(s,o){if(document.querySelector('style[data-vue-ssr-id~="'+s+'"]'))return;let r=a?o.media||"default":s,i=e[r]||(e[r]={ids:[],parts:[],element:void 0});if(!i.ids.includes(s)){let u=o.source,d=i.ids.length;if(i.ids.push(s),o.map&&(u+=`
/*# sourceURL=`+o.map.sources[0]+" */",u+=`
/*# sourceMappingURL=data:application/json;base64,`+btoa(unescape(encodeURIComponent(JSON.stringify(o.map))))+" */"),a&&(i.element=i.element||document.querySelector("style[data-group="+r+"]")),!i.element){let m=document.head||document.getElementsByTagName("head")[0],n=i.element=document.createElement("style");n.type="text/css",o.media&&n.setAttribute("media",o.media),a&&(n.setAttribute("data-group",r),n.setAttribute("data-next-index","0")),m.appendChild(n)}if(a&&(d=parseInt(i.element.getAttribute("data-next-index")),i.element.setAttribute("data-next-index",d+1)),i.element.styleSheet)i.parts.push(u),i.element.styleSheet.cssText=i.parts.filter(Boolean).join(`
`);else{let m=document.createTextNode(u),n=i.element.childNodes;n[d]&&i.element.removeChild(n[d]),n.length?i.element.insertBefore(m,n[d]):i.element.appendChild(m)}}}}var je=$e({render:Te,staticRenderFns:Ne},Oe,Me,Pe,De,Le,!1,U,void 0,void 0),de=je;var Ue={[_.ADMIN]:c("Admin"),[_.MODERATOR]:c("Moderator"),[_.MODERATOR_DELEGATOR]:c("Moderator (Delegator)"),[_.CUSTOM]:c("Custom")},Ge={[g.VIEW_PERMISSIONS]:c("View permissions"),[g.ASSIGN_DELEGATOR]:c("Assign delegator"),[g.DELEGATE_PERMISSIONS]:c("Delegate permissions"),[g.REMOVE_MEMBER]:c("Remove member"),[g.REVOKE_INVITE]:c("Revoke invites"),[g.DELETE_CHANNEL]:c("Delete channels")};function R(e){return Ge[e]}function ue(e){return Ue[e]}var me=D(xe());var Ve={name:"ViewPermissions",components:{ModalClose:K},mixins:[me.mixin],data(){return{ephemeral:{isTooltipActive:!1}}},props:{permissions:{type:Array},isMobile:{type:Boolean,default:!1}},computed:{permissionsNo(){return this.permissions?.length||0},displayText(){let e=this.permissions||[],a=e.length;return a===1?`- '${R(e[0])}'`:a>1?c("'{first}' and {restCount} more",{first:R(e[0]),restCount:a-1}):""}},methods:{getPermissionDisplayName:R,openTooltip(){this.ephemeral.isTooltipActive=!0},closeTooltip(){this.ephemeral.isTooltipActive=!1}}},Fe=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"c-permissions-wrapper",class:{"is-mobile":e.isMobile}},[t("span",{staticClass:"c-display-text has-text-1"},[e._v(e._s(e.displayText))]),t("div",{directives:[{name:"on-clickaway",rawName:"v-on-clickaway",value:e.closeTooltip,expression:"closeTooltip"}],staticClass:"c-see-all-wrapper"},[e.permissionsNo>1?t("i18n",{staticClass:"link c-see-all",attrs:{tag:"button"},on:{click:e.openTooltip}},[e._v("See all")]):e._e(),t("div",{staticClass:"c-permissions-tooltip",class:{"is-active":e.ephemeral.isTooltipActive}},[t("div",{staticClass:"c-permissions-tooltip-overlay",on:{click:function(s){return s.stopPropagation(),e.closeTooltip(s)}}}),t("div",{staticClass:"c-permissions-tooltip-content"},[t("header",{staticClass:"c-permissions-tooltip-header"},[t("i18n",{staticClass:"c-tooltip-title",attrs:{tag:"h2",args:{no:e.permissionsNo}}},[e._v("{no} permissions")]),t("modal-close",{staticClass:"c-permissions-close-btn",attrs:{"data-test":"closeViewPermission"},on:{close:e.closeTooltip}})],1),t("ul",{staticClass:"c-permissions-list"},e._l(e.permissions,function(s){return t("li",{key:s,staticClass:"c-permission-item"},[t("span",{staticClass:"c-permission-name"},[e._v(e._s("- "+e.getPermissionDisplayName(s)))])])}),0)])])],1)])},Be=[],ze=function(e){e&&e("data-v-00769ba2_0",{source:".c-permissions-wrapper[data-v-00769ba2]{position:relative;padding:.75rem .5rem .75rem 0}.c-permissions-wrapper.is-mobile[data-v-00769ba2]{padding:0}.c-display-text[data-v-00769ba2]{font-size:.875rem}.c-see-all-wrapper[data-v-00769ba2]{position:relative;display:inline-flex;margin-left:.25rem;width:max-content}.c-see-all[data-v-00769ba2]{display:inline-block}.c-permissions-tooltip[data-v-00769ba2]{position:absolute;display:block;bottom:-.5rem;transform:translateY(100%);right:0;width:max-content;min-width:10.75rem;max-width:14rem;padding:1rem;z-index:50;background-color:var(--background_0);border-radius:10px;opacity:0;height:0;pointer-events:none;box-shadow:0 .5rem 1.25rem rgba(54,54,54,.3)}.is-dark-theme .c-permissions-tooltip[data-v-00769ba2]{box-shadow:0 .5rem 1.25rem rgba(38,38,38,.895)}.c-permissions-tooltip.is-active[data-v-00769ba2]{opacity:1;height:max-content;transition:opacity .2s ease-out;pointer-events:initial}.c-permissions-tooltip-header[data-v-00769ba2]{display:flex;align-items:center;justify-content:space-between;column-gap:.5rem}.c-permissions-tooltip .c-tooltip-title[data-v-00769ba2]{font-size:.925rem;font-weight:700}.c-permissions-tooltip-content[data-v-00769ba2]{border-radius:10px}.c-permissions-tooltip .c-permissions-list[data-v-00769ba2]{margin-top:.5rem;font-size:.875rem}.c-permissions-tooltip .c-permission-item[data-v-00769ba2]:not(:last-child){margin-bottom:.2rem}.c-permissions-tooltip .c-permission-name[data-v-00769ba2]{background-color:var(--general_1_opacity_6);padding:.125rem .25rem;border-radius:4px;line-height:1.175;display:inline-block}button.c-permissions-close-btn[data-v-00769ba2]{position:relative;top:unset;right:unset;left:unset;width:1.5rem;height:1.5rem;min-height:unset;flex-shrink:0}button.c-permissions-close-btn[data-v-00769ba2]::after,button.c-permissions-close-btn[data-v-00769ba2]::before{width:.625rem}",map:void 0,media:void 0})},qe="data-v-00769ba2",Xe=void 0,We=!1;function He(e,a,t,s,o,r,i,u,d,m){let n=(typeof t=="function"?t.options:t)||{};n.__file=`style>
`,n.render||(n.render=e.render,n.staticRenderFns=e.staticRenderFns,n._compiled=!0,o&&(n.functional=!0)),n._scopeId=s;{let p;if(a&&(p=i?function(l){a.call(this,m(l,this.$root.$options.shadowRoot))}:function(l){a.call(this,u(l))}),p!==void 0)if(n.functional){let l=n.render;n.render=function(h,f){return p.call(f),l(h,f)}}else{let l=n.beforeCreate;n.beforeCreate=l?[].concat(l,p):[p]}}return n}function G(){let e=G.styles||(G.styles={}),a=typeof navigator<"u"&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());return function(s,o){if(document.querySelector('style[data-vue-ssr-id~="'+s+'"]'))return;let r=a?o.media||"default":s,i=e[r]||(e[r]={ids:[],parts:[],element:void 0});if(!i.ids.includes(s)){let u=o.source,d=i.ids.length;if(i.ids.push(s),o.map&&(u+=`
/*# sourceURL=`+o.map.sources[0]+" */",u+=`
/*# sourceMappingURL=data:application/json;base64,`+btoa(unescape(encodeURIComponent(JSON.stringify(o.map))))+" */"),a&&(i.element=i.element||document.querySelector("style[data-group="+r+"]")),!i.element){let m=document.head||document.getElementsByTagName("head")[0],n=i.element=document.createElement("style");n.type="text/css",o.media&&n.setAttribute("media",o.media),a&&(n.setAttribute("data-group",r),n.setAttribute("data-next-index","0")),m.appendChild(n)}if(a&&(d=parseInt(i.element.getAttribute("data-next-index")),i.element.setAttribute("data-next-index",d+1)),i.element.styleSheet)i.parts.push(u),i.element.styleSheet.cssText=i.parts.filter(Boolean).join(`
`);else{let m=document.createTextNode(u),n=i.element.childNodes;n[d]&&i.element.removeChild(n[d]),n.length?i.element.insertBefore(m,n[d]):i.element.appendChild(m)}}}}var Ye=He({render:Fe,staticRenderFns:Be},ze,Ve,qe,We,Xe,!1,G,void 0,void 0),pe=Ye;var Je={name:"PermissionTableRow",components:{Avatar:J,ViewPermissions:pe,PermissionActionMenu:de},props:{data:{type:Object},isMobile:{type:Boolean,default:!1}},computed:{pillClasses(){return this.data?.role?{[_.ADMIN]:"is-success",[_.MODERATOR_DELEGATOR]:"is-primary",[_.MODERATOR]:"is-neutral",[_.CUSTOM]:"is-warning"}[this.data.role]:""}},methods:{getRoleDisplayName:ue,getPermissionDisplayName:R}},Ke=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("tr",{staticClass:"c-permission-table-row",class:{"is-mobile":e.isMobile}},[t("td",{staticClass:"td-user"},[t("div",{staticClass:"c-user-wrapper"},[t("avatar",{staticClass:"c-avatar",attrs:{src:"/assets/images/user-avatar-default.png",size:"xs"}}),e.isMobile?t("div",{staticClass:"c-name-and-role-mobile"},[t("strong",{staticClass:"c-name has-ellipsis"},[e._v(e._s(e.data.username))]),t("div",{staticClass:"c-pill-container"},[t("span",{staticClass:"pill c-role-pill",class:e.pillClasses},[e._v(e._s(e.getRoleDisplayName(e.data.role)))])])]):t("strong",{staticClass:"c-name has-ellipsis"},[e._v(e._s(e.data.username))])],1)]),e.isMobile?e._e():t("td",{staticClass:"td-role"},[t("span",{staticClass:"pill c-role-pill",class:e.pillClasses},[e._v(e._s(e.getRoleDisplayName(e.data.role)))])]),t("td",{staticClass:"td-permissions"},[t("view-permissions",{attrs:{permissions:e.data.permissions}})],1),t("td",{staticClass:"td-action"},[t("div",{staticClass:"c-action-wrapper"},[t("permission-action-menu")],1)])])},Ze=[],Qe=function(e){e&&e("data-v-a9233e3a_0",{source:".c-user-wrapper[data-v-a9233e3a]{display:flex;align-items:center;column-gap:.5rem;padding:.75rem 0}.c-user-wrapper .c-avatar[data-v-a9233e3a]{flex-shrink:0}.c-user-wrapper .c-name-and-role-mobile[data-v-a9233e3a]{display:flex;flex-direction:column;row-gap:.25rem;align-items:flex-start;flex-grow:1;max-width:calc(100% - 2rem)}.c-user-wrapper .c-name-and-role-mobile .c-name[data-v-a9233e3a]{align-self:stretch}td.td-role[data-v-a9233e3a],td.td-user[data-v-a9233e3a]{padding-right:.5rem}.c-permission-table-row.is-mobile td.td-user[data-v-a9233e3a]{padding-right:.75rem;max-width:10.25rem}td.td-action[data-v-a9233e3a]{padding-right:1rem}@media screen and (min-width:1200px){td.td-action[data-v-a9233e3a]{padding-right:1.5rem}}.c-pill-container[data-v-a9233e3a]{display:inline-block}.c-role-pill[data-v-a9233e3a]{display:inline;white-space:initial}.c-action-wrapper[data-v-a9233e3a]{display:flex;justify-content:flex-end}",map:void 0,media:void 0})},et="data-v-a9233e3a",tt=void 0,nt=!1;function it(e,a,t,s,o,r,i,u,d,m){let n=(typeof t=="function"?t.options:t)||{};n.__file=`style>
`,n.render||(n.render=e.render,n.staticRenderFns=e.staticRenderFns,n._compiled=!0,o&&(n.functional=!0)),n._scopeId=s;{let p;if(a&&(p=i?function(l){a.call(this,m(l,this.$root.$options.shadowRoot))}:function(l){a.call(this,u(l))}),p!==void 0)if(n.functional){let l=n.render;n.render=function(h,f){return p.call(f),l(h,f)}}else{let l=n.beforeCreate;n.beforeCreate=l?[].concat(l,p):[p]}}return n}function V(){let e=V.styles||(V.styles={}),a=typeof navigator<"u"&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());return function(s,o){if(document.querySelector('style[data-vue-ssr-id~="'+s+'"]'))return;let r=a?o.media||"default":s,i=e[r]||(e[r]={ids:[],parts:[],element:void 0});if(!i.ids.includes(s)){let u=o.source,d=i.ids.length;if(i.ids.push(s),o.map&&(u+=`
/*# sourceURL=`+o.map.sources[0]+" */",u+=`
/*# sourceMappingURL=data:application/json;base64,`+btoa(unescape(encodeURIComponent(JSON.stringify(o.map))))+" */"),a&&(i.element=i.element||document.querySelector("style[data-group="+r+"]")),!i.element){let m=document.head||document.getElementsByTagName("head")[0],n=i.element=document.createElement("style");n.type="text/css",o.media&&n.setAttribute("media",o.media),a&&(n.setAttribute("data-group",r),n.setAttribute("data-next-index","0")),m.appendChild(n)}if(a&&(d=parseInt(i.element.getAttribute("data-next-index")),i.element.setAttribute("data-next-index",d+1)),i.element.styleSheet)i.parts.push(u),i.element.styleSheet.cssText=i.parts.filter(Boolean).join(`
`);else{let m=document.createTextNode(u),n=i.element.childNodes;n[d]&&i.element.removeChild(n[d]),n.length?i.element.insertBefore(m,n[d]):i.element.appendChild(m)}}}}var st=it({render:Ke,staticRenderFns:Ze},Qe,Je,et,nt,tt,!1,V,void 0,void 0),fe=st;var at=[{id:"user-1",username:"Fake user 1",role:_.ADMIN,permissions:w.ADMIN},{id:"user-2",username:"Fake user 2",role:_.MODERATOR_DELEGATOR,permissions:w.MODERATOR_DELEGATOR},{id:"user-3",username:"Fake user 3",role:_.MODERATOR,permissions:w.MODERATOR},{id:"user-4",username:"Fake user 4",role:_.CUSTOM,permissions:[g.VIEW_PERMISSIONS,g.DELETE_CHANNEL]}],ot={name:"RolesAndPermissions",components:{PageSection:S,BannerScoped:C,PermissionTableRow:fe},data(){return{ephemeral:{fakeRolesData:at,isMobile:!1},matchMediaMobile:null}},computed:{displayComponent(){return!1},myPermissions(){return w.ADMIN},canDelegatePermissions(){return this.myPermissions.includes(g.DELEGATE_PERMISSIONS)}},methods:{handleAddPermissionsClick(){alert(c("Coming soon!"))}},provide(){return{permissionsUtils:{myPermissions:this.myPermissions,canDelegatePermissions:this.canDelegatePermissions}}},mounted(){this.matchMediaMobile=window.matchMedia("screen and (max-width: 570px)"),this.ephemeral.isMobile=this.matchMediaMobile.matches,this.matchMediaMobile.onchange=e=>{this.ephemeral.isMobile=e.matches}},beforeDestroy(){this.matchMediaMobile.onchange=null}},rt=function(){var e=this,a=e.$createElement,t=e._self._c||a;return e.displayComponent?t("page-section",{staticClass:"c-section",attrs:{title:e.L("Roles and Permissions")}},[t("i18n",{staticClass:"has-text-1 c-section-description",attrs:{tag:"p"}},[e._v("Here's a list of roles and permissions granted to your group members.")]),t("banner-scoped",{ref:"feedbackMsg",attrs:{allowA:!0}}),t("table",{staticClass:"table table-in-card c-permissions-table"},[t("thead",[t("tr",[e.ephemeral.isMobile?t("i18n",{staticClass:"th-user-and-role-combined",attrs:{tag:"th"}},[e._v("User / Role")]):[t("i18n",{staticClass:"th-user",attrs:{tag:"th"}},[e._v("User")]),t("i18n",{staticClass:"th-role",attrs:{tag:"th"}},[e._v("Role")])],t("i18n",{staticClass:"th-permissions",attrs:{tag:"th"}},[e._v("Permissions")]),t("th",{staticClass:"th-action",attrs:{"aria-label":e.L("action")}})],2)]),t("tbody",e._l(e.ephemeral.fakeRolesData,function(s){return t("permission-table-row",{key:s.id,attrs:{data:s,"is-mobile":e.ephemeral.isMobile}})}),1)]),t("div",{staticClass:"c-buttons-container"},[e.canDelegatePermissions?t("button",{staticClass:"is-small is-outlined",attrs:{type:"button"},on:{click:e.handleAddPermissionsClick}},[t("i18n",[e._v("Add Permissions")])],1):e._e()])],1):e._e()},lt=[],ct=function(e){e&&e("data-v-3748d960_0",{source:".c-section[data-v-3748d960]{position:relative}.c-section-description[data-v-3748d960]{margin:.5rem 0}.c-table[data-v-3748d960]{table-layout:fixed;margin-top:1.5rem;margin-bottom:1.5rem}.c-buttons-container[data-v-3748d960]{display:flex;justify-content:flex-end;margin-top:1.5rem}.c-permissions-table[data-v-3748d960]{margin-top:2rem}.c-permissions-table th.th-user[data-v-3748d960]{padding-right:.5rem}.c-permissions-table th.th-role[data-v-3748d960]{min-width:7.25rem}.c-permissions-table th.th-action[data-v-3748d960]{width:2.75rem;padding-right:1rem}@media screen and (min-width:571px){.c-permissions-table th.th-user[data-v-3748d960]{width:auto;min-width:12.25rem}.c-permissions-table th.th-action[data-v-3748d960]{width:4.25rem}}",map:void 0,media:void 0})},dt="data-v-3748d960",ut=void 0,mt=!1;function pt(e,a,t,s,o,r,i,u,d,m){let n=(typeof t=="function"?t.options:t)||{};n.__file=`style>
`,n.render||(n.render=e.render,n.staticRenderFns=e.staticRenderFns,n._compiled=!0,o&&(n.functional=!0)),n._scopeId=s;{let p;if(a&&(p=i?function(l){a.call(this,m(l,this.$root.$options.shadowRoot))}:function(l){a.call(this,u(l))}),p!==void 0)if(n.functional){let l=n.render;n.render=function(h,f){return p.call(f),l(h,f)}}else{let l=n.beforeCreate;n.beforeCreate=l?[].concat(l,p):[p]}}return n}function F(){let e=F.styles||(F.styles={}),a=typeof navigator<"u"&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());return function(s,o){if(document.querySelector('style[data-vue-ssr-id~="'+s+'"]'))return;let r=a?o.media||"default":s,i=e[r]||(e[r]={ids:[],parts:[],element:void 0});if(!i.ids.includes(s)){let u=o.source,d=i.ids.length;if(i.ids.push(s),o.map&&(u+=`
/*# sourceURL=`+o.map.sources[0]+" */",u+=`
/*# sourceMappingURL=data:application/json;base64,`+btoa(unescape(encodeURIComponent(JSON.stringify(o.map))))+" */"),a&&(i.element=i.element||document.querySelector("style[data-group="+r+"]")),!i.element){let m=document.head||document.getElementsByTagName("head")[0],n=i.element=document.createElement("style");n.type="text/css",o.media&&n.setAttribute("media",o.media),a&&(n.setAttribute("data-group",r),n.setAttribute("data-next-index","0")),m.appendChild(n)}if(a&&(d=parseInt(i.element.getAttribute("data-next-index")),i.element.setAttribute("data-next-index",d+1)),i.element.styleSheet)i.parts.push(u),i.element.styleSheet.cssText=i.parts.filter(Boolean).join(`
`);else{let m=document.createTextNode(u),n=i.element.childNodes;n[d]&&i.element.removeChild(n[d]),n.length?i.element.insertBefore(m,n[d]):i.element.appendChild(m)}}}}var ft=pt({render:rt,staticRenderFns:lt},ct,ot,dt,mt,ut,!1,F,void 0,void 0),_e=ft;var _t={name:"GroupVotingSystem",components:{BannerSimple:W},data:()=>({config:{[k]:{title:c("Percentage based"),explanation:c("Proposals are accepted when the required percentage of members agree to the proposal."),status:c("Percentage of members that need to agree:")},[T]:{title:c("Disagreement number"),explanation:c("Proposals are rejected when a certain number of members disagree with the proposal."),status:c('Maximum number of "no" votes:')}}}),computed:{...y(["groupMembersCount","groupProposalSettings","groupShouldPropose"]),proposalSettings(){return this.groupProposalSettings()||{}},votingRulesSorted(){return[k]},votingRuleSettings(){return this.proposalSettings.ruleSettings[this.proposalSettings.rule]},thresholdOriginal(){return this.votingRuleSettings.threshold},thresholdAdjusted(){return ne(this.proposalSettings.rule,this.thresholdOriginal,this.groupMembersCount)}},methods:{openVotingProposal(e){v("okTurtles.events/emit",b,"ChangeVotingRules",{rule:e})},isRuleActive(e){return e===this.proposalSettings.rule},votingValue(e){let a={b_:'<span class="has-text-bold">',_b:"</span>",sm_:'<span class="has-text-1 has-text-small">',_sm:"</span>"},t=this.thresholdOriginal,s=this.thresholdAdjusted;return{[T]:()=>!this.groupShouldPropose||t===s?c("{b_}{count}{_b}",{count:t,...a}):c("{b_}{count}{_b} {sm_}(adjusted to {nr}*){_sm}",{count:t,nr:s,...a}),[k]:()=>{let r={percent:se(this.thresholdOriginal)+"%",count:ie(this.groupMembersCount,s),total:Math.max(3,this.groupMembersCount),...a};return this.groupShouldPropose?t===s?c("{b_}{percent}{_b} {sm_}({count} out of {total} members){_sm}",r):c("{b_}{percent}{_b} {sm_}({count}* out of {total} members){_sm}",r):c("{b_}{percent}{_b}",r)}}[e]()},votingRuleAdjusted(e){return!this.groupShouldPropose||!this.isRuleActive(e)||this.thresholdAdjusted===this.thresholdOriginal?"":{[T]:c("*This value was automatically adjusted because your group is too small for the disagreement number."),[k]:c('*This value was automatically adjusted because there should always be at least 2 "yes" votes.')}[e]}}},ht=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("ul",{staticClass:"c-wrapper",attrs:{"data-test":"votingRules"}},e._l(e.votingRulesSorted,function(s){return t("li",{staticClass:"cardBox c-card",class:{isActive:e.isRuleActive(s)},attrs:{"aria-current":e.isRuleActive(s),"data-test":s}},[t("p",{staticClass:"is-title-4"},[e._v(e._s(e.config[s].title))]),t("p",{directives:[{name:"safe-html",rawName:"v-safe-html",value:e.config[s].explanation,expression:"config[rule].explanation"}],staticClass:"has-text-1 c-expl"}),e._e(),e.isRuleActive(s)?t("dl",{staticClass:"c-status"},[t("dt",{staticClass:"c-status-term"},[e._v(e._s(e.config[s].status))]),t("dd",{staticClass:"c-status-desc"},[t("span",{directives:[{name:"safe-html",rawName:"v-safe-html",value:e.votingValue(s),expression:"votingValue(rule)"}],attrs:{"data-test":"ruleStatus"}}),t("button",{staticClass:"link",attrs:{tag:"button","data-test":"changeRule"},on:{click:function(o){return e.openVotingProposal(s)}}},[e._v(e._s(e.groupShouldPropose?e.L("Propose change"):e.L("Change")))])])]):e._e(),e.groupShouldPropose&&e.votingRuleAdjusted(s)?t("banner-simple",{staticClass:"c-banner",attrs:{severity:"info","data-test":"ruleAdjusted"}},[e._v(e._s(e.votingRuleAdjusted(s)))]):e._e(),e.isRuleActive(s)?e._e():t("button",{staticClass:"link",attrs:{"data-test":"changeRule"},on:{click:function(o){return e.openVotingProposal(s)}}},[e._v(e._s(e.groupShouldPropose?e.L("Propose changing to this system"):e.L("Change to this system")))])],1)}),0)},vt=[],gt=function(e){e&&e("data-v-46cf1a2a_0",{source:".c-wrapper[data-v-46cf1a2a]{margin-top:1.5rem}.c-active[data-v-46cf1a2a]{position:absolute;top:1rem;right:1rem}.c-expl[data-v-46cf1a2a]{margin-bottom:1.5rem}.c-status[data-v-46cf1a2a]{margin-bottom:-.5rem}.c-status-desc[data-v-46cf1a2a]>:first-child,.c-status-term[data-v-46cf1a2a]{margin-right:.5rem}.c-status-term[data-v-46cf1a2a]{display:inline-block;margin-bottom:.5rem}.c-status-desc[data-v-46cf1a2a]{display:inline}@media screen and (max-width:768px){.c-status-desc[data-v-46cf1a2a]{display:block}}.c-banner[data-v-46cf1a2a]{margin-top:1.5rem}@media screen and (min-width:769px),print{.c-card[data-v-46cf1a2a]{padding-left:1.5rem;padding-right:1.5rem}.c-active[data-v-46cf1a2a]{right:1.5rem}}",map:void 0,media:void 0})},bt="data-v-46cf1a2a",xt=void 0,yt=!1;function Ct(e,a,t,s,o,r,i,u,d,m){let n=(typeof t=="function"?t.options:t)||{};n.__file=`style>
`,n.render||(n.render=e.render,n.staticRenderFns=e.staticRenderFns,n._compiled=!0,o&&(n.functional=!0)),n._scopeId=s;{let p;if(a&&(p=i?function(l){a.call(this,m(l,this.$root.$options.shadowRoot))}:function(l){a.call(this,u(l))}),p!==void 0)if(n.functional){let l=n.render;n.render=function(h,f){return p.call(f),l(h,f)}}else{let l=n.beforeCreate;n.beforeCreate=l?[].concat(l,p):[p]}}return n}function B(){let e=B.styles||(B.styles={}),a=typeof navigator<"u"&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());return function(s,o){if(document.querySelector('style[data-vue-ssr-id~="'+s+'"]'))return;let r=a?o.media||"default":s,i=e[r]||(e[r]={ids:[],parts:[],element:void 0});if(!i.ids.includes(s)){let u=o.source,d=i.ids.length;if(i.ids.push(s),o.map&&(u+=`
/*# sourceURL=`+o.map.sources[0]+" */",u+=`
/*# sourceMappingURL=data:application/json;base64,`+btoa(unescape(encodeURIComponent(JSON.stringify(o.map))))+" */"),a&&(i.element=i.element||document.querySelector("style[data-group="+r+"]")),!i.element){let m=document.head||document.getElementsByTagName("head")[0],n=i.element=document.createElement("style");n.type="text/css",o.media&&n.setAttribute("media",o.media),a&&(n.setAttribute("data-group",r),n.setAttribute("data-next-index","0")),m.appendChild(n)}if(a&&(d=parseInt(i.element.getAttribute("data-next-index")),i.element.setAttribute("data-next-index",d+1)),i.element.styleSheet)i.parts.push(u),i.element.styleSheet.cssText=i.parts.filter(Boolean).join(`
`);else{let m=document.createTextNode(u),n=i.element.childNodes;n[d]&&i.element.removeChild(n[d]),n.length?i.element.insertBefore(m,n[d]):i.element.appendChild(m)}}}}var St=Ct({render:ht,staticRenderFns:vt},gt,_t,bt,yt,xt,!1,B,void 0,void 0),he=St;var Rt={name:"GroupSettings",mixins:[ve.validationMixin,Z],components:{AvatarUpload:oe,BannerScoped:C,ButtonSubmit:H,GroupRulesSettings:he,InvitationsTable:ce,RolesAndPermissions:_e,CharLengthIndicator:Q,Page:re,PageSection:S},data(){let{groupName:e,sharedValues:a,mincomeCurrency:t}=this.$store.getters.groupSettings;return{form:{groupName:e,sharedValues:a,mincomeCurrency:t},config:{nameMaxChar:E,descMaxChar:M},allowPublicChannels:!1}},computed:{...A(["currentGroupId"]),...y(["currentGroupOwnerID","groupSettings","ourIdentityContractId"]),currencies(){return X},sbpParams(){return{selector:"gi.actions/group/updateSettings",contractID:this.$store.state.currentGroupId,key:"groupPicture"}},isGroupAdmin(){return!1},configurePublicChannel(){return this.isGroupAdmin&&!1},nameCharLen(){return this.form.groupName?.length||0},descCharLen(){return this.form.sharedValues?.length||0}},mounted(){this.allowPublicChannels=this.groupSettings.allowPublicChannels},methods:{openProposal(e){v("okTurtles.events/emit",b,e)},async saveSettings(e){if(this.$v.form.$invalid){this.$refs.formMsg.danger(c("The form is invalid."));return}let a={};for(let t in this.form)this.form[t]!==this.groupSettings[t]&&(a[t]=this.form[t]);try{await v("gi.actions/group/updateSettings",{contractID:this.currentGroupId,data:a}),this.$refs.formMsg.success(c("Your changes were saved!"))}catch(t){console.error("GroupSettings saveSettings() error:",t),this.$refs.formMsg.danger(t.message)}},handleLeaveGroup(){this.currentGroupOwnerID===this.ourIdentityContractId?this.openProposal("GroupDeletionModal"):this.openProposal("GroupLeaveModal")},refreshForm(){let{groupName:e,sharedValues:a,mincomeCurrency:t}=this.groupSettings;this.form={groupName:e,sharedValues:a,mincomeCurrency:t}},async togglePublicChannelCreateAllownace(e){let a=e.target.checked;this.groupSettings.allowPublicChannels!==a&&(await v("gi.actions/group/updateSettings",{contractID:this.currentGroupId,data:{allowPublicChannels:a}}),this.allowPublicChannels=a)}},validations:{form:{groupName:{[c("This field is required")]:I.required,[c("Group name cannot exceed {maxchar} characters",{maxchar:E})]:(0,I.maxLength)(E)},sharedValues:{[c("Group description cannot exceed {maxchar} characters",{maxchar:M})]:(0,I.maxLength)(M)}}},watch:{groupSettings(){this.refreshForm()}}},wt=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("page",{staticClass:"c-page",scopedSlots:e._u([{key:"title",fn:function(){return[e._v(e._s(e.L("Group Settings")))]},proxy:!0},{key:"description",fn:function(){return[t("p",{staticClass:"p-descritpion has-text-1"},[e._v(e._s(e.L("Changes to these settings will be visible to all group members")))])]},proxy:!0}])},[t("avatar-upload",{attrs:{avatar:e.$store.getters.groupSettings.groupPicture,sbpParams:e.sbpParams,"avatar-type":"group"}}),t("page-section",[t("form",{on:{submit:function(s){s.preventDefault()}}},[t("label",{staticClass:"field"},[t("div",{staticClass:"c-label-container"},[t("i18n",{staticClass:"label"},[e._v("Group name")]),t("char-length-indicator",{attrs:{"current-length":e.nameCharLen,max:e.config.nameMaxChar,error:e.nameCharLen>e.config.nameMaxChar}})],1),t("input",{directives:[{name:"model",rawName:"v-model",value:e.form.groupName,expression:"form.groupName"},{name:"error",rawName:"v-error:groupName",arg:"groupName"}],staticClass:"input",class:{error:e.$v.form.groupName.$error},attrs:{type:"text",maxlength:e.config.nameMaxChar,"data-test":"groupName"},domProps:{value:e.form.groupName},on:{input:[function(s){s.target.composing||e.$set(e.form,"groupName",s.target.value)},function(s){return e.debounceField("groupName")}],blur:function(s){return e.updateField("groupName")}}})]),t("label",{staticClass:"field"},[t("div",{staticClass:"c-label-container"},[t("i18n",{staticClass:"label"},[e._v("About the group")]),t("char-length-indicator",{attrs:{"current-length":e.descCharLen,max:e.config.descMaxChar,error:e.descCharLen>e.config.descMaxChar}})],1),t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.form.sharedValues,expression:"form.sharedValues"},{name:"error",rawName:"v-error:sharedValues",arg:"sharedValues"}],staticClass:"textarea",class:{error:e.$v.form.sharedValues.$error},attrs:{maxlength:e.config.descMaxChar,"data-test":"sharedValues"},domProps:{value:e.form.sharedValues},on:{input:[function(s){s.target.composing||e.$set(e.form,"sharedValues",s.target.value)},function(s){return e.debounceField("sharedValues")}],blur:function(s){return e.updateField("sharedValues")}}})]),t("label",{staticClass:"field"},[t("div",{staticClass:"c-current-label-container"},[t("i18n",{staticClass:"label"},[e._v("Default currency")]),t("div",{staticClass:"c-coming-soon"},[t("i",{staticClass:"icon-info-circle"}),t("i18n",[e._v("Feature coming soon")])],1)],1),t("div",{staticClass:"selectbox c-currency"},[t("select",{directives:[{name:"model",rawName:"v-model",value:e.form.mincomeCurrency,expression:"form.mincomeCurrency"}],staticClass:"select",attrs:{name:"mincomeCurrency",disabled:!0},on:{change:function(s){var o=Array.prototype.filter.call(s.target.options,function(r){return r.selected}).map(function(r){var i="_value"in r?r._value:r.value;return i});e.$set(e.form,"mincomeCurrency",s.target.multiple?o:o[0])}}},e._l(e.currencies,function(s,o){return t("option",{key:o,domProps:{value:o}},[e._v(e._s(s.symbolWithCode))])}),0)]),t("i18n",{staticClass:"helper"},[e._v("This is the currency that will be displayed for every member of the group, across the platform.")])],1),t("banner-scoped",{ref:"formMsg",attrs:{"data-test":"formMsg",allowA:!0}}),t("div",{staticClass:"buttons"},[t("button-submit",{staticClass:"is-success",attrs:{"data-test":"saveBtn"},on:{click:e.saveSettings}},[e._v(e._s(e.L("Save changes")))])],1)],1)]),t("roles-and-permissions"),t("invitations-table"),e.configurePublicChannel?t("page-section",{attrs:{title:e.L("Public Channels")}},[t("div",{staticClass:"c-subcontent",attrs:{"data-test":"allowPublicChannels"}},[t("div",{staticClass:"c-text-content"},[t("i18n",{staticClass:"c-smaller-title",attrs:{tag:"h3"}},[e._v("Allow members to create public channels")]),t("i18n",{staticClass:"c-description",attrs:{tag:"p"}},[e._v("Let users create public channels. The data in public channels is intended to be completely public and should be treated with the same care and expectations of privacy that one has with normal social media: that is, you should have zero expectation of any privacy of the content you post to public channels.")])],1),t("div",{staticClass:"switch-wrapper"},[t("input",{staticClass:"switch",attrs:{type:"checkbox",name:"switch"},domProps:{checked:e.allowPublicChannels},on:{change:e.togglePublicChannelCreateAllownace}})])])]):e._e(),t("page-section",{attrs:{title:e.L("Voting System")}},[t("group-rules-settings")],1),t("page-section",{attrs:{title:e.L("Leave Group")}},[t("i18n",{staticClass:"has-text-1",attrs:{tag:"p",args:e.LTags("b")}},[e._v("This means you will stop having access to the {b_}group chat{_b} (including direct messages to other group members) and {b_}contributions{_b}. Re-joining the group is possible, but requires other members to vote and reach an agreement.")]),t("div",{staticClass:"buttons"},[t("i18n",{ref:"leave",staticClass:"is-danger is-outlined",attrs:{tag:"button","data-test":"leaveModalBtn"},on:{click:e.handleLeaveGroup}},[e._v("Leave group")])],1)],1)],1)},kt=[],It=function(e){e&&e("data-v-51de8abd_0",{source:".c-page[data-v-51de8abd]  .p-main{max-width:37rem}.c-label-container[data-v-51de8abd]{position:relative;display:flex;column-gap:.5rem;align-items:flex-end}.c-label-container .label[data-v-51de8abd]{flex-grow:1}.c-label-container .c-char-len[data-v-51de8abd]{display:inline-block;line-height:.875rem;font-size:.75rem;color:var(--text_1);flex-shrink:0;margin-bottom:.625rem}.c-label-container .c-char-len.is-error[data-v-51de8abd]{color:var(--danger_0)}.c-current-label-container[data-v-51de8abd]{display:flex;align-items:flex-end;column-gap:.5rem}.c-current-label-container .c-coming-soon[data-v-51de8abd]{color:var(--text_1);margin-bottom:.5rem;user-select:none}.c-current-label-container .c-coming-soon i[data-v-51de8abd]{margin-right:.2rem}@media screen and (min-width:769px),print{.c-currency[data-v-51de8abd]{width:50%}}.p-descritpion[data-v-51de8abd]{display:none;margin-top:.25rem;padding-bottom:3rem}@media screen and (min-width:1200px){.p-descritpion[data-v-51de8abd]{display:block}}.c-subcontent[data-v-51de8abd]{border:none;display:flex;justify-content:space-between;margin-top:1.5rem;margin-bottom:1rem}.c-subcontent[data-v-51de8abd]:last-child{margin-bottom:1.5rem}.c-smaller-title[data-v-51de8abd]{font-size:.875rem;font-weight:700}.c-description[data-v-51de8abd]{margin-top:.125rem;font-size:.875rem;color:var(--text_1)}",map:void 0,media:void 0})},At="data-v-51de8abd",Et=void 0,Mt=!1;function Tt(e,a,t,s,o,r,i,u,d,m){let n=(typeof t=="function"?t.options:t)||{};n.__file=`style>
`,n.render||(n.render=e.render,n.staticRenderFns=e.staticRenderFns,n._compiled=!0,o&&(n.functional=!0)),n._scopeId=s;{let p;if(a&&(p=i?function(l){a.call(this,m(l,this.$root.$options.shadowRoot))}:function(l){a.call(this,u(l))}),p!==void 0)if(n.functional){let l=n.render;n.render=function(h,f){return p.call(f),l(h,f)}}else{let l=n.beforeCreate;n.beforeCreate=l?[].concat(l,p):[p]}}return n}function z(){let e=z.styles||(z.styles={}),a=typeof navigator<"u"&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());return function(s,o){if(document.querySelector('style[data-vue-ssr-id~="'+s+'"]'))return;let r=a?o.media||"default":s,i=e[r]||(e[r]={ids:[],parts:[],element:void 0});if(!i.ids.includes(s)){let u=o.source,d=i.ids.length;if(i.ids.push(s),o.map&&(u+=`
/*# sourceURL=`+o.map.sources[0]+" */",u+=`
/*# sourceMappingURL=data:application/json;base64,`+btoa(unescape(encodeURIComponent(JSON.stringify(o.map))))+" */"),a&&(i.element=i.element||document.querySelector("style[data-group="+r+"]")),!i.element){let m=document.head||document.getElementsByTagName("head")[0],n=i.element=document.createElement("style");n.type="text/css",o.media&&n.setAttribute("media",o.media),a&&(n.setAttribute("data-group",r),n.setAttribute("data-next-index","0")),m.appendChild(n)}if(a&&(d=parseInt(i.element.getAttribute("data-next-index")),i.element.setAttribute("data-next-index",d+1)),i.element.styleSheet)i.parts.push(u),i.element.styleSheet.cssText=i.parts.filter(Boolean).join(`
`);else{let m=document.createTextNode(u),n=i.element.childNodes;n[d]&&i.element.removeChild(n[d]),n.length?i.element.insertBefore(m,n[d]):i.element.appendChild(m)}}}}var Nt=Tt({render:wt,staticRenderFns:kt},It,Rt,At,Mt,Et,!1,z,void 0,void 0),Vn=Nt;export{Vn as default};
//# sourceMappingURL=GroupSettings-EHCDYKFA-cached.js.map
