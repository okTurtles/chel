{
  "version": 3,
  "sources": ["../../../node_modules/idle-vue/dist/webpack:/build.js", "../../../node_modules/idle-vue/dist/webpack:/webpack/bootstrap a071c500dea4d0761f8a", "../../../node_modules/idle-vue/dist/webpack:/~/css-loader/lib/css-base.js", "../../../node_modules/idle-vue/dist/webpack:/~/vue-loader/lib/component-normalizer.js", "../../../node_modules/idle-vue/dist/webpack:/~/vue-style-loader/lib/addStylesClient.js", "../../../node_modules/idle-vue/dist/webpack:/~/idle-js/dist/Idle.js", "../../../node_modules/idle-vue/dist/webpack:/src/components/Idle.vue", "../../../node_modules/idle-vue/dist/webpack:/src/index.js", "../../../node_modules/idle-vue/dist/webpack:/Idle.vue", "../../../node_modules/idle-vue/dist/webpack:/Sprite.vue", "../../../node_modules/idle-vue/dist/webpack:/src/components/Sprite.vue?f917", "../../../node_modules/idle-vue/dist/webpack:/src/components/Idle.vue?c7fe", "../../../node_modules/idle-vue/dist/webpack:/src/assets/touch.png", "../../../node_modules/idle-vue/dist/webpack:/src/components/Sprite.vue", "../../../node_modules/idle-vue/dist/webpack:/src/components/Sprite.vue?4b50", "../../../node_modules/idle-vue/dist/webpack:/src/components/Idle.vue?d67d", "../../../node_modules/idle-vue/dist/webpack:/src/components/Sprite.vue?3e67", "../../../node_modules/idle-vue/dist/webpack:/src/components/Idle.vue?fcea", "../../../node_modules/idle-vue/dist/webpack:/~/vue-style-loader/lib/listToStyles.js", "../../../frontend/utils/blockies.js", "../../../node_modules/dompurify/src/utils.js", "../../../node_modules/dompurify/src/tags.js", "../../../node_modules/dompurify/src/attrs.js", "../../../node_modules/dompurify/src/regexp.js", "../../../node_modules/dompurify/src/purify.js", "../../../node_modules/portal-vue/src/utils/index.ts", "../../../node_modules/portal-vue/src/components/wormhole.ts", "../../../node_modules/portal-vue/src/components/portal.tsx", "../../../node_modules/portal-vue/src/components/portal-target.tsx", "../../../node_modules/portal-vue/src/components/mounting-portal.tsx", "../../../node_modules/portal-vue/src/index.ts", "../../../frontend/utils/CircularList.js", "../../../frontend/model/logger.js", "../../../node_modules/@sbp/okturtles.data/dist/module.mjs", "../../../node_modules/@sbp/okturtles.events/dist/esm/index.js", "../../../frontend/model/logServer.js", "../../../frontend/model/captureLogs.js", "../../../node_modules/@sbp/okturtles.eventqueue/dist/esm/index.js", "../../../frontend/main.js", "../../../node_modules/wicg-inert/dist/inert.esm.js", "../../../node_modules/@chelonia/lib/dist/esm/local-selectors/index.mjs", "../../../frontend/controller/app/chatroom.js", "../../../frontend/controller/app/group.js", "../../../frontend/controller/app/identity.js", "../../../node_modules/@chelonia/lib/dist/esm/zkpp.mjs", "../../../node_modules/@chelonia/lib/dist/esm/zkppConstants.mjs", "../../../frontend/model/database.js", "../../../frontend/controller/utils/misc.js", "../../../node_modules/@chelonia/lib/node_modules/@sbp/okturtles.data/dist/esm/index.mjs", "../../../node_modules/@chelonia/lib/node_modules/@sbp/okturtles.events/dist/esm/index.mjs", "../../../node_modules/@chelonia/lib/dist/esm/pubsub/index.mjs", "../../../frontend/controller/instance-keys.js", "../../../frontend/controller/backend.js", "../../../frontend/controller/namespace.js", "../../../frontend/model/state.js", "../../../frontend/model/notifications/storageConstants.js", "../../../frontend/model/notifications/utils.js", "../../../frontend/model/contracts/shared/getters/chatroom.js", "../../../frontend/model/contracts/shared/getters/group.js", "../../../frontend/model/contracts/shared/getters/identity.js", "../../../frontend/model/getters.js", "../../../frontend/model/notifications/vuexModule.js", "../../../frontend/model/notifications/getters.js", "../../../frontend/model/notifications/mutationKeys.js", "../../../frontend/model/settings/vuexModule.js", "../../../frontend/model/chatroom/getters.js", "../../../frontend/model/chatroom/vuexModule.js", "../../../frontend/views/pages/Home.vue", "../../../frontend/views/components/Loading.vue", "../../../frontend/views/pages/Join.vue", "../../../frontend/utils/lazyLoadedView.js", "../../../frontend/views/containers/loading-error/ErrorModal.vue", "../../../frontend/views/containers/loading-error/ErrorPage.vue", "../../../frontend/views/containers/loading-error/LoadingModal.vue", "../../../frontend/views/containers/loading-error/LoadingBaseModal.vue", "../../../frontend/views/containers/loading-error/LoadingPage.vue", "../../../frontend/controller/router.js", "../../../frontend/utils/isPwa.js", "../../../frontend/controller/service-worker.js", "../../../frontend/views/components/AppStyles.vue", "../../../frontend/views/components/banners/BannerGeneral.vue", "../../../frontend/views/components/modal/Modal.vue", "../../../frontend/views/components/sounds/Background.vue", "../../../frontend/views/containers/notifications/NotificationCard.vue", "../../../frontend/views/containers/notifications/NotificationBell.vue", "../../../frontend/views/containers/navigation/GroupsList.vue", "../../../frontend/views/containers/navigation/Profile.vue", "../../../frontend/views/containers/navigation/Navigation.vue", "../../../frontend/views/utils/avatar.js", "../../../frontend/views/utils/i18n.js", "../../../frontend/views/utils/vSafeHtml.js", "../../../frontend/views/utils/vError.js", "../../../frontend/views/utils/vFocus.js", "../../../frontend/model/featureCheck.js", "../../../frontend/model/notifications/periodicNotifications.js", "../../../frontend/model/notifications/mainNotificationsMixin.js", "../../../frontend/utils/faviconBadge.js", "../../../frontend/utils/init-vue-plugins.js", "../../../frontend/views/utils/vStyle.js"],
  "sourcesContent": ["module.exports =\n/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// identity function for calling harmony imports with the correct context\n/******/ \t__webpack_require__.i = function(value) { return value; };\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"/\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 5);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports) {\n\n/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\nmodule.exports = function(useSourceMap) {\n\tvar list = [];\n\n\t// return the list of modules as css string\n\tlist.toString = function toString() {\n\t\treturn this.map(function (item) {\n\t\t\tvar content = cssWithMappingToString(item, useSourceMap);\n\t\t\tif(item[2]) {\n\t\t\t\treturn \"@media \" + item[2] + \"{\" + content + \"}\";\n\t\t\t} else {\n\t\t\t\treturn content;\n\t\t\t}\n\t\t}).join(\"\");\n\t};\n\n\t// import a list of modules into the list\n\tlist.i = function(modules, mediaQuery) {\n\t\tif(typeof modules === \"string\")\n\t\t\tmodules = [[null, modules, \"\"]];\n\t\tvar alreadyImportedModules = {};\n\t\tfor(var i = 0; i < this.length; i++) {\n\t\t\tvar id = this[i][0];\n\t\t\tif(typeof id === \"number\")\n\t\t\t\talreadyImportedModules[id] = true;\n\t\t}\n\t\tfor(i = 0; i < modules.length; i++) {\n\t\t\tvar item = modules[i];\n\t\t\t// skip already imported module\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\n\t\t\t//  when a module is imported multiple times with different media queries.\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\n\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\n\t\t\t\tif(mediaQuery && !item[2]) {\n\t\t\t\t\titem[2] = mediaQuery;\n\t\t\t\t} else if(mediaQuery) {\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\n\t\t\t\t}\n\t\t\t\tlist.push(item);\n\t\t\t}\n\t\t}\n\t};\n\treturn list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n\tvar content = item[1] || '';\n\tvar cssMapping = item[3];\n\tif (!cssMapping) {\n\t\treturn content;\n\t}\n\n\tif (useSourceMap && typeof btoa === 'function') {\n\t\tvar sourceMapping = toComment(cssMapping);\n\t\tvar sourceURLs = cssMapping.sources.map(function (source) {\n\t\t\treturn '/*# sourceURL=' + cssMapping.sourceRoot + source + ' */'\n\t\t});\n\n\t\treturn [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n\t}\n\n\treturn [content].join('\\n');\n}\n\n// Adapted from convert-source-map (MIT)\nfunction toComment(sourceMap) {\n\t// eslint-disable-next-line no-undef\n\tvar base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n\tvar data = 'sourceMappingURL=data:application/json;charset=utf-8;base64,' + base64;\n\n\treturn '/*# ' + data + ' */';\n}\n\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports) {\n\n/* globals __VUE_SSR_CONTEXT__ */\n\n// this module is a runtime utility for cleaner component module output and will\n// be included in the final webpack user bundle\n\nmodule.exports = function normalizeComponent (\n  rawScriptExports,\n  compiledTemplate,\n  injectStyles,\n  scopeId,\n  moduleIdentifier /* server only */\n) {\n  var esModule\n  var scriptExports = rawScriptExports = rawScriptExports || {}\n\n  // ES6 modules interop\n  var type = typeof rawScriptExports.default\n  if (type === 'object' || type === 'function') {\n    esModule = rawScriptExports\n    scriptExports = rawScriptExports.default\n  }\n\n  // Vue.extend constructor export interop\n  var options = typeof scriptExports === 'function'\n    ? scriptExports.options\n    : scriptExports\n\n  // render functions\n  if (compiledTemplate) {\n    options.render = compiledTemplate.render\n    options.staticRenderFns = compiledTemplate.staticRenderFns\n  }\n\n  // scopedId\n  if (scopeId) {\n    options._scopeId = scopeId\n  }\n\n  var hook\n  if (moduleIdentifier) { // server build\n    hook = function (context) {\n      // 2.3 injection\n      context =\n        context || // cached call\n        (this.$vnode && this.$vnode.ssrContext) || // stateful\n        (this.parent && this.parent.$vnode && this.parent.$vnode.ssrContext) // functional\n      // 2.2 with runInNewContext: true\n      if (!context && typeof __VUE_SSR_CONTEXT__ !== 'undefined') {\n        context = __VUE_SSR_CONTEXT__\n      }\n      // inject component styles\n      if (injectStyles) {\n        injectStyles.call(this, context)\n      }\n      // register component module identifier for async chunk inferrence\n      if (context && context._registeredComponents) {\n        context._registeredComponents.add(moduleIdentifier)\n      }\n    }\n    // used by ssr in case component is cached and beforeCreate\n    // never gets called\n    options._ssrRegister = hook\n  } else if (injectStyles) {\n    hook = injectStyles\n  }\n\n  if (hook) {\n    var functional = options.functional\n    var existing = functional\n      ? options.render\n      : options.beforeCreate\n    if (!functional) {\n      // inject component registration as beforeCreate hook\n      options.beforeCreate = existing\n        ? [].concat(existing, hook)\n        : [hook]\n    } else {\n      // register for functioal component in vue file\n      options.render = function renderWithStyleInjection (h, context) {\n        hook.call(context)\n        return existing(h, context)\n      }\n    }\n  }\n\n  return {\n    esModule: esModule,\n    exports: scriptExports,\n    options: options\n  }\n}\n\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n  Modified by Evan You @yyx990803\n*/\n\nvar hasDocument = typeof document !== 'undefined'\n\nif (typeof DEBUG !== 'undefined' && DEBUG) {\n  if (!hasDocument) {\n    throw new Error(\n    'vue-style-loader cannot be used in a non-browser environment. ' +\n    \"Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.\"\n  ) }\n}\n\nvar listToStyles = __webpack_require__(16)\n\n/*\ntype StyleObject = {\n  id: number;\n  parts: Array<StyleObjectPart>\n}\n\ntype StyleObjectPart = {\n  css: string;\n  media: string;\n  sourceMap: ?string\n}\n*/\n\nvar stylesInDom = {/*\n  [id: number]: {\n    id: number,\n    refs: number,\n    parts: Array<(obj?: StyleObjectPart) => void>\n  }\n*/}\n\nvar head = hasDocument && (document.head || document.getElementsByTagName('head')[0])\nvar singletonElement = null\nvar singletonCounter = 0\nvar isProduction = false\nvar noop = function () {}\n\n// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n// tags it will allow on a page\nvar isOldIE = typeof navigator !== 'undefined' && /msie [6-9]\\b/.test(navigator.userAgent.toLowerCase())\n\nmodule.exports = function (parentId, list, _isProduction) {\n  isProduction = _isProduction\n\n  var styles = listToStyles(parentId, list)\n  addStylesToDom(styles)\n\n  return function update (newList) {\n    var mayRemove = []\n    for (var i = 0; i < styles.length; i++) {\n      var item = styles[i]\n      var domStyle = stylesInDom[item.id]\n      domStyle.refs--\n      mayRemove.push(domStyle)\n    }\n    if (newList) {\n      styles = listToStyles(parentId, newList)\n      addStylesToDom(styles)\n    } else {\n      styles = []\n    }\n    for (var i = 0; i < mayRemove.length; i++) {\n      var domStyle = mayRemove[i]\n      if (domStyle.refs === 0) {\n        for (var j = 0; j < domStyle.parts.length; j++) {\n          domStyle.parts[j]()\n        }\n        delete stylesInDom[domStyle.id]\n      }\n    }\n  }\n}\n\nfunction addStylesToDom (styles /* Array<StyleObject> */) {\n  for (var i = 0; i < styles.length; i++) {\n    var item = styles[i]\n    var domStyle = stylesInDom[item.id]\n    if (domStyle) {\n      domStyle.refs++\n      for (var j = 0; j < domStyle.parts.length; j++) {\n        domStyle.parts[j](item.parts[j])\n      }\n      for (; j < item.parts.length; j++) {\n        domStyle.parts.push(addStyle(item.parts[j]))\n      }\n      if (domStyle.parts.length > item.parts.length) {\n        domStyle.parts.length = item.parts.length\n      }\n    } else {\n      var parts = []\n      for (var j = 0; j < item.parts.length; j++) {\n        parts.push(addStyle(item.parts[j]))\n      }\n      stylesInDom[item.id] = { id: item.id, refs: 1, parts: parts }\n    }\n  }\n}\n\nfunction createStyleElement () {\n  var styleElement = document.createElement('style')\n  styleElement.type = 'text/css'\n  head.appendChild(styleElement)\n  return styleElement\n}\n\nfunction addStyle (obj /* StyleObjectPart */) {\n  var update, remove\n  var styleElement = document.querySelector('style[data-vue-ssr-id~=\"' + obj.id + '\"]')\n\n  if (styleElement) {\n    if (isProduction) {\n      // has SSR styles and in production mode.\n      // simply do nothing.\n      return noop\n    } else {\n      // has SSR styles but in dev mode.\n      // for some reason Chrome can't handle source map in server-rendered\n      // style tags - source maps in <style> only works if the style tag is\n      // created and inserted dynamically. So we remove the server rendered\n      // styles and inject new ones.\n      styleElement.parentNode.removeChild(styleElement)\n    }\n  }\n\n  if (isOldIE) {\n    // use singleton mode for IE9.\n    var styleIndex = singletonCounter++\n    styleElement = singletonElement || (singletonElement = createStyleElement())\n    update = applyToSingletonTag.bind(null, styleElement, styleIndex, false)\n    remove = applyToSingletonTag.bind(null, styleElement, styleIndex, true)\n  } else {\n    // use multi-style-tag mode in all other cases\n    styleElement = createStyleElement()\n    update = applyToTag.bind(null, styleElement)\n    remove = function () {\n      styleElement.parentNode.removeChild(styleElement)\n    }\n  }\n\n  update(obj)\n\n  return function updateStyle (newObj /* StyleObjectPart */) {\n    if (newObj) {\n      if (newObj.css === obj.css &&\n          newObj.media === obj.media &&\n          newObj.sourceMap === obj.sourceMap) {\n        return\n      }\n      update(obj = newObj)\n    } else {\n      remove()\n    }\n  }\n}\n\nvar replaceText = (function () {\n  var textStore = []\n\n  return function (index, replacement) {\n    textStore[index] = replacement\n    return textStore.filter(Boolean).join('\\n')\n  }\n})()\n\nfunction applyToSingletonTag (styleElement, index, remove, obj) {\n  var css = remove ? '' : obj.css\n\n  if (styleElement.styleSheet) {\n    styleElement.styleSheet.cssText = replaceText(index, css)\n  } else {\n    var cssNode = document.createTextNode(css)\n    var childNodes = styleElement.childNodes\n    if (childNodes[index]) styleElement.removeChild(childNodes[index])\n    if (childNodes.length) {\n      styleElement.insertBefore(cssNode, childNodes[index])\n    } else {\n      styleElement.appendChild(cssNode)\n    }\n  }\n}\n\nfunction applyToTag (styleElement, obj) {\n  var css = obj.css\n  var media = obj.media\n  var sourceMap = obj.sourceMap\n\n  if (media) {\n    styleElement.setAttribute('media', media)\n  }\n\n  if (sourceMap) {\n    // https://developer.chrome.com/devtools/docs/javascript-debugging\n    // this makes source maps inside style tags work properly in Chrome\n    css += '\\n/*# sourceURL=' + sourceMap.sources[0] + ' */'\n    // http://stackoverflow.com/a/26603875\n    css += '\\n/*# sourceMappingURL=data:application/json;base64,' + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + ' */'\n  }\n\n  if (styleElement.styleSheet) {\n    styleElement.styleSheet.cssText = css\n  } else {\n    while (styleElement.firstChild) {\n      styleElement.removeChild(styleElement.firstChild)\n    }\n    styleElement.appendChild(document.createTextNode(css))\n  }\n}\n\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n(function webpackUniversalModuleDefinition(root, factory) {\n\tif(true)\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"IdleJs\"] = factory();\n\telse\n\t\troot[\"IdleJs\"] = factory();\n})(this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar bulkAddEventListener = function bulkAddEventListener(object, events, callback) {\n\t  events.forEach(function (event) {\n\t    object.addEventListener(event, function (event) {\n\t      callback(event);\n\t    });\n\t  });\n\t};\n\t\n\tvar bulkRemoveEventListener = function bulkRemoveEventListener(object, events) {\n\t  events.forEach(function (event) {\n\t    object.removeEventListener(event);\n\t  });\n\t};\n\t\n\tvar IdleJs = function () {\n\t  function IdleJs(options) {\n\t    _classCallCheck(this, IdleJs);\n\t\n\t    this.defaults = {\n\t      idle: 10000, // idle time in ms\n\t      events: ['mousemove', 'keydown', 'mousedown', 'touchstart'], // events that will trigger the idle resetter\n\t      onIdle: function onIdle() {}, // callback function to be executed after idle time\n\t      onActive: function onActive() {}, // callback function to be executed after back form idleness\n\t      onHide: function onHide() {}, // callback function to be executed when window become hidden\n\t      onShow: function onShow() {}, // callback function to be executed when window become visible\n\t      keepTracking: true, // set it to false of you want to track only once\n\t      startAtIdle: false, // set it to true if you want to start in the idle state\n\t      recurIdleCall: false\n\t    };\n\t    this.settings = _extends({}, this.defaults, options);\n\t    this.idle = this.settings.startAtIdle;\n\t    this.visible = !this.settings.startAtIdle;\n\t    this.visibilityEvents = ['visibilitychange', 'webkitvisibilitychange', 'mozvisibilitychange', 'msvisibilitychange'];\n\t    this.lastId = null;\n\t  }\n\t\n\t  _createClass(IdleJs, [{\n\t    key: 'resetTimeout',\n\t    value: function resetTimeout(id, settings) {\n\t      if (this.idle) {\n\t        settings.onActive.call();\n\t        this.idle = false;\n\t      }\n\t      clearTimeout(id);\n\t      if (this.settings.keepTracking) {\n\t        return this.timeout(this.settings);\n\t      }\n\t    }\n\t  }, {\n\t    key: 'timeout',\n\t    value: function timeout(settings) {\n\t      var timer = this.settings.recurIdleCall ? setInterval : setTimeout;\n\t      var id;\n\t      id = timer(function () {\n\t        this.idle = true;\n\t        this.settings.onIdle.call();\n\t      }.bind(this), this.settings.idle);\n\t      return id;\n\t    }\n\t  }, {\n\t    key: 'start',\n\t    value: function start() {\n\t      window.addEventListener('idle:stop', function (event) {\n\t        bulkRemoveEventListener(window, this.settings.events);\n\t        this.settings.keepTracking = false;\n\t        this.resetTimeout(this.lastId, this.settings);\n\t      });\n\t      this.lastId = this.timeout(this.settings);\n\t      bulkAddEventListener(window, this.settings.events, function (event) {\n\t        this.lastId = this.resetTimeout(this.lastId, this.settings);\n\t      }.bind(this));\n\t      if (this.settings.onShow || this.settings.onHide) {\n\t        bulkAddEventListener(document, this.visibilityEvents, function (event) {\n\t          if (document.hidden || document.webkitHidden || document.mozHidden || document.msHidden) {\n\t            if (this.visible) {\n\t              this.visible = false;\n\t              this.settings.onHide.call();\n\t            }\n\t          } else {\n\t            if (!this.visible) {\n\t              this.visible = true;\n\t              this.settings.onShow.call();\n\t            }\n\t          }\n\t        }.bind(this));\n\t      }\n\t    }\n\t  }]);\n\t\n\t  return IdleJs;\n\t}();\n\t\n\tmodule.exports = IdleJs;\n\n/***/ }\n/******/ ])\n});\n;\n//# sourceMappingURL=idle.js.map\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\nfunction injectStyle (ssrContext) {\n  __webpack_require__(15)\n}\nvar Component = __webpack_require__(1)(\n  /* script */\n  __webpack_require__(6),\n  /* template */\n  __webpack_require__(13),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  null,\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _idleJs = __webpack_require__(3);\n\nvar _idleJs2 = _interopRequireDefault(_idleJs);\n\nvar _Idle = __webpack_require__(4);\n\nvar _Idle2 = _interopRequireDefault(_Idle);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nexports.default = {\n  IdleView: _Idle2.default,\n  install: function install(Vue, options) {\n    var _ref = options || {},\n        eventEmitter = _ref.eventEmitter,\n        store = _ref.store,\n        _ref$moduleName = _ref.moduleName,\n        moduleName = _ref$moduleName === undefined ? 'idleVue' : _ref$moduleName,\n        _ref$idleTime = _ref.idleTime,\n        idleTime = _ref$idleTime === undefined ? 60 * 1000 : _ref$idleTime,\n        _ref$events = _ref.events,\n        events = _ref$events === undefined ? ['mousemove', 'keydown', 'mousedown', 'touchstart'] : _ref$events,\n        _ref$keepTracking = _ref.keepTracking,\n        keepTracking = _ref$keepTracking === undefined ? true : _ref$keepTracking,\n        _ref$startAtIdle = _ref.startAtIdle,\n        startAtIdle = _ref$startAtIdle === undefined ? true : _ref$startAtIdle;\n\n    if (!eventEmitter && !store) {\n      throw Error('Either `eventEmitter` or `store` must be passed in options');\n    }\n\n    store && store.registerModule(moduleName, {\n      state: { isIdle: startAtIdle },\n      mutations: _defineProperty({}, moduleName + '/IDLE_CHANGED', function undefined(state, isIdle) {\n        state.isIdle = isIdle;\n      })\n    });\n\n    var onIdleStr = moduleName + '_onIdle';\n    var onActiveStr = moduleName + '_onActive';\n\n    var idle = new _idleJs2.default({\n      idle: idleTime,\n      events: events,\n      keepTracking: keepTracking,\n      startAtIdle: startAtIdle,\n\n      onIdle: function onIdle() {\n        eventEmitter && eventEmitter.$emit(onIdleStr);\n        store && store.commit(moduleName + '/IDLE_CHANGED', true);\n      },\n      onActive: function onActive() {\n        eventEmitter && eventEmitter.$emit(onActiveStr);\n        store && store.commit(moduleName + '/IDLE_CHANGED', false);\n      }\n    });\n    idle.start();\n\n    Vue.component('IdleView', _Idle2.default);\n\n    Vue.mixin({\n      data: function data() {\n        var _ref2;\n\n        return _ref2 = {}, _defineProperty(_ref2, onIdleStr, null), _defineProperty(_ref2, onActiveStr, null), _ref2;\n      },\n      created: function created() {\n        if (eventEmitter && this.$options.onIdle) {\n          this[onIdleStr] = this.$options.onIdle.bind(this);\n          eventEmitter.$on(onIdleStr, this[onIdleStr]);\n        }\n        if (eventEmitter && this.$options.onActive) {\n          this[onActiveStr] = this.$options.onActive.bind(this);\n          eventEmitter.$on(onActiveStr, this[onActiveStr]);\n        }\n      },\n      destroyed: function destroyed() {\n        if (eventEmitter && this[onIdleStr]) {\n          eventEmitter.$off(onIdleStr, this[onIdleStr]);\n        }\n        if (eventEmitter && this[onActiveStr]) {\n          eventEmitter.$off(onActiveStr, this[onActiveStr]);\n        }\n      },\n\n      computed: {\n        isAppIdle: function isAppIdle() {\n          return store && store.state[moduleName].isIdle;\n        }\n      }\n    });\n  }\n};\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _Sprite = __webpack_require__(11);\n\nvar _Sprite2 = _interopRequireDefault(_Sprite);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = {\n  components: {\n    Sprite: _Sprite2.default\n  },\n  onIdle: function onIdle() {\n    this.$refs.sprite.play();\n  },\n  onActive: function onActive() {\n    this.$refs.sprite.stop();\n  }\n};\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n//\n//\n//\n//\n//\n//\n\nexports.default = {\n  name: 'sprite',\n  props: {\n    spriteSrc: {\n      type: String,\n      default: ''\n    },\n    spriteId: {\n      type: String,\n      default: 'sprite'\n    },\n    spriteW: {\n      type: Number,\n      default: 1\n    },\n    spriteH: {\n      type: Number,\n      default: 1\n    },\n    spriteSpeed: {\n      type: Number,\n      default: 1\n    }\n  },\n  data: function data() {\n    return {\n      visible: true,\n      frameIndex: 0,\n      tickCount: 0,\n      frameLength: 0,\n      ticksPerFrame: 0,\n      numberOfFrames: 0,\n      frameRate: 20,\n      ctx: '',\n      canvas: '',\n      mySprite: '',\n      animationFrameId: -1\n    };\n  },\n  mounted: function mounted() {\n    var vm = this;\n    this.$nextTick(function () {\n      vm.mySprite = new Image();\n      vm.mySprite.onload = function (e) {\n        vm.spriteInit(e.target);\n      };\n      vm.mySprite.src = vm.spriteSrc;\n    });\n  },\n\n  methods: {\n    spriteInit: function spriteInit(img) {\n      this.canvas = this.$el.querySelector('#' + this.spriteId);\n      this.ctx = this.canvas.getContext('2d');\n      this.ticksPerFrame = this.spriteSpeed;\n      this.frameLength = img.width;\n      this.numberOfFrames = img.width / this.spriteW;\n      this.spriteLoop();\n    },\n    spriteUpdate: function spriteUpdate() {\n      this.tickCount++;\n      if (this.tickCount > this.ticksPerFrame) {\n        this.tickCount = 0;\n        // If the current frame index is in range\n        if (this.frameIndex < this.numberOfFrames - 1) {\n          // Go to the next frame\n          this.frameIndex++;\n        } else {\n          this.frameIndex = 0;\n        }\n      }\n    },\n    spriteRender: function spriteRender() {\n      this.ctx.clearRect(0, 0, this.spriteW, this.spriteH);\n      // Draw the animation\n      var toDraw = this.frameIndex * this.spriteW;\n      this.ctx.drawImage(this.mySprite, toDraw, 0, this.spriteW, this.spriteH, 0, 0, this.spriteW, this.spriteH);\n    },\n    spriteLoop: function spriteLoop() {\n      this.animationFrameId = window.requestAnimationFrame(this.spriteLoop);\n      this.spriteUpdate();\n      this.spriteRender();\n    },\n    stop: function stop() {\n      window.cancelAnimationFrame(this.animationFrameId);\n    },\n    play: function play() {\n      this.spriteLoop();\n    }\n  }\n};\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(0)(true);\n// imports\n\n\n// module\nexports.push([module.i, \"\", \"\", {\"version\":3,\"sources\":[],\"names\":[],\"mappings\":\"\",\"file\":\"Sprite.vue\",\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n/***/ }),\n/* 9 */\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(0)(true);\n// imports\n\n\n// module\nexports.push([module.i, \".idle-view{position:fixed;top:0;width:100vw;height:100vh;z-index:8888;pointer-events:none;display:none}.idle-view.isIdle{pointer-events:all;display:block}.idle-view .sprite{position:absolute;top:50%;left:50%;transform:translateX(-50%) translateY(-50%);height:10px;width:180px;z-index:9999;-webkit-transform:scale(.7)}.idle-view .overlay{width:100%;height:100%;position:absolute;z-index:8888;background:#000;opacity:0;-webkit-transition:opacity .8s cubic-bezier(.77,0,.175,1)}.idle-view.isIdle .overlay{opacity:.6}@-webkit-keyframes SlowMo{0%{background-position:0 50%}50%{background-position:100% 50%}to{background-position:0 50%}}\", \"\", {\"version\":3,\"sources\":[\"/home/afonso/Dev/idle-vue/src/components/Idle.vue\"],\"names\":[],\"mappings\":\"AACA,WACE,eAAgB,AAChB,MAAO,AACP,YAAa,AACb,aAAc,AACd,aAAc,AAEd,oBAAqB,AACrB,YAAc,CACf,AACD,kBACE,mBAAoB,AACpB,aAAe,CAChB,AACD,mBACE,kBAAmB,AACnB,QAAS,AACT,SAAU,AACV,4CAA6C,AAE7C,YAAa,AACb,YAAa,AACb,aAAc,AACd,2BAA8B,CAC/B,AACD,oBACE,WAAY,AACZ,YAAa,AACb,kBAAmB,AACnB,aAAc,AAEd,gBAAiB,AACjB,UAAW,AAEX,yDAAkE,CACnE,AACD,2BACE,UAAa,CACd,AACD,0BACA,GAAG,yBAA0B,CAC5B,AACD,IAAI,4BAA4B,CAC/B,AACD,GAAK,yBAA0B,CAC9B,CACA\",\"file\":\"Idle.vue\",\"sourcesContent\":[\"\\n.idle-view {\\n  position: fixed;\\n  top: 0;\\n  width: 100vw;\\n  height: 100vh;\\n  z-index: 8888;\\n\\n  pointer-events: none;\\n  display: none;\\n}\\n.idle-view.isIdle {\\n  pointer-events: all;\\n  display: block;\\n}\\n.idle-view .sprite {\\n  position: absolute;\\n  top: 50%;\\n  left: 50%;\\n  transform: translateX(-50%) translateY(-50%);\\n\\n  height: 10px;\\n  width: 180px;\\n  z-index: 9999;\\n  -webkit-transform: scale(0.7);\\n}\\n.idle-view .overlay {\\n  width: 100%;\\n  height: 100%;\\n  position: absolute;\\n  z-index: 8888;\\n\\n  background: #000;\\n  opacity: 0;\\n  /*-webkit-animation: SlowMo 5s cubic-bezier(0.77, 0, 0.175, 1) infinite;*/\\n  -webkit-transition: opacity 800ms cubic-bezier(0.77, 0, 0.175, 1);\\n}\\n.idle-view.isIdle .overlay {\\n  opacity: 0.6;\\n}\\n@-webkit-keyframes SlowMo {\\n0%{background-position:0% 50%\\n}\\n50%{background-position:100% 50%\\n}\\n100%{background-position:0% 50%\\n}\\n}\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n/***/ }),\n/* 10 */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"static/img/touch.ba3be66.png\";\n\n/***/ }),\n/* 11 */\n/***/ (function(module, exports, __webpack_require__) {\n\nfunction injectStyle (ssrContext) {\n  __webpack_require__(14)\n}\nvar Component = __webpack_require__(1)(\n  /* script */\n  __webpack_require__(7),\n  /* template */\n  __webpack_require__(12),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  null,\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n/* 12 */\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"sprite\"\n  }, [_c('canvas', {\n    attrs: {\n      \"id\": _vm.spriteId,\n      \"width\": _vm.spriteW,\n      \"height\": _vm.spriteH\n    }\n  })])\n},staticRenderFns: []}\n\n/***/ }),\n/* 13 */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"idle-view\",\n    class: {\n      isIdle: _vm.isIdle\n    }\n  }, [_c('div', {\n    staticClass: \"overlay\"\n  }), _vm._v(\" \"), _c('sprite', {\n    ref: \"sprite\",\n    attrs: {\n      \"spriteId\": \"touch\",\n      \"spriteSrc\": __webpack_require__(10),\n      \"spriteW\": 180,\n      \"spriteH\": 215\n    }\n  })], 1)\n},staticRenderFns: []}\n\n/***/ }),\n/* 14 */\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(8);\nif(typeof content === 'string') content = [[module.i, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = __webpack_require__(2)(\"b6696284\", content, true);\n\n/***/ }),\n/* 15 */\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(9);\nif(typeof content === 'string') content = [[module.i, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = __webpack_require__(2)(\"25b5ba8a\", content, true);\n\n/***/ }),\n/* 16 */\n/***/ (function(module, exports) {\n\n/**\n * Translates the list format produced by css-loader into something\n * easier to manipulate.\n */\nmodule.exports = function listToStyles (parentId, list) {\n  var styles = []\n  var newStyles = {}\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i]\n    var id = item[0]\n    var css = item[1]\n    var media = item[2]\n    var sourceMap = item[3]\n    var part = {\n      id: parentId + ':' + i,\n      css: css,\n      media: media,\n      sourceMap: sourceMap\n    }\n    if (!newStyles[id]) {\n      styles.push(newStyles[id] = { id: id, parts: [part] })\n    } else {\n      newStyles[id].parts.push(part)\n    }\n  }\n  return styles\n}\n\n\n/***/ })\n/******/ ]);\n\n\n// WEBPACK FOOTER //\n// build.js", " \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 5);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap a071c500dea4d0761f8a", "/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\nmodule.exports = function(useSourceMap) {\n\tvar list = [];\n\n\t// return the list of modules as css string\n\tlist.toString = function toString() {\n\t\treturn this.map(function (item) {\n\t\t\tvar content = cssWithMappingToString(item, useSourceMap);\n\t\t\tif(item[2]) {\n\t\t\t\treturn \"@media \" + item[2] + \"{\" + content + \"}\";\n\t\t\t} else {\n\t\t\t\treturn content;\n\t\t\t}\n\t\t}).join(\"\");\n\t};\n\n\t// import a list of modules into the list\n\tlist.i = function(modules, mediaQuery) {\n\t\tif(typeof modules === \"string\")\n\t\t\tmodules = [[null, modules, \"\"]];\n\t\tvar alreadyImportedModules = {};\n\t\tfor(var i = 0; i < this.length; i++) {\n\t\t\tvar id = this[i][0];\n\t\t\tif(typeof id === \"number\")\n\t\t\t\talreadyImportedModules[id] = true;\n\t\t}\n\t\tfor(i = 0; i < modules.length; i++) {\n\t\t\tvar item = modules[i];\n\t\t\t// skip already imported module\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\n\t\t\t//  when a module is imported multiple times with different media queries.\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\n\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\n\t\t\t\tif(mediaQuery && !item[2]) {\n\t\t\t\t\titem[2] = mediaQuery;\n\t\t\t\t} else if(mediaQuery) {\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\n\t\t\t\t}\n\t\t\t\tlist.push(item);\n\t\t\t}\n\t\t}\n\t};\n\treturn list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n\tvar content = item[1] || '';\n\tvar cssMapping = item[3];\n\tif (!cssMapping) {\n\t\treturn content;\n\t}\n\n\tif (useSourceMap && typeof btoa === 'function') {\n\t\tvar sourceMapping = toComment(cssMapping);\n\t\tvar sourceURLs = cssMapping.sources.map(function (source) {\n\t\t\treturn '/*# sourceURL=' + cssMapping.sourceRoot + source + ' */'\n\t\t});\n\n\t\treturn [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n\t}\n\n\treturn [content].join('\\n');\n}\n\n// Adapted from convert-source-map (MIT)\nfunction toComment(sourceMap) {\n\t// eslint-disable-next-line no-undef\n\tvar base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n\tvar data = 'sourceMappingURL=data:application/json;charset=utf-8;base64,' + base64;\n\n\treturn '/*# ' + data + ' */';\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader/lib/css-base.js\n// module id = 0\n// module chunks = 0", "/* globals __VUE_SSR_CONTEXT__ */\n\n// this module is a runtime utility for cleaner component module output and will\n// be included in the final webpack user bundle\n\nmodule.exports = function normalizeComponent (\n  rawScriptExports,\n  compiledTemplate,\n  injectStyles,\n  scopeId,\n  moduleIdentifier /* server only */\n) {\n  var esModule\n  var scriptExports = rawScriptExports = rawScriptExports || {}\n\n  // ES6 modules interop\n  var type = typeof rawScriptExports.default\n  if (type === 'object' || type === 'function') {\n    esModule = rawScriptExports\n    scriptExports = rawScriptExports.default\n  }\n\n  // Vue.extend constructor export interop\n  var options = typeof scriptExports === 'function'\n    ? scriptExports.options\n    : scriptExports\n\n  // render functions\n  if (compiledTemplate) {\n    options.render = compiledTemplate.render\n    options.staticRenderFns = compiledTemplate.staticRenderFns\n  }\n\n  // scopedId\n  if (scopeId) {\n    options._scopeId = scopeId\n  }\n\n  var hook\n  if (moduleIdentifier) { // server build\n    hook = function (context) {\n      // 2.3 injection\n      context =\n        context || // cached call\n        (this.$vnode && this.$vnode.ssrContext) || // stateful\n        (this.parent && this.parent.$vnode && this.parent.$vnode.ssrContext) // functional\n      // 2.2 with runInNewContext: true\n      if (!context && typeof __VUE_SSR_CONTEXT__ !== 'undefined') {\n        context = __VUE_SSR_CONTEXT__\n      }\n      // inject component styles\n      if (injectStyles) {\n        injectStyles.call(this, context)\n      }\n      // register component module identifier for async chunk inferrence\n      if (context && context._registeredComponents) {\n        context._registeredComponents.add(moduleIdentifier)\n      }\n    }\n    // used by ssr in case component is cached and beforeCreate\n    // never gets called\n    options._ssrRegister = hook\n  } else if (injectStyles) {\n    hook = injectStyles\n  }\n\n  if (hook) {\n    var functional = options.functional\n    var existing = functional\n      ? options.render\n      : options.beforeCreate\n    if (!functional) {\n      // inject component registration as beforeCreate hook\n      options.beforeCreate = existing\n        ? [].concat(existing, hook)\n        : [hook]\n    } else {\n      // register for functioal component in vue file\n      options.render = function renderWithStyleInjection (h, context) {\n        hook.call(context)\n        return existing(h, context)\n      }\n    }\n  }\n\n  return {\n    esModule: esModule,\n    exports: scriptExports,\n    options: options\n  }\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/component-normalizer.js\n// module id = 1\n// module chunks = 0", "/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n  Modified by Evan You @yyx990803\n*/\n\nvar hasDocument = typeof document !== 'undefined'\n\nif (typeof DEBUG !== 'undefined' && DEBUG) {\n  if (!hasDocument) {\n    throw new Error(\n    'vue-style-loader cannot be used in a non-browser environment. ' +\n    \"Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.\"\n  ) }\n}\n\nvar listToStyles = require('./listToStyles')\n\n/*\ntype StyleObject = {\n  id: number;\n  parts: Array<StyleObjectPart>\n}\n\ntype StyleObjectPart = {\n  css: string;\n  media: string;\n  sourceMap: ?string\n}\n*/\n\nvar stylesInDom = {/*\n  [id: number]: {\n    id: number,\n    refs: number,\n    parts: Array<(obj?: StyleObjectPart) => void>\n  }\n*/}\n\nvar head = hasDocument && (document.head || document.getElementsByTagName('head')[0])\nvar singletonElement = null\nvar singletonCounter = 0\nvar isProduction = false\nvar noop = function () {}\n\n// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n// tags it will allow on a page\nvar isOldIE = typeof navigator !== 'undefined' && /msie [6-9]\\b/.test(navigator.userAgent.toLowerCase())\n\nmodule.exports = function (parentId, list, _isProduction) {\n  isProduction = _isProduction\n\n  var styles = listToStyles(parentId, list)\n  addStylesToDom(styles)\n\n  return function update (newList) {\n    var mayRemove = []\n    for (var i = 0; i < styles.length; i++) {\n      var item = styles[i]\n      var domStyle = stylesInDom[item.id]\n      domStyle.refs--\n      mayRemove.push(domStyle)\n    }\n    if (newList) {\n      styles = listToStyles(parentId, newList)\n      addStylesToDom(styles)\n    } else {\n      styles = []\n    }\n    for (var i = 0; i < mayRemove.length; i++) {\n      var domStyle = mayRemove[i]\n      if (domStyle.refs === 0) {\n        for (var j = 0; j < domStyle.parts.length; j++) {\n          domStyle.parts[j]()\n        }\n        delete stylesInDom[domStyle.id]\n      }\n    }\n  }\n}\n\nfunction addStylesToDom (styles /* Array<StyleObject> */) {\n  for (var i = 0; i < styles.length; i++) {\n    var item = styles[i]\n    var domStyle = stylesInDom[item.id]\n    if (domStyle) {\n      domStyle.refs++\n      for (var j = 0; j < domStyle.parts.length; j++) {\n        domStyle.parts[j](item.parts[j])\n      }\n      for (; j < item.parts.length; j++) {\n        domStyle.parts.push(addStyle(item.parts[j]))\n      }\n      if (domStyle.parts.length > item.parts.length) {\n        domStyle.parts.length = item.parts.length\n      }\n    } else {\n      var parts = []\n      for (var j = 0; j < item.parts.length; j++) {\n        parts.push(addStyle(item.parts[j]))\n      }\n      stylesInDom[item.id] = { id: item.id, refs: 1, parts: parts }\n    }\n  }\n}\n\nfunction createStyleElement () {\n  var styleElement = document.createElement('style')\n  styleElement.type = 'text/css'\n  head.appendChild(styleElement)\n  return styleElement\n}\n\nfunction addStyle (obj /* StyleObjectPart */) {\n  var update, remove\n  var styleElement = document.querySelector('style[data-vue-ssr-id~=\"' + obj.id + '\"]')\n\n  if (styleElement) {\n    if (isProduction) {\n      // has SSR styles and in production mode.\n      // simply do nothing.\n      return noop\n    } else {\n      // has SSR styles but in dev mode.\n      // for some reason Chrome can't handle source map in server-rendered\n      // style tags - source maps in <style> only works if the style tag is\n      // created and inserted dynamically. So we remove the server rendered\n      // styles and inject new ones.\n      styleElement.parentNode.removeChild(styleElement)\n    }\n  }\n\n  if (isOldIE) {\n    // use singleton mode for IE9.\n    var styleIndex = singletonCounter++\n    styleElement = singletonElement || (singletonElement = createStyleElement())\n    update = applyToSingletonTag.bind(null, styleElement, styleIndex, false)\n    remove = applyToSingletonTag.bind(null, styleElement, styleIndex, true)\n  } else {\n    // use multi-style-tag mode in all other cases\n    styleElement = createStyleElement()\n    update = applyToTag.bind(null, styleElement)\n    remove = function () {\n      styleElement.parentNode.removeChild(styleElement)\n    }\n  }\n\n  update(obj)\n\n  return function updateStyle (newObj /* StyleObjectPart */) {\n    if (newObj) {\n      if (newObj.css === obj.css &&\n          newObj.media === obj.media &&\n          newObj.sourceMap === obj.sourceMap) {\n        return\n      }\n      update(obj = newObj)\n    } else {\n      remove()\n    }\n  }\n}\n\nvar replaceText = (function () {\n  var textStore = []\n\n  return function (index, replacement) {\n    textStore[index] = replacement\n    return textStore.filter(Boolean).join('\\n')\n  }\n})()\n\nfunction applyToSingletonTag (styleElement, index, remove, obj) {\n  var css = remove ? '' : obj.css\n\n  if (styleElement.styleSheet) {\n    styleElement.styleSheet.cssText = replaceText(index, css)\n  } else {\n    var cssNode = document.createTextNode(css)\n    var childNodes = styleElement.childNodes\n    if (childNodes[index]) styleElement.removeChild(childNodes[index])\n    if (childNodes.length) {\n      styleElement.insertBefore(cssNode, childNodes[index])\n    } else {\n      styleElement.appendChild(cssNode)\n    }\n  }\n}\n\nfunction applyToTag (styleElement, obj) {\n  var css = obj.css\n  var media = obj.media\n  var sourceMap = obj.sourceMap\n\n  if (media) {\n    styleElement.setAttribute('media', media)\n  }\n\n  if (sourceMap) {\n    // https://developer.chrome.com/devtools/docs/javascript-debugging\n    // this makes source maps inside style tags work properly in Chrome\n    css += '\\n/*# sourceURL=' + sourceMap.sources[0] + ' */'\n    // http://stackoverflow.com/a/26603875\n    css += '\\n/*# sourceMappingURL=data:application/json;base64,' + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + ' */'\n  }\n\n  if (styleElement.styleSheet) {\n    styleElement.styleSheet.cssText = css\n  } else {\n    while (styleElement.firstChild) {\n      styleElement.removeChild(styleElement.firstChild)\n    }\n    styleElement.appendChild(document.createTextNode(css))\n  }\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-style-loader/lib/addStylesClient.js\n// module id = 2\n// module chunks = 0", "(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"IdleJs\"] = factory();\n\telse\n\t\troot[\"IdleJs\"] = factory();\n})(this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar bulkAddEventListener = function bulkAddEventListener(object, events, callback) {\n\t  events.forEach(function (event) {\n\t    object.addEventListener(event, function (event) {\n\t      callback(event);\n\t    });\n\t  });\n\t};\n\t\n\tvar bulkRemoveEventListener = function bulkRemoveEventListener(object, events) {\n\t  events.forEach(function (event) {\n\t    object.removeEventListener(event);\n\t  });\n\t};\n\t\n\tvar IdleJs = function () {\n\t  function IdleJs(options) {\n\t    _classCallCheck(this, IdleJs);\n\t\n\t    this.defaults = {\n\t      idle: 10000, // idle time in ms\n\t      events: ['mousemove', 'keydown', 'mousedown', 'touchstart'], // events that will trigger the idle resetter\n\t      onIdle: function onIdle() {}, // callback function to be executed after idle time\n\t      onActive: function onActive() {}, // callback function to be executed after back form idleness\n\t      onHide: function onHide() {}, // callback function to be executed when window become hidden\n\t      onShow: function onShow() {}, // callback function to be executed when window become visible\n\t      keepTracking: true, // set it to false of you want to track only once\n\t      startAtIdle: false, // set it to true if you want to start in the idle state\n\t      recurIdleCall: false\n\t    };\n\t    this.settings = _extends({}, this.defaults, options);\n\t    this.idle = this.settings.startAtIdle;\n\t    this.visible = !this.settings.startAtIdle;\n\t    this.visibilityEvents = ['visibilitychange', 'webkitvisibilitychange', 'mozvisibilitychange', 'msvisibilitychange'];\n\t    this.lastId = null;\n\t  }\n\t\n\t  _createClass(IdleJs, [{\n\t    key: 'resetTimeout',\n\t    value: function resetTimeout(id, settings) {\n\t      if (this.idle) {\n\t        settings.onActive.call();\n\t        this.idle = false;\n\t      }\n\t      clearTimeout(id);\n\t      if (this.settings.keepTracking) {\n\t        return this.timeout(this.settings);\n\t      }\n\t    }\n\t  }, {\n\t    key: 'timeout',\n\t    value: function timeout(settings) {\n\t      var timer = this.settings.recurIdleCall ? setInterval : setTimeout;\n\t      var id;\n\t      id = timer(function () {\n\t        this.idle = true;\n\t        this.settings.onIdle.call();\n\t      }.bind(this), this.settings.idle);\n\t      return id;\n\t    }\n\t  }, {\n\t    key: 'start',\n\t    value: function start() {\n\t      window.addEventListener('idle:stop', function (event) {\n\t        bulkRemoveEventListener(window, this.settings.events);\n\t        this.settings.keepTracking = false;\n\t        this.resetTimeout(this.lastId, this.settings);\n\t      });\n\t      this.lastId = this.timeout(this.settings);\n\t      bulkAddEventListener(window, this.settings.events, function (event) {\n\t        this.lastId = this.resetTimeout(this.lastId, this.settings);\n\t      }.bind(this));\n\t      if (this.settings.onShow || this.settings.onHide) {\n\t        bulkAddEventListener(document, this.visibilityEvents, function (event) {\n\t          if (document.hidden || document.webkitHidden || document.mozHidden || document.msHidden) {\n\t            if (this.visible) {\n\t              this.visible = false;\n\t              this.settings.onHide.call();\n\t            }\n\t          } else {\n\t            if (!this.visible) {\n\t              this.visible = true;\n\t              this.settings.onShow.call();\n\t            }\n\t          }\n\t        }.bind(this));\n\t      }\n\t    }\n\t  }]);\n\t\n\t  return IdleJs;\n\t}();\n\t\n\tmodule.exports = IdleJs;\n\n/***/ }\n/******/ ])\n});\n;\n//# sourceMappingURL=idle.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/idle-js/dist/Idle.js\n// module id = 3\n// module chunks = 0", "function injectStyle (ssrContext) {\n  require(\"!!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-bcc562a4\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Idle.vue\")\n}\nvar Component = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Idle.vue\"),\n  /* template */\n  require(\"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-bcc562a4\\\",\\\"hasScoped\\\":false}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Idle.vue\"),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  null,\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Idle.vue\n// module id = 4\n// module chunks = 0", "'use strict'\n\nimport IdleJs from 'idle-js'\nimport IdleView from './components/Idle'\n\nexport default {\n  IdleView,\n  install (Vue, options) {\n    const {\n      eventEmitter,\n      store,\n      moduleName = 'idleVue',\n      idleTime = 60 * 1000,\n      events = ['mousemove', 'keydown', 'mousedown', 'touchstart'],\n      keepTracking = true,\n      startAtIdle = true\n    } = options || {}\n\n    if (!eventEmitter && !store) {\n      throw Error('Either `eventEmitter` or `store` must be passed in options')\n    }\n\n    store && store.registerModule(moduleName, {\n      state: { isIdle: startAtIdle },\n      mutations: {\n        [`${moduleName}/IDLE_CHANGED`]: function (state, isIdle) {\n          state.isIdle = isIdle\n        }\n      }\n    })\n\n    const onIdleStr = `${moduleName}_onIdle`\n    const onActiveStr = `${moduleName}_onActive`\n\n    const idle = new IdleJs({\n      idle: idleTime,\n      events,\n      keepTracking,\n      startAtIdle,\n\n      onIdle () {\n        eventEmitter && eventEmitter.$emit(onIdleStr)\n        store && store.commit(`${moduleName}/IDLE_CHANGED`, true)\n      },\n      onActive () {\n        eventEmitter && eventEmitter.$emit(onActiveStr)\n        store && store.commit(`${moduleName}/IDLE_CHANGED`, false)\n      }\n    })\n    idle.start()\n\n    Vue.component('IdleView', IdleView)\n\n    Vue.mixin({\n      data () {\n        return {\n          [onIdleStr]: null,\n          [onActiveStr]: null\n        }\n      },\n      created () {\n        if (eventEmitter && this.$options.onIdle) {\n          this[onIdleStr] = this.$options.onIdle.bind(this)\n          eventEmitter.$on(onIdleStr, this[onIdleStr])\n        }\n        if (eventEmitter && this.$options.onActive) {\n          this[onActiveStr] = this.$options.onActive.bind(this)\n          eventEmitter.$on(onActiveStr, this[onActiveStr])\n        }\n      },\n      destroyed () {\n        if (eventEmitter && this[onIdleStr]) {\n          eventEmitter.$off(onIdleStr, this[onIdleStr])\n        }\n        if (eventEmitter && this[onActiveStr]) {\n          eventEmitter.$off(onActiveStr, this[onActiveStr])\n        }\n      },\n      computed: {\n        isAppIdle () {\n          return store && store.state[moduleName].isIdle\n        }\n      }\n    })\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js", "<template>\n  <div class=\"idle-view\" :class=\"{isIdle: isIdle}\">\n    <div class=\"overlay\"></div>\n    <sprite spriteId=\"touch\"\n      :spriteSrc=\"require('../assets/touch.png')\"\n      :spriteW='180'\n      :spriteH='215'\n      ref='sprite'\n    ></sprite>\n  </div>\n</template>\n\n<script>\n'use strict'\n\nimport Sprite from './Sprite'\n\nexport default {\n  components: {\n    Sprite\n  },\n  onIdle () {\n    this.$refs.sprite.play()\n  },\n  onActive () {\n    this.$refs.sprite.stop()\n  }\n}\n</script>\n\n<style>\n.idle-view {\n  position: fixed;\n  top: 0;\n  width: 100vw;\n  height: 100vh;\n  z-index: 8888;\n\n  pointer-events: none;\n  display: none;\n}\n.idle-view.isIdle {\n  pointer-events: all;\n  display: block;\n}\n.idle-view .sprite {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translateX(-50%) translateY(-50%);\n\n  height: 10px;\n  width: 180px;\n  z-index: 9999;\n  -webkit-transform: scale(0.7);\n}\n.idle-view .overlay {\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  z-index: 8888;\n\n  background: #000;\n  opacity: 0;\n  /*-webkit-animation: SlowMo 5s cubic-bezier(0.77, 0, 0.175, 1) infinite;*/\n  -webkit-transition: opacity 800ms cubic-bezier(0.77, 0, 0.175, 1);\n}\n.idle-view.isIdle .overlay {\n  opacity: 0.6;\n}\n@-webkit-keyframes SlowMo {\n  0%{background-position:0% 50%}\n  50%{background-position:100% 50%}\n  100%{background-position:0% 50%}\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// Idle.vue?864e801e", "<template lang=\"html\">\n  <div class=\"sprite\">\n    <canvas :id='spriteId' :width=\"spriteW\" :height=\"spriteH\"></canvas>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'sprite',\n  props: {\n    spriteSrc: {\n      type: String,\n      default: ''\n    },\n    spriteId: {\n      type: String,\n      default: 'sprite'\n    },\n    spriteW: {\n      type: Number,\n      default: 1\n    },\n    spriteH: {\n      type: Number,\n      default: 1\n    },\n    spriteSpeed: {\n      type: Number,\n      default: 1\n    }\n  },\n  data () {\n    return {\n      visible: true,\n      frameIndex: 0,\n      tickCount: 0,\n      frameLength: 0,\n      ticksPerFrame: 0,\n      numberOfFrames: 0,\n      frameRate: 20,\n      ctx: '',\n      canvas: '',\n      mySprite: '',\n      animationFrameId: -1\n    }\n  },\n  mounted () {\n    let vm = this\n    this.$nextTick(() => {\n      vm.mySprite = new Image()\n      vm.mySprite.onload = e => {\n        vm.spriteInit(e.target)\n      }\n      vm.mySprite.src = vm.spriteSrc\n    })\n  },\n  methods: {\n    spriteInit (img) {\n      this.canvas = this.$el.querySelector(`#${this.spriteId}`)\n      this.ctx = this.canvas.getContext('2d')\n      this.ticksPerFrame = this.spriteSpeed\n      this.frameLength = img.width\n      this.numberOfFrames = img.width / this.spriteW\n      this.spriteLoop()\n    },\n    spriteUpdate () {\n      this.tickCount ++\n      if (this.tickCount > this.ticksPerFrame) {\n        this.tickCount = 0\n        // If the current frame index is in range\n        if (this.frameIndex < this.numberOfFrames - 1) {\n        // Go to the next frame\n          this.frameIndex ++\n        } else {\n          this.frameIndex = 0\n        }\n      }\n    },\n    spriteRender () {\n      this.ctx.clearRect(0, 0, this.spriteW, this.spriteH)\n      // Draw the animation\n      const toDraw = this.frameIndex * this.spriteW\n      this.ctx.drawImage(\n        this.mySprite,\n        toDraw, 0, this.spriteW, this.spriteH,\n        0, 0, this.spriteW, this.spriteH\n      )\n    },\n    spriteLoop () {\n      this.animationFrameId = window.requestAnimationFrame(this.spriteLoop)\n      this.spriteUpdate()\n      this.spriteRender()\n    },\n    stop () {\n      window.cancelAnimationFrame(this.animationFrameId)\n    },\n    play () {\n      this.spriteLoop()\n    }\n  }\n}\n</script>\n\n<style lang=\"css\">\n</style>\n\n\n\n// WEBPACK FOOTER //\n// Sprite.vue?76a821f3", "exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")(true);\n// imports\n\n\n// module\nexports.push([module.id, \"\", \"\", {\"version\":3,\"sources\":[],\"names\":[],\"mappings\":\"\",\"file\":\"Sprite.vue\",\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader?{\"minimize\":true,\"sourceMap\":true}!./~/vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-3248aec2\",\"scoped\":false,\"hasInlineConfig\":false}!./~/vue-loader/lib/selector.js?type=styles&index=0!./src/components/Sprite.vue\n// module id = 8\n// module chunks = 0", "exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")(true);\n// imports\n\n\n// module\nexports.push([module.id, \".idle-view{position:fixed;top:0;width:100vw;height:100vh;z-index:8888;pointer-events:none;display:none}.idle-view.isIdle{pointer-events:all;display:block}.idle-view .sprite{position:absolute;top:50%;left:50%;transform:translateX(-50%) translateY(-50%);height:10px;width:180px;z-index:9999;-webkit-transform:scale(.7)}.idle-view .overlay{width:100%;height:100%;position:absolute;z-index:8888;background:#000;opacity:0;-webkit-transition:opacity .8s cubic-bezier(.77,0,.175,1)}.idle-view.isIdle .overlay{opacity:.6}@-webkit-keyframes SlowMo{0%{background-position:0 50%}50%{background-position:100% 50%}to{background-position:0 50%}}\", \"\", {\"version\":3,\"sources\":[\"/home/afonso/Dev/idle-vue/src/components/Idle.vue\"],\"names\":[],\"mappings\":\"AACA,WACE,eAAgB,AAChB,MAAO,AACP,YAAa,AACb,aAAc,AACd,aAAc,AAEd,oBAAqB,AACrB,YAAc,CACf,AACD,kBACE,mBAAoB,AACpB,aAAe,CAChB,AACD,mBACE,kBAAmB,AACnB,QAAS,AACT,SAAU,AACV,4CAA6C,AAE7C,YAAa,AACb,YAAa,AACb,aAAc,AACd,2BAA8B,CAC/B,AACD,oBACE,WAAY,AACZ,YAAa,AACb,kBAAmB,AACnB,aAAc,AAEd,gBAAiB,AACjB,UAAW,AAEX,yDAAkE,CACnE,AACD,2BACE,UAAa,CACd,AACD,0BACA,GAAG,yBAA0B,CAC5B,AACD,IAAI,4BAA4B,CAC/B,AACD,GAAK,yBAA0B,CAC9B,CACA\",\"file\":\"Idle.vue\",\"sourcesContent\":[\"\\n.idle-view {\\n  position: fixed;\\n  top: 0;\\n  width: 100vw;\\n  height: 100vh;\\n  z-index: 8888;\\n\\n  pointer-events: none;\\n  display: none;\\n}\\n.idle-view.isIdle {\\n  pointer-events: all;\\n  display: block;\\n}\\n.idle-view .sprite {\\n  position: absolute;\\n  top: 50%;\\n  left: 50%;\\n  transform: translateX(-50%) translateY(-50%);\\n\\n  height: 10px;\\n  width: 180px;\\n  z-index: 9999;\\n  -webkit-transform: scale(0.7);\\n}\\n.idle-view .overlay {\\n  width: 100%;\\n  height: 100%;\\n  position: absolute;\\n  z-index: 8888;\\n\\n  background: #000;\\n  opacity: 0;\\n  /*-webkit-animation: SlowMo 5s cubic-bezier(0.77, 0, 0.175, 1) infinite;*/\\n  -webkit-transition: opacity 800ms cubic-bezier(0.77, 0, 0.175, 1);\\n}\\n.idle-view.isIdle .overlay {\\n  opacity: 0.6;\\n}\\n@-webkit-keyframes SlowMo {\\n0%{background-position:0% 50%\\n}\\n50%{background-position:100% 50%\\n}\\n100%{background-position:0% 50%\\n}\\n}\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader?{\"minimize\":true,\"sourceMap\":true}!./~/vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-bcc562a4\",\"scoped\":false,\"hasInlineConfig\":false}!./~/vue-loader/lib/selector.js?type=styles&index=0!./src/components/Idle.vue\n// module id = 9\n// module chunks = 0", "module.exports = __webpack_public_path__ + \"static/img/touch.ba3be66.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/touch.png\n// module id = 10\n// module chunks = 0", "function injectStyle (ssrContext) {\n  require(\"!!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-3248aec2\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Sprite.vue\")\n}\nvar Component = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Sprite.vue\"),\n  /* template */\n  require(\"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-3248aec2\\\",\\\"hasScoped\\\":false}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Sprite.vue\"),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  null,\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Sprite.vue\n// module id = 11\n// module chunks = 0", "module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"sprite\"\n  }, [_c('canvas', {\n    attrs: {\n      \"id\": _vm.spriteId,\n      \"width\": _vm.spriteW,\n      \"height\": _vm.spriteH\n    }\n  })])\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-3248aec2\",\"hasScoped\":false}!./~/vue-loader/lib/selector.js?type=template&index=0!./src/components/Sprite.vue\n// module id = 12\n// module chunks = 0", "module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"idle-view\",\n    class: {\n      isIdle: _vm.isIdle\n    }\n  }, [_c('div', {\n    staticClass: \"overlay\"\n  }), _vm._v(\" \"), _c('sprite', {\n    ref: \"sprite\",\n    attrs: {\n      \"spriteId\": \"touch\",\n      \"spriteSrc\": require('../assets/touch.png'),\n      \"spriteW\": 180,\n      \"spriteH\": 215\n    }\n  })], 1)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-bcc562a4\",\"hasScoped\":false}!./~/vue-loader/lib/selector.js?type=template&index=0!./src/components/Idle.vue\n// module id = 13\n// module chunks = 0", "// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/css-loader/index.js?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index.js?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-3248aec2\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./Sprite.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = require(\"!../../node_modules/vue-style-loader/lib/addStylesClient.js\")(\"b6696284\", content, true);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-style-loader!./~/css-loader?{\"minimize\":true,\"sourceMap\":true}!./~/vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-3248aec2\",\"scoped\":false,\"hasInlineConfig\":false}!./~/vue-loader/lib/selector.js?type=styles&index=0!./src/components/Sprite.vue\n// module id = 14\n// module chunks = 0", "// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/css-loader/index.js?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index.js?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-bcc562a4\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./Idle.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = require(\"!../../node_modules/vue-style-loader/lib/addStylesClient.js\")(\"25b5ba8a\", content, true);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-style-loader!./~/css-loader?{\"minimize\":true,\"sourceMap\":true}!./~/vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-bcc562a4\",\"scoped\":false,\"hasInlineConfig\":false}!./~/vue-loader/lib/selector.js?type=styles&index=0!./src/components/Idle.vue\n// module id = 15\n// module chunks = 0", "/**\n * Translates the list format produced by css-loader into something\n * easier to manipulate.\n */\nmodule.exports = function listToStyles (parentId, list) {\n  var styles = []\n  var newStyles = {}\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i]\n    var id = item[0]\n    var css = item[1]\n    var media = item[2]\n    var sourceMap = item[3]\n    var part = {\n      id: parentId + ':' + i,\n      css: css,\n      media: media,\n      sourceMap: sourceMap\n    }\n    if (!newStyles[id]) {\n      styles.push(newStyles[id] = { id: id, parts: [part] })\n    } else {\n      newStyles[id].parts.push(part)\n    }\n  }\n  return styles\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-style-loader/lib/listToStyles.js\n// module id = 16\n// module chunks = 0", "// blockies minified: https://raw.githubusercontent.com/ethereum/blockies/master/blockies.min.js\n// Edition: Commented out window.blockies declaration to prevent global access.\n/* eslint-disable */\n!function(){function e(e){for(var o=0;o<c.length;o++)c[o]=0;for(var o=0;o<e.length;o++)c[o%4]=(c[o%4]<<5)-c[o%4]+e.charCodeAt(o)}function o(){var e=c[0]^c[0]<<11;return c[0]=c[1],c[1]=c[2],c[2]=c[3],c[3]=c[3]^c[3]>>19^e^e>>8,(c[3]>>>0)/(1<<31>>>0)}function r(){var e=Math.floor(360*o()),r=60*o()+40+\"%\",t=25*(o()+o()+o()+o())+\"%\",l=\"hsl(\"+e+\",\"+r+\",\"+t+\")\";return l}function t(e){for(var r=e,t=e,l=Math.ceil(r/2),n=r-l,a=[],c=0;t>c;c++){for(var i=[],f=0;l>f;f++)i[f]=Math.floor(2.3*o());var s=i.slice(0,n);s.reverse(),i=i.concat(s);for(var h=0;h<i.length;h++)a.push(i[h])}return a}function l(o){var t={};return t.seed=o.seed||Math.floor(Math.random()*Math.pow(10,16)).toString(16),e(t.seed),t.size=o.size||8,t.scale=o.scale||4,t.color=o.color||r(),t.bgcolor=o.bgcolor||r(),t.spotcolor=o.spotcolor||r(),t}function n(e,o){var r=t(e.size),l=Math.sqrt(r.length);o.width=o.height=e.size*e.scale;var n=o.getContext(\"2d\");n.fillStyle=e.bgcolor,n.fillRect(0,0,o.width,o.height),n.fillStyle=e.color;for(var a=0;a<r.length;a++)if(r[a]){var c=Math.floor(a/l),i=a%l;n.fillStyle=1==r[a]?e.color:e.spotcolor,n.fillRect(i*e.scale,c*e.scale,e.scale,e.scale)}return o}function a(e){var e=l(e||{}),o=document.createElement(\"canvas\");return n(e,o),o}var c=new Array(4),i={create:a,render:n};\"undefined\"!=typeof module&&(module.exports=i)/*,\"undefined\"!=typeof window&&(window.blockies=i)*/}();", "const {\n  hasOwnProperty,\n  setPrototypeOf,\n  isFrozen,\n  getPrototypeOf,\n  getOwnPropertyDescriptor,\n} = Object;\n\nlet { freeze, seal, create } = Object; // eslint-disable-line import/no-mutable-exports\nlet { apply, construct } = typeof Reflect !== 'undefined' && Reflect;\n\nif (!apply) {\n  apply = function (fun, thisValue, args) {\n    return fun.apply(thisValue, args);\n  };\n}\n\nif (!freeze) {\n  freeze = function (x) {\n    return x;\n  };\n}\n\nif (!seal) {\n  seal = function (x) {\n    return x;\n  };\n}\n\nif (!construct) {\n  construct = function (Func, args) {\n    return new Func(...args);\n  };\n}\n\nconst arrayForEach = unapply(Array.prototype.forEach);\nconst arrayIndexOf = unapply(Array.prototype.indexOf);\nconst arrayPop = unapply(Array.prototype.pop);\nconst arrayPush = unapply(Array.prototype.push);\nconst arraySlice = unapply(Array.prototype.slice);\n\nconst stringToLowerCase = unapply(String.prototype.toLowerCase);\nconst stringMatch = unapply(String.prototype.match);\nconst stringReplace = unapply(String.prototype.replace);\nconst stringIndexOf = unapply(String.prototype.indexOf);\nconst stringTrim = unapply(String.prototype.trim);\n\nconst regExpTest = unapply(RegExp.prototype.test);\n\nconst typeErrorCreate = unconstruct(TypeError);\n\nexport function unapply(func) {\n  return (thisArg, ...args) => apply(func, thisArg, args);\n}\n\nexport function unconstruct(func) {\n  return (...args) => construct(func, args);\n}\n\n/* Add properties to a lookup table */\nexport function addToSet(set, array) {\n  if (setPrototypeOf) {\n    // Make 'in' and truthy checks like Boolean(set.constructor)\n    // independent of any properties defined on Object.prototype.\n    // Prevent prototype setters from intercepting set as a this value.\n    setPrototypeOf(set, null);\n  }\n\n  let l = array.length;\n  while (l--) {\n    let element = array[l];\n    if (typeof element === 'string') {\n      const lcElement = stringToLowerCase(element);\n      if (lcElement !== element) {\n        // Config presets (e.g. tags.js, attrs.js) are immutable.\n        if (!isFrozen(array)) {\n          array[l] = lcElement;\n        }\n\n        element = lcElement;\n      }\n    }\n\n    set[element] = true;\n  }\n\n  return set;\n}\n\n/* Shallow clone an object */\nexport function clone(object) {\n  const newObject = create(null);\n\n  let property;\n  for (property in object) {\n    if (apply(hasOwnProperty, object, [property])) {\n      newObject[property] = object[property];\n    }\n  }\n\n  return newObject;\n}\n\n/* IE10 doesn't support __lookupGetter__ so lets'\n * simulate it. It also automatically checks\n * if the prop is function or getter and behaves\n * accordingly. */\nfunction lookupGetter(object, prop) {\n  while (object !== null) {\n    const desc = getOwnPropertyDescriptor(object, prop);\n    if (desc) {\n      if (desc.get) {\n        return unapply(desc.get);\n      }\n\n      if (typeof desc.value === 'function') {\n        return unapply(desc.value);\n      }\n    }\n\n    object = getPrototypeOf(object);\n  }\n\n  function fallbackValue(element) {\n    console.warn('fallback value for', element);\n    return null;\n  }\n\n  return fallbackValue;\n}\n\nexport {\n  // Array\n  arrayForEach,\n  arrayIndexOf,\n  arrayPop,\n  arrayPush,\n  arraySlice,\n  // Object\n  freeze,\n  getPrototypeOf,\n  getOwnPropertyDescriptor,\n  hasOwnProperty,\n  isFrozen,\n  setPrototypeOf,\n  seal,\n  // RegExp\n  regExpTest,\n  // String\n  stringIndexOf,\n  stringMatch,\n  stringReplace,\n  stringToLowerCase,\n  stringTrim,\n  // Errors\n  typeErrorCreate,\n  // Other\n  lookupGetter,\n};\n", "import { freeze } from './utils';\n\nexport const html = freeze([\n  'a',\n  'abbr',\n  'acronym',\n  'address',\n  'area',\n  'article',\n  'aside',\n  'audio',\n  'b',\n  'bdi',\n  'bdo',\n  'big',\n  'blink',\n  'blockquote',\n  'body',\n  'br',\n  'button',\n  'canvas',\n  'caption',\n  'center',\n  'cite',\n  'code',\n  'col',\n  'colgroup',\n  'content',\n  'data',\n  'datalist',\n  'dd',\n  'decorator',\n  'del',\n  'details',\n  'dfn',\n  'dialog',\n  'dir',\n  'div',\n  'dl',\n  'dt',\n  'element',\n  'em',\n  'fieldset',\n  'figcaption',\n  'figure',\n  'font',\n  'footer',\n  'form',\n  'h1',\n  'h2',\n  'h3',\n  'h4',\n  'h5',\n  'h6',\n  'head',\n  'header',\n  'hgroup',\n  'hr',\n  'html',\n  'i',\n  'img',\n  'input',\n  'ins',\n  'kbd',\n  'label',\n  'legend',\n  'li',\n  'main',\n  'map',\n  'mark',\n  'marquee',\n  'menu',\n  'menuitem',\n  'meter',\n  'nav',\n  'nobr',\n  'ol',\n  'optgroup',\n  'option',\n  'output',\n  'p',\n  'picture',\n  'pre',\n  'progress',\n  'q',\n  'rp',\n  'rt',\n  'ruby',\n  's',\n  'samp',\n  'section',\n  'select',\n  'shadow',\n  'small',\n  'source',\n  'spacer',\n  'span',\n  'strike',\n  'strong',\n  'style',\n  'sub',\n  'summary',\n  'sup',\n  'table',\n  'tbody',\n  'td',\n  'template',\n  'textarea',\n  'tfoot',\n  'th',\n  'thead',\n  'time',\n  'tr',\n  'track',\n  'tt',\n  'u',\n  'ul',\n  'var',\n  'video',\n  'wbr',\n]);\n\n// SVG\nexport const svg = freeze([\n  'svg',\n  'a',\n  'altglyph',\n  'altglyphdef',\n  'altglyphitem',\n  'animatecolor',\n  'animatemotion',\n  'animatetransform',\n  'circle',\n  'clippath',\n  'defs',\n  'desc',\n  'ellipse',\n  'filter',\n  'font',\n  'g',\n  'glyph',\n  'glyphref',\n  'hkern',\n  'image',\n  'line',\n  'lineargradient',\n  'marker',\n  'mask',\n  'metadata',\n  'mpath',\n  'path',\n  'pattern',\n  'polygon',\n  'polyline',\n  'radialgradient',\n  'rect',\n  'stop',\n  'style',\n  'switch',\n  'symbol',\n  'text',\n  'textpath',\n  'title',\n  'tref',\n  'tspan',\n  'view',\n  'vkern',\n]);\n\nexport const svgFilters = freeze([\n  'feBlend',\n  'feColorMatrix',\n  'feComponentTransfer',\n  'feComposite',\n  'feConvolveMatrix',\n  'feDiffuseLighting',\n  'feDisplacementMap',\n  'feDistantLight',\n  'feFlood',\n  'feFuncA',\n  'feFuncB',\n  'feFuncG',\n  'feFuncR',\n  'feGaussianBlur',\n  'feMerge',\n  'feMergeNode',\n  'feMorphology',\n  'feOffset',\n  'fePointLight',\n  'feSpecularLighting',\n  'feSpotLight',\n  'feTile',\n  'feTurbulence',\n]);\n\n// List of SVG elements that are disallowed by default.\n// We still need to know them so that we can do namespace\n// checks properly in case one wants to add them to\n// allow-list.\nexport const svgDisallowed = freeze([\n  'animate',\n  'color-profile',\n  'cursor',\n  'discard',\n  'fedropshadow',\n  'feimage',\n  'font-face',\n  'font-face-format',\n  'font-face-name',\n  'font-face-src',\n  'font-face-uri',\n  'foreignobject',\n  'hatch',\n  'hatchpath',\n  'mesh',\n  'meshgradient',\n  'meshpatch',\n  'meshrow',\n  'missing-glyph',\n  'script',\n  'set',\n  'solidcolor',\n  'unknown',\n  'use',\n]);\n\nexport const mathMl = freeze([\n  'math',\n  'menclose',\n  'merror',\n  'mfenced',\n  'mfrac',\n  'mglyph',\n  'mi',\n  'mlabeledtr',\n  'mmultiscripts',\n  'mn',\n  'mo',\n  'mover',\n  'mpadded',\n  'mphantom',\n  'mroot',\n  'mrow',\n  'ms',\n  'mspace',\n  'msqrt',\n  'mstyle',\n  'msub',\n  'msup',\n  'msubsup',\n  'mtable',\n  'mtd',\n  'mtext',\n  'mtr',\n  'munder',\n  'munderover',\n]);\n\n// Similarly to SVG, we want to know all MathML elements,\n// even those that we disallow by default.\nexport const mathMlDisallowed = freeze([\n  'maction',\n  'maligngroup',\n  'malignmark',\n  'mlongdiv',\n  'mscarries',\n  'mscarry',\n  'msgroup',\n  'mstack',\n  'msline',\n  'msrow',\n  'semantics',\n  'annotation',\n  'annotation-xml',\n  'mprescripts',\n  'none',\n]);\n\nexport const text = freeze(['#text']);\n", "import { freeze } from './utils';\n\nexport const html = freeze([\n  'accept',\n  'action',\n  'align',\n  'alt',\n  'autocapitalize',\n  'autocomplete',\n  'autopictureinpicture',\n  'autoplay',\n  'background',\n  'bgcolor',\n  'border',\n  'capture',\n  'cellpadding',\n  'cellspacing',\n  'checked',\n  'cite',\n  'class',\n  'clear',\n  'color',\n  'cols',\n  'colspan',\n  'controls',\n  'controlslist',\n  'coords',\n  'crossorigin',\n  'datetime',\n  'decoding',\n  'default',\n  'dir',\n  'disabled',\n  'disablepictureinpicture',\n  'disableremoteplayback',\n  'download',\n  'draggable',\n  'enctype',\n  'enterkeyhint',\n  'face',\n  'for',\n  'headers',\n  'height',\n  'hidden',\n  'high',\n  'href',\n  'hreflang',\n  'id',\n  'inputmode',\n  'integrity',\n  'ismap',\n  'kind',\n  'label',\n  'lang',\n  'list',\n  'loading',\n  'loop',\n  'low',\n  'max',\n  'maxlength',\n  'media',\n  'method',\n  'min',\n  'minlength',\n  'multiple',\n  'muted',\n  'name',\n  'noshade',\n  'novalidate',\n  'nowrap',\n  'open',\n  'optimum',\n  'pattern',\n  'placeholder',\n  'playsinline',\n  'poster',\n  'preload',\n  'pubdate',\n  'radiogroup',\n  'readonly',\n  'rel',\n  'required',\n  'rev',\n  'reversed',\n  'role',\n  'rows',\n  'rowspan',\n  'spellcheck',\n  'scope',\n  'selected',\n  'shape',\n  'size',\n  'sizes',\n  'span',\n  'srclang',\n  'start',\n  'src',\n  'srcset',\n  'step',\n  'style',\n  'summary',\n  'tabindex',\n  'title',\n  'translate',\n  'type',\n  'usemap',\n  'valign',\n  'value',\n  'width',\n  'xmlns',\n]);\n\nexport const svg = freeze([\n  'accent-height',\n  'accumulate',\n  'additive',\n  'alignment-baseline',\n  'ascent',\n  'attributename',\n  'attributetype',\n  'azimuth',\n  'basefrequency',\n  'baseline-shift',\n  'begin',\n  'bias',\n  'by',\n  'class',\n  'clip',\n  'clippathunits',\n  'clip-path',\n  'clip-rule',\n  'color',\n  'color-interpolation',\n  'color-interpolation-filters',\n  'color-profile',\n  'color-rendering',\n  'cx',\n  'cy',\n  'd',\n  'dx',\n  'dy',\n  'diffuseconstant',\n  'direction',\n  'display',\n  'divisor',\n  'dur',\n  'edgemode',\n  'elevation',\n  'end',\n  'fill',\n  'fill-opacity',\n  'fill-rule',\n  'filter',\n  'filterunits',\n  'flood-color',\n  'flood-opacity',\n  'font-family',\n  'font-size',\n  'font-size-adjust',\n  'font-stretch',\n  'font-style',\n  'font-variant',\n  'font-weight',\n  'fx',\n  'fy',\n  'g1',\n  'g2',\n  'glyph-name',\n  'glyphref',\n  'gradientunits',\n  'gradienttransform',\n  'height',\n  'href',\n  'id',\n  'image-rendering',\n  'in',\n  'in2',\n  'k',\n  'k1',\n  'k2',\n  'k3',\n  'k4',\n  'kerning',\n  'keypoints',\n  'keysplines',\n  'keytimes',\n  'lang',\n  'lengthadjust',\n  'letter-spacing',\n  'kernelmatrix',\n  'kernelunitlength',\n  'lighting-color',\n  'local',\n  'marker-end',\n  'marker-mid',\n  'marker-start',\n  'markerheight',\n  'markerunits',\n  'markerwidth',\n  'maskcontentunits',\n  'maskunits',\n  'max',\n  'mask',\n  'media',\n  'method',\n  'mode',\n  'min',\n  'name',\n  'numoctaves',\n  'offset',\n  'operator',\n  'opacity',\n  'order',\n  'orient',\n  'orientation',\n  'origin',\n  'overflow',\n  'paint-order',\n  'path',\n  'pathlength',\n  'patterncontentunits',\n  'patterntransform',\n  'patternunits',\n  'points',\n  'preservealpha',\n  'preserveaspectratio',\n  'primitiveunits',\n  'r',\n  'rx',\n  'ry',\n  'radius',\n  'refx',\n  'refy',\n  'repeatcount',\n  'repeatdur',\n  'restart',\n  'result',\n  'rotate',\n  'scale',\n  'seed',\n  'shape-rendering',\n  'specularconstant',\n  'specularexponent',\n  'spreadmethod',\n  'startoffset',\n  'stddeviation',\n  'stitchtiles',\n  'stop-color',\n  'stop-opacity',\n  'stroke-dasharray',\n  'stroke-dashoffset',\n  'stroke-linecap',\n  'stroke-linejoin',\n  'stroke-miterlimit',\n  'stroke-opacity',\n  'stroke',\n  'stroke-width',\n  'style',\n  'surfacescale',\n  'systemlanguage',\n  'tabindex',\n  'targetx',\n  'targety',\n  'transform',\n  'text-anchor',\n  'text-decoration',\n  'text-rendering',\n  'textlength',\n  'type',\n  'u1',\n  'u2',\n  'unicode',\n  'values',\n  'viewbox',\n  'visibility',\n  'version',\n  'vert-adv-y',\n  'vert-origin-x',\n  'vert-origin-y',\n  'width',\n  'word-spacing',\n  'wrap',\n  'writing-mode',\n  'xchannelselector',\n  'ychannelselector',\n  'x',\n  'x1',\n  'x2',\n  'xmlns',\n  'y',\n  'y1',\n  'y2',\n  'z',\n  'zoomandpan',\n]);\n\nexport const mathMl = freeze([\n  'accent',\n  'accentunder',\n  'align',\n  'bevelled',\n  'close',\n  'columnsalign',\n  'columnlines',\n  'columnspan',\n  'denomalign',\n  'depth',\n  'dir',\n  'display',\n  'displaystyle',\n  'encoding',\n  'fence',\n  'frame',\n  'height',\n  'href',\n  'id',\n  'largeop',\n  'length',\n  'linethickness',\n  'lspace',\n  'lquote',\n  'mathbackground',\n  'mathcolor',\n  'mathsize',\n  'mathvariant',\n  'maxsize',\n  'minsize',\n  'movablelimits',\n  'notation',\n  'numalign',\n  'open',\n  'rowalign',\n  'rowlines',\n  'rowspacing',\n  'rowspan',\n  'rspace',\n  'rquote',\n  'scriptlevel',\n  'scriptminsize',\n  'scriptsizemultiplier',\n  'selection',\n  'separator',\n  'separators',\n  'stretchy',\n  'subscriptshift',\n  'supscriptshift',\n  'symmetric',\n  'voffset',\n  'width',\n  'xmlns',\n]);\n\nexport const xml = freeze([\n  'xlink:href',\n  'xml:id',\n  'xlink:title',\n  'xml:space',\n  'xmlns:xlink',\n]);\n", "import { seal } from './utils';\n\n// eslint-disable-next-line unicorn/better-regex\nexport const MUSTACHE_EXPR = seal(/\\{\\{[\\s\\S]*|[\\s\\S]*\\}\\}/gm); // Specify template detection regex for SAFE_FOR_TEMPLATES mode\nexport const ERB_EXPR = seal(/<%[\\s\\S]*|[\\s\\S]*%>/gm);\nexport const DATA_ATTR = seal(/^data-[\\-\\w.\\u00B7-\\uFFFF]/); // eslint-disable-line no-useless-escape\nexport const ARIA_ATTR = seal(/^aria-[\\-\\w]+$/); // eslint-disable-line no-useless-escape\nexport const IS_ALLOWED_URI = seal(\n  /^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\\-]+(?:[^a-z+.\\-:]|$))/i // eslint-disable-line no-useless-escape\n);\nexport const IS_SCRIPT_OR_DATA = seal(/^(?:\\w+script|data):/i);\nexport const ATTR_WHITESPACE = seal(\n  /[\\u0000-\\u0020\\u00A0\\u1680\\u180E\\u2000-\\u2029\\u205F\\u3000]/g // eslint-disable-line no-control-regex\n);\n", "import * as TAGS from './tags';\nimport * as ATTRS from './attrs';\nimport * as EXPRESSIONS from './regexp';\nimport {\n  addToSet,\n  clone,\n  freeze,\n  arrayForEach,\n  arrayPop,\n  arrayPush,\n  stringMatch,\n  stringReplace,\n  stringToLowerCase,\n  stringIndexOf,\n  stringTrim,\n  regExpTest,\n  typeErrorCreate,\n  lookupGetter,\n} from './utils';\n\nconst getGlobal = () => (typeof window === 'undefined' ? null : window);\n\n/**\n * Creates a no-op policy for internal use only.\n * Don't export this function outside this module!\n * @param {?TrustedTypePolicyFactory} trustedTypes The policy factory.\n * @param {Document} document The document object (to determine policy name suffix)\n * @return {?TrustedTypePolicy} The policy created (or null, if Trusted Types\n * are not supported).\n */\nconst _createTrustedTypesPolicy = function (trustedTypes, document) {\n  if (\n    typeof trustedTypes !== 'object' ||\n    typeof trustedTypes.createPolicy !== 'function'\n  ) {\n    return null;\n  }\n\n  // Allow the callers to control the unique policy name\n  // by adding a data-tt-policy-suffix to the script element with the DOMPurify.\n  // Policy creation with duplicate names throws in Trusted Types.\n  let suffix = null;\n  const ATTR_NAME = 'data-tt-policy-suffix';\n  if (\n    document.currentScript &&\n    document.currentScript.hasAttribute(ATTR_NAME)\n  ) {\n    suffix = document.currentScript.getAttribute(ATTR_NAME);\n  }\n\n  const policyName = 'dompurify' + (suffix ? '#' + suffix : '');\n\n  try {\n    return trustedTypes.createPolicy(policyName, {\n      createHTML(html) {\n        return html;\n      },\n    });\n  } catch (_) {\n    // Policy creation failed (most likely another DOMPurify script has\n    // already run). Skip creating the policy, as this will only cause errors\n    // if TT are enforced.\n    console.warn(\n      'TrustedTypes policy ' + policyName + ' could not be created.'\n    );\n    return null;\n  }\n};\n\nfunction createDOMPurify(window = getGlobal()) {\n  const DOMPurify = (root) => createDOMPurify(root);\n\n  /**\n   * Version label, exposed for easier checks\n   * if DOMPurify is up to date or not\n   */\n  DOMPurify.version = VERSION;\n\n  /**\n   * Array of elements that DOMPurify removed during sanitation.\n   * Empty if nothing was removed.\n   */\n  DOMPurify.removed = [];\n\n  if (!window || !window.document || window.document.nodeType !== 9) {\n    // Not running in a browser, provide a factory function\n    // so that you can pass your own Window\n    DOMPurify.isSupported = false;\n\n    return DOMPurify;\n  }\n\n  const originalDocument = window.document;\n\n  let { document } = window;\n  const {\n    DocumentFragment,\n    HTMLTemplateElement,\n    Node,\n    Element,\n    NodeFilter,\n    NamedNodeMap = window.NamedNodeMap || window.MozNamedAttrMap,\n    Text,\n    Comment,\n    DOMParser,\n    trustedTypes,\n  } = window;\n\n  const ElementPrototype = Element.prototype;\n\n  const cloneNode = lookupGetter(ElementPrototype, 'cloneNode');\n  const getNextSibling = lookupGetter(ElementPrototype, 'nextSibling');\n  const getChildNodes = lookupGetter(ElementPrototype, 'childNodes');\n  const getParentNode = lookupGetter(ElementPrototype, 'parentNode');\n\n  // As per issue #47, the web-components registry is inherited by a\n  // new document created via createHTMLDocument. As per the spec\n  // (http://w3c.github.io/webcomponents/spec/custom/#creating-and-passing-registries)\n  // a new empty registry is used when creating a template contents owner\n  // document, so we use that as our parent document to ensure nothing\n  // is inherited.\n  if (typeof HTMLTemplateElement === 'function') {\n    const template = document.createElement('template');\n    if (template.content && template.content.ownerDocument) {\n      document = template.content.ownerDocument;\n    }\n  }\n\n  const trustedTypesPolicy = _createTrustedTypesPolicy(\n    trustedTypes,\n    originalDocument\n  );\n  const emptyHTML =\n    trustedTypesPolicy && RETURN_TRUSTED_TYPE\n      ? trustedTypesPolicy.createHTML('')\n      : '';\n\n  const {\n    implementation,\n    createNodeIterator,\n    getElementsByTagName,\n    createDocumentFragment,\n  } = document;\n  const { importNode } = originalDocument;\n\n  let documentMode = {};\n  try {\n    documentMode = clone(document).documentMode ? document.documentMode : {};\n  } catch (_) {}\n\n  let hooks = {};\n\n  /**\n   * Expose whether this browser supports running the full DOMPurify.\n   */\n  DOMPurify.isSupported =\n    typeof getParentNode === 'function' &&\n    implementation &&\n    typeof implementation.createHTMLDocument !== 'undefined' &&\n    documentMode !== 9;\n\n  const {\n    MUSTACHE_EXPR,\n    ERB_EXPR,\n    DATA_ATTR,\n    ARIA_ATTR,\n    IS_SCRIPT_OR_DATA,\n    ATTR_WHITESPACE,\n  } = EXPRESSIONS;\n\n  let { IS_ALLOWED_URI } = EXPRESSIONS;\n\n  /**\n   * We consider the elements and attributes below to be safe. Ideally\n   * don't add any new ones but feel free to remove unwanted ones.\n   */\n\n  /* allowed element names */\n  let ALLOWED_TAGS = null;\n  const DEFAULT_ALLOWED_TAGS = addToSet({}, [\n    ...TAGS.html,\n    ...TAGS.svg,\n    ...TAGS.svgFilters,\n    ...TAGS.mathMl,\n    ...TAGS.text,\n  ]);\n\n  /* Allowed attribute names */\n  let ALLOWED_ATTR = null;\n  const DEFAULT_ALLOWED_ATTR = addToSet({}, [\n    ...ATTRS.html,\n    ...ATTRS.svg,\n    ...ATTRS.mathMl,\n    ...ATTRS.xml,\n  ]);\n\n  /* Explicitly forbidden tags (overrides ALLOWED_TAGS/ADD_TAGS) */\n  let FORBID_TAGS = null;\n\n  /* Explicitly forbidden attributes (overrides ALLOWED_ATTR/ADD_ATTR) */\n  let FORBID_ATTR = null;\n\n  /* Decide if ARIA attributes are okay */\n  let ALLOW_ARIA_ATTR = true;\n\n  /* Decide if custom data attributes are okay */\n  let ALLOW_DATA_ATTR = true;\n\n  /* Decide if unknown protocols are okay */\n  let ALLOW_UNKNOWN_PROTOCOLS = false;\n\n  /* Output should be safe for common template engines.\n   * This means, DOMPurify removes data attributes, mustaches and ERB\n   */\n  let SAFE_FOR_TEMPLATES = false;\n\n  /* Decide if document with <html>... should be returned */\n  let WHOLE_DOCUMENT = false;\n\n  /* Track whether config is already set on this instance of DOMPurify. */\n  let SET_CONFIG = false;\n\n  /* Decide if all elements (e.g. style, script) must be children of\n   * document.body. By default, browsers might move them to document.head */\n  let FORCE_BODY = false;\n\n  /* Decide if a DOM `HTMLBodyElement` should be returned, instead of a html\n   * string (or a TrustedHTML object if Trusted Types are supported).\n   * If `WHOLE_DOCUMENT` is enabled a `HTMLHtmlElement` will be returned instead\n   */\n  let RETURN_DOM = false;\n\n  /* Decide if a DOM `DocumentFragment` should be returned, instead of a html\n   * string  (or a TrustedHTML object if Trusted Types are supported) */\n  let RETURN_DOM_FRAGMENT = false;\n\n  /* If `RETURN_DOM` or `RETURN_DOM_FRAGMENT` is enabled, decide if the returned DOM\n   * `Node` is imported into the current `Document`. If this flag is not enabled the\n   * `Node` will belong (its ownerDocument) to a fresh `HTMLDocument`, created by\n   * DOMPurify.\n   *\n   * This defaults to `true` starting DOMPurify 2.2.0. Note that setting it to `false`\n   * might cause XSS from attacks hidden in closed shadowroots in case the browser\n   * supports Declarative Shadow: DOM https://web.dev/declarative-shadow-dom/\n   */\n  let RETURN_DOM_IMPORT = true;\n\n  /* Try to return a Trusted Type object instead of a string, return a string in\n   * case Trusted Types are not supported  */\n  let RETURN_TRUSTED_TYPE = false;\n\n  /* Output should be free from DOM clobbering attacks? */\n  let SANITIZE_DOM = true;\n\n  /* Keep element content when removing element? */\n  let KEEP_CONTENT = true;\n\n  /* If a `Node` is passed to sanitize(), then performs sanitization in-place instead\n   * of importing it into a new Document and returning a sanitized copy */\n  let IN_PLACE = false;\n\n  /* Allow usage of profiles like html, svg and mathMl */\n  let USE_PROFILES = {};\n\n  /* Tags to ignore content of when KEEP_CONTENT is true */\n  const FORBID_CONTENTS = addToSet({}, [\n    'annotation-xml',\n    'audio',\n    'colgroup',\n    'desc',\n    'foreignobject',\n    'head',\n    'iframe',\n    'math',\n    'mi',\n    'mn',\n    'mo',\n    'ms',\n    'mtext',\n    'noembed',\n    'noframes',\n    'noscript',\n    'plaintext',\n    'script',\n    'style',\n    'svg',\n    'template',\n    'thead',\n    'title',\n    'video',\n    'xmp',\n  ]);\n\n  /* Tags that are safe for data: URIs */\n  let DATA_URI_TAGS = null;\n  const DEFAULT_DATA_URI_TAGS = addToSet({}, [\n    'audio',\n    'video',\n    'img',\n    'source',\n    'image',\n    'track',\n  ]);\n\n  /* Attributes safe for values like \"javascript:\" */\n  let URI_SAFE_ATTRIBUTES = null;\n  const DEFAULT_URI_SAFE_ATTRIBUTES = addToSet({}, [\n    'alt',\n    'class',\n    'for',\n    'id',\n    'label',\n    'name',\n    'pattern',\n    'placeholder',\n    'summary',\n    'title',\n    'value',\n    'style',\n    'xmlns',\n  ]);\n\n  /* Keep a reference to config to pass to hooks */\n  let CONFIG = null;\n\n  /* Ideally, do not touch anything below this line */\n  /* ______________________________________________ */\n\n  const formElement = document.createElement('form');\n\n  /**\n   * _parseConfig\n   *\n   * @param  {Object} cfg optional config literal\n   */\n  // eslint-disable-next-line complexity\n  const _parseConfig = function (cfg) {\n    if (CONFIG && CONFIG === cfg) {\n      return;\n    }\n\n    /* Shield configuration object from tampering */\n    if (!cfg || typeof cfg !== 'object') {\n      cfg = {};\n    }\n\n    /* Shield configuration object from prototype pollution */\n    cfg = clone(cfg);\n\n    /* Set configuration parameters */\n    ALLOWED_TAGS =\n      'ALLOWED_TAGS' in cfg\n        ? addToSet({}, cfg.ALLOWED_TAGS)\n        : DEFAULT_ALLOWED_TAGS;\n    ALLOWED_ATTR =\n      'ALLOWED_ATTR' in cfg\n        ? addToSet({}, cfg.ALLOWED_ATTR)\n        : DEFAULT_ALLOWED_ATTR;\n    URI_SAFE_ATTRIBUTES =\n      'ADD_URI_SAFE_ATTR' in cfg\n        ? addToSet(clone(DEFAULT_URI_SAFE_ATTRIBUTES), cfg.ADD_URI_SAFE_ATTR)\n        : DEFAULT_URI_SAFE_ATTRIBUTES;\n    DATA_URI_TAGS =\n      'ADD_DATA_URI_TAGS' in cfg\n        ? addToSet(clone(DEFAULT_DATA_URI_TAGS), cfg.ADD_DATA_URI_TAGS)\n        : DEFAULT_DATA_URI_TAGS;\n    FORBID_TAGS = 'FORBID_TAGS' in cfg ? addToSet({}, cfg.FORBID_TAGS) : {};\n    FORBID_ATTR = 'FORBID_ATTR' in cfg ? addToSet({}, cfg.FORBID_ATTR) : {};\n    USE_PROFILES = 'USE_PROFILES' in cfg ? cfg.USE_PROFILES : false;\n    ALLOW_ARIA_ATTR = cfg.ALLOW_ARIA_ATTR !== false; // Default true\n    ALLOW_DATA_ATTR = cfg.ALLOW_DATA_ATTR !== false; // Default true\n    ALLOW_UNKNOWN_PROTOCOLS = cfg.ALLOW_UNKNOWN_PROTOCOLS || false; // Default false\n    SAFE_FOR_TEMPLATES = cfg.SAFE_FOR_TEMPLATES || false; // Default false\n    WHOLE_DOCUMENT = cfg.WHOLE_DOCUMENT || false; // Default false\n    RETURN_DOM = cfg.RETURN_DOM || false; // Default false\n    RETURN_DOM_FRAGMENT = cfg.RETURN_DOM_FRAGMENT || false; // Default false\n    RETURN_DOM_IMPORT = cfg.RETURN_DOM_IMPORT !== false; // Default true\n    RETURN_TRUSTED_TYPE = cfg.RETURN_TRUSTED_TYPE || false; // Default false\n    FORCE_BODY = cfg.FORCE_BODY || false; // Default false\n    SANITIZE_DOM = cfg.SANITIZE_DOM !== false; // Default true\n    KEEP_CONTENT = cfg.KEEP_CONTENT !== false; // Default true\n    IN_PLACE = cfg.IN_PLACE || false; // Default false\n    IS_ALLOWED_URI = cfg.ALLOWED_URI_REGEXP || IS_ALLOWED_URI;\n    if (SAFE_FOR_TEMPLATES) {\n      ALLOW_DATA_ATTR = false;\n    }\n\n    if (RETURN_DOM_FRAGMENT) {\n      RETURN_DOM = true;\n    }\n\n    /* Parse profile info */\n    if (USE_PROFILES) {\n      ALLOWED_TAGS = addToSet({}, [...TAGS.text]);\n      ALLOWED_ATTR = [];\n      if (USE_PROFILES.html === true) {\n        addToSet(ALLOWED_TAGS, TAGS.html);\n        addToSet(ALLOWED_ATTR, ATTRS.html);\n      }\n\n      if (USE_PROFILES.svg === true) {\n        addToSet(ALLOWED_TAGS, TAGS.svg);\n        addToSet(ALLOWED_ATTR, ATTRS.svg);\n        addToSet(ALLOWED_ATTR, ATTRS.xml);\n      }\n\n      if (USE_PROFILES.svgFilters === true) {\n        addToSet(ALLOWED_TAGS, TAGS.svgFilters);\n        addToSet(ALLOWED_ATTR, ATTRS.svg);\n        addToSet(ALLOWED_ATTR, ATTRS.xml);\n      }\n\n      if (USE_PROFILES.mathMl === true) {\n        addToSet(ALLOWED_TAGS, TAGS.mathMl);\n        addToSet(ALLOWED_ATTR, ATTRS.mathMl);\n        addToSet(ALLOWED_ATTR, ATTRS.xml);\n      }\n    }\n\n    /* Merge configuration parameters */\n    if (cfg.ADD_TAGS) {\n      if (ALLOWED_TAGS === DEFAULT_ALLOWED_TAGS) {\n        ALLOWED_TAGS = clone(ALLOWED_TAGS);\n      }\n\n      addToSet(ALLOWED_TAGS, cfg.ADD_TAGS);\n    }\n\n    if (cfg.ADD_ATTR) {\n      if (ALLOWED_ATTR === DEFAULT_ALLOWED_ATTR) {\n        ALLOWED_ATTR = clone(ALLOWED_ATTR);\n      }\n\n      addToSet(ALLOWED_ATTR, cfg.ADD_ATTR);\n    }\n\n    if (cfg.ADD_URI_SAFE_ATTR) {\n      addToSet(URI_SAFE_ATTRIBUTES, cfg.ADD_URI_SAFE_ATTR);\n    }\n\n    /* Add #text in case KEEP_CONTENT is set to true */\n    if (KEEP_CONTENT) {\n      ALLOWED_TAGS['#text'] = true;\n    }\n\n    /* Add html, head and body to ALLOWED_TAGS in case WHOLE_DOCUMENT is true */\n    if (WHOLE_DOCUMENT) {\n      addToSet(ALLOWED_TAGS, ['html', 'head', 'body']);\n    }\n\n    /* Add tbody to ALLOWED_TAGS in case tables are permitted, see #286, #365 */\n    if (ALLOWED_TAGS.table) {\n      addToSet(ALLOWED_TAGS, ['tbody']);\n      delete FORBID_TAGS.tbody;\n    }\n\n    // Prevent further manipulation of configuration.\n    // Not available in IE8, Safari 5, etc.\n    if (freeze) {\n      freeze(cfg);\n    }\n\n    CONFIG = cfg;\n  };\n\n  const MATHML_TEXT_INTEGRATION_POINTS = addToSet({}, [\n    'mi',\n    'mo',\n    'mn',\n    'ms',\n    'mtext',\n  ]);\n\n  const HTML_INTEGRATION_POINTS = addToSet({}, [\n    'foreignobject',\n    'desc',\n    'title',\n    'annotation-xml',\n  ]);\n\n  /* Keep track of all possible SVG and MathML tags\n   * so that we can perform the namespace checks\n   * correctly. */\n  const ALL_SVG_TAGS = addToSet({}, TAGS.svg);\n  addToSet(ALL_SVG_TAGS, TAGS.svgFilters);\n  addToSet(ALL_SVG_TAGS, TAGS.svgDisallowed);\n\n  const ALL_MATHML_TAGS = addToSet({}, TAGS.mathMl);\n  addToSet(ALL_MATHML_TAGS, TAGS.mathMlDisallowed);\n\n  const MATHML_NAMESPACE = 'http://www.w3.org/1998/Math/MathML';\n  const SVG_NAMESPACE = 'http://www.w3.org/2000/svg';\n  const HTML_NAMESPACE = 'http://www.w3.org/1999/xhtml';\n\n  /**\n   *\n   *\n   * @param  {Element} element a DOM element whose namespace is being checked\n   * @returns {boolean} Return false if the element has a\n   *  namespace that a spec-compliant parser would never\n   *  return. Return true otherwise.\n   */\n  const _checkValidNamespace = function (element) {\n    let parent = getParentNode(element);\n\n    // In JSDOM, if we're inside shadow DOM, then parentNode\n    // can be null. We just simulate parent in this case.\n    if (!parent || !parent.tagName) {\n      parent = {\n        namespaceURI: HTML_NAMESPACE,\n        tagName: 'template',\n      };\n    }\n\n    const tagName = stringToLowerCase(element.tagName);\n    const parentTagName = stringToLowerCase(parent.tagName);\n\n    if (element.namespaceURI === SVG_NAMESPACE) {\n      // The only way to switch from HTML namespace to SVG\n      // is via <svg>. If it happens via any other tag, then\n      // it should be killed.\n      if (parent.namespaceURI === HTML_NAMESPACE) {\n        return tagName === 'svg';\n      }\n\n      // The only way to switch from MathML to SVG is via\n      // svg if parent is either <annotation-xml> or MathML\n      // text integration points.\n      if (parent.namespaceURI === MATHML_NAMESPACE) {\n        return (\n          tagName === 'svg' &&\n          (parentTagName === 'annotation-xml' ||\n            MATHML_TEXT_INTEGRATION_POINTS[parentTagName])\n        );\n      }\n\n      // We only allow elements that are defined in SVG\n      // spec. All others are disallowed in SVG namespace.\n      return Boolean(ALL_SVG_TAGS[tagName]);\n    }\n\n    if (element.namespaceURI === MATHML_NAMESPACE) {\n      // The only way to switch from HTML namespace to MathML\n      // is via <math>. If it happens via any other tag, then\n      // it should be killed.\n      if (parent.namespaceURI === HTML_NAMESPACE) {\n        return tagName === 'math';\n      }\n\n      // The only way to switch from SVG to MathML is via\n      // <math> and HTML integration points\n      if (parent.namespaceURI === SVG_NAMESPACE) {\n        return tagName === 'math' && HTML_INTEGRATION_POINTS[parentTagName];\n      }\n\n      // We only allow elements that are defined in MathML\n      // spec. All others are disallowed in MathML namespace.\n      return Boolean(ALL_MATHML_TAGS[tagName]);\n    }\n\n    if (element.namespaceURI === HTML_NAMESPACE) {\n      // The only way to switch from SVG to HTML is via\n      // HTML integration points, and from MathML to HTML\n      // is via MathML text integration points\n      if (\n        parent.namespaceURI === SVG_NAMESPACE &&\n        !HTML_INTEGRATION_POINTS[parentTagName]\n      ) {\n        return false;\n      }\n\n      if (\n        parent.namespaceURI === MATHML_NAMESPACE &&\n        !MATHML_TEXT_INTEGRATION_POINTS[parentTagName]\n      ) {\n        return false;\n      }\n\n      // Certain elements are allowed in both SVG and HTML\n      // namespace. We need to specify them explicitly\n      // so that they don't get erronously deleted from\n      // HTML namespace.\n      const commonSvgAndHTMLElements = addToSet({}, [\n        'title',\n        'style',\n        'font',\n        'a',\n        'script',\n      ]);\n\n      // We disallow tags that are specific for MathML\n      // or SVG and should never appear in HTML namespace\n      return (\n        !ALL_MATHML_TAGS[tagName] &&\n        (commonSvgAndHTMLElements[tagName] || !ALL_SVG_TAGS[tagName])\n      );\n    }\n\n    // The code should never reach this place (this means\n    // that the element somehow got namespace that is not\n    // HTML, SVG or MathML). Return false just in case.\n    return false;\n  };\n\n  /**\n   * _forceRemove\n   *\n   * @param  {Node} node a DOM node\n   */\n  const _forceRemove = function (node) {\n    arrayPush(DOMPurify.removed, { element: node });\n    try {\n      node.parentNode.removeChild(node);\n    } catch (_) {\n      try {\n        node.outerHTML = emptyHTML;\n      } catch (_) {\n        node.remove();\n      }\n    }\n  };\n\n  /**\n   * _removeAttribute\n   *\n   * @param  {String} name an Attribute name\n   * @param  {Node} node a DOM node\n   */\n  const _removeAttribute = function (name, node) {\n    try {\n      arrayPush(DOMPurify.removed, {\n        attribute: node.getAttributeNode(name),\n        from: node,\n      });\n    } catch (_) {\n      arrayPush(DOMPurify.removed, {\n        attribute: null,\n        from: node,\n      });\n    }\n\n    node.removeAttribute(name);\n\n    // We void attribute values for unremovable \"is\"\" attributes\n    if (name === 'is' && !ALLOWED_ATTR[name]) {\n      if (RETURN_DOM || RETURN_DOM_FRAGMENT) {\n        try {\n          _forceRemove(node);\n        } catch (_) {}\n      } else {\n        try {\n          node.setAttribute(name, '');\n        } catch (_) {}\n      }\n    }\n  };\n\n  /**\n   * _initDocument\n   *\n   * @param  {String} dirty a string of dirty markup\n   * @return {Document} a DOM, filled with the dirty markup\n   */\n  const _initDocument = function (dirty) {\n    /* Create a HTML document */\n    let doc;\n    let leadingWhitespace;\n\n    if (FORCE_BODY) {\n      dirty = '<remove></remove>' + dirty;\n    } else {\n      /* If FORCE_BODY isn't used, leading whitespace needs to be preserved manually */\n      const matches = stringMatch(dirty, /^[\\r\\n\\t ]+/);\n      leadingWhitespace = matches && matches[0];\n    }\n\n    const dirtyPayload = trustedTypesPolicy\n      ? trustedTypesPolicy.createHTML(dirty)\n      : dirty;\n    /* Use the DOMParser API by default, fallback later if needs be */\n    try {\n      doc = new DOMParser().parseFromString(dirtyPayload, 'text/html');\n    } catch (_) {}\n\n    /* Use createHTMLDocument in case DOMParser is not available */\n    if (!doc || !doc.documentElement) {\n      doc = implementation.createHTMLDocument('');\n      const { body } = doc;\n      body.parentNode.removeChild(body.parentNode.firstElementChild);\n      body.outerHTML = dirtyPayload;\n    }\n\n    if (dirty && leadingWhitespace) {\n      doc.body.insertBefore(\n        document.createTextNode(leadingWhitespace),\n        doc.body.childNodes[0] || null\n      );\n    }\n\n    /* Work on whole document or just its body */\n    return getElementsByTagName.call(doc, WHOLE_DOCUMENT ? 'html' : 'body')[0];\n  };\n\n  /**\n   * _createIterator\n   *\n   * @param  {Document} root document/fragment to create iterator for\n   * @return {Iterator} iterator instance\n   */\n  const _createIterator = function (root) {\n    return createNodeIterator.call(\n      root.ownerDocument || root,\n      root,\n      NodeFilter.SHOW_ELEMENT | NodeFilter.SHOW_COMMENT | NodeFilter.SHOW_TEXT,\n      () => {\n        return NodeFilter.FILTER_ACCEPT;\n      },\n      false\n    );\n  };\n\n  /**\n   * _isClobbered\n   *\n   * @param  {Node} elm element to check for clobbering attacks\n   * @return {Boolean} true if clobbered, false if safe\n   */\n  const _isClobbered = function (elm) {\n    if (elm instanceof Text || elm instanceof Comment) {\n      return false;\n    }\n\n    if (\n      typeof elm.nodeName !== 'string' ||\n      typeof elm.textContent !== 'string' ||\n      typeof elm.removeChild !== 'function' ||\n      !(elm.attributes instanceof NamedNodeMap) ||\n      typeof elm.removeAttribute !== 'function' ||\n      typeof elm.setAttribute !== 'function' ||\n      typeof elm.namespaceURI !== 'string' ||\n      typeof elm.insertBefore !== 'function'\n    ) {\n      return true;\n    }\n\n    return false;\n  };\n\n  /**\n   * _isNode\n   *\n   * @param  {Node} obj object to check whether it's a DOM node\n   * @return {Boolean} true is object is a DOM node\n   */\n  const _isNode = function (object) {\n    return typeof Node === 'object'\n      ? object instanceof Node\n      : object &&\n          typeof object === 'object' &&\n          typeof object.nodeType === 'number' &&\n          typeof object.nodeName === 'string';\n  };\n\n  /**\n   * _executeHook\n   * Execute user configurable hooks\n   *\n   * @param  {String} entryPoint  Name of the hook's entry point\n   * @param  {Node} currentNode node to work on with the hook\n   * @param  {Object} data additional hook parameters\n   */\n  const _executeHook = function (entryPoint, currentNode, data) {\n    if (!hooks[entryPoint]) {\n      return;\n    }\n\n    arrayForEach(hooks[entryPoint], (hook) => {\n      hook.call(DOMPurify, currentNode, data, CONFIG);\n    });\n  };\n\n  /**\n   * _sanitizeElements\n   *\n   * @protect nodeName\n   * @protect textContent\n   * @protect removeChild\n   *\n   * @param   {Node} currentNode to check for permission to exist\n   * @return  {Boolean} true if node was killed, false if left alive\n   */\n  const _sanitizeElements = function (currentNode) {\n    let content;\n\n    /* Execute a hook if present */\n    _executeHook('beforeSanitizeElements', currentNode, null);\n\n    /* Check if element is clobbered or can clobber */\n    if (_isClobbered(currentNode)) {\n      _forceRemove(currentNode);\n      return true;\n    }\n\n    /* Check if tagname contains Unicode */\n    if (stringMatch(currentNode.nodeName, /[\\u0080-\\uFFFF]/)) {\n      _forceRemove(currentNode);\n      return true;\n    }\n\n    /* Now let's check the element's type and name */\n    const tagName = stringToLowerCase(currentNode.nodeName);\n\n    /* Execute a hook if present */\n    _executeHook('uponSanitizeElement', currentNode, {\n      tagName,\n      allowedTags: ALLOWED_TAGS,\n    });\n\n    /* Detect mXSS attempts abusing namespace confusion */\n    if (\n      !_isNode(currentNode.firstElementChild) &&\n      (!_isNode(currentNode.content) ||\n        !_isNode(currentNode.content.firstElementChild)) &&\n      regExpTest(/<[/\\w]/g, currentNode.innerHTML) &&\n      regExpTest(/<[/\\w]/g, currentNode.textContent)\n    ) {\n      _forceRemove(currentNode);\n      return true;\n    }\n\n    /* Remove element if anything forbids its presence */\n    if (!ALLOWED_TAGS[tagName] || FORBID_TAGS[tagName]) {\n      /* Keep content except for bad-listed elements */\n      if (KEEP_CONTENT && !FORBID_CONTENTS[tagName]) {\n        const parentNode = getParentNode(currentNode);\n        const childNodes = getChildNodes(currentNode);\n\n        if (childNodes && parentNode) {\n          const childCount = childNodes.length;\n\n          for (let i = childCount - 1; i >= 0; --i) {\n            parentNode.insertBefore(\n              cloneNode(childNodes[i], true),\n              getNextSibling(currentNode)\n            );\n          }\n        }\n      }\n\n      _forceRemove(currentNode);\n      return true;\n    }\n\n    /* Check whether element has a valid namespace */\n    if (currentNode instanceof Element && !_checkValidNamespace(currentNode)) {\n      _forceRemove(currentNode);\n      return true;\n    }\n\n    if (\n      (tagName === 'noscript' || tagName === 'noembed') &&\n      regExpTest(/<\\/no(script|embed)/i, currentNode.innerHTML)\n    ) {\n      _forceRemove(currentNode);\n      return true;\n    }\n\n    /* Sanitize element content to be template-safe */\n    if (SAFE_FOR_TEMPLATES && currentNode.nodeType === 3) {\n      /* Get the element's text content */\n      content = currentNode.textContent;\n      content = stringReplace(content, MUSTACHE_EXPR, ' ');\n      content = stringReplace(content, ERB_EXPR, ' ');\n      if (currentNode.textContent !== content) {\n        arrayPush(DOMPurify.removed, { element: currentNode.cloneNode() });\n        currentNode.textContent = content;\n      }\n    }\n\n    /* Execute a hook if present */\n    _executeHook('afterSanitizeElements', currentNode, null);\n\n    return false;\n  };\n\n  /**\n   * _isValidAttribute\n   *\n   * @param  {string} lcTag Lowercase tag name of containing element.\n   * @param  {string} lcName Lowercase attribute name.\n   * @param  {string} value Attribute value.\n   * @return {Boolean} Returns true if `value` is valid, otherwise false.\n   */\n  // eslint-disable-next-line complexity\n  const _isValidAttribute = function (lcTag, lcName, value) {\n    /* Make sure attribute cannot clobber */\n    if (\n      SANITIZE_DOM &&\n      (lcName === 'id' || lcName === 'name') &&\n      (value in document || value in formElement)\n    ) {\n      return false;\n    }\n\n    /* Allow valid data-* attributes: At least one character after \"-\"\n        (https://html.spec.whatwg.org/multipage/dom.html#embedding-custom-non-visible-data-with-the-data-*-attributes)\n        XML-compatible (https://html.spec.whatwg.org/multipage/infrastructure.html#xml-compatible and http://www.w3.org/TR/xml/#d0e804)\n        We don't need to check the value; it's always URI safe. */\n    if (ALLOW_DATA_ATTR && regExpTest(DATA_ATTR, lcName)) {\n      // This attribute is safe\n    } else if (ALLOW_ARIA_ATTR && regExpTest(ARIA_ATTR, lcName)) {\n      // This attribute is safe\n      /* Otherwise, check the name is permitted */\n    } else if (!ALLOWED_ATTR[lcName] || FORBID_ATTR[lcName]) {\n      return false;\n\n      /* Check value is safe. First, is attr inert? If so, is safe */\n    } else if (URI_SAFE_ATTRIBUTES[lcName]) {\n      // This attribute is safe\n      /* Check no script, data or unknown possibly unsafe URI\n        unless we know URI values are safe for that attribute */\n    } else if (\n      regExpTest(IS_ALLOWED_URI, stringReplace(value, ATTR_WHITESPACE, ''))\n    ) {\n      // This attribute is safe\n      /* Keep image data URIs alive if src/xlink:href is allowed */\n      /* Further prevent gadget XSS for dynamically built script tags */\n    } else if (\n      (lcName === 'src' || lcName === 'xlink:href' || lcName === 'href') &&\n      lcTag !== 'script' &&\n      stringIndexOf(value, 'data:') === 0 &&\n      DATA_URI_TAGS[lcTag]\n    ) {\n      // This attribute is safe\n      /* Allow unknown protocols: This provides support for links that\n        are handled by protocol handlers which may be unknown ahead of\n        time, e.g. fb:, spotify: */\n    } else if (\n      ALLOW_UNKNOWN_PROTOCOLS &&\n      !regExpTest(IS_SCRIPT_OR_DATA, stringReplace(value, ATTR_WHITESPACE, ''))\n    ) {\n      // This attribute is safe\n      /* Check for binary attributes */\n      // eslint-disable-next-line no-negated-condition\n    } else if (!value) {\n      // Binary attributes are safe at this point\n      /* Anything else, presume unsafe, do not add it back */\n    } else {\n      return false;\n    }\n\n    return true;\n  };\n\n  /**\n   * _sanitizeAttributes\n   *\n   * @protect attributes\n   * @protect nodeName\n   * @protect removeAttribute\n   * @protect setAttribute\n   *\n   * @param  {Node} currentNode to sanitize\n   */\n  const _sanitizeAttributes = function (currentNode) {\n    let attr;\n    let value;\n    let lcName;\n    let l;\n    /* Execute a hook if present */\n    _executeHook('beforeSanitizeAttributes', currentNode, null);\n\n    const { attributes } = currentNode;\n\n    /* Check if we have attributes; if not we might have a text node */\n    if (!attributes) {\n      return;\n    }\n\n    const hookEvent = {\n      attrName: '',\n      attrValue: '',\n      keepAttr: true,\n      allowedAttributes: ALLOWED_ATTR,\n    };\n    l = attributes.length;\n\n    /* Go backwards over all attributes; safely remove bad ones */\n    while (l--) {\n      attr = attributes[l];\n      const { name, namespaceURI } = attr;\n      value = stringTrim(attr.value);\n      lcName = stringToLowerCase(name);\n\n      /* Execute a hook if present */\n      hookEvent.attrName = lcName;\n      hookEvent.attrValue = value;\n      hookEvent.keepAttr = true;\n      hookEvent.forceKeepAttr = undefined; // Allows developers to see this is a property they can set\n      _executeHook('uponSanitizeAttribute', currentNode, hookEvent);\n      value = hookEvent.attrValue;\n      /* Did the hooks approve of the attribute? */\n      if (hookEvent.forceKeepAttr) {\n        continue;\n      }\n\n      /* Remove attribute */\n      _removeAttribute(name, currentNode);\n\n      /* Did the hooks approve of the attribute? */\n      if (!hookEvent.keepAttr) {\n        continue;\n      }\n\n      /* Work around a security issue in jQuery 3.0 */\n      if (regExpTest(/\\/>/i, value)) {\n        _removeAttribute(name, currentNode);\n        continue;\n      }\n\n      /* Sanitize attribute content to be template-safe */\n      if (SAFE_FOR_TEMPLATES) {\n        value = stringReplace(value, MUSTACHE_EXPR, ' ');\n        value = stringReplace(value, ERB_EXPR, ' ');\n      }\n\n      /* Is `value` valid for this attribute? */\n      const lcTag = currentNode.nodeName.toLowerCase();\n      if (!_isValidAttribute(lcTag, lcName, value)) {\n        continue;\n      }\n\n      /* Handle invalid data-* attribute set by try-catching it */\n      try {\n        if (namespaceURI) {\n          currentNode.setAttributeNS(namespaceURI, name, value);\n        } else {\n          /* Fallback to setAttribute() for browser-unrecognized namespaces e.g. \"x-schema\". */\n          currentNode.setAttribute(name, value);\n        }\n\n        arrayPop(DOMPurify.removed);\n      } catch (_) {}\n    }\n\n    /* Execute a hook if present */\n    _executeHook('afterSanitizeAttributes', currentNode, null);\n  };\n\n  /**\n   * _sanitizeShadowDOM\n   *\n   * @param  {DocumentFragment} fragment to iterate over recursively\n   */\n  const _sanitizeShadowDOM = function (fragment) {\n    let shadowNode;\n    const shadowIterator = _createIterator(fragment);\n\n    /* Execute a hook if present */\n    _executeHook('beforeSanitizeShadowDOM', fragment, null);\n\n    while ((shadowNode = shadowIterator.nextNode())) {\n      /* Execute a hook if present */\n      _executeHook('uponSanitizeShadowNode', shadowNode, null);\n\n      /* Sanitize tags and elements */\n      if (_sanitizeElements(shadowNode)) {\n        continue;\n      }\n\n      /* Deep shadow DOM detected */\n      if (shadowNode.content instanceof DocumentFragment) {\n        _sanitizeShadowDOM(shadowNode.content);\n      }\n\n      /* Check attributes, sanitize if necessary */\n      _sanitizeAttributes(shadowNode);\n    }\n\n    /* Execute a hook if present */\n    _executeHook('afterSanitizeShadowDOM', fragment, null);\n  };\n\n  /**\n   * Sanitize\n   * Public method providing core sanitation functionality\n   *\n   * @param {String|Node} dirty string or DOM node\n   * @param {Object} configuration object\n   */\n  // eslint-disable-next-line complexity\n  DOMPurify.sanitize = function (dirty, cfg) {\n    let body;\n    let importedNode;\n    let currentNode;\n    let oldNode;\n    let returnNode;\n    /* Make sure we have a string to sanitize.\n      DO NOT return early, as this will return the wrong type if\n      the user has requested a DOM object rather than a string */\n    if (!dirty) {\n      dirty = '<!-->';\n    }\n\n    /* Stringify, in case dirty is an object */\n    if (typeof dirty !== 'string' && !_isNode(dirty)) {\n      // eslint-disable-next-line no-negated-condition\n      if (typeof dirty.toString !== 'function') {\n        throw typeErrorCreate('toString is not a function');\n      } else {\n        dirty = dirty.toString();\n        if (typeof dirty !== 'string') {\n          throw typeErrorCreate('dirty is not a string, aborting');\n        }\n      }\n    }\n\n    /* Check we can run. Otherwise fall back or ignore */\n    if (!DOMPurify.isSupported) {\n      if (\n        typeof window.toStaticHTML === 'object' ||\n        typeof window.toStaticHTML === 'function'\n      ) {\n        if (typeof dirty === 'string') {\n          return window.toStaticHTML(dirty);\n        }\n\n        if (_isNode(dirty)) {\n          return window.toStaticHTML(dirty.outerHTML);\n        }\n      }\n\n      return dirty;\n    }\n\n    /* Assign config vars */\n    if (!SET_CONFIG) {\n      _parseConfig(cfg);\n    }\n\n    /* Clean up removed elements */\n    DOMPurify.removed = [];\n\n    /* Check if dirty is correctly typed for IN_PLACE */\n    if (typeof dirty === 'string') {\n      IN_PLACE = false;\n    }\n\n    if (IN_PLACE) {\n      /* No special handling necessary for in-place sanitization */\n    } else if (dirty instanceof Node) {\n      /* If dirty is a DOM element, append to an empty document to avoid\n         elements being stripped by the parser */\n      body = _initDocument('<!---->');\n      importedNode = body.ownerDocument.importNode(dirty, true);\n      if (importedNode.nodeType === 1 && importedNode.nodeName === 'BODY') {\n        /* Node is already a body, use as is */\n        body = importedNode;\n      } else if (importedNode.nodeName === 'HTML') {\n        body = importedNode;\n      } else {\n        // eslint-disable-next-line unicorn/prefer-node-append\n        body.appendChild(importedNode);\n      }\n    } else {\n      /* Exit directly if we have nothing to do */\n      if (\n        !RETURN_DOM &&\n        !SAFE_FOR_TEMPLATES &&\n        !WHOLE_DOCUMENT &&\n        // eslint-disable-next-line unicorn/prefer-includes\n        dirty.indexOf('<') === -1\n      ) {\n        return trustedTypesPolicy && RETURN_TRUSTED_TYPE\n          ? trustedTypesPolicy.createHTML(dirty)\n          : dirty;\n      }\n\n      /* Initialize the document to work on */\n      body = _initDocument(dirty);\n\n      /* Check we have a DOM node from the data */\n      if (!body) {\n        return RETURN_DOM ? null : emptyHTML;\n      }\n    }\n\n    /* Remove first element node (ours) if FORCE_BODY is set */\n    if (body && FORCE_BODY) {\n      _forceRemove(body.firstChild);\n    }\n\n    /* Get node iterator */\n    const nodeIterator = _createIterator(IN_PLACE ? dirty : body);\n\n    /* Now start iterating over the created document */\n    while ((currentNode = nodeIterator.nextNode())) {\n      /* Fix IE's strange behavior with manipulated textNodes #89 */\n      if (currentNode.nodeType === 3 && currentNode === oldNode) {\n        continue;\n      }\n\n      /* Sanitize tags and elements */\n      if (_sanitizeElements(currentNode)) {\n        continue;\n      }\n\n      /* Shadow DOM detected, sanitize it */\n      if (currentNode.content instanceof DocumentFragment) {\n        _sanitizeShadowDOM(currentNode.content);\n      }\n\n      /* Check attributes, sanitize if necessary */\n      _sanitizeAttributes(currentNode);\n\n      oldNode = currentNode;\n    }\n\n    oldNode = null;\n\n    /* If we sanitized `dirty` in-place, return it. */\n    if (IN_PLACE) {\n      return dirty;\n    }\n\n    /* Return sanitized string or DOM */\n    if (RETURN_DOM) {\n      if (RETURN_DOM_FRAGMENT) {\n        returnNode = createDocumentFragment.call(body.ownerDocument);\n\n        while (body.firstChild) {\n          // eslint-disable-next-line unicorn/prefer-node-append\n          returnNode.appendChild(body.firstChild);\n        }\n      } else {\n        returnNode = body;\n      }\n\n      if (RETURN_DOM_IMPORT) {\n        /*\n          AdoptNode() is not used because internal state is not reset\n          (e.g. the past names map of a HTMLFormElement), this is safe\n          in theory but we would rather not risk another attack vector.\n          The state that is cloned by importNode() is explicitly defined\n          by the specs.\n        */\n        returnNode = importNode.call(originalDocument, returnNode, true);\n      }\n\n      return returnNode;\n    }\n\n    let serializedHTML = WHOLE_DOCUMENT ? body.outerHTML : body.innerHTML;\n\n    /* Sanitize final string template-safe */\n    if (SAFE_FOR_TEMPLATES) {\n      serializedHTML = stringReplace(serializedHTML, MUSTACHE_EXPR, ' ');\n      serializedHTML = stringReplace(serializedHTML, ERB_EXPR, ' ');\n    }\n\n    return trustedTypesPolicy && RETURN_TRUSTED_TYPE\n      ? trustedTypesPolicy.createHTML(serializedHTML)\n      : serializedHTML;\n  };\n\n  /**\n   * Public method to set the configuration once\n   * setConfig\n   *\n   * @param {Object} cfg configuration object\n   */\n  DOMPurify.setConfig = function (cfg) {\n    _parseConfig(cfg);\n    SET_CONFIG = true;\n  };\n\n  /**\n   * Public method to remove the configuration\n   * clearConfig\n   *\n   */\n  DOMPurify.clearConfig = function () {\n    CONFIG = null;\n    SET_CONFIG = false;\n  };\n\n  /**\n   * Public method to check if an attribute value is valid.\n   * Uses last set config, if any. Otherwise, uses config defaults.\n   * isValidAttribute\n   *\n   * @param  {string} tag Tag name of containing element.\n   * @param  {string} attr Attribute name.\n   * @param  {string} value Attribute value.\n   * @return {Boolean} Returns true if `value` is valid. Otherwise, returns false.\n   */\n  DOMPurify.isValidAttribute = function (tag, attr, value) {\n    /* Initialize shared config vars if necessary. */\n    if (!CONFIG) {\n      _parseConfig({});\n    }\n\n    const lcTag = stringToLowerCase(tag);\n    const lcName = stringToLowerCase(attr);\n    return _isValidAttribute(lcTag, lcName, value);\n  };\n\n  /**\n   * AddHook\n   * Public method to add DOMPurify hooks\n   *\n   * @param {String} entryPoint entry point for the hook to add\n   * @param {Function} hookFunction function to execute\n   */\n  DOMPurify.addHook = function (entryPoint, hookFunction) {\n    if (typeof hookFunction !== 'function') {\n      return;\n    }\n\n    hooks[entryPoint] = hooks[entryPoint] || [];\n    arrayPush(hooks[entryPoint], hookFunction);\n  };\n\n  /**\n   * RemoveHook\n   * Public method to remove a DOMPurify hook at a given entryPoint\n   * (pops it from the stack of hooks if more are present)\n   *\n   * @param {String} entryPoint entry point for the hook to remove\n   */\n  DOMPurify.removeHook = function (entryPoint) {\n    if (hooks[entryPoint]) {\n      arrayPop(hooks[entryPoint]);\n    }\n  };\n\n  /**\n   * RemoveHooks\n   * Public method to remove all DOMPurify hooks at a given entryPoint\n   *\n   * @param  {String} entryPoint entry point for the hooks to remove\n   */\n  DOMPurify.removeHooks = function (entryPoint) {\n    if (hooks[entryPoint]) {\n      hooks[entryPoint] = [];\n    }\n  };\n\n  /**\n   * RemoveAllHooks\n   * Public method to remove all DOMPurify hooks\n   *\n   */\n  DOMPurify.removeAllHooks = function () {\n    hooks = {};\n  };\n\n  return DOMPurify;\n}\n\nexport default createDOMPurify();\n", "import { VNode } from 'vue'\nimport { Transport } from '../types'\n\nexport const inBrowser = typeof window !== 'undefined'\n\nexport function freeze<R>(item: R[]): ReadonlyArray<R> {\n  if (Array.isArray(item) || typeof item === 'object') {\n    return Object.freeze(item)\n  }\n  return item\n}\n\nexport function combinePassengers(\n  transports: Transport[],\n  slotProps = {}\n): Array<VNode> {\n  return transports.reduce(\n    (passengers, transport) => {\n      const temp = transport.passengers[0]\n      const newPassengers =\n        typeof temp === 'function'\n          ? (temp(slotProps) as VNode[])\n          : (transport.passengers as VNode[])\n      return passengers.concat(newPassengers)\n    },\n    [] as Array<VNode>\n  )\n}\n\nexport function stableSort<T>(array: T[], compareFn: Function) {\n  return array\n    .map((v: T, idx: number) => {\n      return [idx, v] as [number, T]\n    })\n    .sort(function(a, b) {\n      return compareFn(a[1], b[1]) || a[0] - b[0]\n    })\n    .map(c => c[1])\n}\n\nexport function pick<T extends object, K extends keyof T>(\n  obj: T,\n  keys: K[]\n): Pick<T, K> {\n  return keys.reduce(\n    (acc, key) => {\n      if (obj.hasOwnProperty(key)) {\n        acc[key] = obj[key]\n      }\n      return acc\n    },\n    {} as Pick<T, K>\n  )\n}\n", "import Vue from 'vue'\nimport { freeze, inBrowser, stableSort } from '../utils'\nimport {\n  Transports,\n  Transport,\n  TransportInput,\n  TransportVector,\n  VMRegister,\n} from '../types'\n\nconst transports: Transports = {}\nconst targets: VMRegister = {}\nconst sources: VMRegister = {}\n\nexport const Wormhole = Vue.extend({\n  data: () => ({\n    transports,\n    targets,\n    sources,\n    trackInstances: inBrowser,\n  }),\n  methods: {\n    open(transport: TransportInput) {\n      if (!inBrowser) return\n      const { to, from, passengers, order = Infinity } = transport\n      if (!to || !from || !passengers) return\n\n      const newTransport = {\n        to,\n        from,\n        passengers: freeze<object>(passengers),\n        order,\n      } as Transport\n      const keys = Object.keys(this.transports)\n\n      if (keys.indexOf(to) === -1) {\n        Vue.set(this.transports, to, [])\n      }\n\n      const currentIndex = this.$_getTransportIndex(newTransport)\n      // Copying the array here so that the PortalTarget change event will actually contain two distinct arrays\n      const newTransports = this.transports[to].slice(0)\n      if (currentIndex === -1) {\n        newTransports.push(newTransport)\n      } else {\n        newTransports[currentIndex] = newTransport\n      }\n\n      this.transports[to] = stableSort<Transport>(\n        newTransports,\n        (a: Transport, b: Transport) => a.order - b.order\n      )\n    },\n\n    close(transport: TransportVector, force = false) {\n      const { to, from } = transport\n      if (!to || (!from && force === false)) return\n      if (!this.transports[to]) {\n        return\n      }\n\n      if (force) {\n        this.transports[to] = []\n      } else {\n        const index = this.$_getTransportIndex(transport)\n        if (index >= 0) {\n          // Copying the array here so that the PortalTarget change event will actually contain two distinct arrays\n          const newTransports = this.transports[to].slice(0)\n          newTransports.splice(index, 1)\n          this.transports[to] = newTransports\n        }\n      }\n    },\n    registerTarget(target: string, vm: Vue, force?: boolean): void {\n      if (!inBrowser) return\n      if (this.trackInstances && !force && this.targets[target]) {\n        console.warn(`[portal-vue]: Target ${target} already exists`)\n      }\n      this.$set(this.targets, target, Object.freeze([vm]))\n    },\n    unregisterTarget(target: string) {\n      this.$delete(this.targets, target)\n    },\n    registerSource(source: string, vm: Vue, force?: boolean): void {\n      if (!inBrowser) return\n      if (this.trackInstances && !force && this.sources[source]) {\n        console.warn(`[portal-vue]: source ${source} already exists`)\n      }\n      this.$set(this.sources, source, Object.freeze([vm]))\n    },\n    unregisterSource(source: string) {\n      this.$delete(this.sources, source)\n    },\n    hasTarget(to: string) {\n      return !!(this.targets[to] && this.targets[to][0])\n    },\n    hasSource(to: string) {\n      return !!(this.sources[to] && this.sources[to][0])\n    },\n    hasContentFor(to: string) {\n      return !!this.transports[to] && !!this.transports[to].length\n    },\n    // Internal\n    $_getTransportIndex({ to, from }: TransportVector): number {\n      for (const i in this.transports[to]) {\n        if (this.transports[to][i].from === from) {\n          return +i\n        }\n      }\n      return -1\n    },\n  },\n})\n\nconst wormhole = new Wormhole(transports)\nexport { wormhole }\n", "import Vue from 'vue'\nimport { VNode } from 'vue'\nimport { TransportInput, TransportVector } from '../types'\nimport { wormhole } from './wormhole'\n\nlet _id = 1\n\nexport default Vue.extend({\n  name: 'portal',\n  props: {\n    disabled: { type: Boolean },\n    name: { type: String, default: () => String(_id++) },\n    order: { type: Number, default: 0 },\n    slim: { type: Boolean },\n    slotProps: { type: Object, default: () => ({}) },\n    tag: { type: String, default: 'DIV' },\n    to: {\n      type: String,\n      default: () => String(Math.round(Math.random() * 10000000)),\n    },\n  },\n  created() {\n    this.$nextTick(() => {\n      wormhole.registerSource(this.name, this)\n    })\n  },\n  mounted() {\n    if (!this.disabled) {\n      this.sendUpdate()\n    }\n  },\n\n  updated() {\n    if (this.disabled) {\n      this.clear()\n    } else {\n      this.sendUpdate()\n    }\n  },\n\n  beforeDestroy() {\n    wormhole.unregisterSource(this.name)\n    this.clear()\n  },\n  watch: {\n    to(newValue: string, oldValue: string): void {\n      oldValue && oldValue !== newValue && this.clear(oldValue)\n      this.sendUpdate()\n    },\n  },\n\n  methods: {\n    clear(target?: string) {\n      const closer: TransportVector = {\n        from: this.name,\n        to: target || this.to,\n      }\n      wormhole.close(closer)\n    },\n    normalizeSlots(): Function[] | VNode[] | undefined {\n      return this.$scopedSlots.default\n        ? [this.$scopedSlots.default]\n        : this.$slots.default\n    },\n    normalizeOwnChildren(children: VNode[] | Function): VNode[] {\n      return typeof children === 'function'\n        ? children(this.slotProps)\n        : children\n    },\n    sendUpdate() {\n      const slotContent = this.normalizeSlots()\n      if (slotContent) {\n        const transport: TransportInput = {\n          from: this.name,\n          to: this.to,\n          passengers: [...slotContent],\n          order: this.order,\n        }\n        wormhole.open(transport)\n      } else {\n        this.clear()\n      }\n    },\n  },\n\n  render(h): VNode {\n    const children: VNode[] | Function =\n      this.$slots.default || this.$scopedSlots.default || []\n    const Tag = this.tag\n    if (children && this.disabled) {\n      return children.length <= 1 && this.slim ? (\n        this.normalizeOwnChildren(children)[0]\n      ) : (\n        <Tag>{this.normalizeOwnChildren(children)}</Tag>\n      )\n    } else {\n      return this.slim\n        ? h()\n        : h(Tag, {\n            class: { 'v-portal': true },\n            style: { display: 'none' },\n            key: 'v-portal-placeholder',\n          })\n    }\n  },\n})\n", "import Vue from 'vue'\nimport { VNode, PropOptions } from 'vue'\nimport { combinePassengers } from '@/utils'\nimport { Transport, PropWithComponent } from '../types'\n\nimport { wormhole } from '@/components/wormhole'\n\nexport default Vue.extend({\n  name: 'portalTarget',\n  props: {\n    multiple: { type: Boolean, default: false },\n    name: { type: String, required: true },\n    slim: { type: Boolean, default: false },\n    slotProps: { type: Object, default: () => ({}) },\n    tag: { type: String, default: 'div' },\n    transition: { type: [String, Object, Function] } as PropOptions<\n      PropWithComponent\n    >,\n  },\n  data() {\n    return {\n      transports: wormhole.transports,\n      firstRender: true,\n    }\n  },\n  created() {\n    this.$nextTick(() => {\n      wormhole.registerTarget(this.name, this)\n    })\n  },\n  watch: {\n    ownTransports() {\n      this.$emit('change', this.children().length > 0)\n    },\n    name(newVal, oldVal) {\n      /**\n       * TODO\n       * This should warn as well ...\n       */\n      wormhole.unregisterTarget(oldVal)\n      wormhole.registerTarget(newVal, this)\n    },\n  },\n  mounted() {\n    if (this.transition) {\n      this.$nextTick(() => {\n        // only when we have a transition, because it causes a re-render\n        this.firstRender = false\n      })\n    }\n  },\n  beforeDestroy() {\n    wormhole.unregisterTarget(this.name)\n  },\n\n  computed: {\n    ownTransports(): Transport[] {\n      const transports: Transport[] = this.transports[this.name] || []\n      if (this.multiple) {\n        return transports\n      }\n      return transports.length === 0 ? [] : [transports[transports.length - 1]]\n    },\n    passengers(): VNode[] {\n      return combinePassengers(this.ownTransports, this.slotProps)\n    },\n  },\n\n  methods: {\n    // can't be a computed prop because it has to \"react\" to $slot changes.\n    children(): VNode[] {\n      return this.passengers.length !== 0\n        ? this.passengers\n        : this.$scopedSlots.default\n        ? (this.$scopedSlots.default(this.slotProps) as VNode[])\n        : this.$slots.default || []\n    },\n    // can't be a computed prop because it has to \"react\" to this.children().\n    noWrapper() {\n      const noWrapper = this.slim && !this.transition\n      if (noWrapper && this.children().length > 1) {\n        console.warn(\n          '[portal-vue]: PortalTarget with `slim` option received more than one child element.'\n        )\n      }\n      return noWrapper\n    },\n  },\n  render(h): VNode {\n    const noWrapper = this.noWrapper()\n    const children = this.children()\n    const Tag = this.transition || this.tag\n\n    return noWrapper\n      ? children[0]\n      : this.slim && !Tag\n      ? h()\n      : h(\n          Tag,\n          {\n            props: {\n              // if we have a transition component, pass the tag if it exists\n              tag: this.transition && this.tag ? this.tag : undefined,\n            },\n            class: { 'vue-portal-target': true },\n          },\n\n          children\n        )\n  },\n})\n", "import Vue from 'vue'\nimport { VNode, VueConstructor, PropOptions } from 'vue'\nimport Portal from './portal'\nimport PortalTarget from './portal-target'\nimport { wormhole } from './wormhole'\nimport { pick } from '@/utils'\n\nimport { PropWithComponent } from '../types'\n\nlet _id = 0\n\nexport type withPortalTarget = VueConstructor<\n  Vue & {\n    portalTarget: any\n  }\n>\n\nconst portalProps = [\n  'disabled',\n  'name',\n  'order',\n  'slim',\n  'slotProps',\n  'tag',\n  'to',\n]\n\nconst targetProps = ['multiple', 'transition']\n\nexport default (Vue as withPortalTarget).extend({\n  name: 'MountingPortal',\n  inheritAttrs: false,\n  props: {\n    append: { type: [Boolean, String] },\n    bail: {\n      type: Boolean,\n    },\n    mountTo: { type: String, required: true },\n\n    // Portal\n    disabled: { type: Boolean },\n    // name for the portal\n    name: {\n      type: String,\n      default: () => 'mounted_' + String(_id++),\n    },\n    order: { type: Number, default: 0 },\n    slim: { type: Boolean },\n    slotProps: { type: Object, default: () => ({}) },\n    tag: { type: String, default: 'DIV' },\n    // name for the target\n    to: {\n      type: String,\n      default: () => String(Math.round(Math.random() * 10000000)),\n    },\n\n    // Target\n    multiple: { type: Boolean, default: false },\n    targetSlim: { type: Boolean },\n    targetSlotProps: { type: Object, default: () => ({}) },\n    targetTag: { type: String, default: 'div' },\n    transition: { type: [String, Object, Function] } as PropOptions<\n      PropWithComponent\n    >,\n  },\n  created() {\n    if (typeof document === 'undefined') return\n    let el: HTMLElement | null = document.querySelector(this.mountTo)\n\n    if (!el) {\n      console.error(\n        `[portal-vue]: Mount Point '${this.mountTo}' not found in document`\n      )\n      return\n    }\n\n    const props = this.$props\n\n    // Target already exists\n    if (wormhole.targets[props.name]) {\n      if (props.bail) {\n        console.warn(`[portal-vue]: Target ${props.name} is already mounted.\n        Aborting because 'bail: true' is set`)\n      } else {\n        this.portalTarget = wormhole.targets[props.name]\n      }\n      return\n    }\n\n    const { append } = props\n    if (append) {\n      const type = typeof append === 'string' ? append : 'DIV'\n      const mountEl = document.createElement(type)\n      el.appendChild(mountEl)\n      el = mountEl\n    }\n\n    // get props for target from $props\n    // we have to rename a few of them\n    const _props = pick(this.$props, targetProps)\n    _props.slim = this.targetSlim\n    _props.tag = this.targetTag\n    _props.slotProps = this.targetSlotProps\n    _props.name = this.to\n\n    this.portalTarget = new PortalTarget({\n      el,\n      parent: this.$parent || this,\n      propsData: _props,\n    })\n  },\n\n  beforeDestroy() {\n    const target = this.portalTarget\n    if (this.append) {\n      const el = target.$el\n      el.parentNode.removeChild(el)\n    }\n    target.$destroy()\n  },\n\n  render(h): VNode {\n    if (!this.portalTarget) {\n      console.warn(\"[portal-vue] Target wasn't mounted\")\n      return h()\n    }\n\n    // if there's no \"manual\" scoped slot, so we create a <Portal> ourselves\n    if (!this.$scopedSlots.manual) {\n      const props = pick(this.$props, portalProps)\n      return h(\n        Portal,\n        {\n          props: props,\n          attrs: this.$attrs,\n          on: this.$listeners,\n          scopedSlots: this.$scopedSlots,\n        },\n        this.$slots.default\n      )\n    }\n\n    // else, we render the scoped slot\n    let content: VNode = (this.$scopedSlots.manual({\n      to: this.to,\n    }) as unknown) as VNode\n\n    // if user used <template> for the scoped slot\n    // content will be an array\n    if (Array.isArray(content)) {\n      content = content[0]\n    }\n\n    if (!content) return h()\n\n    return content\n  },\n})\n", "import Vue from 'vue'\nimport { VueConstructor } from 'vue'\nimport Portal from './components/portal'\nimport PortalTarget from './components/portal-target'\nimport MountingPortal from './components/mounting-portal'\nimport { wormhole as Wormhole } from './components/wormhole'\n\ndeclare global {\n  interface Window {\n    Vue?: VueConstructor<Vue>\n  }\n}\n\nexport interface PluginOptions {\n  portalName?: string\n  portalTargetName?: string\n  MountingPortalName?: string\n}\n\nfunction install(Vue: VueConstructor<Vue>, options: PluginOptions = {}) {\n  Vue.component(options.portalName || 'Portal', Portal)\n  Vue.component(options.portalTargetName || 'PortalTarget', PortalTarget)\n  Vue.component(options.MountingPortalName || 'MountingPortal', MountingPortal)\n}\nif (\n  // @ts-ignore\n  process.env.ROLLUP_BUILD_MODE === 'umd' &&\n  typeof window !== 'undefined' &&\n  window.Vue &&\n  window.Vue === Vue\n) {\n  window.Vue.use({ install: install })\n}\n\nexport default {\n  install,\n}\n\nexport { Portal, PortalTarget, MountingPortal, Wormhole }\n", "'use strict'\n\n// A list with fixed capacity and constant-time `add()`.\nexport default class CircularList {\n  #buffer          \n  #capacity = 0\n  #defaultValue = ''\n  #isFull = false\n  #offset = 0\n\n  constructor (capacity        , defaultValue      = '') {\n    this.#buffer = new Array(capacity).fill(defaultValue)\n    this.#capacity = capacity\n    this.#defaultValue = defaultValue\n  }\n\n  add (entry     ) {\n    const capacity = this.#capacity\n    const offset = this.#offset\n    this.#buffer[offset] = entry\n    if (offset === capacity - 1) {\n      this.#isFull = true\n    }\n    this.#offset = (offset + 1) % capacity\n  }\n\n  addAll (entries          ) {\n    for (const entry of entries) {\n      this.add(entry)\n    }\n  }\n\n  clear () {\n    this.#buffer.fill(this.#defaultValue)\n    this.#isFull = false\n    this.#offset = 0\n  }\n\n  toArray ()           {\n    const buffer = this.#buffer\n    const offset = this.#offset\n    return (\n      this.#isFull\n        ? [...buffer.slice(offset), ...buffer.slice(0, offset)]\n        : buffer.slice(0, offset)\n    )\n  }\n}\n", "import sbp from '@sbp/sbp'\nimport { CAPTURED_LOGS } from '~/frontend/utils/events.js'\nimport CircularList from '~/frontend/utils/CircularList.js'\n\nconst loggingLevels = ['debug', 'error', 'info', 'log', 'warn']\nconst originalConsole = console\nconst noop = (...args     ) => undefined\n\nexport async function createLogger (config        , { getItem, removeItem, setItem }                                                                )         {\n  const entries = new CircularList(config.maxEntries)\n  const methods = Object.fromEntries(loggingLevels.map((name) =>\n    [name, (...args) => {\n      originalConsole[name](...args)\n      captureLogEntry(logger, name, config.source, ...args)\n    }]\n  ))\n  const appLogsFilter           = []\n  // Make a copy of 'methods' to prevent reassignment by 'setAppLogsFilter'\n  const consoleProxy = new Proxy({ ...methods }, {\n    get (o, p, r) {\n      return Reflect.has(o, p) ? Reflect.get(o, p, r) : Reflect.get(originalConsole, p, r)\n    },\n    has (o, p) {\n      return Reflect.has(originalConsole, p)\n    }\n  })\n  const logger = {\n    get appLogsFilter () {\n      return [...appLogsFilter]\n    },\n    console: consoleProxy,\n    entries,\n    async clear () {\n      await removeItem('entries')\n      entries.clear()\n    },\n    async save () {\n      try {\n        await setItem('entries', this.entries.toArray())\n      } catch (error) {\n        consoleProxy.error(error)\n      }\n    },\n    setAppLogsFilter (filter               ) {\n      appLogsFilter.splice(0, appLogsFilter.length, ...filter)\n      // NOTE: Find a way to capture logs without messing up with log file location.\n      // console.log() doesnt include stack trace, so when logged, we can't access\n      // where the log came from (file name), which} difficults debugging if needed.\n      for (const level of loggingLevels) {\n        // $FlowFixMe\n        consoleProxy[level] = appLogsFilter.includes(level) ? methods[level] : noop\n      }\n    }\n  }\n\n  // Handle potential data corruption gracefully\n  const previousEntries = await (async () => {\n    try {\n      const stored = await getItem('entries')\n      return stored ? JSON.parse(stored) : []\n    } catch (error) {\n      consoleProxy.error('Failed to parse stored entries:', error)\n      return []\n    }\n  })()\n\n  // If `maxEntries` is changed in a release, this will discard oldest logs as necessary.\n  if (config.maxEntries < previousEntries.length) {\n    previousEntries.splice(0, previousEntries.length - config.maxEntries)\n  }\n  // Load the previous entries to sync the in-memory array with the local storage.\n  if (previousEntries.length) {\n    logger.entries.addAll(previousEntries)\n  }\n\n  return logger\n}\n\nfunction captureLogEntry (logger        , type        , source        , ...args) {\n  const entry = {\n    timestamp: new Date().toISOString(),\n    source,\n    type,\n    // Detect when arg is an Error and capture it properly.\n    // ex: uncaught Vue errors or custom try/catch errors.\n    msg: args.map((arg) => {\n      try {\n        const seen = new WeakSet()\n        return JSON.parse(\n          JSON.stringify(arg, (_, v) => {\n            if (v instanceof Error) {\n              return {\n                name: v.name,\n                message: v.message,\n                stack: v.stack\n              }\n            }\n            // Handle circular references\n            if (typeof v === 'object' && v !== null) {\n              if (seen.has(v)) {\n                return '[Circular Reference]'\n              }\n              seen.add(v)\n            }\n            return v\n          })\n        )\n      } catch (e) {\n        return `[captureLogs failed to stringify argument of type '${typeof arg}'. Err: ${e.message}]`\n      }\n    })\n  }\n  logger.entries.add(entry)\n  // To avoid infinite loop because we log all selector calls, we run sbp calls\n  // here in a roundabout way by getting the function to which they're mapped.\n  // The reason this works is because the entire `sbp` domain is blacklisted\n  // from being logged in main.js.\n  sbp('sbp/selectors/fn', 'okTurtles.events/emit')(CAPTURED_LOGS, entry)\n}\n", "// \n\n'use strict'\n\n// =======================\n// Domain: Data persistence\n// =======================\n\nimport sbp from '@sbp/sbp'\n\nconst _store = new Map()\n\nexport default (sbp('sbp/selectors/register', {\n  'okTurtles.data/get': function (key) {\n    return _store.get(key)\n  },\n  'okTurtles.data/set': function (key, data) {\n    _store.set(key, data)\n    return data\n  },\n  'okTurtles.data/delete': function (key) {\n    return _store.delete(key)\n  },\n  'okTurtles.data/add': function (key, data) {\n    const array = _store.get(key)\n    if (array) {\n      array.push(data)\n    } else {\n      _store.set(key, [data])\n    }\n  },\n  'okTurtles.data/remove': function (key, data) {\n    const array = _store.get(key)\n    if (array) {\n      const aLen = array.length\n      const filtered = array.filter(v => v !== data)\n      _store.set(key, filtered)\n      return aLen - filtered.length\n    }\n  },\n  'okTurtles.data/apply': function (key, fn) {\n    return fn(_store.get(key))\n  }\n}))\n", "// =======================\n// Domain: Event publish/subscribe\n// =======================\nimport sbp from '@sbp/sbp';\nimport '@sbp/okturtles.data';\nconst listenKey = (evt) => `events/${evt}/listeners`;\nexport default sbp('sbp/selectors/register', {\n    'okTurtles.events/_init': function () {\n        this.errorHandler = (event, e) => {\n            console.error(`[okTurtles.events] Error at handler for ${event}`, e);\n        };\n    },\n    'okTurtles.events/on': function (event, handler) {\n        sbp('okTurtles.data/add', listenKey(event), handler);\n        return () => sbp('okTurtles.events/off', event, handler);\n    },\n    'okTurtles.events/once': function (event, handler) {\n        const cbWithOff = (...args) => {\n            handler(...args);\n            sbp('okTurtles.events/off', event, cbWithOff);\n        };\n        return sbp('okTurtles.events/on', event, cbWithOff);\n    },\n    'okTurtles.events/emit': function (event, ...data) {\n        var _a;\n        for (const listener of sbp('okTurtles.data/get', listenKey(event)) || []) {\n            try {\n                listener(...data);\n            }\n            catch (e) {\n                (_a = this.errorHandler) === null || _a === void 0 ? void 0 : _a.call(this, event, e);\n            }\n        }\n    },\n    // almost identical to Vue.prototype.$off, except we require `event` argument\n    'okTurtles.events/off': function (event, handler) {\n        if (handler) {\n            sbp('okTurtles.data/remove', listenKey(event), handler);\n        }\n        else {\n            sbp('okTurtles.data/delete', listenKey(event));\n        }\n    },\n    'okTurtles.events/setErrorHandler': function (errorHandler) {\n        this.errorHandler = errorHandler;\n    }\n});\n", "import sbp from '@sbp/sbp'\nimport '@sbp/okturtles.events'\nimport { CAPTURED_LOGS } from '~/frontend/utils/events.js'\n\nexport default (console        )           => {\n  // only log to server if we're in development mode and connected over the\n  // tunnel (which creates URLs that begin with 'https://gi' per Gruntfile.js)\n  if (process.env.NODE_ENV !== 'development' || !self.location.href.startsWith('https://gi')) return\n\n  sbp('okTurtles.events/on', CAPTURED_LOGS, ({ level, msg: stringifyMe }) => {\n    if (level === 'debug') return // comment out to send much more log info\n    const value = JSON.stringify(stringifyMe)\n    // To avoid infinite loop because we log all selector calls, we run sbp calls\n    // here in a roundabout way by getting the function to which they're mapped.\n    // The reason this works is because the entire `sbp` domain is blacklisted\n    // from being logged.\n    const apiUrl = sbp('sbp/selectors/fn', 'okTurtles.data/get')('API_URL')\n    fetch(`${apiUrl}/log`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({ level, value })\n    }).catch(e => {\n      console.error(`[captureLogs] '${e.message}' attempting to log [${level}] to server:`, value)\n    })\n  })\n}\n", "import sbp from '@sbp/sbp'\nimport { SET_APP_LOGS_FILTER } from '~/frontend/utils/events.js'\nimport { MAX_LOG_ENTRIES } from '~/frontend/utils/constants.js'\nimport { createLogger } from './logger.js'\nimport logServer from './logServer.js'\n\n/*\n  - giConsole/[username]/entries - the stored log entries.\n  - giConsole/[username]/config - the logger config used.\n*/\n\nconst config = {\n  maxEntries: MAX_LOG_ENTRIES,\n  source: 'browser'\n}\nconst originalConsole = self.console\n\n// These are initialized in `captureLogsStart()`.\nlet logger         = null\nlet identityContractID         = ''\n\n// A default storage backend using `sessionStorage`.\nconst getItem = (key        )          => sessionStorage.getItem(`giConsole/${identityContractID}/${key}`)\nconst removeItem = (key        )       => sessionStorage.removeItem(`giConsole/${identityContractID}/${key}`)\nconst setItem = (key        , value     )       => {\n  sessionStorage.setItem(`giConsole/${identityContractID}/${key}`, typeof value === 'string' ? value : JSON.stringify(value))\n}\n\nasync function captureLogsStart (userLogged        ) {\n  identityContractID = userLogged\n\n  logger = await createLogger(config, { getItem, removeItem, setItem })\n\n  // Save the new config.\n  setItem('config', config)\n\n  logger.setAppLogsFilter(sbp('state/vuex/state').settings?.appLogsFilter ?? [])\n\n  // Subscribe to `appLogsFilter` changes.\n  sbp('okTurtles.events/on', SET_APP_LOGS_FILTER, logger.setAppLogsFilter)\n\n  // Overwrite the original console.\n  self.console = logger.console\n\n  // Set a new visit or session - useful to understand logs through time.\n  // NEW_SESSION -> The user opened a new browser or tab.\n  // NEW_VISIT -> The user comes from an ongoing session (refresh or login).\n  const isNewSession = !sessionStorage.getItem('NEW_SESSION')\n  if (isNewSession) { sessionStorage.setItem('NEW_SESSION', '1') }\n  originalConsole.log(isNewSession ? 'NEW_SESSION' : 'NEW_VISIT', 'Starting to capture logs of type:', logger.appLogsFilter)\n}\n\nasync function captureLogsPause ({ wipeOut }                      )                {\n  if (wipeOut) { await clearLogs() }\n  sbp('okTurtles.events/off', SET_APP_LOGS_FILTER)\n  console.log('captureLogs paused')\n  // Restore original console behavior.\n  self.console = originalConsole\n}\n\nasync function clearLogs () {\n  await logger?.clear()\n}\n\n// The reason to use the 'visibilitychange' event over the 'beforeunload' event\n// is that the latter is unreliable on mobile. For example, if a tab is set to\n// the background and then closed, the 'beforeunload' event may never be fired.\n// Furthermore, 'beforeunload' has implications for how the 'bfcache' works.\n// See <https://web.dev/articles/bfcache>. 'bfcache' or 'Back/forward cache' is\n// what enables instant navigation using the browser back and forward buttons.\nwindow.addEventListener('visibilitychange', event => sbp('appLogs/save').catch(e => {\n  console.error('Error saving logs during visibilitychange event handler', e)\n}))\n\n// Enable logging to the server\nlogServer(originalConsole)\n\nexport default (sbp('sbp/selectors/register', {\n  'appLogs/get' () { return logger?.entries.toArray() ?? [] },\n  async 'appLogs/save' () { await logger?.save() },\n  'appLogs/pauseCapture': captureLogsPause,\n  'appLogs/startCapture': captureLogsStart,\n  async 'appLogs/clearLogs' (userID) {\n    const savedID = identityContractID\n    identityContractID = userID\n    try { await clearLogs() } catch {}\n    identityContractID = savedID\n  }\n})          )\n", "// =======================\n// Domain: Serial Event Queue\n//\n// Use this to ensure asynchronous SBP invocations get invoked serially,\n// one after another, waiting for the previous invocation to finish completely.\n// =======================\nimport sbp from '@sbp/sbp';\nconst isEventQueueSbpEvent = (e) => {\n    return Object.prototype.hasOwnProperty.call(e, 'sbpInvocation');\n};\nexport default sbp('sbp/selectors/register', {\n    'okTurtles.eventQueue/_init': function () {\n        this.eventQueues = Object.create(null);\n    },\n    'okTurtles.eventQueue/isWaiting': function (name) {\n        var _a;\n        return !!((_a = this.eventQueues[name]) === null || _a === void 0 ? void 0 : _a.length);\n    },\n    'okTurtles.eventQueue/queuedInvocations': function (name) {\n        var _a, _b;\n        if (name == null) {\n            return Object.fromEntries(Object.entries(this.eventQueues).map(([name, events]) => [name, events.map((event) => {\n                    if (isEventQueueSbpEvent(event)) {\n                        return event.sbpInvocation;\n                    }\n                    else {\n                        return event.fn;\n                    }\n                })]));\n        }\n        return (_b = (_a = this.eventQueues[name]) === null || _a === void 0 ? void 0 : _a.map((event) => {\n            if (isEventQueueSbpEvent(event)) {\n                return event.sbpInvocation;\n            }\n            else {\n                return event.fn;\n            }\n        })) !== null && _b !== void 0 ? _b : [];\n    },\n    'okTurtles.eventQueue/queueEvent': async function (name, invocation) {\n        if (!Object.prototype.hasOwnProperty.call(this.eventQueues, name)) {\n            this.eventQueues[name] = [];\n        }\n        const events = this.eventQueues[name];\n        let accept;\n        const promise = new Promise((resolve) => { accept = resolve; });\n        const thisEvent = typeof invocation === 'function'\n            ? {\n                fn: invocation,\n                promise\n            }\n            : {\n                sbpInvocation: invocation,\n                promise\n            };\n        events.push(thisEvent);\n        while (events.length > 0) {\n            const event = events[0];\n            if (event === thisEvent) {\n                try {\n                    if (typeof invocation === 'function') {\n                        return await invocation();\n                    }\n                    else {\n                        return await sbp(...invocation);\n                    }\n                }\n                finally {\n                    // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n                    // @ts-ignore\n                    accept();\n                    events.shift();\n                }\n            }\n            else {\n                // wait for invocation to finish\n                await event.promise;\n            }\n        }\n    }\n});\n", "'use strict'\n\n// import SBP stuff before anything else so that domains register themselves before called\nimport { L, LError } from '@common/common.js'\nimport '@model/captureLogs.js'\nimport { setupNativeNotificationsListeners } from '@model/notifications/nativeNotification.js'\nimport '@sbp/okturtles.data'\nimport '@sbp/okturtles.eventqueue'\nimport '@sbp/okturtles.events'\nimport sbp from '@sbp/sbp'\nimport ALLOWED_URLS from '@view-utils/allowedUrls.js'\nimport IdleVue from 'idle-vue'\nimport { mapGetters, mapMutations, mapState } from 'vuex'\nimport 'wicg-inert'\nimport { CONTRACT_IS_SYNCING } from '@chelonia/lib/events'\nimport '@chelonia/lib/local-selectors'\nimport { KV_KEYS } from './utils/constants.js'\n// import '@chelonia/lib/persistent-actions' // Commented out as persistentActions are not being used\nimport './controller/app/index.js'\nimport './controller/backend.js'\nimport './controller/namespace.js'\nimport router from './controller/router.js'\nimport './controller/service-worker.js'\nimport { SETTING_CURRENT_USER } from './model/database.js'\nimport store from './model/state.js'\nimport { KV_EVENT, LOGIN_COMPLETE, LOGIN_ERROR, LOGOUT, NAMESPACE_REGISTRATION, CONTRACT_SYNCS_RESET, OFFLINE, ONLINE, OPEN_MODAL, RECONNECTING, RECONNECTION_FAILED, SERIOUS_ERROR, SWITCH_GROUP, THEME_CHANGE } from './utils/events.js'\nimport AppStyles from './views/components/AppStyles.vue'\nimport BannerGeneral from './views/components/banners/BannerGeneral.vue'\nimport Modal from './views/components/modal/Modal.vue'\nimport BackgroundSounds from './views/components/sounds/Background.vue'\nimport Navigation from './views/containers/navigation/Navigation.vue'\nimport './views/utils/avatar.js'\nimport './views/utils/i18n.js'\nimport './views/utils/ui.js'\nimport './views/utils/vError.js'\nimport './views/utils/vFocus.js'\n// import './views/utils/vSafeHtml.js' // this gets imported by translations, which is part of common.js\nimport hasAllRequiredFeatures from '@model/featureCheck.js'\nimport Vue from 'vue'\nimport notificationsMixin from './model/notifications/mainNotificationsMixin.js'\nimport './model/notifications/periodicNotifications.js'\nimport FaviconBadge from './utils/faviconBadge.js'\nimport './utils/init-vue-plugins.js'\nimport { showNavMixin } from './views/utils/misc.js'\nimport './views/utils/vStyle.js'\n\nconsole.info('GI_VERSION:', process.env.GI_VERSION)\nconsole.info('GI_GIT_VERSION:', process.env.GI_GIT_VERSION)\nconsole.info('CONTRACTS_VERSION:', process.env.CONTRACTS_VERSION)\nconsole.info('LIGHTWEIGHT_CLIENT:', process.env.LIGHTWEIGHT_CLIENT)\nconsole.info('NODE_ENV:', process.env.NODE_ENV)\n\n// this needs to be done early so that any code that depends on it\n// (like translations stuff) doesn't break.\nsbp('okTurtles.data/set', 'API_URL', self.location.origin)\n\nif (process.env.CI) {\n  const originalFetch = self.fetch\n  self.fetch = (...args) => {\n    return originalFetch.apply(self, args).catch(e => {\n      console.error('FETCH FAILED', args, new Error().stack, e)\n      throw e\n    })\n  }\n}\n\nVue.config.errorHandler = function (err, vm, info) {\n  console.error(`uncaught Vue error in ${info}:`, err)\n  // Fix for https://github.com/okTurtles/group-income/issues/684\n  if (process.env.CI) throw err\n}\n\nasync function startApp () {\n  // NOTE: we setup this global SBP filter and domain regs here\n  //       to get logging for all subsequent SBP calls.\n  //       In the future we might move it elsewhere.\n  // ?debug=true\n  // force debug output even in production\n  const debugParam = new URLSearchParams(window.location.search).get('debug')\n  if (process.env.NODE_ENV !== 'production' || debugParam === 'true') {\n    const reducer = (o, v) => { o[v] = true; return o }\n    // Domains for which debug logging won't be enabled.\n    const domainBlacklist = [\n      'sbp',\n      'okTurtles.data'\n    ].reduce(reducer, {})\n    // Selectors for which debug logging won't be enabled.\n    const selectorBlacklist = [\n      'chelonia.db/get',\n      'chelonia.db/set',\n      'chelonia/rootState',\n      'chelonia/haveSecretKey',\n      'chelonia/private/enqueuePostSyncOps',\n      'chelonia/private/invoke',\n      'state/vuex/state',\n      'state/vuex/getters',\n      'state/vuex/settings',\n      'gi.db/settings/save'\n    ].reduce(reducer, {})\n    sbp('sbp/filters/global/add', (domain, selector, data) => {\n      if (domainBlacklist[domain] || selectorBlacklist[selector]) return\n      console.debug(`[sbp] ${selector}`, data)\n    })\n    // Re-enable debug logging for 'gi.db/settings/save', but won't log the saved data.\n    sbp('sbp/filters/selector/add', 'gi.db/settings/save', (domain, selector, data) => {\n      console.debug(\"[sbp] 'gi.db/settings/save'\", data[0])\n    })\n  }\n\n  // Set up event listeners to keep local (Vuex) and Chelonia states in sync\n  sbp('chelonia/externalStateSetup', { stateSelector: 'state/vuex/state', reactiveSet: Vue.set, reactiveDel: Vue.delete })\n\n  // [SW] The following is be needed to keep namespace registrations in sync\n  // between the SW and each tab. It is not needed if everything is running in\n  // the same context\n  sbp('okTurtles.events/on', NAMESPACE_REGISTRATION, ({ name, value, deletedValue }) => {\n    const cache = sbp('state/vuex/state').namespaceLookups\n    const reverseCache = sbp('state/vuex/state').reverseNamespaceLookups\n    if (deletedValue) {\n      Vue.delete(cache, name)\n      if (reverseCache[deletedValue] === name) {\n        Vue.delete(reverseCache, deletedValue)\n      }\n    } else {\n      Vue.set(cache, name, value)\n      Vue.set(reverseCache, value, name)\n    }\n  })\n\n  sbp('okTurtles.events/on', SERIOUS_ERROR, (error, { contractID }) => {\n    console.error('Serious error', contractID, error)\n    sbp('gi.ui/seriousErrorBanner', error)\n    if (error?.name === 'ChelErrorForkedChain') {\n      const rootState = sbp('state/vuex/state')\n      if (!rootState.contracts[contractID]) {\n        // If `rootState.contracts[contractID]` doesn't exist, it means we're no\n        // longer subscribed to the contract. This could happen, e.g., if the\n        // contract has since been released. In any case, the absence of\n        // `rootState.contracts[contractID]` means that there's nothing to\n        // left to recover.\n        console.error('Forked chain detected. However, there is no contract entry.', { contractID }, error)\n        return\n      }\n      const type = rootState.contracts[contractID].type || '(unknown)'\n      console.error('Forked chain detected', { contractID, type }, error)\n\n      const retry = confirm(L(\"The server's history for '{type}' has diverged from ours. This can happen in extremely rare circumstances due to either malicious activity or a bug.\\n\\nTo fix this, the contract needs to be resynced, and some recent events may be missing. Would you like to do so now?\\n\\n(If problems persist, please open the Troubleshooting page under the User Settings and resync all contracts.)\", { type }))\n\n      if (retry) {\n        sbp('gi.ui/clearBanner')\n        // If it's our identity contract, we need to log in again to be able\n        // to propery decrypt all data, since that requires the user password\n        ;((rootState.loggedIn?.identityContractID === contractID)\n          ? sbp('gi.actions/identity/logout', null, true)\n          : sbp('chelonia/contract/sync', contractID, { resync: true }))\n          .catch((e) => {\n            console.error('Error during re-sync', contractID, e)\n            alert(L('There was a problem resyncing the contract: {errMsg}\\n\\nPlease see the Application Logs under User Settings for more details. The Troubleshooting page in User Settings may be another way to fix the problem.', { errMsg: e?.message || e }))\n          })\n      }\n    }\n    if (process.env.CI) {\n      Promise.reject(error)\n    }\n  })\n\n  // NOTE: setting 'EXPOSE_SBP' in production will make it easier for users to generate contract\n  //       actions that they shouldn't be generating, which can lead to bugs or trigger the automated\n  //       ban system. Only enable it if you know what you're doing and don't mind the risk.\n  // IMPORTANT: setting 'window.sbp' must come *after* 'chelonia/configure' so that the Cypress\n  //            tests don't attempt to use the contracts before they're ready!\n  if (process.env.NODE_ENV === 'development' || window.Cypress || process.env.EXPOSE_SBP === 'true' || debugParam) {\n    // In development mode this makes the SBP API available in the devtools console.\n    window.sbp = sbp\n  }\n\n  // this is definitely very hacky, but we put it here since two events\n  // (CONTRACT_IS_SYNCING)\n  // can be called before the main App component is loaded (just after we call login)\n  // and we don't yet have access to the component's 'this'\n  const initialSyncs = { ephemeral: { debouncedSyncBanner () {}, syncs: [] } }\n  const syncFn = function (contractID, isSyncing) {\n    // Make it possible for Cypress to wait for contracts to finish syncing.\n    if (isSyncing) {\n      this.ephemeral.syncs.push(contractID)\n      this.ephemeral.debouncedSyncBanner()\n    } else if (this.ephemeral.syncs.includes(contractID)) {\n      this.ephemeral.syncs = this.ephemeral.syncs.filter(id => id !== contractID)\n    }\n  }\n\n  const initialSyncFn = syncFn.bind(initialSyncs)\n  try {\n    await sbp('translations/init', navigator.language)\n  } catch (e) {\n    const errMsg = `Fatal error while initializing Group Income: ${e.name} - ${e.message}\\n\\nPlease report this bug here: ${ALLOWED_URLS.ISSUE_PAGE}`\n    console.error(errMsg, e)\n    alert(errMsg)\n    return\n  }\n\n  // register service-worker\n  hasAllRequiredFeatures && await Promise.race(\n    [sbp('service-worker/setup'),\n      new Promise((resolve, reject) => {\n        setTimeout(() => {\n          reject(new Error('Timed out setting up service worker'))\n        }, 8e3)\n      })]\n  ).catch(e => {\n    console.error('[main] Error setting up service worker', e)\n    alert(L('Error while setting up service worker: {err}', { err: e.message }))\n    window.location.reload() // try again, sometimes it fixes it\n    throw e\n  })\n\n  /* eslint-disable no-new */\n  new Vue({\n    router: router,\n    mixins: [notificationsMixin, showNavMixin],\n    components: {\n      AppStyles,\n      BackgroundSounds,\n      BannerGeneral,\n      Navigation,\n      Modal\n    },\n    data () {\n      return {\n        ephemeral: {\n          syncs: [],\n          // TODO/REVIEW page can load with already loggedin. -> this.$store.state.loggedIn ? 'yes' : 'no'\n          finishedLogin: 'no',\n          debouncedSyncBanner: null,\n          isCorrupted: false, // TODO #761\n          ready: false\n        }\n      }\n    },\n    created () {\n      sbp('okTurtles.events/on', CONTRACT_SYNCS_RESET, (currentSyncs) => {\n        this.ephemeral.syncs = currentSyncs\n      })\n    },\n    mounted () {\n      let oldIdentityContractID = null // lets us know if there's a previously logged in user\n      const reducedMotionQuery = window.matchMedia('(prefers-reduced-motion: reduce)') || {}\n      if (reducedMotionQuery.matches || this.isInCypress) {\n        this.setReducedMotion(true)\n      }\n      const { bannerGeneral } = this.$refs\n      sbp('okTurtles.data/set', 'BANNER', bannerGeneral) // make it globally accessible\n      if (!hasAllRequiredFeatures) {\n        this.removeLoadingAnimation()\n        sbp('gi.ui/prompt', {\n          heading: L('Unsupported browser'),\n          question: L(\"This browser doesn't support all features required to use Group Income. Please try a different browser.\")\n        })\n        return\n      }\n      // display a self-clearing banner that shows up after we've taken 2 or more seconds\n      // to sync a contract.\n      this.ephemeral.debouncedSyncBanner = bannerGeneral.debouncedShow({\n        // we can't actually show in the global banner what contract is syncing because doing\n        // so would involve having to repeatedly call the message() function, and if there\n        // were other danger banners that needed to take precedence they would get covered\n        message: () => L('Loading events from server...'),\n        icon: 'wifi',\n        seconds: 2,\n        clearWhen: () => !this.ephemeral.syncs.length\n      })\n      this.ephemeral.syncs = initialSyncs.ephemeral.syncs\n      if (this.ephemeral.syncs.length) {\n        this.ephemeral.debouncedSyncBanner()\n      }\n      sbp('okTurtles.events/off', CONTRACT_IS_SYNCING, initialSyncFn)\n      sbp('okTurtles.events/on', CONTRACT_IS_SYNCING, syncFn.bind(this))\n      sbp('okTurtles.events/on', LOGIN_COMPLETE, () => {\n        setupNativeNotificationsListeners()\n\n        const state = sbp('state/vuex/state')\n        if (!state.loggedIn) {\n          console.warn('Received LOGIN_COMPLETE event but there state.loggedIn is not an object')\n          return\n        }\n        this.ephemeral.finishedLogin = 'yes'\n\n        if (this.$store.state.currentGroupId) {\n          this.initOrResetPeriodicNotifications()\n          this.checkAndEmitOneTimeNotifications()\n        }\n        // NOTE: should set IdleVue plugin here because state could be replaced while logging in\n        Vue.use(IdleVue, { store, idleTime: 2 * 60 * 1000 }) // 2 mins of idle config\n      })\n\n      // The following are event handlers that affect the root application state.\n      // These event handlers should be as simple as possible and put here as a\n      // last resort. Event handlers that don't need access to anything defined\n      // in this context should be placed in a more appropriate location that is\n      // closer semantically to the event (for example, things related to user\n      // sessions should go into `app/identity.js` or be an import there).\n      sbp('okTurtles.events/on', LOGOUT, () => {\n        const state = sbp('state/vuex/state')\n        if (!state.loggedIn) return\n        this.ephemeral.finishedLogin = 'no'\n        // Stop timers related to periodic notifications or persistent actions.\n        sbp('gi.periodicNotifications/clearStatesAndStopTimers')\n        sbp('gi.db/settings/delete', state.loggedIn.identityContractID).catch(e => {\n          console.error('Logout event: error deleting settings')\n        })\n        sbp('state/vuex/reset')\n        router.currentRoute.path !== '/' && router.push({ path: '/' }).catch(console.error)\n      })\n      sbp('okTurtles.events/once', LOGIN_ERROR, () => {\n        // Remove the loading animation that sits on top of the Vue app, so that\n        // users can properly interact with the app for a follow-up action.\n        this.removeLoadingAnimation()\n      })\n      sbp('okTurtles.events/on', SWITCH_GROUP, ({ contractID, isNewlyCreated }) => {\n        this.initOrResetPeriodicNotifications()\n        this.checkAndEmitOneTimeNotifications()\n      })\n      sbp('okTurtles.events/on', ONLINE, () => {\n        const state = sbp('state/vuex/state')\n        if (state.loggedIn) {\n          sbp('service-worker/setup-push-subscription').catch(e => {\n            console.error('came back online, tried to report push subscription, but got:', e)\n          })\n        }\n        sbp('gi.ui/clearBanner')\n      })\n      sbp('okTurtles.events/on', OFFLINE, () => {\n        sbp('gi.ui/showBanner', L('Your device appears to be offline.'), 'wifi')\n      })\n      sbp('okTurtles.events/on', RECONNECTING, () => {\n        sbp('gi.ui/showBanner', L('Trying to reconnect...'), 'wifi')\n      })\n      sbp('okTurtles.events/on', RECONNECTION_FAILED, () => {\n        sbp('gi.ui/showBanner', L('We could not connect to the server. Please refresh the page.'), 'wifi')\n      })\n      sbp('okTurtles.events/on', KV_EVENT, ({ contractID, key, data }) => {\n        switch (key) {\n          case KV_KEYS.LAST_LOGGED_IN: {\n            sbp('state/vuex/commit', 'setLastLoggedIn', [contractID, data])\n            break\n          }\n          case KV_KEYS.UNREAD_MESSAGES:\n            sbp('state/vuex/commit', 'setUnreadMessages', data)\n            break\n          case KV_KEYS.PREFERENCES:\n            sbp('state/vuex/commit', 'setPreferences', data)\n            break\n          case KV_KEYS.NOTIFICATIONS:\n            sbp('state/vuex/commit', 'setNotificationStatus', data)\n            break\n        }\n      })\n\n      // Useful in case the app is started in offline mode.\n      if (navigator.onLine === false) {\n        sbp('okTurtles.events/emit', OFFLINE)\n      }\n      if (this.ephemeral.isCorrupted) {\n        sbp('gi.ui/dangerBanner',\n          L('Your app seems to be corrupted. Please {a_}re-sync your app data.{_a}', {\n            'a_': `<a class=\"link\" href=\"${window.location.pathname}?modal=UserSettingsModal&tab=troubleshooting\">`,\n            '_a': '</a>'\n          }),\n          'times-circle'\n        )\n      }\n\n      sbp('okTurtles.events/emit', THEME_CHANGE, this.$store.state.settings.themeColor)\n      this.setBadgeOnTab()\n\n      // Now that the app is ready, we proceed to call /login (which will restore\n      // the user's session, if they are already logged in)\n      // Since this is asynchronous, we must check this.ephemeral.finishedLogin\n      // to ensure that we don't override user interactions that have already\n      // happened (an example where things can happen this quickly is in the\n      // tests).\n      ;(async () => {\n        try {\n          const identityContractID = await sbp('gi.db/settings/load', SETTING_CURRENT_USER)\n          oldIdentityContractID = identityContractID\n          if (identityContractID && this.ephemeral.finishedLogin !== 'yes') {\n            // Calling login could result in a prompt in case of an error; if the\n            // loading animation is visible, it'll hide the prompt. We remove it,\n            // so that it's possible to interact with the prompt.\n            const removeHandler = sbp('okTurtles.events/once', OPEN_MODAL, () => {\n              this.removeLoadingAnimation()\n            })\n            await sbp('gi.app/identity/login', { identityContractID })\n            removeHandler()\n            await sbp('chelonia/contract/wait', identityContractID)\n          }\n          this.ephemeral.ready = true\n          this.removeLoadingAnimation()\n        } catch (e) {\n          this.removeLoadingAnimation()\n          oldIdentityContractID && sbp('appLogs/clearLogs', oldIdentityContractID).catch(e => {\n            console.error('[main] Error clearing logs for old session', oldIdentityContractID, e)\n          }) // https://github.com/okTurtles/group-income/issues/2194\n          console.error(`[main] caught ${e?.name} while fetching settings or handling a login error: ${e?.message || e}`, e)\n          await sbp('gi.app/identity/logout')\n          await sbp('gi.ui/prompt', {\n            heading: L('Failed to login'),\n            question: L('Error details: {reportError}', LError(e)),\n            primaryButton: L('Close')\n          })\n        }\n      })()\n    },\n    computed: {\n      ...mapGetters(['groupsByName', 'ourUnreadMessages', 'totalUnreadNotificationCount']),\n      ...mapState(['contracts']),\n      ourUnreadMessagesCount () {\n        return Object.keys(this.ourUnreadMessages)\n          .map(cId => (this.ourUnreadMessages[cId].unreadMessages).length)\n          .reduce((a, b) => a + b, 0)\n      },\n      shouldSetBadge () {\n        return this.ourUnreadMessagesCount + this.totalUnreadNotificationCount > 0\n      },\n      appClasses () {\n        return {\n          'l-with-navigation': this.showNav,\n          'l-no-navigation': !this.showNav,\n          'js-reducedMotion': this.$store.state.settings.reducedMotion,\n          'is-dark-theme': this.$store.getters.isDarkTheme\n        }\n      },\n      isInCypress () {\n        return !!window.Cypress\n      }\n    },\n    methods: {\n      ...mapMutations([\n        'setReducedMotion'\n      ]),\n      setBadgeOnTab () {\n        FaviconBadge.setBubble(this.shouldSetBadge)\n      },\n      removeLoadingAnimation () {\n        // remove the minimal loading animation in index.html\n        const loadingScreenEl = document.querySelector('#main-loading-screen')\n        loadingScreenEl && loadingScreenEl.remove()\n      }\n    },\n    watch: {\n      shouldSetBadge (to, from) {\n        this.setBadgeOnTab()\n      }\n    },\n    store // make this and all child components aware of the new store\n  }).$mount('#app')\n}\n\nstartApp()\n", "var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * This work is licensed under the W3C Software and Document License\n * (http://www.w3.org/Consortium/Legal/2015/copyright-software-and-document).\n */\n\n(function () {\n  // Return early if we're not running inside of the browser.\n  if (typeof window === 'undefined') {\n    return;\n  }\n\n  // Convenience function for converting NodeLists.\n  /** @type {typeof Array.prototype.slice} */\n  var slice = Array.prototype.slice;\n\n  /**\n   * IE has a non-standard name for \"matches\".\n   * @type {typeof Element.prototype.matches}\n   */\n  var matches = Element.prototype.matches || Element.prototype.msMatchesSelector;\n\n  /** @type {string} */\n  var _focusableElementsString = ['a[href]', 'area[href]', 'input:not([disabled])', 'select:not([disabled])', 'textarea:not([disabled])', 'button:not([disabled])', 'details', 'summary', 'iframe', 'object', 'embed', '[contenteditable]'].join(',');\n\n  /**\n   * `InertRoot` manages a single inert subtree, i.e. a DOM subtree whose root element has an `inert`\n   * attribute.\n   *\n   * Its main functions are:\n   *\n   * - to create and maintain a set of managed `InertNode`s, including when mutations occur in the\n   *   subtree. The `makeSubtreeUnfocusable()` method handles collecting `InertNode`s via registering\n   *   each focusable node in the subtree with the singleton `InertManager` which manages all known\n   *   focusable nodes within inert subtrees. `InertManager` ensures that a single `InertNode`\n   *   instance exists for each focusable node which has at least one inert root as an ancestor.\n   *\n   * - to notify all managed `InertNode`s when this subtree stops being inert (i.e. when the `inert`\n   *   attribute is removed from the root node). This is handled in the destructor, which calls the\n   *   `deregister` method on `InertManager` for each managed inert node.\n   */\n\n  var InertRoot = function () {\n    /**\n     * @param {!Element} rootElement The Element at the root of the inert subtree.\n     * @param {!InertManager} inertManager The global singleton InertManager object.\n     */\n    function InertRoot(rootElement, inertManager) {\n      _classCallCheck(this, InertRoot);\n\n      /** @type {!InertManager} */\n      this._inertManager = inertManager;\n\n      /** @type {!Element} */\n      this._rootElement = rootElement;\n\n      /**\n       * @type {!Set<!InertNode>}\n       * All managed focusable nodes in this InertRoot's subtree.\n       */\n      this._managedNodes = new Set();\n\n      // Make the subtree hidden from assistive technology\n      if (this._rootElement.hasAttribute('aria-hidden')) {\n        /** @type {?string} */\n        this._savedAriaHidden = this._rootElement.getAttribute('aria-hidden');\n      } else {\n        this._savedAriaHidden = null;\n      }\n      this._rootElement.setAttribute('aria-hidden', 'true');\n\n      // Make all focusable elements in the subtree unfocusable and add them to _managedNodes\n      this._makeSubtreeUnfocusable(this._rootElement);\n\n      // Watch for:\n      // - any additions in the subtree: make them unfocusable too\n      // - any removals from the subtree: remove them from this inert root's managed nodes\n      // - attribute changes: if `tabindex` is added, or removed from an intrinsically focusable\n      //   element, make that node a managed node.\n      this._observer = new MutationObserver(this._onMutation.bind(this));\n      this._observer.observe(this._rootElement, { attributes: true, childList: true, subtree: true });\n    }\n\n    /**\n     * Call this whenever this object is about to become obsolete.  This unwinds all of the state\n     * stored in this object and updates the state of all of the managed nodes.\n     */\n\n\n    _createClass(InertRoot, [{\n      key: 'destructor',\n      value: function destructor() {\n        this._observer.disconnect();\n\n        if (this._rootElement) {\n          if (this._savedAriaHidden !== null) {\n            this._rootElement.setAttribute('aria-hidden', this._savedAriaHidden);\n          } else {\n            this._rootElement.removeAttribute('aria-hidden');\n          }\n        }\n\n        this._managedNodes.forEach(function (inertNode) {\n          this._unmanageNode(inertNode.node);\n        }, this);\n\n        // Note we cast the nulls to the ANY type here because:\n        // 1) We want the class properties to be declared as non-null, or else we\n        //    need even more casts throughout this code. All bets are off if an\n        //    instance has been destroyed and a method is called.\n        // 2) We don't want to cast \"this\", because we want type-aware optimizations\n        //    to know which properties we're setting.\n        this._observer = /** @type {?} */null;\n        this._rootElement = /** @type {?} */null;\n        this._managedNodes = /** @type {?} */null;\n        this._inertManager = /** @type {?} */null;\n      }\n\n      /**\n       * @return {!Set<!InertNode>} A copy of this InertRoot's managed nodes set.\n       */\n\n    }, {\n      key: '_makeSubtreeUnfocusable',\n\n\n      /**\n       * @param {!Node} startNode\n       */\n      value: function _makeSubtreeUnfocusable(startNode) {\n        var _this2 = this;\n\n        composedTreeWalk(startNode, function (node) {\n          return _this2._visitNode(node);\n        });\n\n        var activeElement = document.activeElement;\n\n        if (!document.body.contains(startNode)) {\n          // startNode may be in shadow DOM, so find its nearest shadowRoot to get the activeElement.\n          var node = startNode;\n          /** @type {!ShadowRoot|undefined} */\n          var root = undefined;\n          while (node) {\n            if (node.nodeType === Node.DOCUMENT_FRAGMENT_NODE) {\n              root = /** @type {!ShadowRoot} */node;\n              break;\n            }\n            node = node.parentNode;\n          }\n          if (root) {\n            activeElement = root.activeElement;\n          }\n        }\n        if (startNode.contains(activeElement)) {\n          activeElement.blur();\n          // In IE11, if an element is already focused, and then set to tabindex=-1\n          // calling blur() will not actually move the focus.\n          // To work around this we call focus() on the body instead.\n          if (activeElement === document.activeElement) {\n            document.body.focus();\n          }\n        }\n      }\n\n      /**\n       * @param {!Node} node\n       */\n\n    }, {\n      key: '_visitNode',\n      value: function _visitNode(node) {\n        if (node.nodeType !== Node.ELEMENT_NODE) {\n          return;\n        }\n        var element = /** @type {!Element} */node;\n\n        // If a descendant inert root becomes un-inert, its descendants will still be inert because of\n        // this inert root, so all of its managed nodes need to be adopted by this InertRoot.\n        if (element !== this._rootElement && element.hasAttribute('inert')) {\n          this._adoptInertRoot(element);\n        }\n\n        if (matches.call(element, _focusableElementsString) || element.hasAttribute('tabindex')) {\n          this._manageNode(element);\n        }\n      }\n\n      /**\n       * Register the given node with this InertRoot and with InertManager.\n       * @param {!Node} node\n       */\n\n    }, {\n      key: '_manageNode',\n      value: function _manageNode(node) {\n        var inertNode = this._inertManager.register(node, this);\n        this._managedNodes.add(inertNode);\n      }\n\n      /**\n       * Unregister the given node with this InertRoot and with InertManager.\n       * @param {!Node} node\n       */\n\n    }, {\n      key: '_unmanageNode',\n      value: function _unmanageNode(node) {\n        var inertNode = this._inertManager.deregister(node, this);\n        if (inertNode) {\n          this._managedNodes['delete'](inertNode);\n        }\n      }\n\n      /**\n       * Unregister the entire subtree starting at `startNode`.\n       * @param {!Node} startNode\n       */\n\n    }, {\n      key: '_unmanageSubtree',\n      value: function _unmanageSubtree(startNode) {\n        var _this3 = this;\n\n        composedTreeWalk(startNode, function (node) {\n          return _this3._unmanageNode(node);\n        });\n      }\n\n      /**\n       * If a descendant node is found with an `inert` attribute, adopt its managed nodes.\n       * @param {!Element} node\n       */\n\n    }, {\n      key: '_adoptInertRoot',\n      value: function _adoptInertRoot(node) {\n        var inertSubroot = this._inertManager.getInertRoot(node);\n\n        // During initialisation this inert root may not have been registered yet,\n        // so register it now if need be.\n        if (!inertSubroot) {\n          this._inertManager.setInert(node, true);\n          inertSubroot = this._inertManager.getInertRoot(node);\n        }\n\n        inertSubroot.managedNodes.forEach(function (savedInertNode) {\n          this._manageNode(savedInertNode.node);\n        }, this);\n      }\n\n      /**\n       * Callback used when mutation observer detects subtree additions, removals, or attribute changes.\n       * @param {!Array<!MutationRecord>} records\n       * @param {!MutationObserver} self\n       */\n\n    }, {\n      key: '_onMutation',\n      value: function _onMutation(records, self) {\n        records.forEach(function (record) {\n          var target = /** @type {!Element} */record.target;\n          if (record.type === 'childList') {\n            // Manage added nodes\n            slice.call(record.addedNodes).forEach(function (node) {\n              this._makeSubtreeUnfocusable(node);\n            }, this);\n\n            // Un-manage removed nodes\n            slice.call(record.removedNodes).forEach(function (node) {\n              this._unmanageSubtree(node);\n            }, this);\n          } else if (record.type === 'attributes') {\n            if (record.attributeName === 'tabindex') {\n              // Re-initialise inert node if tabindex changes\n              this._manageNode(target);\n            } else if (target !== this._rootElement && record.attributeName === 'inert' && target.hasAttribute('inert')) {\n              // If a new inert root is added, adopt its managed nodes and make sure it knows about the\n              // already managed nodes from this inert subroot.\n              this._adoptInertRoot(target);\n              var inertSubroot = this._inertManager.getInertRoot(target);\n              this._managedNodes.forEach(function (managedNode) {\n                if (target.contains(managedNode.node)) {\n                  inertSubroot._manageNode(managedNode.node);\n                }\n              });\n            }\n          }\n        }, this);\n      }\n    }, {\n      key: 'managedNodes',\n      get: function get() {\n        return new Set(this._managedNodes);\n      }\n\n      /** @return {boolean} */\n\n    }, {\n      key: 'hasSavedAriaHidden',\n      get: function get() {\n        return this._savedAriaHidden !== null;\n      }\n\n      /** @param {?string} ariaHidden */\n\n    }, {\n      key: 'savedAriaHidden',\n      set: function set(ariaHidden) {\n        this._savedAriaHidden = ariaHidden;\n      }\n\n      /** @return {?string} */\n      ,\n      get: function get() {\n        return this._savedAriaHidden;\n      }\n    }]);\n\n    return InertRoot;\n  }();\n\n  /**\n   * `InertNode` initialises and manages a single inert node.\n   * A node is inert if it is a descendant of one or more inert root elements.\n   *\n   * On construction, `InertNode` saves the existing `tabindex` value for the node, if any, and\n   * either removes the `tabindex` attribute or sets it to `-1`, depending on whether the element\n   * is intrinsically focusable or not.\n   *\n   * `InertNode` maintains a set of `InertRoot`s which are descendants of this `InertNode`. When an\n   * `InertRoot` is destroyed, and calls `InertManager.deregister()`, the `InertManager` notifies the\n   * `InertNode` via `removeInertRoot()`, which in turn destroys the `InertNode` if no `InertRoot`s\n   * remain in the set. On destruction, `InertNode` reinstates the stored `tabindex` if one exists,\n   * or removes the `tabindex` attribute if the element is intrinsically focusable.\n   */\n\n\n  var InertNode = function () {\n    /**\n     * @param {!Node} node A focusable element to be made inert.\n     * @param {!InertRoot} inertRoot The inert root element associated with this inert node.\n     */\n    function InertNode(node, inertRoot) {\n      _classCallCheck(this, InertNode);\n\n      /** @type {!Node} */\n      this._node = node;\n\n      /** @type {boolean} */\n      this._overrodeFocusMethod = false;\n\n      /**\n       * @type {!Set<!InertRoot>} The set of descendant inert roots.\n       *    If and only if this set becomes empty, this node is no longer inert.\n       */\n      this._inertRoots = new Set([inertRoot]);\n\n      /** @type {?number} */\n      this._savedTabIndex = null;\n\n      /** @type {boolean} */\n      this._destroyed = false;\n\n      // Save any prior tabindex info and make this node untabbable\n      this.ensureUntabbable();\n    }\n\n    /**\n     * Call this whenever this object is about to become obsolete.\n     * This makes the managed node focusable again and deletes all of the previously stored state.\n     */\n\n\n    _createClass(InertNode, [{\n      key: 'destructor',\n      value: function destructor() {\n        this._throwIfDestroyed();\n\n        if (this._node && this._node.nodeType === Node.ELEMENT_NODE) {\n          var element = /** @type {!Element} */this._node;\n          if (this._savedTabIndex !== null) {\n            element.setAttribute('tabindex', this._savedTabIndex);\n          } else {\n            element.removeAttribute('tabindex');\n          }\n\n          // Use `delete` to restore native focus method.\n          if (this._overrodeFocusMethod) {\n            delete element.focus;\n          }\n        }\n\n        // See note in InertRoot.destructor for why we cast these nulls to ANY.\n        this._node = /** @type {?} */null;\n        this._inertRoots = /** @type {?} */null;\n        this._destroyed = true;\n      }\n\n      /**\n       * @type {boolean} Whether this object is obsolete because the managed node is no longer inert.\n       * If the object has been destroyed, any attempt to access it will cause an exception.\n       */\n\n    }, {\n      key: '_throwIfDestroyed',\n\n\n      /**\n       * Throw if user tries to access destroyed InertNode.\n       */\n      value: function _throwIfDestroyed() {\n        if (this.destroyed) {\n          throw new Error('Trying to access destroyed InertNode');\n        }\n      }\n\n      /** @return {boolean} */\n\n    }, {\n      key: 'ensureUntabbable',\n\n\n      /** Save the existing tabindex value and make the node untabbable and unfocusable */\n      value: function ensureUntabbable() {\n        if (this.node.nodeType !== Node.ELEMENT_NODE) {\n          return;\n        }\n        var element = /** @type {!Element} */this.node;\n        if (matches.call(element, _focusableElementsString)) {\n          if ( /** @type {!HTMLElement} */element.tabIndex === -1 && this.hasSavedTabIndex) {\n            return;\n          }\n\n          if (element.hasAttribute('tabindex')) {\n            this._savedTabIndex = /** @type {!HTMLElement} */element.tabIndex;\n          }\n          element.setAttribute('tabindex', '-1');\n          if (element.nodeType === Node.ELEMENT_NODE) {\n            element.focus = function () {};\n            this._overrodeFocusMethod = true;\n          }\n        } else if (element.hasAttribute('tabindex')) {\n          this._savedTabIndex = /** @type {!HTMLElement} */element.tabIndex;\n          element.removeAttribute('tabindex');\n        }\n      }\n\n      /**\n       * Add another inert root to this inert node's set of managing inert roots.\n       * @param {!InertRoot} inertRoot\n       */\n\n    }, {\n      key: 'addInertRoot',\n      value: function addInertRoot(inertRoot) {\n        this._throwIfDestroyed();\n        this._inertRoots.add(inertRoot);\n      }\n\n      /**\n       * Remove the given inert root from this inert node's set of managing inert roots.\n       * If the set of managing inert roots becomes empty, this node is no longer inert,\n       * so the object should be destroyed.\n       * @param {!InertRoot} inertRoot\n       */\n\n    }, {\n      key: 'removeInertRoot',\n      value: function removeInertRoot(inertRoot) {\n        this._throwIfDestroyed();\n        this._inertRoots['delete'](inertRoot);\n        if (this._inertRoots.size === 0) {\n          this.destructor();\n        }\n      }\n    }, {\n      key: 'destroyed',\n      get: function get() {\n        return (/** @type {!InertNode} */this._destroyed\n        );\n      }\n    }, {\n      key: 'hasSavedTabIndex',\n      get: function get() {\n        return this._savedTabIndex !== null;\n      }\n\n      /** @return {!Node} */\n\n    }, {\n      key: 'node',\n      get: function get() {\n        this._throwIfDestroyed();\n        return this._node;\n      }\n\n      /** @param {?number} tabIndex */\n\n    }, {\n      key: 'savedTabIndex',\n      set: function set(tabIndex) {\n        this._throwIfDestroyed();\n        this._savedTabIndex = tabIndex;\n      }\n\n      /** @return {?number} */\n      ,\n      get: function get() {\n        this._throwIfDestroyed();\n        return this._savedTabIndex;\n      }\n    }]);\n\n    return InertNode;\n  }();\n\n  /**\n   * InertManager is a per-document singleton object which manages all inert roots and nodes.\n   *\n   * When an element becomes an inert root by having an `inert` attribute set and/or its `inert`\n   * property set to `true`, the `setInert` method creates an `InertRoot` object for the element.\n   * The `InertRoot` in turn registers itself as managing all of the element's focusable descendant\n   * nodes via the `register()` method. The `InertManager` ensures that a single `InertNode` instance\n   * is created for each such node, via the `_managedNodes` map.\n   */\n\n\n  var InertManager = function () {\n    /**\n     * @param {!Document} document\n     */\n    function InertManager(document) {\n      _classCallCheck(this, InertManager);\n\n      if (!document) {\n        throw new Error('Missing required argument; InertManager needs to wrap a document.');\n      }\n\n      /** @type {!Document} */\n      this._document = document;\n\n      /**\n       * All managed nodes known to this InertManager. In a map to allow looking up by Node.\n       * @type {!Map<!Node, !InertNode>}\n       */\n      this._managedNodes = new Map();\n\n      /**\n       * All inert roots known to this InertManager. In a map to allow looking up by Node.\n       * @type {!Map<!Node, !InertRoot>}\n       */\n      this._inertRoots = new Map();\n\n      /**\n       * Observer for mutations on `document.body`.\n       * @type {!MutationObserver}\n       */\n      this._observer = new MutationObserver(this._watchForInert.bind(this));\n\n      // Add inert style.\n      addInertStyle(document.head || document.body || document.documentElement);\n\n      // Wait for document to be loaded.\n      if (document.readyState === 'loading') {\n        document.addEventListener('DOMContentLoaded', this._onDocumentLoaded.bind(this));\n      } else {\n        this._onDocumentLoaded();\n      }\n    }\n\n    /**\n     * Set whether the given element should be an inert root or not.\n     * @param {!Element} root\n     * @param {boolean} inert\n     */\n\n\n    _createClass(InertManager, [{\n      key: 'setInert',\n      value: function setInert(root, inert) {\n        if (inert) {\n          if (this._inertRoots.has(root)) {\n            // element is already inert\n            return;\n          }\n\n          var inertRoot = new InertRoot(root, this);\n          root.setAttribute('inert', '');\n          this._inertRoots.set(root, inertRoot);\n          // If not contained in the document, it must be in a shadowRoot.\n          // Ensure inert styles are added there.\n          if (!this._document.body.contains(root)) {\n            var parent = root.parentNode;\n            while (parent) {\n              if (parent.nodeType === 11) {\n                addInertStyle(parent);\n              }\n              parent = parent.parentNode;\n            }\n          }\n        } else {\n          if (!this._inertRoots.has(root)) {\n            // element is already non-inert\n            return;\n          }\n\n          var _inertRoot = this._inertRoots.get(root);\n          _inertRoot.destructor();\n          this._inertRoots['delete'](root);\n          root.removeAttribute('inert');\n        }\n      }\n\n      /**\n       * Get the InertRoot object corresponding to the given inert root element, if any.\n       * @param {!Node} element\n       * @return {!InertRoot|undefined}\n       */\n\n    }, {\n      key: 'getInertRoot',\n      value: function getInertRoot(element) {\n        return this._inertRoots.get(element);\n      }\n\n      /**\n       * Register the given InertRoot as managing the given node.\n       * In the case where the node has a previously existing inert root, this inert root will\n       * be added to its set of inert roots.\n       * @param {!Node} node\n       * @param {!InertRoot} inertRoot\n       * @return {!InertNode} inertNode\n       */\n\n    }, {\n      key: 'register',\n      value: function register(node, inertRoot) {\n        var inertNode = this._managedNodes.get(node);\n        if (inertNode !== undefined) {\n          // node was already in an inert subtree\n          inertNode.addInertRoot(inertRoot);\n        } else {\n          inertNode = new InertNode(node, inertRoot);\n        }\n\n        this._managedNodes.set(node, inertNode);\n\n        return inertNode;\n      }\n\n      /**\n       * De-register the given InertRoot as managing the given inert node.\n       * Removes the inert root from the InertNode's set of managing inert roots, and remove the inert\n       * node from the InertManager's set of managed nodes if it is destroyed.\n       * If the node is not currently managed, this is essentially a no-op.\n       * @param {!Node} node\n       * @param {!InertRoot} inertRoot\n       * @return {?InertNode} The potentially destroyed InertNode associated with this node, if any.\n       */\n\n    }, {\n      key: 'deregister',\n      value: function deregister(node, inertRoot) {\n        var inertNode = this._managedNodes.get(node);\n        if (!inertNode) {\n          return null;\n        }\n\n        inertNode.removeInertRoot(inertRoot);\n        if (inertNode.destroyed) {\n          this._managedNodes['delete'](node);\n        }\n\n        return inertNode;\n      }\n\n      /**\n       * Callback used when document has finished loading.\n       */\n\n    }, {\n      key: '_onDocumentLoaded',\n      value: function _onDocumentLoaded() {\n        // Find all inert roots in document and make them actually inert.\n        var inertElements = slice.call(this._document.querySelectorAll('[inert]'));\n        inertElements.forEach(function (inertElement) {\n          this.setInert(inertElement, true);\n        }, this);\n\n        // Comment this out to use programmatic API only.\n        this._observer.observe(this._document.body || this._document.documentElement, { attributes: true, subtree: true, childList: true });\n      }\n\n      /**\n       * Callback used when mutation observer detects attribute changes.\n       * @param {!Array<!MutationRecord>} records\n       * @param {!MutationObserver} self\n       */\n\n    }, {\n      key: '_watchForInert',\n      value: function _watchForInert(records, self) {\n        var _this = this;\n        records.forEach(function (record) {\n          switch (record.type) {\n            case 'childList':\n              slice.call(record.addedNodes).forEach(function (node) {\n                if (node.nodeType !== Node.ELEMENT_NODE) {\n                  return;\n                }\n                var inertElements = slice.call(node.querySelectorAll('[inert]'));\n                if (matches.call(node, '[inert]')) {\n                  inertElements.unshift(node);\n                }\n                inertElements.forEach(function (inertElement) {\n                  this.setInert(inertElement, true);\n                }, _this);\n              }, _this);\n              break;\n            case 'attributes':\n              if (record.attributeName !== 'inert') {\n                return;\n              }\n              var target = /** @type {!Element} */record.target;\n              var inert = target.hasAttribute('inert');\n              _this.setInert(target, inert);\n              break;\n          }\n        }, this);\n      }\n    }]);\n\n    return InertManager;\n  }();\n\n  /**\n   * Recursively walk the composed tree from |node|.\n   * @param {!Node} node\n   * @param {(function (!Element))=} callback Callback to be called for each element traversed,\n   *     before descending into child nodes.\n   * @param {?ShadowRoot=} shadowRootAncestor The nearest ShadowRoot ancestor, if any.\n   */\n\n\n  function composedTreeWalk(node, callback, shadowRootAncestor) {\n    if (node.nodeType == Node.ELEMENT_NODE) {\n      var element = /** @type {!Element} */node;\n      if (callback) {\n        callback(element);\n      }\n\n      // Descend into node:\n      // If it has a ShadowRoot, ignore all child elements - these will be picked\n      // up by the <content> or <shadow> elements. Descend straight into the\n      // ShadowRoot.\n      var shadowRoot = /** @type {!HTMLElement} */element.shadowRoot;\n      if (shadowRoot) {\n        composedTreeWalk(shadowRoot, callback, shadowRoot);\n        return;\n      }\n\n      // If it is a <content> element, descend into distributed elements - these\n      // are elements from outside the shadow root which are rendered inside the\n      // shadow DOM.\n      if (element.localName == 'content') {\n        var content = /** @type {!HTMLContentElement} */element;\n        // Verifies if ShadowDom v0 is supported.\n        var distributedNodes = content.getDistributedNodes ? content.getDistributedNodes() : [];\n        for (var i = 0; i < distributedNodes.length; i++) {\n          composedTreeWalk(distributedNodes[i], callback, shadowRootAncestor);\n        }\n        return;\n      }\n\n      // If it is a <slot> element, descend into assigned nodes - these\n      // are elements from outside the shadow root which are rendered inside the\n      // shadow DOM.\n      if (element.localName == 'slot') {\n        var slot = /** @type {!HTMLSlotElement} */element;\n        // Verify if ShadowDom v1 is supported.\n        var _distributedNodes = slot.assignedNodes ? slot.assignedNodes({ flatten: true }) : [];\n        for (var _i = 0; _i < _distributedNodes.length; _i++) {\n          composedTreeWalk(_distributedNodes[_i], callback, shadowRootAncestor);\n        }\n        return;\n      }\n    }\n\n    // If it is neither the parent of a ShadowRoot, a <content> element, a <slot>\n    // element, nor a <shadow> element recurse normally.\n    var child = node.firstChild;\n    while (child != null) {\n      composedTreeWalk(child, callback, shadowRootAncestor);\n      child = child.nextSibling;\n    }\n  }\n\n  /**\n   * Adds a style element to the node containing the inert specific styles\n   * @param {!Node} node\n   */\n  function addInertStyle(node) {\n    if (node.querySelector('style#inert-style, link#inert-style')) {\n      return;\n    }\n    var style = document.createElement('style');\n    style.setAttribute('id', 'inert-style');\n    style.textContent = '\\n' + '[inert] {\\n' + '  pointer-events: none;\\n' + '  cursor: default;\\n' + '}\\n' + '\\n' + '[inert], [inert] * {\\n' + '  -webkit-user-select: none;\\n' + '  -moz-user-select: none;\\n' + '  -ms-user-select: none;\\n' + '  user-select: none;\\n' + '}\\n';\n    node.appendChild(style);\n  }\n\n  /** @type {!InertManager} */\n  var inertManager = new InertManager(document);\n\n  if (!Element.prototype.hasOwnProperty('inert')) {\n    Object.defineProperty(Element.prototype, 'inert', {\n      enumerable: true,\n      /** @this {!Element} */\n      get: function get() {\n        return this.hasAttribute('inert');\n      },\n      /** @this {!Element} */\n      set: function set(inert) {\n        inertManager.setInert(this, inert);\n      }\n    });\n  }\n})();\n", "// This file provides utility functions that are local regardless of whether\n// Chelonia is running in a different context and calls are being forwarded\n// using `chelonia/*`\nimport sbp from '@sbp/sbp';\nimport { cloneDeep } from 'turtledash';\nimport { CONTRACTS_MODIFIED, CONTRACTS_MODIFIED_READY, EVENT_HANDLED, EVENT_HANDLED_READY } from '../events.mjs';\nexport default sbp('sbp/selectors/register', {\n    // This selector sets up event listeners on EVENT_HANDLED and CONTRACTS_MODIFIED\n    // to keep Chelonia state in sync with some external state (e.g., Vuex).\n    // This needs to be called from the context that owns this external state\n    // (e.g., the tab in which the app is running) and because 'full' Chelonia may\n    // be available in this context, we cannot use `chelonia/configure`.\n    // _If there is no external state to be kept in sync with Chelonia, this selector doesn't need to be called_\n    //\n    // For example, **if Chelonia is running on a service worker**, the following\n    // would be done.\n    // 1. The service worker calls `chelonia/configure` and forwards EVENT_HANDLED\n    //    and CONTRACTS_MODIFIED events to all clients (tabs)\n    //    Note: `chelonia/configure` is called by the context running Chelonia\n    // 2. Each tab uses `chelonia/*` to forward calls to Chelonia to the SW.\n    //    Note: Except selectors defined in this file\n    // 3. Each tab calls this selector once to set up event listeners on EVENT_HANDLED\n    //    and CONTRACTS_MODIFIED, which will keep each tab's state updated every\n    //    time Chelonia handles an event.\n    'chelonia/externalStateSetup': function ({ stateSelector, reactiveSet = Reflect.set.bind(Reflect), reactiveDel = Reflect.deleteProperty.bind(Reflect) }) {\n        this.stateSelector = stateSelector;\n        sbp('okTurtles.events/on', EVENT_HANDLED, (contractID, message) => {\n            // The purpose of putting things immediately into a queue is to have\n            // state mutations happen in a well-defined order. This is done for two\n            // purposes:\n            //   1. It avoids race conditions\n            //   2. It allows the app to use the EVENT_HANDLED queue to ensure that\n            //      the SW state has been copied over to the local state. This is\n            //      useful in the same sense that `chelonia/contract/wait` is useful\n            //      (i.e., set up a barrier / sync checkpoint).\n            sbp('okTurtles.eventQueue/queueEvent', EVENT_HANDLED, async () => {\n                const { contractState, cheloniaState } = await sbp('chelonia/contract/fullState', contractID);\n                const externalState = sbp(stateSelector);\n                if (cheloniaState) {\n                    if (!externalState.contracts) {\n                        reactiveSet(externalState, 'contracts', Object.create(null));\n                    }\n                    reactiveSet(externalState.contracts, contractID, cloneDeep(cheloniaState));\n                }\n                else if (externalState.contracts) {\n                    reactiveDel(externalState.contracts, contractID);\n                }\n                if (contractState) {\n                    reactiveSet(externalState, contractID, cloneDeep(contractState));\n                }\n                else {\n                    reactiveDel(externalState, contractID);\n                }\n                // This EVENT_HANDLED_READY event lets the current context (e.g., tab)\n                // know that an event has been processed _and_ committed to the state\n                // (as opposed to EVENT_HANDLED, which means the event was processed by\n                // _Chelonia_ but state changes may not be reflected in the current tab\n                // yet).\n                sbp('okTurtles.events/emit', EVENT_HANDLED_READY, contractID, message);\n            });\n        });\n        sbp('okTurtles.events/on', CONTRACTS_MODIFIED, (subscriptionSet, { added, removed, permanent }) => {\n            sbp('okTurtles.eventQueue/queueEvent', EVENT_HANDLED, async () => {\n                const states = added.length\n                    ? await sbp('chelonia/contract/fullState', added)\n                    : {};\n                const vuexState = sbp('state/vuex/state');\n                if (!vuexState.contracts) {\n                    reactiveSet(vuexState, 'contracts', Object.create(null));\n                }\n                removed.forEach((contractID) => {\n                    if (permanent) {\n                        reactiveSet(vuexState.contracts, contractID, null);\n                    }\n                    else {\n                        reactiveDel(vuexState.contracts, contractID);\n                    }\n                    reactiveDel(vuexState, contractID);\n                });\n                for (const contractID of added) {\n                    const { contractState, cheloniaState } = states[contractID];\n                    if (cheloniaState) {\n                        reactiveSet(vuexState.contracts, contractID, cloneDeep(cheloniaState));\n                    }\n                    if (contractState) {\n                        reactiveSet(vuexState, contractID, cloneDeep(contractState));\n                    }\n                }\n                sbp('okTurtles.events/emit', CONTRACTS_MODIFIED_READY, subscriptionSet, { added, removed });\n            });\n        });\n    },\n    // This function is similar in purpose to `chelonia/contract/wait`, except\n    // that it's also designed to take into account delays copying Chelonia state\n    // to an external state (e.g., when using `chelonia/externalStateSetup`).\n    'chelonia/externalStateWait': async function (contractID) {\n        await sbp('chelonia/contract/wait', contractID);\n        const { cheloniaState } = await sbp('chelonia/contract/fullState', contractID);\n        const localState = sbp(this.stateSelector);\n        // If the current 'local' state has a height higher than or equal to the\n        // Chelonia height, we've processed all events and don't need to wait any\n        // longer.\n        if (!cheloniaState || cheloniaState.height <= localState.contracts[contractID]?.height)\n            return;\n        // Otherwise, listen for `EVENT_HANDLED_READY` events till we have reached\n        // the necessary height.\n        return new Promise((resolve) => {\n            const removeListener = sbp('okTurtles.events/on', EVENT_HANDLED_READY, (cID) => {\n                if (cID !== contractID)\n                    return;\n                const localState = sbp(this.stateSelector);\n                if (cheloniaState.height <= localState.contracts[contractID]?.height) {\n                    resolve();\n                    removeListener();\n                }\n            });\n        });\n    }\n});\n", "import sbp from '@sbp/sbp'\nimport { DELETED_CHATROOM, JOINED_CHATROOM, LEFT_CHATROOM, NEW_CHATROOM_NOTIFICATION_SETTINGS, NEW_CHATROOM_UNREAD_POSITION } from '@utils/events.js'\n\nconst switchCurrentChatRoomHandler = ({ identityContractID, groupContractID, chatRoomID }) => {\n  const rootState = sbp('state/vuex/state')\n  if (identityContractID && rootState.loggedIn?.identityContractID !== identityContractID) return\n  if (!rootState[groupContractID]) return\n  if (rootState.chatroom.currentChatRoomIDs[groupContractID] === chatRoomID) {\n    sbp('state/vuex/commit', 'setCurrentChatRoomId', { groupID: groupContractID })\n  }\n}\n\n// handle incoming chatroom-related events that are sent from the service worker\nsbp('okTurtles.events/on', JOINED_CHATROOM, ({ identityContractID, groupContractID, chatRoomID }) => {\n  const rootState = sbp('state/vuex/state')\n  if (rootState.loggedIn?.identityContractID !== identityContractID) return\n  if (!rootState.chatroom.currentChatRoomIDs[groupContractID] || rootState.chatroom.pendingChatRoomIDs[groupContractID] === chatRoomID) {\n    let attemptCount = 0\n    // Sometimes, the state may not be ready (it needs to be copied from the SW\n    // to Vuex). In this case, we try again after a short delay.\n    // The specific issue is that the browsing-side state is updated in response\n    // to the EVENT_HANDLED event. Although that event is correctly emitted\n    // prior to JOINED_CHATROOM, processing might take slightly longer, causing\n    // rootState[chatRoomID]?.members?.[identityContractID] to be briefly\n    // undefined.\n    // TODO: Figure out a better way of doing this that doesn't require a timeout\n    const setCurrentChatRoomId = () => {\n      // Re-grab the state as it could be a stale reference\n      const rootGetters = sbp('state/vuex/getters')\n      if (!rootGetters.isJoinedChatRoom(chatRoomID, identityContractID)) {\n        if (++attemptCount > 5) {\n          console.warn('[JOINED_CHATROOM] Given up on setCurrentChatRoomId after 5 attempts', { identityContractID, groupContractID, chatRoomID })\n          return\n        }\n        setTimeout(setCurrentChatRoomId, 5 * Math.pow(1.75, attemptCount))\n      } else {\n        sbp('state/vuex/commit', 'setCurrentChatRoomId', { groupID: groupContractID, chatRoomID })\n      }\n    }\n    setCurrentChatRoomId()\n  }\n})\nsbp('okTurtles.events/on', LEFT_CHATROOM, switchCurrentChatRoomHandler)\nsbp('okTurtles.events/on', DELETED_CHATROOM, switchCurrentChatRoomHandler)\nsbp('okTurtles.events/on', NEW_CHATROOM_UNREAD_POSITION, ({ chatRoomID, messageHash }) => {\n  if (messageHash) {\n    sbp('state/vuex/commit', 'setChatRoomScrollPosition', { chatRoomID, messageHash })\n  } else {\n    sbp('state/vuex/commit', 'deleteChatRoomScrollPosition', { chatRoomID })\n  }\n})\nsbp('okTurtles.events/on', NEW_CHATROOM_NOTIFICATION_SETTINGS, ({ chatRoomID, settings }) => {\n  sbp('state/vuex/commit', 'setChatroomNotificationSettings', {\n    chatRoomID,\n    settings\n  })\n})\n\nexport default ([]          )\n", "'use strict'\n\nimport { L } from '@common/common.js'\nimport {\n  INVITE_INITIAL_CREATOR,\n  MAX_GROUP_MEMBER_COUNT,\n  PROFILE_STATUS\n} from '@model/contracts/shared/constants.js'\nimport sbp from '@sbp/sbp'\nimport { ERROR_GROUP_GENERAL_CHATROOM_DOES_NOT_EXIST, ERROR_JOINING_CHATROOM, JOINED_GROUP, LEFT_GROUP, NEW_LAST_LOGGED_IN, OPEN_MODAL, REPLACE_MODAL, SWITCH_GROUP } from '@utils/events.js'\nimport ALLOWED_URLS from '@view-utils/allowedUrls.js'\n                                                         \n                                                         \n\nsbp('okTurtles.events/on', ERROR_GROUP_GENERAL_CHATROOM_DOES_NOT_EXIST, ({ identityContractID, groupContractID }) => {\n  if (process.env.CI) {\n    // Force a Cypress error\n    console.error('Error ERROR_GROUP_GENERAL_CHATROOM_DOES_NOT_EXIST', { identityContractID, groupContractID })\n    Promise.reject(new Error('ERROR_GROUP_GENERAL_CHATROOM_DOES_NOT_EXIST'))\n  }\n  const rootState = sbp('state/vuex/state')\n  if (rootState.loggedIn?.identityContractID !== identityContractID) return\n  if (!rootState[groupContractID]) return\n\n  sbp('chelonia/contract/wait', groupContractID).then(() => {\n    const ourGroups = sbp('state/vuex/getters').ourGroups\n    if (!ourGroups.includes(groupContractID)) return\n\n    const rootState = sbp('state/vuex/state')\n    if (!rootState[groupContractID].generalChatRoomId) {\n      sbp('gi.ui/prompt', {\n        heading: L('Error joining the #general chatroom'),\n        question: L('There was an error joining the #general chatroom because it doesn\\'t exist'),\n        primaryButton: L('Close')\n      })\n    }\n  })\n})\n\nsbp('okTurtles.events/on', ERROR_JOINING_CHATROOM, ({ identityContractID, groupContractID, chatRoomID }) => {\n  if (process.env.CI) {\n    // Force a Cypress error\n    console.error('Error ERROR_JOINING_CHATROOM', { identityContractID, groupContractID, chatRoomID })\n    Promise.reject(new Error('ERROR_JOINING_CHATROOM'))\n  }\n  const rootState = sbp('state/vuex/state')\n  if (rootState.loggedIn?.identityContractID !== identityContractID) return\n  if (!rootState[groupContractID]) return\n\n  sbp('chelonia/contract/wait', groupContractID).then(() => {\n    const ourGroups = sbp('state/vuex/getters').ourGroups\n    if (!ourGroups.includes(groupContractID)) return\n\n    const rootState = sbp('state/vuex/state')\n    const rootGetters = sbp('state/vuex/getters')\n    if (\n      rootState[groupContractID].chatRooms[chatRoomID]?.members[identityContractID]?.status === PROFILE_STATUS.ACTIVE &&\n      !rootGetters.isJoinedChatRoom(chatRoomID, identityContractID)\n    ) {\n      sbp('gi.ui/prompt', {\n        heading: L('Error joining chatroom'),\n        question: L('There was an error joining the {chatRoomName} chatroom', {\n          chatRoomName: rootState[groupContractID].chatRooms[chatRoomID]?.name\n            ? `#${rootState[groupContractID].chatRooms[chatRoomID].name}`\n            : L('(unknown)')\n        }),\n        primaryButton: L('Close')\n      })\n    }\n  })\n})\n\n// handle incoming group-related events that are sent from the service worker\nsbp('okTurtles.events/on', JOINED_GROUP, ({ identityContractID, groupContractID }) => {\n  const rootState = sbp('state/vuex/state')\n  if (rootState.loggedIn?.identityContractID !== identityContractID) return\n  if (!rootState[groupContractID]) return\n  if (!rootState.currentGroupId) {\n    sbp('state/vuex/commit', 'setCurrentGroupId', { contractID: groupContractID })\n    sbp('state/vuex/commit', 'setCurrentChatRoomId', {})\n  }\n})\n\nsbp('okTurtles.events/on', LEFT_GROUP, ({ identityContractID, groupContractID }) => {\n  const rootState = sbp('state/vuex/state')\n  if (rootState.loggedIn?.identityContractID !== identityContractID) return\n  const state = rootState[identityContractID]\n  // grab the groupID of any group that we're a part of\n  const currentGroupId = rootState.currentGroupId\n  if (!currentGroupId || currentGroupId === groupContractID) {\n    const groupIdToSwitch = Object.entries(state.groups)\n      // $FlowFixMe[incompatible-use]\n      .map(([cID, { hasLeft }]) => !hasLeft && cID)\n      .filter(cID =>\n        cID && cID !== groupContractID\n      ).sort(cID =>\n      // prefer successfully joined groups\n        sbp('state/vuex/state')[cID]?.profiles?.[groupContractID] ? -1 : 1\n      )[0] || null\n    sbp('state/vuex/commit', 'setCurrentChatRoomId', {})\n    // If currentGroupId === groupContractID (i.e., if the current group is\n    // the one being left), we set `forceRefresh` to force a redirect to the\n    // dashboard route. This closes the modal for leaving a group if it was\n    // open.\n    sbp('state/vuex/commit', 'setCurrentGroupId', { contractID: groupIdToSwitch, forceRefresh: currentGroupId === groupContractID })\n  }\n})\n\nsbp('okTurtles.events/on', NEW_LAST_LOGGED_IN, ([contractID, data]) => {\n  sbp('state/vuex/commit', 'setLastLoggedIn', [contractID, data])\n})\n\nexport default (sbp('sbp/selectors/register', {\n  'gi.app/group/createAndSwitch': async function (params                ) {\n    const contractID = await sbp('gi.actions/group/create', params)\n    sbp('gi.app/group/switch', contractID, true)\n    return contractID\n  },\n  'gi.app/group/switch': function (groupId, isNewlyCreated) {\n    sbp('okTurtles.events/emit', SWITCH_GROUP, { contractID: groupId, isNewlyCreated })\n    sbp('state/vuex/commit', 'setCurrentGroupId', { contractID: groupId, isNewlyCreated })\n  },\n  'gi.app/group/joinAndSwitch': async function (params                              ) {\n    await sbp('gi.actions/group/join', params)\n    // after joining, we can set the current group\n    return sbp('gi.app/group/switch', params.contractID, true)\n  },\n  'gi.app/group/joinWithInviteSecret': async function (groupId        , secret        ) {\n    const result = await sbp('gi.actions/group/joinWithInviteSecret', groupId, secret)\n    sbp('gi.app/group/switch', groupId, true)\n    return result\n  },\n  'gi.app/group/addAndJoinChatRoom': async function (params                ) {\n    const chatRoomID = await sbp('gi.actions/group/addAndJoinChatRoom', params)\n    // For an explanation about 'setPendingChatRoomId', see DMMixin.js\n    // TL;DR: This is an intermediary state to avoid untimely navigation before\n    // the contract state is available.\n    sbp('state/vuex/commit', 'setPendingChatRoomId', { chatRoomID, groupID: params.contractID })\n    return chatRoomID\n  },\n  'gi.app/group/checkGroupSizeAndProposeMember': async function () {\n    // if current size of the group is >= 150, display a warning prompt first before presenting the user with\n    // 'AddMembers' proposal modal.\n\n    const enforceDunbar = true // Context for this hard-coded boolean variable: https://github.com/okTurtles/group-income/pull/1648#discussion_r1230389924\n    const { groupMembersCount, currentGroupState } = sbp('state/vuex/getters')\n    const memberInvitesCount = Object.values(currentGroupState.invites || {}).filter((invite     ) => invite.creatorID !== INVITE_INITIAL_CREATOR).length\n    const isGroupSizeLarge = (groupMembersCount + memberInvitesCount) >= MAX_GROUP_MEMBER_COUNT\n\n    if (isGroupSizeLarge) {\n      const translationArgs = {\n        a_: `<a class='link' href='${ALLOWED_URLS.WIKIPEDIA_DUNBARS_NUMBER}' target='_blank'>`,\n        _a: '</a>'\n      }\n      const promptConfig = enforceDunbar\n        ? {\n            heading: 'Large group size',\n            question: L(\"Group sizes are limited to {a_}Dunbar's Number{_a} to prevent fraud.\", translationArgs),\n            primaryButton: L('OK')\n          }\n        : {\n            heading: 'Large group size',\n            question: L(\"Groups over 150 members are at significant risk for fraud, {a_}because it is difficult to verify everyone's identity.{_a} Are you sure that you want to add more members?\", translationArgs),\n            primaryButton: L('Yes'),\n            secondaryButton: L('Cancel')\n          }\n\n      const primaryButtonSelected = await sbp('gi.ui/prompt', promptConfig)\n      if (!enforceDunbar && primaryButtonSelected) {\n        sbp('okTurtles.events/emit', REPLACE_MODAL, 'AddMembers')\n      } else return false\n    } else {\n      sbp('okTurtles.events/emit', OPEN_MODAL, 'AddMembers')\n    }\n  },\n  'gi.app/group/checkAndSeeProposal': function ({ contractID, data }                ) {\n    const rootGetters = sbp('state/vuex/getters')\n    const rootState = sbp('state/vuex/state')\n    if (rootState.currentGroupId !== contractID) {\n      sbp('state/vuex/commit', 'setCurrentGroupId', { contractID })\n    }\n\n    const openProposalIds = Object.keys(rootGetters.currentGroupState.proposals || {})\n\n    if (openProposalIds.includes(data.proposalHash)) {\n      sbp('controller/router').push({ path: '/dashboard#proposals' })\n    } else {\n      sbp('okTurtles.events/emit', OPEN_MODAL, 'PropositionsAllModal', { targetProposal: data.proposalHash })\n    }\n  },\n  'gi.app/group/displayMincomeChangedPrompt': async function ({ contractID, data }                ) {\n    const rootGetters = sbp('state/vuex/getters')\n    const rootState = sbp('state/vuex/state')\n    if (rootState.currentGroupId !== contractID) {\n      sbp('state/vuex/commit', 'setCurrentGroupId', { contractID })\n    }\n\n    const { withGroupCurrency } = rootGetters\n    const promptOptions = data.increased\n      ? {\n          heading: L('Mincome changed'),\n          question: L('Do you make at least {amount} per month?', { amount: withGroupCurrency(data.amount) }),\n          primaryButton: data.memberType === 'pledging' ? L('No') : L('Yes'),\n          secondaryButton: data.memberType === 'pledging' ? L('Yes') : L('No')\n        }\n      : {\n          heading: L('Automatically switched to pledging {zero}', { zero: withGroupCurrency(0) }),\n          question: L('You now make more than the mincome. Would you like to increase your pledge?'),\n          primaryButton: L('Yes'),\n          secondaryButton: L('No')\n        }\n\n    const primaryButtonSelected = await sbp('gi.ui/prompt', promptOptions)\n    if (primaryButtonSelected) {\n      // NOTE: emtting 'REPLACE_MODAL' instead of 'OPEN_MODAL' here because 'Prompt' modal is open at this point (by 'gi.ui/prompt' action above).\n      sbp('okTurtles.events/emit', REPLACE_MODAL, 'IncomeDetails')\n    }\n  }\n})          )\n", "'use strict'\n\nimport { GIErrorUIRuntimeError, L, LError, LTags } from '@common/common.js'\nimport { cloneDeep } from 'turtledash'\nimport sbp from '@sbp/sbp'\nimport Vue from 'vue'\nimport { Buffer } from 'buffer'\nimport { LOGIN, LOGIN_COMPLETE, LOGIN_ERROR, NEW_PREFERENCES, NEW_UNREAD_MESSAGES, NEW_KV_LOAD_STATUS } from '~/frontend/utils/events.js'\nimport { Secret } from '@chelonia/lib/Secret'\nimport { EVENT_HANDLED } from '@chelonia/lib/events'\nimport { boxKeyPair, buildRegisterSaltRequest, buildUpdateSaltRequestEc, computeCAndHc, decryptContractSalt, hash, hashPassword, randomNonce } from '@chelonia/lib/zkpp'\nimport { SETTING_CHELONIA_STATE } from '@model/database.js'\nimport { CURVE25519XSALSA20POLY1305, EDWARDS25519SHA512BATCH, deriveKeyFromPassword, serializeKey } from '@chelonia/crypto'\nimport { handleFetchResult } from '../utils/misc.js'\n\nconst loadState = async (identityContractID        , password         ) => {\n  if (password) {\n    const stateKeyEncryptionKeyFn = (stateEncryptionKeyId, salt) => {\n      return deriveKeyFromPassword(CURVE25519XSALSA20POLY1305, password, salt + stateEncryptionKeyId)\n    }\n\n    const { encryptionParams, value: state } = await sbp('gi.db/settings/loadEncrypted', identityContractID, stateKeyEncryptionKeyFn)\n\n    if (state) {\n      // If state contains a saved Chelonia state, extract it.\n      // The saved Chelonia state will be used to restore Chelonia on this\n      // new session.\n      const cheloniaState = state.cheloniaState\n      delete state.cheloniaState\n\n      return { encryptionParams, state, cheloniaState }\n    } else {\n      // There's no state to restore\n      return { encryptionParams, state: null, cheloniaState: null }\n    }\n  } else {\n    const state = await sbp('gi.db/settings/load', identityContractID)\n\n    // cheloniaState is only stored in settings when logging in with a password\n    // If there's an active session, then cheloniaState is stored and\n    // managed separately\n    return { encryptionParams: null, state, cheloniaState: null }\n  }\n}\n\nsbp('okTurtles.events/on', LOGIN, async ({ identityContractID, encryptionParams, state }) => {\n  // This function restores the state after a successful login. It's complex\n  // because it deals with _three_ different states.\n  // * `state` (input parameter): (optional). This is the _saved_ Vuex state\n  //   that we'll use to replace the current Vuex state (`vuexState`). Passed in\n  //   when there is an active session with state.\n  // * `vuexState`: This is the root Vuex state as it exists. This is accessed\n  //   using the `state/vuex/state` selector. When `state` is provided, it'll\n  //   be replaced by `state`. Otherwise, it'll not be replaced.\n  // * `cheloniaState`: This is the Chelonia root state, retrieved using the\n  //   `chelonia/rootState` selector. This will be used to augment the current\n  //   or new Vuex state: any Chelonia-specific state will be set directly from\n  //   `cheloniaState` and any exisiting contract state in `state` or `vuexState`\n  //   will be discarded.\n  await sbp('okTurtles.eventQueue/queueEvent', EVENT_HANDLED, async () => {\n    try {\n      const vuexState = sbp('state/vuex/state')\n      if (vuexState.loggedIn && vuexState.loggedIn.identityContractID !== identityContractID) {\n      // This shouldn't happen. It means that we received a LOGIN event but\n      // there's an active session for a different user. If this happens, it\n      // means that there's buggy login logic that should be reported and fixed\n        console.error('Received login event during active session', { receivedIdentityContractID: identityContractID, existingIdentityContractID: vuexState.loggedIn.identityContractID })\n        throw new Error('Received login event but there already is an active session')\n      }\n      const cheloniaState = cloneDeep(await sbp('chelonia/rootState'))\n      // If `state` is set, process it and replace Vuex state with it\n      if (state) {\n      // Exclude contracts from the state\n        if (state.contracts) {\n          Object.keys(state.contracts).forEach(k => {\n          // Vue.delete not needed as the entire object will replace the state\n            delete state[k]\n          })\n        }\n        // Augment state with Chelonia state\n        Object.keys(cheloniaState.contracts).forEach(k => {\n          if (cheloniaState[k]) {\n          // Vue.set not needed as the entire object will replace the state\n            state[k] = cheloniaState[k]\n          }\n        })\n        state.contracts = cheloniaState.contracts\n        if (cheloniaState.namespaceLookups) {\n          state.namespaceLookups = cheloniaState.namespaceLookups\n        }\n        // End exclude contracts\n        sbp('state/vuex/postUpgradeVerification', state)\n        sbp('state/vuex/replace', state)\n      } else {\n      // Else, if `state` was not given, just sync add contracts from Chelonia\n      // to the current Vuex state\n        const state = vuexState\n        // Exclude contracts from the state\n        if (state.contracts) {\n          Object.keys(state.contracts).forEach(k => {\n            Vue.delete(state, k)\n          })\n        }\n        Object.keys(cheloniaState.contracts).forEach(k => {\n          if (cheloniaState[k]) {\n            Vue.set(state, k, cheloniaState[k])\n          }\n        })\n        Vue.set(state, 'contracts', cheloniaState.contracts)\n        if (cheloniaState.namespaceLookups) {\n          Vue.set(state, 'namespaceLookups', cheloniaState.namespaceLookups)\n        }\n        // End exclude contracts\n        sbp('state/vuex/postUpgradeVerification', state)\n      }\n\n      if (encryptionParams) {\n        sbp('state/vuex/commit', 'login', { identityContractID, encryptionParams })\n      }\n\n      // NOTE: users could notice that they leave the group by someone\n      // else when they log in\n      const currentState = sbp('state/vuex/state')\n      if (!currentState.currentGroupId) {\n        const gId = Object.keys(currentState.contracts)\n          .find(cID => currentState[identityContractID].groups[cID] && !currentState[identityContractID].groups[cID].hasLeft)\n\n        if (gId) {\n          sbp('gi.app/group/switch', gId)\n        }\n      }\n\n      // Whenever there's an active session, the encrypted save state should be\n      // removed, as it is only used for recovering the state when logging in\n      sbp('gi.db/settings/deleteEncrypted', identityContractID).catch(e => {\n        console.error('Error deleting encrypted settings after login')\n      })\n\n      /* Commented out as persistentActions are not being used\n      // TODO: [SW] It may make more sense to load persistent actions in\n      // actions in the SW instead of on each tab\n      const databaseKey = `chelonia/persistentActions/${identityContractID}`\n      sbp('chelonia.persistentActions/configure', { databaseKey })\n      await sbp('chelonia.persistentActions/load')\n      */\n\n      sbp('okTurtles.events/emit', LOGIN_COMPLETE, { identityContractID })\n    } catch (e) {\n      sbp('okTurtles.events/emit', LOGIN_ERROR, { identityContractID, error: e })\n    }\n  })\n})\n\n// handle incoming identity-related events that are sent from the service worker\nsbp('okTurtles.events/on', NEW_UNREAD_MESSAGES, (currentChatRoomUnreadMessages) => {\n  sbp('state/vuex/commit', 'setUnreadMessages', currentChatRoomUnreadMessages)\n})\n\nsbp('okTurtles.events/on', NEW_PREFERENCES, (preferences) => {\n  sbp('state/vuex/commit', 'setPreferences', preferences)\n})\n\nsbp('okTurtles.events/on', NEW_KV_LOAD_STATUS, (data) => {\n  sbp('state/vuex/commit', 'setKvStoreStatus', data)\n})\n\n/* Commented out as persistentActions are not being used\nsbp('okTurtles.events/on', LOGOUT, (a) => {\n  // TODO: [SW] It may make more sense to load persistent actions in\n  // actions in the SW instead of on each tab\n  sbp('chelonia.persistentActions/unload')\n})\n*/\n\nexport default (sbp('sbp/selectors/register', {\n  'gi.app/identity/retrieveSalt': async (identityContractID        , password                )                             => {\n    const r = randomNonce()\n    const b = hash(r)\n    const authHash = await fetch(`${sbp('okTurtles.data/get', 'API_URL')}/zkpp/${encodeURIComponent(identityContractID)}/auth_hash?b=${encodeURIComponent(b)}`)\n      .then(handleFetchResult('json'))\n\n    const { authSalt, s, sig } = authHash\n\n    const h = await hashPassword(password.valueOf(), authSalt)\n\n    const [c, hc] = computeCAndHc(r, s, h)\n\n    const contractHash = await fetch(`${sbp('okTurtles.data/get', 'API_URL')}/zkpp/${encodeURIComponent(identityContractID)}/contract_hash?${(new URLSearchParams({\n      'r': r,\n      's': s,\n      'sig': sig,\n      'hc': Buffer.from(hc).toString('base64').replace(/\\//g, '_').replace(/\\+/g, '-').replace(/=*$/, '')\n    })).toString()}`).then(handleFetchResult('text'))\n\n    // [contractSalt, cid]\n    return JSON.parse(decryptContractSalt(c, contractHash))\n  },\n  'gi.app/identity/updateSaltRequest': async (identityContractID        , oldPassword                , newPassword                ) => {\n    const r = randomNonce()\n    const b = hash(r)\n    const authHash = await fetch(`${sbp('okTurtles.data/get', 'API_URL')}/zkpp/${encodeURIComponent(identityContractID)}/auth_hash?b=${encodeURIComponent(b)}`)\n      .then(handleFetchResult('json'))\n\n    const { authSalt, s, sig } = authHash\n\n    const h = await hashPassword(oldPassword.valueOf(), authSalt)\n\n    const [c, hc] = computeCAndHc(r, s, h)\n\n    const [contractSalt, encryptedArgs] = await buildUpdateSaltRequestEc(newPassword.valueOf(), c)\n\n    const response = await fetch(`${sbp('okTurtles.data/get', 'API_URL')}/zkpp/${encodeURIComponent(identityContractID)}/updatePasswordHash`, {\n      method: 'POST',\n      headers: {\n        'content-type': 'application/x-www-form-urlencoded'\n      },\n      body:\n        `${(new URLSearchParams({\n          'r': r,\n          's': s,\n          'sig': sig,\n          'hc': Buffer.from(hc).toString('base64').replace(/\\//g, '_').replace(/\\+/g, '-').replace(/=*$/, ''),\n          'Ea': encryptedArgs\n        })).toString()}`\n    }).then(handleFetchResult('text'))\n\n    const [oldContractSalt, updateToken] = JSON.parse(decryptContractSalt(c, response))\n\n    return [contractSalt, oldContractSalt, updateToken]\n  },\n  'gi.app/identity/create': async function ({\n    data: { username, email, password, picture },\n    publishOptions\n  }) {\n    password = password.valueOf()\n\n    // proceed with creation\n    const keyPair = boxKeyPair()\n    const r = Buffer.from(keyPair.publicKey).toString('base64').replace(/\\//g, '_').replace(/\\+/g, '-')\n    const b = hash(r)\n    const registrationRes = await fetch(`${sbp('okTurtles.data/get', 'API_URL')}/zkpp/register/${encodeURIComponent(username)}`, {\n      method: 'POST',\n      headers: {\n        'content-type': 'application/x-www-form-urlencoded'\n      },\n      body: `b=${encodeURIComponent(b)}`\n    })\n      .then(handleFetchResult('json'))\n\n    const { p, s, sig } = registrationRes\n\n    const [contractSalt, Eh, encryptionKey] = await buildRegisterSaltRequest(p, keyPair.secretKey, password)\n\n    const saltRegistrationTokenReq = await fetch(`${sbp('okTurtles.data/get', 'API_URL')}/zkpp/register/${encodeURIComponent(username)}`, {\n      method: 'POST',\n      headers: {\n        'content-type': 'application/x-www-form-urlencoded'\n      },\n      body: new URLSearchParams({\n        'r': r,\n        's': s,\n        'sig': sig,\n        'Eh': Eh\n      })\n    })\n\n    if (!saltRegistrationTokenReq.ok) {\n      throw new Error('Unable to register hash')\n    }\n\n    const encryptedToken = await saltRegistrationTokenReq.text()\n    const token = decryptContractSalt(encryptionKey, encryptedToken)\n\n    // Create the necessary keys to initialise the contract\n    const IPK = await deriveKeyFromPassword(EDWARDS25519SHA512BATCH, password, contractSalt)\n    const IEK = await deriveKeyFromPassword(CURVE25519XSALSA20POLY1305, password, contractSalt)\n\n    // next create the identity contract itself\n    try {\n      const userID = await sbp('gi.actions/identity/create', {\n        IPK: new Secret(serializeKey(IPK, true)),\n        IEK: new Secret(serializeKey(IEK, true)),\n        publishOptions,\n        username,\n        email,\n        picture,\n        token: new Secret(token)\n      })\n\n      return userID\n    } catch (e) {\n      console.error('gi.app/identity/create failed!', e)\n      throw new GIErrorUIRuntimeError(L('Failed to create user identity: {reportError}', LError(e)))\n    }\n  },\n  'gi.app/identity/signup': async function ({ username, email, password }, publishOptions) {\n    try {\n      const randomAvatar = sbp('gi.utils/avatar/create')\n      const userID = await sbp('gi.app/identity/create', {\n        data: {\n          username,\n          email,\n          password,\n          picture: randomAvatar\n        },\n        publishOptions\n      })\n      return userID\n    } catch (e) {\n      console.error('gi.app/identity/signup failed!', e)\n      await sbp('gi.app/identity/logout') // TODO: should this be here?\n      const message = LError(e)\n      if (e.name === 'GIErrorUIRuntimeError') {\n        // 'gi.app/identity/create' also sets reportError\n        message.reportError = e.message\n      }\n      throw new GIErrorUIRuntimeError(L('Failed to signup: {reportError}', message))\n    }\n  },\n  'gi.app/identity/login': function ({ username, password: wpassword, identityContractID }   \n                                                                            \n   ) {\n    // This wrapper ensures that there is at most one login flow action executed\n    // at any given time. Because of the async work done when logging in and out,\n    // it could happen that, e.g., `gi.actions/identity/login` is called before\n    // a previous call to `gi.actions/identity/logout` completed (this should\n    // not be allowed by the UI, and it'd require that users do things very\n    // quickly, but using automation can cause this).\n    // To prevent issues, the login and logout actions are wrapped an placed in\n    // a queue.\n    return sbp('okTurtles.eventQueue/queueEvent', 'APP-LOGIN', async () => {\n      console.debug('[gi.app/identity/login] Scheduled call starting', identityContractID, username)\n      if (username) {\n        // We expect that in development mode the same browser may be used and\n        // server data cleared often, so we skip the cache lookup for dev\n        // convenience.\n        const nsIdentityContractID = await sbp('namespace/lookup', username, { skipCache: process.env.CI || process.env.NODE_ENV !== 'production' })\n        // If we've only been given a username, set `identityContractID` to the\n        // contract ID we've just looked up\n        if (!identityContractID) {\n          identityContractID = nsIdentityContractID\n        } else if (nsIdentityContractID !== identityContractID) {\n          // However, if we _know_ what the contract ID should be (e.g., right\n          // after signing up, when we've ourselves created the contract), we\n          // check that the contractID we're signing in into is what we expect\n          // it to be.\n          console.error(new Error(`Identity contract ID mismatch during login: ${identityContractID} != ${nsIdentityContractID}`))\n          throw new GIErrorUIRuntimeError(L('Identity contract ID mismatch during login'))\n        }\n      }\n\n      if (!identityContractID) {\n        throw new GIErrorUIRuntimeError(L('Incorrect username or password'))\n      }\n\n      const password = wpassword?.valueOf()\n      const transientSecretKeys = []\n      let oldKeysAnchorCid\n\n      // If we're creating a new session, here we derive the IEK. This key (not\n      // the password) will be passed to the service worker.\n      if (password) {\n        try {\n          // Retrive the salt and the CID (hash) of the message that allows us\n          // to decrypt old rotated keys, if any\n          const [salt, cid] = await sbp('gi.app/identity/retrieveSalt', identityContractID, wpassword)\n          const IEK = await deriveKeyFromPassword(CURVE25519XSALSA20POLY1305, password, salt)\n          transientSecretKeys.push(IEK)\n          oldKeysAnchorCid = cid\n        } catch (e) {\n          console.error('caught error calling retrieveSalt:', e)\n          throw new GIErrorUIRuntimeError(L('Incorrect username or password'))\n        }\n      }\n\n      try {\n        await sbp('appLogs/startCapture', identityContractID)\n        const { state, cheloniaState, encryptionParams } = await loadState(identityContractID, password)\n        let loginCompleteHandler, loginErrorHandler\n\n        try {\n          // Since some steps now will happen asynchronously through events,\n          // we set up a promise that will resolve once the login process is\n          // complete\n          const loginCompletePromise = new Promise((resolve, reject) => {\n            const loginCompleteHandler = ({ identityContractID: id }) => {\n              removeLoginErrorHandler()\n              if (id === identityContractID) {\n                // Before the promise resolves, we need to save the state\n                // by calling 'state/vuex/save' to ensure that refreshing the page\n                // results in a page with the same state.\n                resolve(sbp('state/vuex/save'))\n              } else {\n                reject(new Error(`Identity contract ID mismatch during login: ${identityContractID} != ${id}`))\n              }\n            }\n            const loginErrorHandler = ({ identityContractID: id, error }) => {\n              removeLoginCompleteHandler()\n              if (id === identityContractID) {\n                reject(error)\n              } else {\n                reject(new Error(`Identity contract ID mismatch during login (on error): ${identityContractID} != ${id}`))\n              }\n            }\n\n            const removeLoginCompleteHandler = sbp('okTurtles.events/once', LOGIN_COMPLETE, loginCompleteHandler)\n            const removeLoginErrorHandler = sbp('okTurtles.events/once', LOGIN_ERROR, loginErrorHandler)\n          })\n\n          // Are we logging in and setting up a fresh session or loading an\n          // existing session?\n          if (password) {\n            // Setting up a fresh session:\n            // Send `cheloniaState` and the Vuex `state` to the action.\n            // `cheloniaState` will be used to restore the Chelonia state\n            // and `state` will be sent back to replace the current Vuex state\n            // after login. When using a service worker, all tabs will receive\n            // a new Vuex state to replace their state with.\n            await sbp('gi.actions/identity/login', {\n              identityContractID,\n              encryptionParams,\n              cheloniaState,\n              state,\n              transientSecretKeys: new Secret(transientSecretKeys.map(k => serializeKey(k, true))),\n              oldKeysAnchorCid\n            })\n          } else {\n            try {\n              await sbp('chelonia/contract/sync', identityContractID)\n            } catch (e) {\n              // Since we're throwing or returning, the `await` below will not\n              // be used. In either case, login won't complete after this point,\n              // so errors there aren't relevant anymore.\n              loginCompletePromise.catch((e) => {\n                // Using `warn` level because this error is not so relevant\n                // However, errors might be helpful for debugging purposes, so\n                // we still log it.\n                console.warn('[gi.app/identity/login] Error in login complete promise', e)\n              })\n\n              // To make it easier to test things during development, if the\n              // identity contract no longer exists, we automatically log out\n              // If we're in production mode, we show a prompt instead as logging\n              // out could result in permanent data loss (of the local state).\n              if (process.env.NODE_ENV !== 'production') {\n                console.error('Error syncing identity contract, automatically logging out', identityContractID, e)\n                return sbp('gi.app/identity/_private/logout', state)\n              }\n              throw e\n            }\n            // If an existing session exists, we just emit the LOGIN event\n            // to set the local Vuex state and signal we're ready.\n            sbp('okTurtles.events/emit', LOGIN, { identityContractID, state })\n          }\n\n          // Wait until all events have been processed before returning\n          await loginCompletePromise\n        } catch (e) {\n          sbp('okTurtles.events/off', LOGIN_COMPLETE, loginCompleteHandler)\n          sbp('okTurtles.events/off', LOGIN_ERROR, loginErrorHandler)\n\n          const errMessage = e?.message || String(e)\n          console.error('[gi.app/identity] Error during login contract sync', e)\n\n          const forkedChain = (e && (e.name === 'ChelErrorForkedChain' || e.cause?.name === 'ChelErrorForkedChain'))\n          const deleted = (e && (e.name === 'ChelErrorResourceGone' || e.cause?.name === 'ChelErrorResourceGone'))\n\n          const promptOptions = {\n            heading: L('Login error'),\n            question: forkedChain\n              ? L('The server\\'s history for your identity contract has diverged from ours. This can happen in extremely rare circumstances due to either malicious activity or a bug. {br_}To fix this, the contract needs to be resynced, and some recent events may be missing. {br_}Would you like to log out and resync data on your next login? {br_}Error details: {err}.', { err: errMessage, ...LTags() })\n              : deleted\n                ? L('Your account seems to have been deleted from the server. {br_}To fix this, you need to log out and create a new account. {br_}Error details: {err}.', { err: errMessage, ...LTags() })\n                : L('An error occurred while logging in. Please try logging in again. {br_}Error details: {err}.', { err: errMessage, ...LTags() }),\n            primaryButton: L('Log out'),\n            // secondaryButton: L('No'),\n            primaryButtonStyle: 'primary', // make primary button 'filled' style\n            isContentCentered: !forkedChain && !deleted\n          }\n\n          const result = await sbp('gi.ui/prompt', promptOptions)\n          if (result) {\n            sbp('gi.ui/clearBanner')\n            return sbp('gi.app/identity/_private/logout', state, forkedChain)\n          } else {\n            sbp('okTurtles.events/emit', LOGIN_ERROR, { username, identityContractID, error: e })\n            throw e\n          }\n        }\n\n        // updating the 'lastLoggedIn' field is done as a periodic notification\n        return identityContractID\n      } catch (e) {\n        console.error('gi.app/identity/login failed!', e)\n        const humanErr = L('Failed to log in: {reportError}', LError(e))\n        alert(humanErr)\n        await sbp('gi.app/identity/_private/logout')\n          .catch((e) => {\n            console.error('[gi.app/identity/login] Error calling logout (after failure to login)', e)\n          })\n        throw new GIErrorUIRuntimeError(humanErr)\n      }\n    })\n  },\n  'gi.app/identity/signupAndLogin': async function ({ username, email, password }) {\n    const contractID = await sbp('gi.app/identity/signup', { username, email, password })\n    await sbp('gi.app/identity/login', { username, password, identityContractID: contractID })\n    return contractID\n  },\n  // Unlike the login function, the wrapper for logging out is used using a\n  // dedicated selector to allow it to be called from the login selector (if\n  // error occurs)\n  'gi.app/identity/_private/logout': async function (errorState         , wipeOut          ) {\n    try {\n      const state = errorState || cloneDeep(sbp('state/vuex/state'))\n      if (!state.loggedIn) return\n\n      const cheloniaState = await sbp('gi.actions/identity/logout')\n\n      const { identityContractID, encryptionParams } = state.loggedIn\n      if (encryptionParams) {\n        // If we're logging out, save the current Chelonia state under the\n        // `.cheloniaState` key. This will be used later when logging in\n        // to restore both the Vuex and Chelonia states\n        if (!wipeOut) {\n          // Save current Chelonia state into the state to be saved\n          state.cheloniaState = cheloniaState\n          // These keys (contract state) will be restored from the Chelonia\n          // state upon login (see `loadState`). Remove them to avoid storing\n          // unnecessary data.\n          // These deletions aren't done for correctness (since they don't\n          // affect the restored state, again because `loadState` discards\n          // this information) but rather for compactness.\n          Object.keys(cheloniaState.contracts || {}).forEach((contractID) => {\n            delete state[contractID]\n          })\n          delete state.contracts\n\n          await sbp('state/vuex/save', true, state)\n        }\n        await sbp('gi.db/settings/deleteStateEncryptionKey', encryptionParams)\n        await sbp('appLogs/pauseCapture', { wipeOut: true }) // clear stored logs to prevent someone else accessing sensitve data\n      }\n      // These should already be deleted, but we attempt to delete them again,\n      // just in case.\n      if (wipeOut) {\n        await Promise.all([\n          sbp('gi.db/settings/delete', identityContractID),\n          sbp('gi.db/settings/deleteEncrypted', identityContractID),\n          sbp('gi.db/settings/delete', SETTING_CHELONIA_STATE)\n        ])\n      }\n    } catch (e) {\n      console.error(`${e.name} during logout: ${e.message}`, e)\n    }\n  },\n  'gi.app/identity/logout': (...params) => {\n    return sbp('okTurtles.eventQueue/queueEvent', 'APP-LOGIN', ['gi.app/identity/_private/logout', ...params])\n  },\n  'gi.app/identity/changePassword': async (wOldPassword                , wNewPassword                ) => {\n    const state = sbp('state/vuex/state')\n    if (!state.loggedIn) return\n    const getters = sbp('state/vuex/getters')\n\n    const { identityContractID } = state.loggedIn\n    const username = getters.usernameFromID(identityContractID)\n    const oldPassword = wOldPassword.valueOf()\n    const newPassword = wNewPassword.valueOf()\n\n    const [newContractSalt, oldContractSalt, updateToken] = await sbp('gi.app/identity/updateSaltRequest', identityContractID, wOldPassword, wNewPassword)\n\n    const oldIPK = await deriveKeyFromPassword(EDWARDS25519SHA512BATCH, oldPassword, oldContractSalt)\n    const oldIEK = await deriveKeyFromPassword(CURVE25519XSALSA20POLY1305, oldPassword, oldContractSalt)\n    const newIPK = await deriveKeyFromPassword(EDWARDS25519SHA512BATCH, newPassword, newContractSalt)\n    const newIEK = await deriveKeyFromPassword(CURVE25519XSALSA20POLY1305, newPassword, newContractSalt)\n\n    return sbp('gi.actions/identity/changePassword', {\n      identityContractID,\n      username,\n      oldIPK: new Secret(oldIPK),\n      oldIEK: new Secret(oldIEK),\n      newIPK: new Secret(newIPK),\n      newIEK: new Secret(newIEK),\n      updateToken: new Secret(updateToken)\n    })\n  },\n  'gi.app/identity/delete': async (contractID        , wPassword                ) => {\n    const password = wPassword?.valueOf()\n    const transientSecretKeys = []\n    let oldKeysAnchorCid\n\n    // If we're creating a new session, here we derive the IEK. This key (not\n    // the password) will be passed to the service worker.\n    if (password) {\n      try {\n        // Retrive the salt and the CID (hash) of the message that allows us\n        // to decrypt old rotated keys, if any\n        const [salt, cid] = await sbp('gi.app/identity/retrieveSalt', contractID, wPassword)\n        const IEK = await deriveKeyFromPassword(CURVE25519XSALSA20POLY1305, password, salt)\n        transientSecretKeys.push(IEK)\n        oldKeysAnchorCid = cid\n      } catch (e) {\n        console.error('caught error calling retrieveSalt:', e)\n        throw new GIErrorUIRuntimeError(L('Incorrect username or password'))\n      }\n    }\n\n    await sbp('gi.actions/identity/delete', {\n      contractID,\n      transientSecretKeys: new Secret(transientSecretKeys.map(k => serializeKey(k, true))),\n      oldKeysAnchorCid\n    })\n  }\n})          )\n", "import { Buffer } from 'buffer';\nimport scrypt from 'scrypt-async';\nimport nacl from 'tweetnacl';\nimport { AUTHSALT, CONTRACTSALT, CS, SALT_LENGTH_IN_OCTETS, SU } from './zkppConstants.mjs';\n// .toString('base64url') only works in Node.js\nexport const base64ToBase64url = (s) => s.replace(/\\//g, '_').replace(/\\+/g, '-').replace(/=*$/, '');\nexport const base64urlToBase64 = (s) => s.replace(/_/g, '/').replace(/-/g, '+') + '='.repeat((4 - s.length % 4) % 4);\nexport const hashStringArray = (...args) => {\n    return nacl.hash(Buffer.concat(args.map((s) => nacl.hash(Buffer.from(s)))));\n};\nexport const hashRawStringArray = (...args) => {\n    return nacl.hash(Buffer.concat(args.map((s) => Buffer.from(s))));\n};\nexport const randomNonce = () => {\n    return base64ToBase64url(Buffer.from(nacl.randomBytes(12)).toString('base64'));\n};\nexport const hashRawB64url = (v) => {\n    return base64ToBase64url(Buffer.from(nacl.hash(Buffer.from(v))).toString('base64'));\n};\nexport const hash = (v) => {\n    return base64ToBase64url(Buffer.from(nacl.hash(Buffer.from(v))).toString('base64'));\n};\nexport const computeCAndHc = (r, s, h) => {\n    const \u0127 = hashStringArray(r, s);\n    const c = hashStringArray(h, \u0127);\n    const hc = nacl.hash(c);\n    return [c, hc];\n};\nexport const encryptContractSalt = (c, contractSalt) => {\n    const encryptionKey = hashRawStringArray(CS, c).slice(0, nacl.secretbox.keyLength);\n    const nonce = nacl.randomBytes(nacl.secretbox.nonceLength);\n    const encryptedContractSalt = nacl.secretbox(Buffer.from(contractSalt), nonce, encryptionKey);\n    return base64ToBase64url(Buffer.concat([nonce, encryptedContractSalt]).toString('base64'));\n};\nexport const decryptContractSalt = (c, encryptedContractSaltBox) => {\n    const encryptionKey = hashRawStringArray(CS, c).slice(0, nacl.secretbox.keyLength);\n    const encryptedContractSaltBoxBuf = Buffer.from(base64urlToBase64(encryptedContractSaltBox), 'base64');\n    const nonce = encryptedContractSaltBoxBuf.subarray(0, nacl.secretbox.nonceLength);\n    const encryptedContractSalt = encryptedContractSaltBoxBuf.subarray(nacl.secretbox.nonceLength);\n    const decrypted = nacl.secretbox.open(encryptedContractSalt, nonce, encryptionKey);\n    if (!decrypted)\n        throw new Error('Failed to decrypt contract salt');\n    return Buffer.from(decrypted).toString();\n};\nexport const encryptSaltUpdate = (secret, recordId, record) => {\n    // The nonce is also used to derive a single-use encryption key\n    const nonce = nacl.randomBytes(nacl.secretbox.nonceLength);\n    const encryptionKey = hashRawStringArray(SU, secret, nonce, recordId).slice(0, nacl.secretbox.keyLength);\n    const encryptedRecord = nacl.secretbox(Buffer.from(record), nonce, encryptionKey);\n    return base64ToBase64url(Buffer.concat([nonce, encryptedRecord]).toString('base64'));\n};\nexport const decryptSaltUpdate = (secret, recordId, encryptedRecordBox) => {\n    // The nonce is also used to derive a single-use encryption key\n    const encryptedRecordBoxBuf = Buffer.from(base64urlToBase64(encryptedRecordBox), 'base64');\n    const nonce = encryptedRecordBoxBuf.subarray(0, nacl.secretbox.nonceLength);\n    const encryptionKey = hashRawStringArray(SU, secret, nonce, recordId).slice(0, nacl.secretbox.keyLength);\n    const encryptedRecord = encryptedRecordBoxBuf.subarray(nacl.secretbox.nonceLength);\n    const decrypted = nacl.secretbox.open(encryptedRecord, nonce, encryptionKey);\n    if (!decrypted)\n        throw new Error('Failed to decrypt salt update');\n    return Buffer.from(decrypted).toString();\n};\nexport const hashPassword = (password, salt) => {\n    // NOTE: Type cast needed on `scrypt` because for some reason TypeScript will\n    // incorrectly complain about it not taking string arguments.\n    return new Promise(resolve => scrypt(password, salt, {\n        N: 16384,\n        r: 8,\n        p: 1,\n        dkLen: 32,\n        encoding: 'hex'\n    }, resolve));\n};\nexport const boxKeyPair = () => {\n    return nacl.box.keyPair();\n};\nexport const saltAgreement = (publicKey, secretKey) => {\n    const publicKeyBuf = Buffer.from(base64urlToBase64(publicKey), 'base64');\n    const dhKey = nacl.box.before(publicKeyBuf, secretKey);\n    if (!publicKeyBuf || publicKeyBuf.byteLength !== nacl.box.publicKeyLength) {\n        return false;\n    }\n    const authSalt = Buffer.from(hashStringArray(AUTHSALT, dhKey)).subarray(0, SALT_LENGTH_IN_OCTETS).toString('base64');\n    const contractSalt = Buffer.from(hashStringArray(CONTRACTSALT, dhKey)).subarray(0, SALT_LENGTH_IN_OCTETS).toString('base64');\n    return [authSalt, contractSalt];\n};\nexport const parseRegisterSalt = (publicKey, secretKey, encryptedHashedPassword) => {\n    const saltAgreementRes = saltAgreement(publicKey, secretKey);\n    if (!saltAgreementRes) {\n        return false;\n    }\n    const [authSalt, contractSalt] = saltAgreementRes;\n    const encryptionKey = nacl.hash(Buffer.from(authSalt + contractSalt)).slice(0, nacl.secretbox.keyLength);\n    const encryptedHashedPasswordBuf = Buffer.from(base64urlToBase64(encryptedHashedPassword), 'base64');\n    const hashedPasswordBuf = nacl.secretbox.open(encryptedHashedPasswordBuf.subarray(nacl.box.nonceLength), encryptedHashedPasswordBuf.subarray(0, nacl.box.nonceLength), encryptionKey);\n    if (!hashedPasswordBuf) {\n        return false;\n    }\n    return [authSalt, contractSalt, hashedPasswordBuf, encryptionKey];\n};\nexport const buildRegisterSaltRequest = async (publicKey, secretKey, password) => {\n    const saltAgreementRes = saltAgreement(publicKey, secretKey);\n    if (!saltAgreementRes) {\n        throw new Error('Invalid public or secret key');\n    }\n    const [authSalt, contractSalt] = saltAgreementRes;\n    const hashedPassword = await hashPassword(password, authSalt);\n    const nonce = nacl.randomBytes(nacl.box.nonceLength);\n    const encryptionKey = nacl.hash(Buffer.from(authSalt + contractSalt)).slice(0, nacl.secretbox.keyLength);\n    const encryptedHashedPasswordBuf = nacl.secretbox(Buffer.from(hashedPassword), nonce, encryptionKey);\n    return [contractSalt, base64ToBase64url(Buffer.concat([nonce, encryptedHashedPasswordBuf]).toString('base64')), encryptionKey];\n};\n// Build the `E_c` (encrypted arguments) to send to the server to negotiate a\n// password change. `password` corresponds to the raw user password, `c` is a\n// negotiated shared secret between the server and the client. The encrypted\n// payload contains the salted user password (using `authSalt`).\n// The return value includes the derived contract salt and the `E_c`.\nexport const buildUpdateSaltRequestEc = async (password, c) => {\n    // Derive S_A (authentication salt) and S_C (contract salt) as follows:\n    //   -> S_T -< BASE64(SHA-512(SHA-512(T) + SHA-512(c))[0..18]) with T being\n    //     `AUTHSALT` (for S_A) or `CONTRACTSALT` (for S_C).\n    // This way, we ensure both the server and the client contribute to the\n    //   salts' entropy. Having more sources of entropy contributes to higher\n    //   randomness in the result.\n    // When sending the encrypted data, the encrypted information would be\n    // `hashedPassword`, which needs to be verified server-side to verify\n    // it matches p and would be used to derive S_A and S_C.\n    const authSalt = Buffer.from(hashStringArray(AUTHSALT, c)).subarray(0, SALT_LENGTH_IN_OCTETS).toString('base64');\n    const contractSalt = Buffer.from(hashStringArray(CONTRACTSALT, c)).subarray(0, SALT_LENGTH_IN_OCTETS).toString('base64');\n    const encryptionKey = hashRawStringArray(SU, c).slice(0, nacl.secretbox.keyLength);\n    const nonce = nacl.randomBytes(nacl.secretbox.nonceLength);\n    const hashedPassword = await hashPassword(password, authSalt);\n    const encryptedArgsCiphertext = nacl.secretbox(Buffer.from(hashedPassword), nonce, encryptionKey);\n    const encryptedArgs = Buffer.concat([nonce, encryptedArgsCiphertext]);\n    return [contractSalt, base64ToBase64url(encryptedArgs.toString('base64'))];\n};\n", "export const AUTHSALT = 'AUTHSALT';\nexport const CONTRACTSALT = 'CONTRACTSALT';\nexport const CS = 'CS';\nexport const SU = 'SU';\nexport const SALT_LENGTH_IN_OCTETS = 24;\n", "'use strict'\n\nimport sbp from '@sbp/sbp'\nimport { CURVE25519XSALSA20POLY1305, decrypt, encrypt, generateSalt, keyId, keygen, serializeKey } from '@chelonia/crypto'\n\nconst _instances                       = []\n// Localforage-like API for IndexedDB\nconst localforage = {\n  async ready () {\n    await Promise.all(_instances.map((lazyInitDb) => lazyInitDb()))\n  },\n  createInstance ({ name, storeName }                                     ) {\n    // Open the IndexedDB database\n    // We lazy load the IndexedDB, because before we were loading it when this\n    // file was imported, but on iOS IndexedDB is not available in the service\n    // worker when the PWA is in the background.\n    // <https://bugs.webkit.org/show_bug.cgi?id=283793>\n    // So for that reason, and potentially other situations where IndexedDB\n    // might not be available, we lazy load it like this upon creation.\n    const lazyInitDb = (() => {\n      let promise\n      return () => {\n        if (!promise) {\n          promise = new Promise((resolve, reject) => {\n            if (name.includes('-') || storeName.includes('-')) {\n              reject(new Error('Unsupported characters in name: -'))\n              return\n            }\n\n            const openDB = (version         ) => {\n              // By default `version` is the latest DB version. Initially, we\n              // try to open that, but in some cases (e.g., when manually\n              // deleting the DBs), the schema will be wrong and miss the object\n              // store. In these cases, we need to upgrade the DB by\n              // incrementing the version number to re-create the schema, which\n              // can only be done when the DB is being 'upgraded'.\n              const request = self.indexedDB.open(name + '--' + storeName, version)\n\n              // Create the object store if it doesn't exist\n              request.onupgradeneeded = (event) => {\n                const db = event.target.result\n                db.createObjectStore(storeName)\n              }\n\n              request.onsuccess = (event) => {\n                const db = event.target.result\n                if (!db.objectStoreNames.contains(storeName)) {\n                  return openDB(db.version + 1)\n                }\n\n                resolve(db)\n              }\n\n              request.onerror = (error) => {\n                reject(error)\n              }\n\n              // If this happens, closing all tabs and stopping the SW could\n              // help.\n              request.onblocked = (event) => {\n                reject(new Error('DB is blocked'))\n              }\n            }\n\n            openDB()\n          })\n        }\n        return promise\n      }\n    })()\n\n    _instances.push(lazyInitDb)\n\n    return {\n      async clear () {\n        const db = await lazyInitDb()\n        const transaction = db.transaction([storeName], 'readwrite')\n        const objectStore = transaction.objectStore(storeName)\n        const request = objectStore.clear()\n        return new Promise((resolve, reject) => {\n          request.onsuccess = () => {\n            resolve()\n          }\n          request.onerror = (e) => {\n            reject(e)\n          }\n        })\n      },\n      async getItem (key        ) {\n        const db = await lazyInitDb()\n        const transaction = db.transaction([storeName], 'readonly')\n        const objectStore = transaction.objectStore(storeName)\n        const request = objectStore.get(key)\n        return new Promise((resolve, reject) => {\n          request.onsuccess = (event) => {\n            resolve(event.target.result)\n          }\n          request.onerror = (e) => {\n            reject(e)\n          }\n        })\n      },\n      async removeItem (key        ) {\n        const db = await lazyInitDb()\n        const transaction = db.transaction([storeName], 'readwrite')\n        const objectStore = transaction.objectStore(storeName)\n        const request = objectStore.delete(key)\n        return new Promise((resolve, reject) => {\n          request.onsuccess = () => {\n            resolve()\n          }\n          request.onerror = (e) => {\n            reject(e.target.error)\n          }\n        })\n      },\n      async setItem (key        , value     ) {\n        const db = await lazyInitDb()\n        const transaction = db.transaction([storeName], 'readwrite')\n        const objectStore = transaction.objectStore(storeName)\n        const request = objectStore.put(value, key)\n        return new Promise((resolve, reject) => {\n          request.onsuccess = () => {\n            resolve()\n          }\n          request.onerror = (e) => {\n            reject(e.target.error)\n          }\n        })\n      }\n    }\n  }\n}\n\nexport const generateEncryptionParams = async (stateKeyEncryptionKeyFn                                                            ) =>                               \n                               \n               \n                                     \n                                     {\n  // Create the necessary keys\n  // First, we generate the state encryption key\n  const stateEncryptionKey = keygen(CURVE25519XSALSA20POLY1305)\n  const stateEncryptionKeyId = keyId(stateEncryptionKey)\n  const stateEncryptionKeyS = serializeKey(stateEncryptionKey, true)\n  const stateEncryptionKeyP = serializeKey(stateEncryptionKey, false)\n\n  // Once we have the state encryption key, we generate a salt\n  const salt = generateSalt()\n\n  // We use the salt, the state encryption key ID and the password to\n  // derive a key to encrypt the state encryption key\n  // This key is not stored anywhere, but is used for reconstructing\n  // the state on a fresh session\n  const stateKeyEncryptionKey = await stateKeyEncryptionKeyFn(stateEncryptionKeyId, salt)\n\n  // Once everything is place, encrypt the state encryption key\n  const encryptedStateEncryptionKey = encrypt(stateKeyEncryptionKey, stateEncryptionKeyS, stateEncryptionKeyId)\n\n  return {\n    encryptionParams: {\n      stateEncryptionKeyId,\n      salt,\n      encryptedStateEncryptionKey\n    },\n    stateEncryptionKeyP\n  }\n}\n\nif (process.env.LIGHTWEIGHT_CLIENT !== 'true') {\n  const log = localforage.createInstance({\n    name: 'Group Income',\n    storeName: 'Contracts'\n  })\n  // use localforage for storage\n  sbp('sbp/selectors/overwrite', {\n    'chelonia.db/get': key => log.getItem(key),\n    // TODO: handle QuotaExceededError\n    'chelonia.db/set': (key, value) => log.setItem(key, value),\n    'chelonia.db/delete': (key        ) => log.removeItem(key)\n  })\n  sbp('sbp/selectors/lock', ['chelonia.db/get', 'chelonia.db/set', 'chelonia.db/delete'])\n}\n\n// =======================\n// App settings to persist state across sessions\n// =======================\n\nconst appSettings = localforage.createInstance({\n  name: 'Group Income',\n  storeName: 'Settings'\n})\n\n// Utility class to represent an empty state during error handling\nclass EmptyValue extends Error {}\n\nexport const SETTING_CURRENT_USER = '@settings/currentUser'\nexport const SETTING_CHELONIA_STATE = 'CHELONIA_STATE'\n\nsbp('sbp/selectors/register', {\n  'gi.db/ready': function () {\n    return localforage.ready()\n  },\n  'gi.db/settings/save': function (key        , value     )             {\n  // Items in the DB have a prefix to disambiguate their type.\n  //  'u' means unencrypted data\n  //  'e' means encrypted data\n  //  'k' means that it's a cryptographic key (used for encrypted data)\n  // This allows us to store encrypted and unencrypted states for the same key\n    return appSettings.setItem('u' + key, value)\n  },\n  'gi.db/settings/load': function (key        )               {\n    return appSettings.getItem('u' + key)\n  },\n  'gi.db/settings/delete': function (key        )                  {\n    return appSettings.removeItem('u' + key)\n  },\n  'gi.db/settings/saveEncrypted': async function (key        , value     , encryptionParams     )             {\n    const {\n      stateEncryptionKeyId,\n      salt,\n      encryptedStateEncryptionKey\n    } = encryptionParams\n    // Fetch the session encryption key\n    const stateEncryptionKeyP = await appSettings.getItem('k' + stateEncryptionKeyId)\n    if (!stateEncryptionKeyP) throw new Error(`Unable to retrieve the key corresponding to key ID ${stateEncryptionKeyId}`)\n    // Encrypt the current state\n    const encryptedState = encrypt(stateEncryptionKeyP, JSON.stringify(value), key)\n    // Save the four fields of the encrypted state. We use base64 encoding to\n    // allow saving any incoming data.\n    //   (1) stateEncryptionKeyId\n    //   (2) salt\n    //   (3) encryptedStateEncryptionKey (used for recovery when re-logging in)\n    //   (4) encryptedState\n    return appSettings.setItem('e' + key, `${btoa(stateEncryptionKeyId)}.${btoa(salt)}.${btoa(encryptedStateEncryptionKey)}.${btoa(encryptedState)}`).finally(() => {\n      // Delete the unencypted setting key, if it exists\n      sbp('gi.db/settings/delete', key).catch(e => {\n        console.error('[gi.db/settings/saveEncrypted] Error deleting unencrypted data for key', key, e)\n      })\n    })\n  },\n  'gi.db/settings/loadEncrypted': function (key        , stateKeyEncryptionKeyFn                                                            )             {\n    return appSettings.getItem('e' + key).then(async (encryptedValue) => {\n      if (!encryptedValue || typeof encryptedValue !== 'string') {\n        throw new EmptyValue(`Unable to retrive state for ${key || ''}`)\n      }\n      // Split the encrypted state into its constituent parts\n      const [stateEncryptionKeyId, salt, encryptedStateEncryptionKey, data] = encryptedValue.split('.').map(x => atob(x))\n\n      // Derive a temporary key from the password to decrypt the state\n      // encryption key\n      const stateKeyEncryptionKey = await stateKeyEncryptionKeyFn(stateEncryptionKeyId, salt)\n\n      // Decrypt the state encryption key\n      const stateEncryptionKeyS = decrypt(stateKeyEncryptionKey, encryptedStateEncryptionKey, stateEncryptionKeyId)\n\n      // Compute the key ID of the decrypted key and verify that it holds\n      // the expected value\n      const stateEncryptionKeyIdActual = keyId(stateEncryptionKeyS)\n      if (stateEncryptionKeyIdActual !== stateEncryptionKeyId) {\n        throw new Error(`Invalid state key ID: expected ${stateEncryptionKeyId} but got ${stateEncryptionKeyIdActual}`)\n      }\n\n      // Now, attempt to decrypt the state\n      const value = JSON.parse(decrypt(stateEncryptionKeyS, data, key || ''))\n\n      // Saving the state encryption key in appSettings is necessary for\n      // functionality such as refreshing the page to work\n      await appSettings.setItem('k' + stateEncryptionKeyId, stateEncryptionKeyS)\n\n      return {\n        encryptionParams: {\n          stateEncryptionKeyId,\n          salt,\n          encryptedStateEncryptionKey\n        },\n        value\n      }\n    }).catch(async (e) => {\n      // If we haven't got a password, we can't proceed deriving keys or\n      // encrypting, so we give up at this point\n      if (!stateKeyEncryptionKeyFn) { throw e }\n\n      // If the state was empty, this isn't necessarily an error\n      if (!(e instanceof EmptyValue)) {\n        console.warn('Error while retrieving local state', e)\n      }\n\n      const { encryptionParams, stateEncryptionKeyP } = await generateEncryptionParams(stateKeyEncryptionKeyFn)\n\n      // Save the state encryption key to local storage\n      await appSettings.setItem('k' + encryptionParams.stateEncryptionKeyId, stateEncryptionKeyP)\n\n      return {\n        encryptionParams,\n        value: null\n      }\n    })\n  },\n  'gi.db/settings/deleteStateEncryptionKey': function ({ stateEncryptionKeyId })                  {\n    return appSettings.removeItem('k' + stateEncryptionKeyId)\n  },\n  'gi.db/settings/deleteEncrypted': function (key        )                  {\n    return appSettings.removeItem('e' + key)\n  }\n})\n\n// =======================\n// Save file blobs here\n//\n// TODO: handle automatically deleting old files when we\n//       approach cache limits.\n// =======================\n\nconst filesCache = localforage.createInstance({\n  name: 'Group Income',\n  storeName: 'Files Cache'\n})\n\nconst maxFileEntries = 100\n\nsbp('sbp/selectors/register', {\n  'gi.db/filesCache/save': async function (cacheKey        , blob      )             {\n    if (cacheKey.startsWith('__')) throw new Error('Invalid key')\n    const keys = await filesCache.getItem('keys') ?? []\n\n    // We need to perform several operations in the DB, which includes\n    // the operation requested (i.e., saving a file) and updating the `keys`\n    // entry for caching, as well as possibly deleting cached entries.\n    // Because the `keys` entry is a point of contention among calls and we\n    // can only perform a single storage operation at the same time, we use\n    // a queue to ensure that all operations are done atomically.\n    return sbp('okTurtles.eventQueue/queueEvent', 'gi.db/files', () => {\n      return filesCache.setItem(cacheKey, blob).then(async v => {\n        console.log('successfully saved:', cacheKey)\n        const idx = keys.indexOf(cacheKey)\n        if (idx !== -1) {\n          // Remove current entry\n          keys.splice(idx, 1)\n        }\n        // And bring it to the top\n        keys.push(cacheKey)\n        // If the list gets too long, remove the last element\n        if (keys.length > maxFileEntries) {\n          const last = keys.splice(0, keys.length - maxFileEntries)\n          await Promise.all(last.map((e) => filesCache.removeItem(e)))\n        }\n        // Save the new current keys\n        await filesCache.setItem('keys', keys)\n      }).catch(e => {\n        console.error('error saving:', cacheKey, e)\n      })\n    })\n  },\n  'gi.db/filesCache/load': async function (cacheKey        )                {\n    if (cacheKey.startsWith('__')) throw new Error('Invalid key')\n    const file = await filesCache.getItem(cacheKey)\n    if (file) {\n      // No await here so that we can return early\n      sbp('okTurtles.eventQueue/queueEvent', 'gi.db/files', async () => {\n        const keys = await filesCache.getItem('keys') ?? []\n        const idx = keys.indexOf(cacheKey)\n        if (idx !== -1) {\n          // Bring entry to the top\n          keys.splice(idx, 1)\n          keys.push(cacheKey)\n          await filesCache.setItem('keys', keys)\n        }\n      }).catch(e => {\n        console.error('[gi.db/filesCache/load] Error updating keys')\n      })\n    }\n    return ((file     )      )\n  },\n  'gi.db/filesCache/delete': async function (cacheKey        )                {\n    if (cacheKey.startsWith('__')) throw new Error('Invalid key')\n    await filesCache.removeItem(cacheKey)\n    // No await here so that we can return early\n    sbp('okTurtles.eventQueue/queueEvent', 'gi.db/files', async () => {\n      const keys = await filesCache.getItem('keys') ?? []\n      const idx = keys.indexOf(cacheKey)\n      if (idx !== -1) {\n        keys.splice(idx, 1)\n        await filesCache.setItem('keys', keys)\n      }\n    }).catch(e => {\n      console.error('[gi.db/filesCache/delete] Error updating keys')\n    })\n  },\n  'gi.db/filesCache/clear': async function ()                {\n    await filesCache.clear()\n  }\n})\n\n// ======================================\n// Archive for proposals and anything else\n// ======================================\n\nconst archive = localforage.createInstance({\n  name: 'Group Income',\n  storeName: 'Archive'\n})\n\nsbp('sbp/selectors/register', {\n  'gi.db/archive/save': function (key        , value     )             {\n    return archive.setItem(key, value)\n  },\n  'gi.db/archive/load': function (key        )               {\n    return archive.getItem(key)\n  },\n  'gi.db/archive/delete': function (key        )                  {\n    return archive.removeItem(key)\n  },\n  'gi.db/archive/clear': function ()               {\n    return archive.clear()\n  }\n})\n\n// ======================================\n// Application logs, used for the SW logs\n// ======================================\n\nconst logs = localforage.createInstance({\n  name: 'Group Income',\n  storeName: 'Logs'\n})\n\nsbp('sbp/selectors/register', {\n  'gi.db/logs/save': function (key        , value     )             {\n    return logs.setItem(key, value)\n  },\n  'gi.db/logs/load': function (key        )               {\n    return logs.getItem(key)\n  },\n  'gi.db/logs/delete': function (key        )                  {\n    return logs.removeItem(key)\n  },\n  'gi.db/logs/clear': function ()               {\n    return logs.clear()\n  }\n})\n", "'use strict'\n\nimport { ChelErrorResourceGone, ChelErrorUnexpectedHttpResponseCode } from '@chelonia/lib/errors'\n\nexport function handleFetchResult (type        )                    {\n  return function (r        ) {\n    if (!r.ok) {\n      const msg = `${r.status}: ${r.statusText}`\n      // 410 is sometimes special (for example, it can mean that a contract or\n      // a file been deleted)\n      // $FlowFixMe[extra-arg]\n      if (r.status === 404 || r.status === 410) throw new ChelErrorResourceGone(msg, { cause: r.status })\n      throw new ChelErrorUnexpectedHttpResponseCode(msg)\n    }\n    return r[type]()\n  }\n}\n", "// =======================\n// Domain: Data persistence\n// =======================\nimport sbp from '@sbp/sbp';\nconst _store = new Map();\nexport default sbp('sbp/selectors/register', {\n    'okTurtles.data/get': function (key) {\n        return _store.get(key);\n    },\n    'okTurtles.data/set': function (key, data) {\n        _store.set(key, data);\n        return data;\n    },\n    'okTurtles.data/delete': function (key) {\n        return _store.delete(key);\n    },\n    'okTurtles.data/add': function (key, data) {\n        const array = _store.get(key);\n        if (array) {\n            array.push(data);\n        }\n        else {\n            _store.set(key, [data]);\n        }\n    },\n    'okTurtles.data/remove': function (key, data) {\n        const array = _store.get(key);\n        if (array) {\n            const aLen = array.length;\n            const filtered = array.filter((v) => v !== data);\n            _store.set(key, filtered);\n            return aLen - filtered.length;\n        }\n    },\n    'okTurtles.data/apply': function (key, fn) {\n        return fn(_store.get(key));\n    }\n});\n", "// =======================\n// Domain: Event publish/subscribe\n// =======================\nimport sbp from '@sbp/sbp';\nimport '@sbp/okturtles.data';\nconst listenKey = (evt) => `events/${evt}/listeners`;\nexport default sbp('sbp/selectors/register', {\n    'okTurtles.events/_init': function () {\n        this.errorHandler = (event, e) => {\n            console.error(`[okTurtles.events] Error at handler for ${event}`, e);\n        };\n    },\n    'okTurtles.events/on': function (event, handler) {\n        sbp('okTurtles.data/add', listenKey(event), handler);\n        return () => sbp('okTurtles.events/off', event, handler);\n    },\n    'okTurtles.events/once': function (event, handler) {\n        const cbWithOff = (...args) => {\n            handler(...args);\n            sbp('okTurtles.events/off', event, cbWithOff);\n        };\n        return sbp('okTurtles.events/on', event, cbWithOff);\n    },\n    'okTurtles.events/emit': function (event, ...data) {\n        var _a;\n        for (const listener of sbp('okTurtles.data/get', listenKey(event)) || []) {\n            try {\n                listener(...data);\n            }\n            catch (e) {\n                (_a = this.errorHandler) === null || _a === void 0 ? void 0 : _a.call(this, event, e);\n            }\n        }\n    },\n    // almost identical to Vue.prototype.$off, except we require `event` argument\n    'okTurtles.events/off': function (event, handler) {\n        if (handler) {\n            sbp('okTurtles.data/remove', listenKey(event), handler);\n        }\n        else {\n            sbp('okTurtles.data/delete', listenKey(event));\n        }\n    },\n    'okTurtles.events/setErrorHandler': function (errorHandler) {\n        this.errorHandler = errorHandler;\n    }\n});\n", "/* eslint-disable @typescript-eslint/no-this-alias */\nimport '@sbp/okturtles.events';\nimport sbp from '@sbp/sbp';\n// ====== Enums ====== //\nexport const NOTIFICATION_TYPE = Object.freeze({\n    ENTRY: 'entry',\n    DELETION: 'deletion',\n    KV: 'kv',\n    KV_FILTER: 'kv_filter',\n    PING: 'ping',\n    PONG: 'pong',\n    PUB: 'pub',\n    SUB: 'sub',\n    UNSUB: 'unsub',\n    VERSION_INFO: 'version_info'\n});\nexport const REQUEST_TYPE = Object.freeze({\n    PUB: 'pub',\n    SUB: 'sub',\n    UNSUB: 'unsub',\n    PUSH_ACTION: 'push_action',\n    KV_FILTER: 'kv_filter'\n});\nexport const RESPONSE_TYPE = Object.freeze({\n    ERROR: 'error',\n    OK: 'ok'\n});\nexport const PUSH_SERVER_ACTION_TYPE = Object.freeze({\n    SEND_PUBLIC_KEY: 'send-public-key',\n    STORE_SUBSCRIPTION: 'store-subscription',\n    DELETE_SUBSCRIPTION: 'delete-subscription',\n    SEND_PUSH_NOTIFICATION: 'send-push-notification'\n});\n// TODO: verify these are good defaults\nconst defaultOptions = {\n    logPingMessages: process.env.NODE_ENV === 'development' && !process.env.CI,\n    pingTimeout: 45000,\n    maxReconnectionDelay: 60000,\n    maxRetries: 10,\n    minReconnectionDelay: 500,\n    reconnectOnDisconnection: true,\n    reconnectOnOnline: true,\n    // Defaults to false to avoid reconnection attempts in case the server doesn't\n    // respond because of a failed authentication.\n    reconnectOnTimeout: false,\n    reconnectionDelayGrowFactor: 2,\n    timeout: 60000\n};\n// ====== Event name constants ====== //\nexport const PUBSUB_ERROR = 'pubsub-error';\nexport const PUBSUB_RECONNECTION_ATTEMPT = 'pubsub-reconnection-attempt';\nexport const PUBSUB_RECONNECTION_FAILED = 'pubsub-reconnection-failed';\nexport const PUBSUB_RECONNECTION_SCHEDULED = 'pubsub-reconnection-scheduled';\nexport const PUBSUB_RECONNECTION_SUCCEEDED = 'pubsub-reconnection-succeeded';\nexport const PUBSUB_SUBSCRIPTION_SUCCEEDED = 'pubsub-subscription-succeeded';\n// ====== API ====== //\n/**\n * Creates a pubsub client instance.\n *\n * @param {string} url - A WebSocket URL to connect to.\n * @param {Object?} options\n * {object?} handlers - Custom handlers for WebSocket events.\n * {boolean?} logPingMessages - Whether to log received pings.\n * {boolean?} manual - Whether the factory should call 'connect()' automatically.\n *   Also named 'autoConnect' or 'startClosed' in other libraries.\n * {object?} messageHandlers - Custom handlers for different message types.\n * {number?} pingTimeout=45_000 - How long to wait for the server to send a ping, in milliseconds.\n * {boolean?} reconnectOnDisconnection=true - Whether to reconnect after a server-side disconnection.\n * {boolean?} reconnectOnOnline=true - Whether to reconnect after coming back online.\n * {boolean?} reconnectOnTimeout=false - Whether to reconnect after a connection timeout.\n * {number?} timeout=5_000 - Connection timeout duration in milliseconds.\n * @returns {PubSubClient}\n */\nexport function createClient(url, options = {}) {\n    const client = {\n        customEventHandlers: options.handlers || {},\n        // The current number of connection attempts that failed.\n        // Reset to 0 upon successful connection.\n        // Used to compute how long to wait before the next reconnection attempt.\n        failedConnectionAttempts: 0,\n        isLocal: /\\/\\/(localhost|127\\.0\\.0\\.1)([:?/]|$)/.test(url),\n        // True if this client has never been connected yet.\n        isNew: true,\n        listeners: Object.create(null),\n        messageHandlers: { ...defaultMessageHandlers, ...options.messageHandlers },\n        nextConnectionAttemptDelayID: undefined,\n        options: { ...defaultOptions, ...options },\n        // Requested subscriptions for which we didn't receive a response yet.\n        pendingSubscriptionSet: new Set(),\n        pendingUnsubscriptionSet: new Set(),\n        pingTimeoutID: undefined,\n        shouldReconnect: true,\n        // The underlying WebSocket object.\n        // A new one is necessary for every connection or reconnection attempt.\n        socket: null,\n        subscriptionSet: new Set(),\n        kvFilter: new Map(),\n        connectionTimeoutID: undefined,\n        url: url.replace(/^http/, 'ws'),\n        ...publicMethods\n    };\n    // Create and save references to reusable event listeners.\n    // Every time a new underlying WebSocket object will be created for this\n    // client instance, these event listeners will be detached from the older\n    // socket then attached to the new one, hereby avoiding both unnecessary\n    // allocations and garbage collections of a bunch of functions every time.\n    // Another benefit is the ability to patch the client protocol at runtime by\n    // updating the client's custom event handler map.\n    for (const name of Object.keys(defaultClientEventHandlers)) {\n        client.listeners[name] = (event) => {\n            try {\n                // Use `.call()` to pass the client via the 'this' binding.\n                ;\n                defaultClientEventHandlers[name].call(client, event);\n                client.customEventHandlers[name]?.call(client, event);\n            }\n            catch (error) {\n                // Do not throw any error but emit an `error` event instead.\n                sbp('okTurtles.events/emit', PUBSUB_ERROR, client, error?.message);\n            }\n        };\n    }\n    // Add global event listeners before the first connection.\n    if (typeof self === 'object' && self instanceof EventTarget) {\n        for (const name of globalEventNames) {\n            globalEventMap.set(name, client.listeners[name]);\n        }\n    }\n    if (!client.options.manual) {\n        client.connect();\n    }\n    return client;\n}\nexport function createMessage(type, data, meta) {\n    const message = { ...meta, type, data };\n    let string;\n    const stringify = function () {\n        if (!string)\n            string = JSON.stringify(this);\n        return string;\n    };\n    Object.defineProperties(message, {\n        [Symbol.toPrimitive]: {\n            value: stringify\n        }\n    });\n    return message;\n}\nexport function createKvMessage(channelID, key, data) {\n    return JSON.stringify({ type: NOTIFICATION_TYPE.KV, channelID, key, data });\n}\nexport function createPubMessage(channelID, data) {\n    return JSON.stringify({ type: NOTIFICATION_TYPE.PUB, channelID, data });\n}\nexport function createRequest(type, data) {\n    // Had to use Object.assign() instead of object spreading to make Flow happy.\n    return JSON.stringify(Object.assign({ type }, data));\n}\n// These handlers receive the PubSubClient instance through the `this` binding.\nconst defaultClientEventHandlers = {\n    // Emitted when the connection is closed.\n    close(event) {\n        const client = this;\n        console.debug('[pubsub] Event: close', event.code, event.reason);\n        client.failedConnectionAttempts++;\n        if (client.socket) {\n            // Remove event listeners to avoid memory leaks.\n            for (const name of socketEventNames) {\n                client.socket.removeEventListener(name, client.listeners[name]);\n            }\n        }\n        client.socket = null;\n        client.clearAllTimers();\n        // This has been commented out to make the client always try to reconnect.\n        // See https://github.com/okTurtles/group-income/issues/1246\n        /*\n        // See \"Status Codes\" https://tools.ietf.org/html/rfc6455#section-7.4\n        switch (event.code) {\n          // TODO: verify that this list of codes is correct.\n          case 1000: case 1002: case 1003: case 1007: case 1008: {\n            client.shouldReconnect = false\n            break\n          }\n          default: break\n        }\n        */\n        // If we should reconnect then consider our current subscriptions as pending again,\n        // waiting to be restored upon reconnection.\n        if (client.shouldReconnect) {\n            client.subscriptionSet.forEach((channelID) => {\n                // Skip contracts from which we had to unsubscribe anyway.\n                if (!client.pendingUnsubscriptionSet.has(channelID)) {\n                    client.pendingSubscriptionSet.add(channelID);\n                }\n            });\n        }\n        // We are no longer subscribed to any contracts since we are now disconnected.\n        client.subscriptionSet.clear();\n        client.pendingUnsubscriptionSet.clear();\n        if (client.shouldReconnect && client.options.reconnectOnDisconnection) {\n            if (client.failedConnectionAttempts > client.options.maxRetries) {\n                sbp('okTurtles.events/emit', PUBSUB_RECONNECTION_FAILED, client);\n            }\n            else {\n                // If we are definetely offline then do not try to reconnect now,\n                // unless the server is local.\n                if (!isDefinetelyOffline() || client.isLocal) {\n                    client.scheduleConnectionAttempt();\n                }\n            }\n        }\n    },\n    // Emitted when an error has occured.\n    // The socket will be closed automatically by the engine if necessary.\n    error(event) {\n        const client = this;\n        // Not all error events should be logged with console.error, for example every\n        // failed connection attempt generates one such event.\n        console.warn('[pubsub] Event: error', event);\n        clearTimeout(client.pingTimeoutID);\n    },\n    // Emitted when a message is received.\n    // The connection will be terminated if the message is malformed or has an\n    // unexpected data type (e.g. binary instead of text).\n    message(event) {\n        const client = this;\n        const { data } = event;\n        if (typeof data !== 'string') {\n            sbp('okTurtles.events/emit', PUBSUB_ERROR, client, {\n                message: `Wrong data type: ${typeof data}`\n            });\n            return client.destroy();\n        }\n        let msg = { type: '' };\n        try {\n            msg = messageParser(data);\n        }\n        catch (error) {\n            sbp('okTurtles.events/emit', PUBSUB_ERROR, client, {\n                message: `Malformed message: ${error?.message}`\n            });\n            return client.destroy();\n        }\n        const handler = client.messageHandlers[msg.type];\n        if (handler) {\n            handler.call(client, msg);\n        }\n        else {\n            throw new Error(`Unhandled message type: ${msg.type}`);\n        }\n    },\n    offline() {\n        console.info('[pubsub] Event: offline');\n        const client = this;\n        client.clearAllTimers();\n        // Reset the connection attempt counter so that we'll start a new\n        // reconnection loop when we are back online.\n        client.failedConnectionAttempts = 0;\n        client.socket?.close();\n    },\n    online() {\n        console.info('[pubsub] Event: online');\n        const client = this;\n        if (client.options.reconnectOnOnline && client.shouldReconnect) {\n            if (!client.socket) {\n                client.failedConnectionAttempts = 0;\n                client.scheduleConnectionAttempt();\n            }\n        }\n    },\n    // Emitted when the connection is established.\n    open() {\n        console.debug('[pubsub] Event: open');\n        const client = this;\n        const { options } = this;\n        client.connectionTimeUsed = undefined;\n        client.clearAllTimers();\n        sbp('okTurtles.events/emit', PUBSUB_RECONNECTION_SUCCEEDED, client);\n        // Set it to -1 so that it becomes 0 on the next `close` event.\n        client.failedConnectionAttempts = -1;\n        client.isNew = false;\n        // Setup a ping timeout if required.\n        // It will close the connection if we don't get any message from the server.\n        if (options.pingTimeout > 0 && options.pingTimeout < Infinity) {\n            client.pingTimeoutID = setTimeout(() => {\n                client.socket?.close();\n            }, options.pingTimeout);\n        }\n        // Send any pending subscription request.\n        client.pendingSubscriptionSet.forEach((channelID) => {\n            const kvFilter = this.kvFilter.get(channelID);\n            client.socket?.send(createRequest(REQUEST_TYPE.SUB, kvFilter ? { channelID, kvFilter } : { channelID }));\n        });\n        // There should be no pending unsubscription since we just got connected.\n    },\n    'reconnection-attempt'() {\n        console.info('[pubsub] Trying to reconnect...');\n    },\n    'reconnection-succeeded'() {\n        console.info('[pubsub] Connection re-established');\n    },\n    'reconnection-failed'() {\n        console.warn('[pubsub] Reconnection failed');\n        const client = this;\n        client.destroy();\n    },\n    'reconnection-scheduled'(event) {\n        const { delay, nth } = event.detail;\n        console.info(`[pubsub] Scheduled connection attempt ${nth} in ~${delay} ms`);\n    },\n    'subscription-succeeded'(event) {\n        const { channelID } = event.detail;\n        console.debug(`[pubsub] Subscribed to channel ${channelID}`);\n    }\n};\n// These handlers receive the PubSubClient instance through the `this` binding.\nconst defaultMessageHandlers = {\n    [NOTIFICATION_TYPE.ENTRY](msg) {\n        console.debug('[pubsub] Received ENTRY:', msg);\n    },\n    [NOTIFICATION_TYPE.PING]({ data }) {\n        const client = this;\n        if (client.options.logPingMessages) {\n            console.debug(`[pubsub] Ping received in ${Date.now() - Number(data)} ms`);\n        }\n        // Reply with a pong message using the same data.\n        // TODO: Type coercion to string because we actually support passing this\n        // object type, but the correct TypeScript type hasn't been written.\n        client.socket?.send(createMessage(NOTIFICATION_TYPE.PONG, data));\n        // Refresh the ping timer, waiting for the next ping.\n        clearTimeout(client.pingTimeoutID);\n        client.pingTimeoutID = setTimeout(() => {\n            client.socket?.close();\n        }, client.options.pingTimeout);\n    },\n    [NOTIFICATION_TYPE.PUB]({ channelID, data }) {\n        console.log(`[pubsub] Received data from channel ${channelID}:`, data);\n        // No need to reply.\n    },\n    [NOTIFICATION_TYPE.KV]({ channelID, key, data }) {\n        console.log(`[pubsub] Received KV update from channel ${channelID} ${key}:`, data);\n        // No need to reply.\n    },\n    [NOTIFICATION_TYPE.SUB](msg) {\n        console.debug(`[pubsub] Ignoring ${msg.type} message:`, msg.data);\n    },\n    [NOTIFICATION_TYPE.UNSUB](msg) {\n        console.debug(`[pubsub] Ignoring ${msg.type} message:`, msg.data);\n    },\n    [RESPONSE_TYPE.ERROR]({ data }) {\n        const { type, channelID, reason } = data;\n        console.warn(`[pubsub] Received ERROR response for ${type} request to ${channelID}`);\n        const client = this;\n        switch (type) {\n            case REQUEST_TYPE.SUB: {\n                console.warn(`[pubsub] Could not subscribe to ${channelID}: ${reason}`);\n                client.pendingSubscriptionSet.delete(channelID);\n                break;\n            }\n            case REQUEST_TYPE.UNSUB: {\n                console.warn(`[pubsub] Could not unsubscribe from ${channelID}: ${reason}`);\n                client.pendingUnsubscriptionSet.delete(channelID);\n                break;\n            }\n            case REQUEST_TYPE.PUSH_ACTION: {\n                const { actionType, message } = data;\n                console.warn(`[pubsub] Received ERROR for PUSH_ACTION request with the action type '${actionType}' and the following message: ${message}`);\n                break;\n            }\n            default: {\n                console.error(`[pubsub] Malformed response: invalid request type ${type}`);\n            }\n        }\n    },\n    [RESPONSE_TYPE.OK]({ data: { type, channelID } }) {\n        const client = this;\n        switch (type) {\n            case REQUEST_TYPE.SUB: {\n                client.pendingSubscriptionSet.delete(channelID);\n                client.subscriptionSet.add(channelID);\n                sbp('okTurtles.events/emit', PUBSUB_SUBSCRIPTION_SUCCEEDED, client, { channelID });\n                break;\n            }\n            case REQUEST_TYPE.UNSUB: {\n                console.debug(`[pubsub] Unsubscribed from ${channelID}`);\n                client.pendingUnsubscriptionSet.delete(channelID);\n                client.subscriptionSet.delete(channelID);\n                client.kvFilter.delete(channelID);\n                break;\n            }\n            case REQUEST_TYPE.KV_FILTER: {\n                console.debug(`[pubsub] Set KV filter for ${channelID}`);\n                break;\n            }\n            default: {\n                console.error(`[pubsub] Malformed response: invalid request type ${type}`);\n            }\n        }\n    }\n};\nconst globalEventNames = ['offline', 'online'];\nconst socketEventNames = ['close', 'error', 'message', 'open'];\n// eslint-disable-next-line func-call-spacing\nconst globalEventMap = new Map();\nif (typeof self === 'object' && self instanceof EventTarget) {\n    // We need to do things in this roundabout way because Chrome doesn't like\n    // these events handlers not being top-level.\n    // `Event handler of 'online' event must be added on the initial evaluation of worker script.`\n    for (const name of globalEventNames) {\n        const handler = (ev) => {\n            const h = globalEventMap.get(name);\n            return h?.(ev);\n        };\n        self.addEventListener(name, handler, false);\n    }\n}\n// `navigator.onLine` can give confusing false positives when `true`,\n// so we'll define `isDefinetelyOffline()` rather than `isOnline()` or `isOffline()`.\n// See https://developer.mozilla.org/en-US/docs/Web/API/Navigator/onLine\nconst isDefinetelyOffline = () => typeof navigator === 'object' && navigator.onLine === false;\n// Parses and validates a received message.\nexport const messageParser = (data) => {\n    const msg = JSON.parse(data);\n    if (typeof msg !== 'object' || msg === null) {\n        throw new TypeError('Message is null or not an object');\n    }\n    const { type } = msg;\n    if (typeof type !== 'string' || type === '') {\n        throw new TypeError('Message type must be a non-empty string');\n    }\n    return msg;\n};\nconst publicMethods = {\n    clearAllTimers() {\n        const client = this;\n        clearTimeout(client.connectionTimeoutID);\n        clearTimeout(client.nextConnectionAttemptDelayID);\n        clearTimeout(client.pingTimeoutID);\n        client.connectionTimeoutID = undefined;\n        client.nextConnectionAttemptDelayID = undefined;\n        client.pingTimeoutID = undefined;\n    },\n    // Performs a connection or reconnection attempt.\n    connect() {\n        const client = this;\n        if (client.socket !== null) {\n            throw new Error('connect() can only be called if there is no current socket.');\n        }\n        if (client.nextConnectionAttemptDelayID) {\n            throw new Error('connect() must not be called during a reconnection delay.');\n        }\n        if (!client.shouldReconnect) {\n            throw new Error('connect() should no longer be called on this instance.');\n        }\n        client.socket = new WebSocket(client.url);\n        // Sometimes (like when using `createMessage`), we want to send objects that\n        // are serialized as strings. Native web sockets don't support objects, so\n        // we use this workaround.\n        client.socket.send = function (data) {\n            const send = WebSocket.prototype.send.bind(this);\n            if (typeof data === 'object' &&\n                typeof data[Symbol.toPrimitive] === 'function') {\n                return send(data[Symbol.toPrimitive]());\n            }\n            return send(data);\n        };\n        if (client.options.timeout) {\n            const start = performance.now();\n            client.connectionTimeoutID = setTimeout(() => {\n                client.connectionTimeoutID = undefined;\n                if (client.options.reconnectOnTimeout) {\n                    client.connectionTimeUsed = performance.now() - start;\n                }\n                client.socket?.close(4000, 'timeout');\n            }, client.options.timeout);\n        }\n        // Attach WebSocket event listeners.\n        for (const name of socketEventNames) {\n            client.socket.addEventListener(name, client.listeners[name]);\n        }\n    },\n    /**\n     * Immediately close the socket, stop listening for events and clear any cache.\n     *\n     * This method is used in unit tests.\n     * - In particular, no 'close' event handler will be called.\n     * - Any incoming or outgoing buffered data will be discarded.\n     * - Any pending messages will be discarded.\n     */\n    destroy() {\n        const client = this;\n        client.clearAllTimers();\n        // Update property values.\n        // Note: do not clear 'client.options'.\n        client.pendingSubscriptionSet.clear();\n        client.pendingUnsubscriptionSet.clear();\n        client.subscriptionSet.clear();\n        // Remove global event listeners.\n        if (typeof self === 'object' && self instanceof EventTarget) {\n            for (const name of globalEventNames) {\n                globalEventMap.delete(name);\n            }\n        }\n        // Remove WebSocket event listeners.\n        if (client.socket) {\n            for (const name of socketEventNames) {\n                client.socket.removeEventListener(name, client.listeners[name]);\n            }\n            client.socket.close();\n        }\n        client.listeners = Object.create(null);\n        client.socket = null;\n        client.shouldReconnect = false;\n    },\n    getNextRandomDelay() {\n        const client = this;\n        const { maxReconnectionDelay, minReconnectionDelay, reconnectionDelayGrowFactor } = client.options;\n        const minDelay = minReconnectionDelay * reconnectionDelayGrowFactor ** client.failedConnectionAttempts;\n        const maxDelay = minDelay * reconnectionDelayGrowFactor;\n        const connectionTimeUsed = client.connectionTimeUsed;\n        client.connectionTimeUsed = undefined;\n        return Math.min(\n        // See issue #1943: Have the connection time used 'eat into' the\n        // reconnection time used\n        Math.max(minReconnectionDelay, connectionTimeUsed ? maxReconnectionDelay - connectionTimeUsed : maxReconnectionDelay), Math.round(minDelay + (0, Math.random)() * (maxDelay - minDelay)));\n    },\n    // Schedules a connection attempt to happen after a delay computed according to\n    // a randomized exponential backoff algorithm variant.\n    scheduleConnectionAttempt() {\n        const client = this;\n        if (!client.shouldReconnect) {\n            throw new Error('Cannot call `scheduleConnectionAttempt()` when `shouldReconnect` is false.');\n        }\n        if (client.nextConnectionAttemptDelayID) {\n            return console.warn('[pubsub] A reconnection attempt is already scheduled.');\n        }\n        const delay = client.getNextRandomDelay();\n        const nth = client.failedConnectionAttempts + 1;\n        client.nextConnectionAttemptDelayID = setTimeout(() => {\n            sbp('okTurtles.events/emit', PUBSUB_RECONNECTION_ATTEMPT, client);\n            client.nextConnectionAttemptDelayID = undefined;\n            client.connect();\n        }, delay);\n        sbp('okTurtles.events/emit', PUBSUB_RECONNECTION_SCHEDULED, client, { delay, nth });\n    },\n    // Can be used to send ephemeral messages outside of any contract log.\n    // Does nothing if the socket is not in the OPEN state.\n    pub(channelID, data) {\n        if (this.socket?.readyState === WebSocket.OPEN) {\n            this.socket.send(createPubMessage(channelID, data));\n        }\n    },\n    /**\n     * Sends a SUB request to the server as soon as possible.\n     *\n     * - The given channel ID will be cached until we get a relevant server\n     * response, allowing us to resend the same request if necessary.\n     * - Any identical UNSUB request that has not been sent yet will be cancelled.\n     * - Calling this method again before the server has responded has no effect.\n     * @param channelID - The ID of the channel whose updates we want to subscribe to.\n     */\n    sub(channelID) {\n        const client = this;\n        const { socket } = this;\n        if (!client.pendingSubscriptionSet.has(channelID)) {\n            client.pendingSubscriptionSet.add(channelID);\n            client.pendingUnsubscriptionSet.delete(channelID);\n            if (socket?.readyState === WebSocket.OPEN) {\n                const kvFilter = client.kvFilter.get(channelID);\n                socket.send(createRequest(REQUEST_TYPE.SUB, kvFilter ? { channelID, kvFilter } : { channelID }));\n            }\n        }\n    },\n    /**\n     * Sends a KV_FILTER request to the server as soon as possible.\n     */\n    setKvFilter(channelID, kvFilter) {\n        const client = this;\n        const { socket } = this;\n        if (kvFilter) {\n            client.kvFilter.set(channelID, kvFilter);\n        }\n        else {\n            client.kvFilter.delete(channelID);\n        }\n        if (client.subscriptionSet.has(channelID)) {\n            if (socket?.readyState === WebSocket.OPEN) {\n                socket.send(createRequest(REQUEST_TYPE.KV_FILTER, kvFilter ? { channelID, kvFilter } : { channelID }));\n            }\n        }\n    },\n    /**\n     * Sends an UNSUB request to the server as soon as possible.\n     *\n     * - The given channel ID will be cached until we get a relevant server\n     * response, allowing us to resend the same request if necessary.\n     * - Any identical SUB request that has not been sent yet will be cancelled.\n     * - Calling this method again before the server has responded has no effect.\n     * @param channelID - The ID of the channel whose updates we want to unsubscribe from.\n     */\n    unsub(channelID) {\n        const client = this;\n        const { socket } = this;\n        if (!client.pendingUnsubscriptionSet.has(channelID)) {\n            client.pendingSubscriptionSet.delete(channelID);\n            client.pendingUnsubscriptionSet.add(channelID);\n            if (socket?.readyState === WebSocket.OPEN) {\n                socket.send(createRequest(REQUEST_TYPE.UNSUB, { channelID }));\n            }\n        }\n    }\n};\n// Register custom SBP event listeners before the first connection.\nfor (const name of Object.keys(defaultClientEventHandlers)) {\n    if (name === 'error' || !socketEventNames.includes(name)) {\n        sbp('okTurtles.events/on', `pubsub-${name}`, (target, detail) => {\n            const ev = new CustomEvent(name, { detail });\n            target.listeners[name].call(target, ev);\n        });\n    }\n}\nexport default {\n    NOTIFICATION_TYPE,\n    REQUEST_TYPE,\n    RESPONSE_TYPE,\n    createClient,\n    createMessage,\n    createRequest\n};\n", "export const PUBSUB_INSTANCE = '@instance/pubsub'\n", "'use strict'\n\n                                                     \n\nimport sbp from '@sbp/sbp'\nimport { HOURS_MILLIS } from '~/frontend/model/contracts/shared/time.js'\nimport { NOTIFICATION_TYPE } from '@chelonia/lib/pubsub'\nimport { handleFetchResult } from './utils/misc.js'\nimport { PUBSUB_INSTANCE } from './instance-keys.js'\n\n// Used by 'backend/translations/get'\n// Do not include 'english.json' here unless the browser might need to download it.\nconst languageFileMap = new Map([\n  ['fr', 'french.json']\n])\n\nsbp('okTurtles.events/on', NOTIFICATION_TYPE.VERSION_INFO, (versionInfo) => {\n  if (versionInfo.GI_VERSION === process.env.GI_VERSION) {\n    // No refresh necessary, we're already at the latest version\n    sessionStorage.removeItem(NOTIFICATION_TYPE.VERSION_INFO)\n    return\n  }\n\n  console.info('New Group Income version available:', versionInfo)\n  // TODO: allow the user to manually reload the page later.\n  try {\n    // Store the current VERSION_INFO in session storage to prevent infinite\n    // reload loops\n    const existingSerialized = sessionStorage.getItem(NOTIFICATION_TYPE.VERSION_INFO)\n    if (existingSerialized) {\n      const existingVersionInfo = JSON.parse(existingSerialized)\n      if (\n        Array.isArray(existingVersionInfo) &&\n        !(Date.now() - existingVersionInfo[0] >= 2.5 * HOURS_MILLIS) &&\n        versionInfo.GI_VERSION === existingVersionInfo[1].GI_VERSION\n      ) {\n        console.warn('[NOTIFICATION_TYPE.VERSION_INFO] A different Group Income version is available, but reloading has failed to address it', { existingVersionInfo, versionInfo })\n        return\n      }\n    }\n\n    sessionStorage.setItem(NOTIFICATION_TYPE.VERSION_INFO, JSON.stringify([Date.now(), versionInfo]))\n  } catch (e) {\n    console.error('[NOTIFICATION_TYPE.VERSION_INFO] Error in handler', e)\n  }\n  // Prevent the client from trying to reconnect when the page starts unloading.\n  sbp('okTurtles.data/get', PUBSUB_INSTANCE)?.destroy()\n  window.location.reload()\n})\n\nexport default (sbp('sbp/selectors/register', {\n  /**\n   * Fetches a JSON object containing translation strings for a given language.\n   *\n   * @param language - A BPC-47 language tag like the value of `navigator.language`.\n   *\n   * @see The 'translations/init' SBP selector in `~view-utils/translations.js`.\n   */\n  async 'backend/translations/get' (language        )                       {\n    // The language code is usually the first part of the language tag.\n    const [languageCode] = language.toLowerCase().split('-')\n    const languageFileName = languageFileMap.get(languageCode) || ''\n\n    if (languageFileName !== '') {\n      return await fetch(`${sbp('okTurtles.data/get', 'API_URL')}/assets/strings/${languageFileName}`)\n        .then(handleFetchResult('json'))\n    }\n  }\n})          )\n", "'use strict'\n\nimport sbp from '@sbp/sbp'\n\n// NOTE: prefix groups with `group/` and users with `user/` ?\nsbp('sbp/selectors/register', {\n  'namespace/lookupCached': (name        ) => {\n    const cache = sbp('state/vuex/state').namespaceLookups\n    return cache?.[name] ?? null\n  },\n  'namespace/lookupReverseCached': (id        ) => {\n    const cache = sbp('state/vuex/state').reverseNamespaceLookups\n    return cache?.[id] ?? null\n  },\n  'namespace/lookup': (name        , { skipCache }                         = { skipCache: false }) => {\n    if (!skipCache) {\n      const cached = sbp('namespace/lookupCached', name)\n      if (cached) {\n        // Wrapping in a Promise to return a consistent type across all execution\n        // paths (next return is a Promise)\n        // This way we can call .then() on the result\n        return Promise.resolve(cached)\n      }\n    }\n    return sbp('sw-namespace/lookup', name, { skipCache })\n  }\n})\n", "'use strict'\n\n// This file handles application-level state (as opposed to component-level\n// state) per: http://vuex.vuejs.org/en/intro.html\n\nimport sbp from '@sbp/sbp'\nimport { CHELONIA_RESET, CONTRACTS_MODIFIED, EVENT_HANDLED, CONTRACT_REGISTERED } from '@chelonia/lib/events'\nimport { LOGOUT } from '~/frontend/utils/events.js'\nimport { KV_LOAD_STATUS } from '~/frontend/utils/constants.js'\nimport Vue from 'vue'\nimport Vuex from 'vuex'\nimport { cloneDeep, debounce } from 'turtledash'\nimport { applyStorageRules } from '~/frontend/model/notifications/utils.js'\nimport getters from './getters.js'\n\n// Vuex modules.\nimport notificationModule from '~/frontend/model/notifications/vuexModule.js'\nimport settingsModule from '~/frontend/model/settings/vuexModule.js'\nimport chatroomModule from '~/frontend/model/chatroom/vuexModule.js'\n\n// Wrapper function for performing contract upgrades and migrations\n// Unused as of https://github.com/okTurtles/group-income/pull/2525. For\n// usage examples see commit 01e9169d9dcb294da1e6aea88d75a185887fa861\n// TODO: Consider moving this function into a different file\n// eslint-disable-next-line no-unused-vars\nconst contractUpdate = (initialState        , updateFn                                                    , contractType         ) => {\n  // Wrapper for the update function. This performs a common check, namely that\n  // the contract is of a certain type, which helps return early\n  const wrappedUpdateFn = contractType\n  // The following disable is because eslint gets confused with 'Object'\n  // eslint-disable-next-line no-use-before-define\n    ? (state        , contractIDHints           ) => {\n        if (Array.isArray(contractIDHints)) {\n          if (!contractIDHints.some(contractID => state.contracts[contractID]?.type === contractType)) {\n            return\n          }\n        }\n        updateFn(state, contractIDHints)\n      }\n    : updateFn\n\n  const resetHandler = () => {\n    sbp('okTurtles.events/off', CONTRACTS_MODIFIED, modifiedHandler)\n  }\n  // This function is called when the set of subscribed contracts is modified\n  const modifiedHandler = (_, { added }) => {\n    // Wait for the added contracts to be ready, then call the update function\n    if (!added.length) return\n    sbp('chelonia/contract/wait', added).then(() => {\n      const state = sbp('state/vuex/state')\n      wrappedUpdateFn(state, added)\n    })\n  }\n\n  // Add event listeners for `CONTRACTS_MODIFIED` and `CHELONIA_RESET` events\n  // `CONTRACTS_MODIFIED` is the important event. This is what allows updating\n  // contracts that are newly synced (for example, when logging in for the\n  // first time or joining an existing group or chatroom)\n  sbp('okTurtles.events/on', CONTRACTS_MODIFIED, modifiedHandler)\n  // Receiving `CHELONIA_RESET` means that a new session has started. To prevent\n  // memory leaks and duplicate handlers, this event will remove the\n  // `CONTRACTS_MODIFIED` handler.\n  sbp('okTurtles.events/once', CHELONIA_RESET, resetHandler)\n\n  // Call the update function in the next tick\n  // We want this (in addition to `CONTRACTS_MODIFIED`) because this way we\n  // can update contracts that already exist, e.g., upon login with a saved\n  // state\n  const existingContracts = Object.keys(initialState.contracts)\n  setTimeout(() => {\n    sbp('chelonia/contract/wait', existingContracts).then(() => {\n      const state = sbp('state/vuex/state')\n      wrappedUpdateFn(state, existingContracts)\n    })\n  }, 0)\n}\n\nVue.use(Vuex)\n\nconst initialState = {\n  currentGroupId: null,\n  contracts: {}, // contractIDs => { type:string, HEAD:string, height:number } (for contracts we've successfully subscribed to)\n  loggedIn: false, // false | { username: string, identityContractID: string }\n  namespaceLookups: Object.create(null), // { [username]: sbp('namespace/lookup') }\n  reverseNamespaceLookups: Object.create(null), // { [contractID]: username }\n  contractSigningKeys: Object.create(null),\n  lastLoggedIn: {}, // Group last logged in information\n  preferences: {}, // { hideDistributionBanner: { [groupContractID]: boolean } }\n  periodicNotificationAlreadyFiredMap: {\n    alreadyFired: Object.create(null), // { notificationKey: boolean },\n    lastRun: Object.create(null) // { notificationKey: number },\n  },\n  kvStoreStatus: {\n    // Context: Various parts of the app are closely related to kv-store. (eg. chatroom's 'readUntil' property is managed\n    //          via kv-store so it's shared across multiple devices of the same user.)\n    //          and thus sometimes need to know whether kv-store data has been loaded from the server and\n    //          'kvStoreStatus' attribute here can be used to check the loading statuses of them.\n    //\n    // { [name]: 'non-init' | 'loading' | 'loaded' }\n    identity: KV_LOAD_STATUS.NON_INIT,\n    group: KV_LOAD_STATUS.NON_INIT\n  }\n}\n\nif (window.matchMedia) {\n  window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', e => {\n    if (sbp('state/vuex/getters').theme === 'system') {\n      store.commit('setTheme', 'system')\n    }\n  })\n}\n\nconst reactiveDate = Vue.observable({ date: new Date() })\nsetInterval(function () {\n  // We want the getters to recalculate all of the payments within 1 minute of us entering a new period.\n  const rememberedPeriodStamp = store.getters.periodStampGivenDate?.(reactiveDate.date)\n  const currentPeriodStamp = store.getters.periodStampGivenDate?.(new Date())\n  if (rememberedPeriodStamp !== currentPeriodStamp) {\n    reactiveDate.date = new Date()\n  }\n}, 60 * 1000)\n\nsbp('sbp/selectors/register', {\n  // 'state' is the Vuex state object, and it can only store JSON-like data\n  'state/vuex/state': () => store.state,\n  'state/vuex/reset': () => {\n    const state = cloneDeep(initialState)\n    state.notifications = notificationModule.state()\n    state.settings = settingsModule.state()\n    state.chatroom = chatroomModule.state()\n    state.idleVue = { isIdle: false }\n    store.replaceState(state)\n  },\n  'state/vuex/replace': (state) => store.replaceState(state),\n  'state/vuex/commit': (id, payload) => store.commit(id, payload),\n  'state/vuex/getters': () => store.getters,\n  'state/vuex/settings': () => store.state.settings,\n  'state/vuex/postUpgradeVerification': function (state        ) {\n    // Note: Update this function when renaming a Vuex module, or implementing a new one,\n    // or adding new settings to the initialState above\n    // Example:\n    // if (!state.preferences) {\n    //   state.preferences = {}\n    // }\n    if (!state.preferences) {\n      state.preferences = {}\n    }\n    if (!state.kvStoreStatus) {\n      state.kvStoreStatus = {\n        identity: KV_LOAD_STATUS.NON_INIT,\n        group: KV_LOAD_STATUS.NON_INIT\n      }\n    }\n    if (state.periodicNotificationAlreadyFiredMap) {\n      if (!state.periodicNotificationAlreadyFiredMap.alreadyFired) {\n        state.periodicNotificationAlreadyFiredMap.alreadyFired = Object.create(null)\n      }\n      if (!state.periodicNotificationAlreadyFiredMap.lastRun) {\n        state.periodicNotificationAlreadyFiredMap.lastRun = Object.create(null)\n      }\n    }\n\n    // Fix missing `namespaceLookups`. See issue\n    // Promise.resolve to coerce into a promise, making `then` safe\n    Promise.resolve(sbp('chelonia/rootState')).then((state) => {\n      if (state.namespaceLookups) return\n\n      const identityContractIDs = Object.entries(state.contracts)\n        // $FlowFixMe[incompatible-use]\n        .filter(([, { type }]) => type === 'gi.contracts/identity')\n        .map(([id]) => id)\n      console.info('Fixing missing lookup entries', identityContractIDs)\n\n      return Promise.all(identityContractIDs.map((id) => {\n        const username = state[id].attributes?.username\n        if (!username) return undefined\n        return sbp('namespace/lookup', username, { skipCache: true })\n      })).catch(e => {\n        console.error('[state/vuex/postUpgradeVerification] Error during lookup', e)\n      })\n    })\n\n    // See issue #2868.\n    // Sometimes it seems like `namespaceLookups` and `reverseNamespaceLookups`\n    // go out of sync. If this happens, the following ensures that they're\n    // consistent again\n    ;(() => {\n      Object.entries(state.namespaceLookups)\n        .filter(([, value]) => !state.reverseNamespaceLookups[value])\n        .forEach(([name, value]) => {\n          state.reverseNamespaceLookups[value] = name\n        })\n      Object.entries(state.reverseNamespaceLookups)\n        .filter(([, name]) => !state.namespaceLookups[name])\n        .forEach(([value, name]) => {\n          state.namespaceLookups[name] = value\n        })\n    })()\n  },\n  'state/vuex/save': (encrypted          , state         ) => {\n    return sbp('okTurtles.eventQueue/queueEvent', 'state/vuex/save', async function () {\n      state = state || store.state\n      // IMPORTANT! DO NOT CALL VUEX commit() in here in any way shape or form!\n      //            Doing so will cause an infinite loop because of store.subscribe below!\n      if (!state.loggedIn) {\n        return\n      }\n\n      const { identityContractID, encryptionParams } = state.loggedIn\n      state.notifications.items = applyStorageRules(state.notifications.items || [], state.notifications.status || {})\n      if (encrypted) {\n        await sbp('gi.db/settings/saveEncrypted', identityContractID, state, encryptionParams)\n      } else {\n        await sbp('gi.db/settings/save', identityContractID, state)\n      }\n    })\n  }\n})\n\n// Mutations must be synchronous! Never call these directly, instead use commit()\n// http://vuex.vuejs.org/en/mutations.html\nconst mutations = {\n  login (state, user) {\n    state.loggedIn = user\n  },\n  // isNewlyCreated will force a redirect to /pending-approval\n  // forceRefresh will force a redirect to / (this is useful for closing\n  // the modal when leaving a group; usually, it's not needed and should be\n  // false)\n  setCurrentGroupId (state, { contractID: currentGroupId, forceRefresh, isNewlyCreated }) {\n    // TODO: unsubscribe from events for all members who are not in this group\n    Vue.set(state, 'currentGroupId', currentGroupId)\n    if (!currentGroupId || forceRefresh) {\n      // If we're joining a group, we should not react to group membership\n      // changes. Instead, we should remain where we are until the join process\n      // is complete.\n      if (sbp('controller/router').history.current.path === '/join') return\n      sbp('controller/router').push({ path: '/' }).catch(() => {})\n    } else if (isNewlyCreated) {\n      sbp('controller/router').push({ path: '/pending-approval' }).catch(() => {})\n    }\n  },\n  setPreferences (state, value) {\n    Vue.set(state, 'preferences', value)\n  },\n  setLastLoggedIn (state, [groupID, value]) {\n    Vue.set(state.lastLoggedIn, groupID, value)\n  },\n  setKvStoreStatus (state, { name, status }) {\n    if (name && status) {\n      if (!Object.values(KV_LOAD_STATUS).includes(status)) {\n        return console.warn(`bad setKvStoreStatus for ${name}: ${status}`)\n      }\n      state.kvStoreStatus[name] = status\n    }\n  },\n  // Since Chelonia directly modifies contract state without using 'commit', we\n  // need this hack to tell the vuex developer tool it needs to refresh the state\n  noop () {}\n}\n\nconst store      = new Vuex.Store({\n  state: cloneDeep(initialState),\n  mutations,\n  getters: {\n    ...getters,\n    // this getter gets recomputed automatically according to the setInterval on reactiveDate\n    currentPaymentPeriodForGroup (state, getters) {\n      return (state) => getters.periodStampGivenDateForGroup(state, reactiveDate.date)\n    },\n    currentPaymentPeriod (state, getters) {\n      return getters.currentPaymentPeriodForGroup(getters.currentGroupState)\n    }\n  },\n  modules: {\n    notifications: notificationModule,\n    settings: settingsModule,\n    chatroom: chatroomModule\n  },\n  strict: false // we're intentionally modifying state outside of commits\n})\n\n// Somewhat of a hack, I'm not sure why this is necessary now, but ever since changing how\n// getters.currentPaymentPeriod works, this is necessary to force the UI to update immediately\n// after a payment is made.\nstore.watch(function (state, getters) {\n  return getters.currentGroupState.settings?.distributionDate\n}, function () {\n  reactiveDate.date = new Date()\n})\n\n// save the state each time it's modified, but debounce it to avoid saving too frequently\nlet logoutInProgress = false\nconst debouncedSave = debounce(() => !logoutInProgress && sbp('state/vuex/save'), 500)\nstore.subscribe((commit) => {\n  if (commit.type !== 'noop') {\n    debouncedSave()\n  }\n}) // for e.g saving notifications that are markedAsRead\n// since Chelonia updates do not pass through calls to 'commit', also save upon EVENT_HANDLED\nsbp('okTurtles.events/on', EVENT_HANDLED, debouncedSave)\n// logout will call 'state/vuex/save', so we clear any debounced calls to it before it gets run\nsbp('sbp/filters/selector/add', 'gi.app/identity/logout', function () {\n  logoutInProgress = true\n  debouncedSave.clear()\n})\nsbp('okTurtles.events/on', LOGOUT, () => { logoutInProgress = false })\n// Since Chelonia directly modifies contract state without using 'commit', we\n// need this hack to tell the vuex developer tool it needs to refresh the state\nif (process.env.NODE_ENV === 'development') {\n  sbp('okTurtles.events/on', EVENT_HANDLED, debounce(() => {\n    store.commit('noop')\n  }, 500))\n}\n\nsbp('okTurtles.events/on', CONTRACT_REGISTERED, async (contract) => {\n  const { contracts: { manifests } } = await sbp('chelonia/config')\n  // check to make sure we're only loading the getters for the version of the contract\n  // that this build of GI was compiled with\n  if (manifests[contract.name] === contract.manifest) {\n    if (contract.name === 'gi.contracts/group') {\n      store.watch(\n        (state, getters) => getters.currentPaymentPeriod,\n        (newPeriod, oldPeriod) => {\n          // This watcher is for automatically syncing 'currentPaymentPeriod' with 'groupSettings.distributionDate'.\n          // Before bringing this logic in, how the app updates the state related to group distribution period was,\n          // 'currentPaymentPeriod': gets auto-updated(t1) in response to the change of 'reactiveDate.date' when it passes into the new period.\n          // 'groupSettings.distributionDate': gets updated manually by calling 'updateCurrentDistribution' function(t2) in group.js\n          // This logic removes the inconsistency that exists between these two from the point of time t1 till t2.\n\n          // Note: if this code gets called when we're in the period before the 1st distribution\n          //       period, then the distributionDate will get updated to the previous distribution date\n          //       (incorrectly). That in turn will cause the Payments page to update and display TODOs\n          //       before it should.\n          // NOTE: `distributionStarted` allows distributionDate can be updated automatically ONLY after\n          //       the distribution is started. And it fixes the issue mentioned above.\n          const distributionDateInSettings = store.getters.groupSettings.distributionDate\n          const distributionStarted = store.getters.groupDistributionStarted(reactiveDate.date)\n          if (oldPeriod && newPeriod && distributionStarted && (newPeriod !== distributionDateInSettings)) {\n            sbp('gi.actions/group/updateDistributionDate', { contractID: store.state.currentGroupId })\n              .catch((e) => {\n                console.error('okTurtles.events/on CONTRACT_REGISTERED Error calling updateDistributionDate', e)\n              })\n          }\n        }\n      )\n    }\n  }\n})\n\nexport default store\n", "import { DAYS_MILLIS } from '~/frontend/model/contracts/shared/time.js'\n\n// The maximum allowed age of read (resp. unread) stored notifications.\n// Not to be confused with maximum storage duration.\n// Notifications older than `MAX_AGE_READ` are automatically marked as read\nexport const MAX_AGE_READ = 60 * DAYS_MILLIS\n// Notifications older than `MAX_AGE_UNREAD` are automatically discarded.\nexport const MAX_AGE_UNREAD = 180 * DAYS_MILLIS\n// The maximum allowed number of stored notifications.\nexport const MAX_COUNT = 30\n// The maximum allowed number of read (resp. unread) stored notifications.\nexport const MAX_COUNT_READ = 20\nexport const MAX_COUNT_UNREAD = 30\n", "                                                   \nimport { DAYS_MILLIS as ONE_DAY, HOURS_MILLIS as ONE_HOUR } from '~/frontend/model/contracts/shared/time.js'\nimport {\n  MAX_AGE_READ,\n  MAX_AGE_UNREAD,\n  MAX_COUNT,\n  MAX_COUNT_READ,\n  MAX_COUNT_UNREAD\n} from './storageConstants.js'\nimport { blake32Hash } from '@chelonia/lib/functions'\nimport { hashableRepresentation } from 'turtledash'\n\n// How much time a notification can stay in the \"new\" state.\nexport const NEW_STATUS_DURATION = 2 * ONE_HOUR\n\nexport function age (notification              )         {\n  return Date.now() - notification.timestamp\n}\n\n/*\n * Creates a copy of the given notification list, possibly sorted and/or truncated to\n * make it suitable for offline storage.\n * The second argument, `status` contains separarately-stored parameters for that\n * notification hash to reflect how notifications are used in the app\n * (specifically, the `read` parameter is stored there).\n *\n * Algorithm steps taken on the copy:\n *\n * 1. Discard any expired notification, e.g. read notifications older than `MAX_AGE_READ`.\n * 2. If `MAX_COUNT_READ` is defined and more than `MAX_COUNT_READ` read\n *    notifications remain, then:\n *   2a. discard every read notification older than the `MAX_COUNT_READ` newest ones.\n * 3. Same step for `MAX_COUNT_UNREAD`.\n * 4. If `MAX_COUNT` is undefined or no more than `MAX_COUNT` notifications remain, then:\n *   4a. sort them by their creation timestamp, in descending order;\n *   4b. return them.\n * 5. Otherwise, take these steps until no more than `MAX_COUNT` notifications remain:\n *   5a. discard read notifications older than 48h;\n *   5b. discard unread notifications older than three weeks;\n *   5c. discard read notifications older than 25h;\n *   5d. discard unread notifications older than two weeks;\n *   5e. discard read notifications;\n *   5f. discard unread notifications, older ones first.\n * 6. Return the remaining notifications.\n */\nexport function applyStorageRules (notifications                , status                             = {})                 {\n  // Apply the MAX_AGE constraint by selecting items that have not yet expired.\n  let items = notifications.filter(item => !isExpired({ ...item, ...status[item.hash] }))\n\n  if (items.length > MAX_COUNT) {\n    // Sort the list by descending priority order.\n    items.sort(compareOnPriority)\n\n    // Apply the MAX_COUNT_READ and MAX_COUNT_UNREAD constraints if necessary.\n    ;[\n      [item => item.read, MAX_COUNT_READ],\n      [item => !item.read, MAX_COUNT_UNREAD]\n    ].forEach(([condition, associatedMaxCount]) => {\n      if (associatedMaxCount !== -1 && associatedMaxCount < MAX_COUNT) {\n        let count = 0\n\n        items = items.filter(item => !condition(item) || (count++, count <= associatedMaxCount))\n      }\n    })\n  }\n  // Check if there are still too many items to store.\n  if (items.length > MAX_COUNT) {\n    // Truncate the list to discard items which have the lowest \"weights\".\n    items.length = MAX_COUNT\n  }\n  // Sort items in chronological order, newest items first.\n  return items.sort(compareOnTimestamp)\n}\n\n// Compares notifications, so that newer ones come first.\nexport function compareOnTimestamp (notificationA              , notificationB              )         {\n  return notificationB.timestamp - notificationA.timestamp\n}\n\n// Compares notifications, so that higher priority ones come first.\nexport function compareOnPriority (notificationA              , notificationB              )         {\n  const TWO_DAYS = 2 * ONE_DAY\n  const FIFTEEN_DAYS = 15 * ONE_DAY\n  const THREE_WEEKS = 21 * ONE_DAY\n  const preferA = -1\n  const preferB = 1\n\n  // If the given notifications are both read or both unread, then prefer the newer one.\n  if (notificationA.read === notificationB.read) {\n    return notificationA.timestamp > notificationB.timestamp ? preferA : preferB\n  } else {\n    // Here, one notification is read, the other is unread.\n    const read = notificationA.read ? notificationA : notificationB\n    const unread = !notificationA.read ? notificationA : notificationB\n\n    // Prefer the unread one by default.\n    let preferred = unread\n\n    // However, under certain conditions we might want to keep the already read one instead.\n    // Note: use a condition array so that it is easy to add/remove conditions later.\n    const conditions = [\n      (read, unread) => age(read) < ONE_DAY && age(unread) > FIFTEEN_DAYS,\n      (read, unread) => age(read) < TWO_DAYS && age(unread) > THREE_WEEKS\n    ]\n    if (conditions.some(condition => condition(read, unread))) {\n      preferred = read\n    }\n    return preferred === notificationA ? preferA : preferB\n  }\n}\n\nexport function isExpired (notification              )          {\n  return age(notification) > maxAge(notification)\n}\n\nexport function isNew (notification              )          {\n  return age(notification) < NEW_STATUS_DURATION\n}\n\nexport function isOlder (notification              )          {\n  return !isNew(notification)\n}\n\nexport function maxAge (notification              )         {\n  return notification.read ? MAX_AGE_READ : MAX_AGE_UNREAD\n}\n\nexport function makeNotificationHash (notification        )         {\n  return blake32Hash(JSON.stringify(hashableRepresentation(notification)))\n}\n\nexport function extractProposalData (proposal        , extraFields         = {})         {\n  return {\n    proposalType: proposal.data.proposalType,\n    proposalData: proposal.data.proposalData,\n    expires_date_ms: proposal.data.expires_date_ms,\n    createdDate: proposal.meta.createdDate,\n    creatorID: proposal.creatorID,\n    ...extraFields\n  }\n}\n", "export default ({\n  chatRoomSettings (state, getters) {\n    return getters.currentChatRoomState.settings || {}\n  },\n  chatRoomAttributes (state, getters) {\n    return getters.currentChatRoomState.attributes || {}\n  },\n  chatRoomMembers (state, getters) {\n    return getters.currentChatRoomState.members || {}\n  },\n  chatRoomRecentMessages (state, getters) {\n    return getters.currentChatRoomState.messages || []\n  },\n  chatRoomPinnedMessages (state, getters) {\n    return (getters.currentChatRoomState.pinnedMessages || []).sort((a, b) => a.height < b.height ? 1 : -1)\n  },\n  isJoinedChatRoomForChatRoom (state, getters) {\n    return (state        , memberID         ) => {\n      if (!memberID) memberID = getters.ourIdentityContractId\n      const members = state?.members\n      return !!members?.[memberID] && !members[memberID].hasLeft\n    }\n  },\n  chatRoomActiveMemberIdsForChatRoom () {\n    return (state        ) => {\n      const members = state?.members\n      if (!members) return []\n      return Object.keys(members).filter(memberID => !members[memberID].hasLeft)\n    }\n  }\n}        )\n", "import { INVITE_STATUS } from '@chelonia/lib/constants'\nimport {\n  INVITE_INITIAL_CREATOR,\n  MAX_SAVED_PERIODS,\n  PROFILE_STATUS,\n  PROPOSAL_GENERIC\n} from '../constants.js'\nimport currencies from '../currencies.js'\nimport { createPaymentInfo, paymentHashesFromPaymentPeriod } from '../functions.js'\nimport { PAYMENT_COMPLETED } from '../payments/index.js'\nimport { addTimeToDate, dateFromPeriodStamp, dateIsWithinPeriod, dateToPeriodStamp, periodStampsForDate } from '../time.js'\n\n/*\n`-ForGroup` pattern:\n\nSome getters (see, e.g., `groupSettings` and `groupSettingsForGroup`) are\nimplemented in pairs, with a variant having the `ForGroup` suffix. This is\nbecause the non-suffixed version is supposed to work for the current group\n(meaning the result of `currentGroupState`), while the suffixed version takes\na group state as a parameter. To avoid redundancy, the non-suffixed version is\nimplemented using the suffixed version (i.e., calling it with\n`getters.currentGroupState` as a parameter).\n\nWhy state and not contract ID?\n\nWe don't use an `Id` version, e.g., `-ForGroupId`, because the ID isn't\nnecessarily known. Contracts rely on a different patter, a getter to get the\ncurrent state (e.g., `currentGroupState`) and using a `ForGroupId` pattern would\nbreak this and require significant refactoring. By using the state, getters are\neasily interoperable in all execution environments we support (i.e., browser\nwindows, SW and contracts)\n\nWhy do we need this?\n\nThe primary motivation for this pattern is to reduce redundancy and improve the\nflexibility of getters, as well as being to re-use complex logic in getters\nfrom most places. Currently, we use getters from three locations: in the 'app'\n(e.g., a browser window), in a service worker and in contracts.\n\nThe 'app' has a current group, so the non-prefixed version\n(e.g., `groupSettings`) is generally sufficient. Contracts have an implicit\ncurrent group, which is the current contract. In these cases, getters work by\ninjecting a `currentGroupState` getter that resolves to the current contract\nstate. However, the service worker doesn't have an implicit or explicit current\ngroup, and 'injecting' a `currentGroupState` can't be done in a way that is\nunderstandable and also is compatible with how Vuex getters work (*), should we\ndecide to move some of the SW code into the app.\n\nSince we want the SW to be able to do things for all groups without having a\nglobal 'current group', and we also don't want to be essentially re-defining\ngetters when they're needed, the prefixed version (e.g., `groupSettingsForGroup`)\ncan be used to bridge the gap and use existing definitions. This approach is\npotentially also useful in the 'app', if we want to access information about a\ngroup which isn't the current one (an example of this could be if we wanted to\nsay \"User 'alice' and you also have group 'foo' in common\").\n\n(*) One potential alternative solution is using a prototype-inheritance or a\nProxy object on the getters object to override `currentGroupState`. This can be\nmade to work in the SW using `this` magic, but is incompatible with the way\nVuex works. Also, this approach is potentially confusing and hard to read.\n\n*/\n\nexport default ({\n  currentGroupOwnerID (state, getters) {\n    return getters.currentGroupState.groupOwnerID\n  },\n  groupSettingsForGroup (state, getters) {\n    return (state) => state.settings || {}\n  },\n  groupSettings (state, getters) {\n    return getters.groupSettingsForGroup(getters.currentGroupState)\n  },\n  profileActive (state, getters) {\n    return member => {\n      const profiles = getters.currentGroupState.profiles\n      return profiles?.[member]?.status === PROFILE_STATUS.ACTIVE\n    }\n  },\n  pendingAccept (state, getters) {\n    return member => {\n      const profiles = getters.currentGroupState.profiles\n      return profiles?.[member]?.status === PROFILE_STATUS.PENDING\n    }\n  },\n  groupProfileForGroup (state, getters) {\n    return (state, member) => {\n      const profiles = state.profiles\n      return profiles && profiles[member] && {\n        ...profiles[member],\n        get lastLoggedIn () {\n          // Yes, technically `currentGroupLastLoggedIn` is for the current\n          // group, but we don't necessarily know the correct group ID here.\n          return getters.currentGroupLastLoggedIn[member] || this.joinedDate\n        }\n      }\n    }\n  },\n  groupProfile (state, getters) {\n    return member => getters.groupProfileForGroup(getters.currentGroupState, member)\n  },\n  groupProfilesForGroup (state, getters) {\n    return (state) => {\n      const profiles = {}\n      for (const member in (state.profiles || {})) {\n        const profile = getters.groupProfileForGroup(state, member)\n        if (profile.status === PROFILE_STATUS.ACTIVE) {\n          profiles[member] = profile\n        }\n      }\n      return profiles\n    }\n  },\n  groupProfiles (state, getters) {\n    return getters.groupProfilesForGroup(getters.currentGroupState)\n  },\n  groupCreatedDate (state, getters) {\n    return getters.groupProfile(getters.currentGroupOwnerID).joinedDate\n  },\n  groupMincomeAmountForGroup (state, getters) {\n    return state => getters.groupSettingsForGroup(state).mincomeAmount\n  },\n  groupMincomeAmount (state, getters) {\n    return getters.groupMincomeAmountForGroup(getters.currentGroupState)\n  },\n  groupMincomeCurrency (state, getters) {\n    return getters.groupSettings.mincomeCurrency\n  },\n  // Oldest period key first.\n  groupSortedPeriodKeysForGroup (state, getters) {\n    return state => {\n      const { distributionDate, distributionPeriodLength } = getters.groupSettingsForGroup(state)\n      if (!distributionDate) return []\n      // The .sort() call might be only necessary in older browser which don't maintain object key ordering.\n      // A comparator function isn't required for now since our keys are ISO strings.\n      const keys = Object.keys(getters.groupPeriodPaymentsForGroup(state)).sort()\n      // Append the waiting period stamp if necessary.\n      if (!keys.length && MAX_SAVED_PERIODS > 0) {\n        keys.push(dateToPeriodStamp(addTimeToDate(distributionDate, -distributionPeriodLength)))\n      }\n      // Append the distribution date if necessary.\n      if (keys[keys.length - 1] !== distributionDate) {\n        keys.push(distributionDate)\n      }\n      return keys\n    }\n  },\n  groupSortedPeriodKeys (state, getters) {\n    return getters.groupSortedPeriodKeysForGroup(getters.currentGroupState)\n  },\n  // paymentTotalfromMembertoMemberID (state, getters) {\n  // // this code was removed in https://github.com/okTurtles/group-income/pull/1691\n  // // because it was unused. feel free to bring it back if needed.\n  // },\n  //\n  // The following three getters return either a known period stamp for the given date,\n  // or a predicted one according to the period length.\n  // They may also return 'undefined', in which case the caller should check archived data.\n  periodStampGivenDateForGroup (state, getters) {\n    return (state, date               , periods           )                => {\n      return periodStampsForDate(date, {\n        knownSortedStamps: periods || getters.groupSortedPeriodKeysForGroup(state),\n        periodLength: getters.groupSettingsForGroup(state).distributionPeriodLength\n      }).current\n    }\n  },\n  periodStampGivenDate (state, getters) {\n    return (date               , periods           )                => {\n      return getters.periodStampGivenDateForGroup(getters.currentGroupState, date, periods)\n    }\n  },\n  periodBeforePeriodForGroup (state, getters) {\n    return (groupState        , periodStamp        , periods           )                => {\n      return periodStampsForDate(periodStamp, {\n        knownSortedStamps: periods || getters.groupSortedPeriodKeysForGroup(groupState),\n        periodLength: getters.groupSettingsForGroup(groupState).distributionPeriodLength\n      }).previous\n    }\n  },\n  periodBeforePeriod (state, getters) {\n    return (periodStamp        , periods           ) => getters.periodBeforePeriodForGroup(getters.currentGroupState, periodStamp, periods)\n  },\n  periodAfterPeriodForGroup (state, getters) {\n    return (groupState        , periodStamp        , periods           )                => {\n      return periodStampsForDate(periodStamp, {\n        knownSortedStamps: periods || getters.groupSortedPeriodKeysForGroup(groupState),\n        periodLength: getters.groupSettingsForGroup(groupState).distributionPeriodLength\n      }).next\n    }\n  },\n  periodAfterPeriod (state, getters) {\n    return (periodStamp        , periods           ) => getters.periodAfterPeriodForGroup(getters.currentGroupState, periodStamp, periods)\n  },\n  dueDateForPeriodForGroup (state, getters) {\n    return (state, periodStamp        , periods           ) => {\n      // NOTE: logically it's should be 1 milisecond before the periodAfterPeriod\n      //       1 mili-second doesn't make any difference to the users\n      //       so periodAfterPeriod is used to make it simple\n      return getters.periodAfterPeriodForGroup(state, periodStamp, periods)\n    }\n  },\n  dueDateForPeriod (state, getters) {\n    return (periodStamp        , periods           ) => {\n      return getters.dueDateForPeriodForGroup(getters.currentGroupState, periodStamp, periods)\n    }\n  },\n  paymentHashesForPeriodForGroup (state, getters) {\n    return (state, periodStamp) => {\n      const periodPayments = getters.groupPeriodPaymentsForGroup(state)[periodStamp]\n      if (periodPayments) {\n        return paymentHashesFromPaymentPeriod(periodPayments)\n      }\n    }\n  },\n  paymentHashesForPeriod (state, getters) {\n    return (periodStamp) => {\n      return getters.paymentHashesForPeriodForGroup(getters.currentGroupState, periodStamp)\n    }\n  },\n  groupMembersByContractID (state, getters) {\n    return Object.keys(getters.groupProfiles)\n  },\n  groupMembersCount (state, getters) {\n    return getters.groupMembersByContractID.length\n  },\n  groupMembersPending (state, getters) {\n    const invites = getters.currentGroupState.invites\n    const vmInvites = getters.currentGroupState._vm.invites\n    const pendingMembers = Object.create(null)\n    for (const inviteKeyId in invites) {\n      if (\n        vmInvites[inviteKeyId].status === INVITE_STATUS.VALID &&\n            invites[inviteKeyId].creatorID !== INVITE_INITIAL_CREATOR\n      ) {\n        pendingMembers[inviteKeyId] = {\n          displayName: invites[inviteKeyId].invitee,\n          invitedBy: invites[inviteKeyId].creatorID,\n          expires: vmInvites[inviteKeyId].expires\n        }\n      }\n    }\n    return pendingMembers\n  },\n  groupShouldPropose (state, getters) {\n    return getters.groupMembersCount >= 3\n  },\n  groupDistributionStarted (state, getters) {\n    return (currentDate        ) => currentDate >= getters.groupSettings?.distributionDate\n  },\n  groupProposalSettings (state, getters) {\n    return (proposalType = PROPOSAL_GENERIC) => {\n      return getters.groupSettings.proposals?.[proposalType]\n    }\n  },\n  groupCurrency (state, getters) {\n    const mincomeCurrency = getters.groupMincomeCurrency\n    return mincomeCurrency && currencies[mincomeCurrency]\n  },\n  groupMincomeFormatted (state, getters) {\n    return getters.withGroupCurrency?.(getters.groupMincomeAmount)\n  },\n  groupMincomeSymbolWithCode (state, getters) {\n    return getters.groupCurrency?.symbolWithCode\n  },\n  groupPeriodPaymentsForGroup (state, getters)         {\n    // note: a lot of code expects this to return an object, so keep the || {} below\n    return (state) => {\n      return state.paymentsByPeriod || {}\n    }\n  },\n  groupPeriodPayments (state, getters)         {\n    return getters.groupPeriodPaymentsForGroup(getters.currentGroupState)\n  },\n  groupThankYousFrom (state, getters)         {\n    return getters.currentGroupState.thankYousFrom || {}\n  },\n  groupStreaks (state, getters)         {\n    return getters.currentGroupState.streaks || {}\n  },\n  groupTotalPledgeAmount (state, getters)         {\n    return getters.currentGroupState.totalPledgeAmount || 0\n  },\n  withGroupCurrency (state, getters) {\n    // TODO: If this group has no defined mincome currency, not even a default one like\n    //       USD, then calling this function is probably an error which should be reported.\n    //       Just make sure the UI doesn't break if an exception is thrown, since this is\n    //       bound to the UI in some location.\n    return getters.groupCurrency?.displayWithCurrency\n  },\n  groupChatRooms (state, getters) {\n    return getters.currentGroupState.chatRooms\n  },\n  groupGeneralChatRoomId (state, getters) {\n    return getters.currentGroupState.generalChatRoomId\n  },\n  // getter is named haveNeedsForThisPeriod instead of haveNeedsForPeriod because it uses\n  // getters.groupProfiles - and that is always based on the most recent values. we still\n  // pass in the current period because it's used to set the \"when\" property\n  haveNeedsForThisPeriodForGroup (state, getters) {\n    return (state, currentPeriod        ) => {\n      // NOTE: if we ever switch back to the \"real-time\" adjusted distribution algorithm,\n      //       make sure that this function also handles userExitsGroupEvent\n      const groupProfiles = getters.groupProfilesForGroup(state) // TODO: these should use the haveNeeds for the specific period's distribution period\n      const haveNeeds = []\n      for (const memberID in groupProfiles) {\n        const { incomeDetailsType, joinedDate } = groupProfiles[memberID]\n        if (incomeDetailsType) {\n          const amount = groupProfiles[memberID][incomeDetailsType]\n          const haveNeed = incomeDetailsType === 'incomeAmount' ? amount - getters.groupMincomeAmountForGroup(state) : amount\n          // construct 'when' this way in case we ever use a pro-rated algorithm\n          let when = dateFromPeriodStamp(currentPeriod).toISOString()\n          if (dateIsWithinPeriod({\n            date: joinedDate,\n            periodStart: currentPeriod,\n            periodLength: getters.groupSettingsForGroup(state).distributionPeriodLength\n          })) {\n            when = joinedDate\n          }\n          haveNeeds.push({ memberID, haveNeed, when })\n        }\n      }\n      return haveNeeds\n    }\n  },\n  haveNeedsForThisPeriod (state, getters) {\n    return (currentPeriod        ) => {\n      return getters.haveNeedsForThisPeriodForGroup(getters.currentGroupState, currentPeriod)\n    }\n  },\n  paymentsForPeriodForGroup (state, getters) {\n    return (state, periodStamp) => {\n      const hashes = getters.paymentHashesForPeriodForGroup(state, periodStamp)\n      const events = []\n      if (hashes && hashes.length > 0) {\n        const payments = state.payments\n        for (const paymentHash of hashes) {\n          const payment = payments[paymentHash]\n          if (payment.data.status === PAYMENT_COMPLETED) {\n            events.push(createPaymentInfo(paymentHash, payment))\n          }\n        }\n      }\n      return events\n    }\n  },\n  paymentsForPeriod (state, getters) {\n    return (periodStamp) => {\n      return getters.paymentsForPeriodForGroup(getters.currentGroupState, periodStamp)\n    }\n  }\n  // distributionEventsForMonth (state, getters) {\n  //   return (monthstamp) => {\n  //     // NOTE: if we ever switch back to the \"real-time\" adjusted distribution\n  //     // algorithm, make sure that this function also handles userExitsGroupEvent\n  //     const distributionEvents = getters.haveNeedEventsForMonth(monthstamp)\n  //     const paymentEvents = getters.paymentEventsForMonth(monthstamp)\n  //     distributionEvents.splice(distributionEvents.length, 0, paymentEvents)\n  //     return distributionEvents.sort((a, b) => compareISOTimestamps(a.data.when, b.data.when))\n  //   }\n  // }\n}        )\n", "export default ({\n  loginState (state, getters) {\n    return getters.currentIdentityState.loginState\n  },\n  ourDirectMessages (state, getters) {\n    return getters.currentIdentityState.chatRooms || {}\n  }\n}        )\n", "import { L } from '@common/common.js'\nimport { INVITE_INITIAL_CREATOR, PROFILE_STATUS } from '@model/contracts/shared/constants.js'\nimport { INVITE_STATUS } from '@chelonia/lib/constants'\nimport { adjustedDistribution, unadjustedDistribution } from '@model/contracts/shared/distribution/distribution.js'\nimport { PAYMENT_NOT_RECEIVED } from '@model/contracts/shared/payments/index.js'\nimport chatroomGetters from './contracts/shared/getters/chatroom.js'\nimport groupGetters from './contracts/shared/getters/group.js'\nimport identityGetters from './contracts/shared/getters/identity.js'\n\nconst checkedUsername = (state        , username        , userID        ) => {\n  if (username && state.namespaceLookups?.[username] === userID) {\n    return username\n  }\n}\n\n// Find the 'anyone can join' invite ID. Since there could be multiple, and some\n// of those could have exipred, we need a for loop\nconst anyoneCanJoinInviteId = (invites        , getters        )          =>\n  Object.keys(invites).find(invite =>\n    // First, we want 'anyone can join' invites\n    invites[invite].creatorID === INVITE_INITIAL_CREATOR &&\n    // and that haven't been revoked\n    getters.currentGroupState._vm.invites[invite].status === INVITE_STATUS.VALID &&\n    // and that haven't expired (using negative logic because expires could be\n    // undefined for non expiring-invites)\n    !(getters.currentGroupState._vm.invites[invite].expires < Date.now()) &&\n    // and that that haven't been entirely used up\n    !(getters.currentGroupState._vm.invites[invite].quantity <= 0)\n  )\n\n// https://vuex.vuejs.org/en/getters.html\n// https://vuex.vuejs.org/en/modules.html\nconst getters                                                                         = {\n  // !!  IMPORTANT  !!\n  //\n  // We register pure Vuex getters here, but later on at the bottom of this file,\n  // we will also import into Vuex the contract getters so that they can be reused\n  // without having to be redefined. This is possible because Chelonia contract getters\n  // are designed to be compatible with Vuex getters.\n  //\n  // We will use the getters 'currentGroupState', 'currentIdentityState', and\n  // 'currentChatRoomState' as a \"bridge\" between the contract getters and Vuex.\n  //\n  // This makes it possible for the getters inside of contracts to refer to each\n  // specific contractID instance, while the Vuex version of those getters that\n  // are imported at the bottom of this file (in the listener for CONTRACT_REGISTERED\n  // will reference the state for the specific contractID for either the current group,\n  // the current user identity contract, or the current chatroom we're looking at.\n  //\n  // For getters that get data from only contract state, write them\n  // under the 'getters' key of the object passed to 'chelonia/defineContract'.\n  // See for example: frontend/model/contracts/group.js\n  //\n  // Again, for convenience, we've defined the same getter, `currentGroupState`,\n  // twice, so that we can reuse the same getter definitions both here with Vuex,\n  // and inside of the contracts (e.g. in group.js).\n  //\n  // The 'currentGroupState' here is based off the value of `state.currentGroupId`,\n  // a user preference that does not exist in the group contract state.\n  currentGroupState (state) {\n    // The service worker should not be using this getter.\n    if (process.env.NODE_ENV === 'development' || process.env.CI) {\n      // $FlowFixMe[cannot-resolve-name]\n      if (typeof Window === 'undefined') {\n        const error = new Error('Tried to access currentGroupState from outside a browsing context')\n        Promise.reject(error)\n        throw error\n      }\n    }\n    return state[state.currentGroupId] || {} // avoid \"undefined\" vue errors at inoportune times\n  },\n  currentIdentityState (state) {\n    return (state.loggedIn && state[state.loggedIn.identityContractID]) || {}\n  },\n  ourUsername (state, getters) {\n    return state.loggedIn && getters.usernameFromID(state.loggedIn.identityContractID)\n  },\n  ourPreferences (state) {\n    return state.preferences\n  },\n  ourProfileActive (state, getters) {\n    return getters.profileActive(getters.ourIdentityContractId)\n  },\n  ourPendingAccept (state, getters) {\n    return getters.pendingAccept(getters.ourIdentityContractId)\n  },\n  ourGroupProfileForGroup (state, getters) {\n    return (state) => getters.groupProfileForGroup(state, getters.ourIdentityContractId)\n  },\n  ourGroupProfile (state, getters) {\n    return getters.ourGroupProfileForGroup(getters.currentGroupState)\n  },\n  ourUserDisplayName (state, getters) {\n    // TODO - refactor Profile and Welcome and any other component that needs this\n    const userContract = getters.currentIdentityState || {}\n    return userContract.attributes?.displayName || getters.ourUsername || getters.ourIdentityContractId\n  },\n  ourIdentityContractId (state) {\n    return state.loggedIn && state.loggedIn.identityContractID\n  },\n  ourGroups (state, getters) {\n    const identityContractID = getters.ourIdentityContractId\n    if (!identityContractID) return []\n\n    return Object.keys(state[identityContractID]?.groups || {}).filter(\n      (gId) => !state[identityContractID].groups[gId].hasLeft && state[gId]\n    )\n  },\n  currentGroupLastLoggedIn (state) {\n    return state.lastLoggedIn[state.currentGroupId] || {}\n  },\n  // NOTE: since this getter is written using `getters.ourUsername`, which is based\n  //       on vuexState.loggedIn (a user preference), we cannot use this getter\n  //       into group.js\n  ourContributionSummary (state, getters) {\n    const groupProfiles = getters.groupProfiles\n    const ourIdentityContractId = getters.ourIdentityContractId\n    const ourGroupProfile = getters.ourGroupProfile\n\n    if (!ourGroupProfile || !ourGroupProfile.incomeDetailsType) {\n      return {}\n    }\n\n    const doWeNeedIncome = ourGroupProfile.incomeDetailsType === 'incomeAmount'\n    const distribution = getters.groupIncomeDistribution\n\n    const nonMonetaryContributionsOf = (memberID) => groupProfiles[memberID].nonMonetaryContributions || []\n\n    return {\n      givingMonetary: (() => {\n        if (doWeNeedIncome) { return null }\n        const who = []\n        const whoIds = []\n        const total = distribution\n          .filter(p => p.fromMemberID === ourIdentityContractId)\n          .reduce((acc, payment) => {\n            who.push(getters.userDisplayNameFromID(payment.toMemberID))\n            whoIds.push(payment.toMemberID)\n\n            return acc + payment.amount\n          }, 0)\n\n        return { who, whoIds, total, pledged: ourGroupProfile.pledgeAmount }\n      })(),\n      receivingMonetary: (() => {\n        if (!doWeNeedIncome) { return null }\n        const needed = getters.groupSettings.mincomeAmount - ourGroupProfile.incomeAmount\n        const who = []\n        const whoIds = []\n        const total = distribution\n          .filter(p => p.toMemberID === ourIdentityContractId)\n          .reduce((acc, payment) => {\n            who.push(getters.userDisplayNameFromID(payment.fromMemberID))\n            whoIds.push(payment.fromMemberID)\n\n            return acc + payment.amount\n          }, 0)\n\n        return { who, whoIds, total, needed }\n      })(),\n      receivingNonMonetary: (() => {\n        const listWho = Object.keys(groupProfiles)\n          .filter(memberID => memberID !== ourIdentityContractId && nonMonetaryContributionsOf(memberID).length > 0)\n        const listWhat = listWho.reduce((contr, memberID) => {\n          const displayName = getters.userDisplayNameFromID(memberID)\n          const userContributions = nonMonetaryContributionsOf(memberID)\n\n          userContributions.forEach((what) => {\n            const contributionIndex = contr.findIndex(c => c.what === what)\n\n            if (contributionIndex >= 0) {\n              contr[contributionIndex].who.push(displayName)\n              contr[contributionIndex].whoIds.push(memberID)\n            } else {\n              contr.push({ who: [displayName], whoIds: [memberID], what })\n            }\n          })\n          return contr\n        }, [])\n\n        return listWho.length > 0 ? { what: listWhat, who: listWho } : null\n      })(),\n      givingNonMonetary: (() => {\n        const contributions = ourGroupProfile.nonMonetaryContributions\n\n        return contributions.length > 0 ? contributions : null\n      })()\n    }\n  },\n  usernameFromID (state, getters) {\n    return (userID) => {\n      const profile = getters.ourContactProfilesById[userID]\n      return profile?.username || state.reverseNamespaceLookups[userID] || userID\n    }\n  },\n  userDisplayNameFromID (state, getters) {\n    return (userID) => {\n      if (userID === getters.ourIdentityContractId) {\n        return getters.ourUserDisplayName\n      }\n      const profile = getters.ourContactProfilesById[userID]\n      return profile?.displayName || profile?.username || state.reverseNamespaceLookups[userID] || userID\n    }\n  },\n  thisPeriodPaymentInfoForGroup (state, getters) {\n    return (state) => {\n      return getters.groupPeriodPaymentsForGroup(state)[getters.currentPaymentPeriodForGroup(state)]\n    }\n  },\n  thisPeriodPaymentInfo (state, getters) {\n    return getters.thisPeriodPaymentInfoForGroup(getters.currentGroupState)\n  },\n  latePayments (state, getters) {\n    const periodPayments = getters.groupPeriodPayments\n    if (Object.keys(periodPayments).length === 0) return\n    const ourIdentityContractId = getters.ourIdentityContractId\n    const pPeriod = getters.periodBeforePeriod(getters.currentPaymentPeriod)\n    const pPayments = periodPayments[pPeriod]\n    if (pPayments) {\n      return pPayments.lastAdjustedDistribution.filter(todo => todo.fromMemberID === ourIdentityContractId)\n    }\n  },\n  // used with graphs like those in the dashboard and in the income details modal\n  groupIncomeDistribution (state, getters) {\n    return unadjustedDistribution({\n      haveNeeds: getters.haveNeedsForThisPeriod(getters.currentPaymentPeriod),\n      minimize: false\n    })\n  },\n  // adjusted version of groupIncomeDistribution, used by the payments system\n  groupIncomeAdjustedDistributionForGroup (state, getters) {\n    return (state) => {\n      const paymentInfo = getters.thisPeriodPaymentInfoForGroup(state)\n      if (paymentInfo && paymentInfo.lastAdjustedDistribution) {\n        return paymentInfo.lastAdjustedDistribution\n      } else {\n        const period = getters.currentPaymentPeriodForGroup(state)\n        return adjustedDistribution({\n          distribution: unadjustedDistribution({\n            haveNeeds: getters.haveNeedsForThisPeriodForGroup(state, period),\n            minimize: getters.groupSettingsForGroup(state).minimizeDistribution\n          }),\n          payments: getters.paymentsForPeriodForGroup(state, period),\n          dueOn: getters.dueDateForPeriodForGroup(state, period)\n        })\n      }\n    }\n  },\n  groupIncomeAdjustedDistribution (state, getters) {\n    return getters.groupIncomeAdjustedDistributionForGroup(getters.currentGroupState)\n  },\n  ourPaymentsSentInPeriodForGroup (state, getters) {\n    return (state, period) => {\n      const periodPayments = getters.groupPeriodPaymentsForGroup(state)\n      if (Object.keys(periodPayments).length === 0) return\n      const payments = []\n      const thisPeriodPayments = periodPayments[period]\n      const paymentsFrom = thisPeriodPayments && thisPeriodPayments.paymentsFrom\n      if (paymentsFrom) {\n        const ourIdentityContractId = getters.ourIdentityContractId\n        const allPayments = state.payments\n        for (const toMemberID in paymentsFrom[ourIdentityContractId]) {\n          for (const paymentHash of paymentsFrom[ourIdentityContractId][toMemberID]) {\n            const { data, meta, height } = allPayments[paymentHash]\n\n            payments.push({ hash: paymentHash, height, data, meta, amount: data.amount, period })\n          }\n        }\n      }\n      return payments.sort((paymentA, paymentB) => paymentB.height - paymentA.height)\n    }\n  },\n  ourPaymentsSentInPeriod (state, getters) {\n    return (period) => getters.ourPaymentsSentInPeriodForGroup(getters.currentGroupState, period)\n  },\n  ourPaymentsReceivedInPeriodForGroup (state, getters) {\n    return (state, period) => {\n      const periodPayments = getters.groupPeriodPaymentsForGroup(state)\n      if (Object.keys(periodPayments).length === 0) return\n      const payments = []\n      const thisPeriodPayments = periodPayments[period]\n      const paymentsFrom = thisPeriodPayments && thisPeriodPayments.paymentsFrom\n      if (paymentsFrom) {\n        const ourIdentityContractId = getters.ourIdentityContractId\n        const allPayments = state.payments\n        for (const fromMemberID in paymentsFrom) {\n          for (const toMemberID in paymentsFrom[fromMemberID]) {\n            if (toMemberID === ourIdentityContractId) {\n              for (const paymentHash of paymentsFrom[fromMemberID][toMemberID]) {\n                const { data, meta, height } = allPayments[paymentHash]\n\n                payments.push({ hash: paymentHash, height, data, meta, amount: data.amount })\n              }\n            }\n          }\n        }\n      }\n      return payments.sort((paymentA, paymentB) => paymentB.height - paymentA.height)\n    }\n  },\n  ourPaymentsReceivedInPeriod (state, getters) {\n    return (period) => getters.ourPaymentsReceivedInPeriodForGroup(getters.currentGroupState, period)\n  },\n  ourPaymentsForGroup (state, getters) {\n    return (state) => {\n      const periodPayments = getters.groupPeriodPaymentsForGroup(state)\n      if (Object.keys(periodPayments).length === 0) return\n      const ourIdentityContractId = getters.ourIdentityContractId\n      const cPeriod = getters.currentPaymentPeriodForGroup(state)\n      const pPeriod = getters.periodBeforePeriodForGroup(state, cPeriod)\n      const currentSent = getters.ourPaymentsSentInPeriodForGroup(state, cPeriod)\n      const previousSent = getters.ourPaymentsSentInPeriodForGroup(state, pPeriod)\n      const currentReceived = getters.ourPaymentsReceivedInPeriodForGroup(state, cPeriod)\n      const previousReceived = getters.ourPaymentsReceivedInPeriodForGroup(state, pPeriod)\n\n      // TODO: take into account pending payments that have been sent but not yet completed\n      const todo = () => {\n        return getters.groupIncomeAdjustedDistributionForGroup(state).filter(p => p.fromMemberID === ourIdentityContractId)\n      }\n\n      return {\n        sent: [...currentSent, ...previousSent],\n        received: [...currentReceived, ...previousReceived],\n        todo: todo()\n      }\n    }\n  },\n  ourPayments (state, getters) {\n    return getters.ourPaymentsForGroup(getters.currentGroupState)\n  },\n  ourPaymentsSummary (state, getters) {\n    const isNeeder = getters.ourGroupProfile.incomeDetailsType === 'incomeAmount'\n    const ourIdentityContractId = getters.ourIdentityContractId\n    const isOurPayment = (payment) => {\n      return isNeeder ? payment.toMemberID === ourIdentityContractId : payment.fromMemberID === ourIdentityContractId\n    }\n    const sumUpAmountReducer = (acc, payment) => acc + payment.amount\n    const cPeriod = getters.currentPaymentPeriod\n    const ourAdjustedPayments = getters.groupIncomeAdjustedDistribution.filter(isOurPayment)\n    const receivedOrSent = isNeeder\n      ? getters.ourPaymentsReceivedInPeriod(cPeriod)\n      : getters.ourPaymentsSentInPeriod(cPeriod)\n\n    const markedAsNotReceived = receivedOrSent.filter(payment => payment.data.status === PAYMENT_NOT_RECEIVED)\n    const markedAsNotReceivedTotal = markedAsNotReceived.reduce(sumUpAmountReducer, 0)\n\n    const paymentsTotal = ourAdjustedPayments.length + receivedOrSent.length\n    const nonLateAdjusted = ourAdjustedPayments.filter((p) => !p.isLate)\n    const paymentsDone = paymentsTotal - nonLateAdjusted.length - markedAsNotReceived.length\n    const hasPartials = ourAdjustedPayments.some(p => p.partial)\n    const amountDone = receivedOrSent.reduce(sumUpAmountReducer, 0) - markedAsNotReceivedTotal\n    const amountLeft = ourAdjustedPayments.reduce((acc, payment) => acc + payment.amount, 0) + markedAsNotReceivedTotal\n    const amountTotal = amountDone + amountLeft\n    return {\n      paymentsDone,\n      hasPartials,\n      paymentsTotal,\n      amountDone,\n      amountTotal\n    }\n  },\n  currentWelcomeInvite (state, getters) {\n    const invites = getters.currentGroupState.invites\n    const inviteId = anyoneCanJoinInviteId(invites, getters)\n    const expires = getters.currentGroupState._vm.invites[inviteId].expires\n    return { inviteId, expires }\n  },\n  // list of group names and contractIDs\n  groupsByName (state, getters) {\n    const identityContractID = getters.ourIdentityContractId\n    const groups = state[identityContractID]?.groups\n    if (!groups) return []\n    // The code below was originally Object.entries(...) but changed to .keys()\n    // due to the same flow issue as https://github.com/facebook/flow/issues/5838\n    // we return event pending groups that we haven't finished joining so that we are not stuck\n    // on the /pending-approval page if we are part of another working group already\n    return Object.entries(groups)\n    // $FlowFixMe[incompatible-use]\n      .filter(([, { hasLeft }]) => !hasLeft)\n      .map(([contractID]) => ({ groupName: state[contractID]?.settings?.groupName || L('Pending'), contractID, active: state[contractID]?.profiles?.[identityContractID]?.status === PROFILE_STATUS.ACTIVE }))\n  },\n  profilesByGroup (state, getters) {\n    return groupID => {\n      const profiles = {}\n      if (state.contracts[groupID]?.type !== 'gi.contracts/group') {\n        return profiles\n      }\n      const groupProfiles = state[groupID].profiles || {}\n      for (const member in groupProfiles) {\n        const profile = groupProfiles[member]\n        if (profile.status === PROFILE_STATUS.ACTIVE) {\n          profiles[member] = profile\n        }\n      }\n      return profiles\n    }\n  },\n  groupMembersSorted (state, getters) {\n    const profiles = getters.currentGroupState.profiles\n    if (!profiles || !profiles[getters.ourIdentityContractId]) return []\n    const weJoinedHeight = profiles[getters.ourIdentityContractId].joinedHeight\n    const isNewMember = (memberID) => {\n      if (memberID === getters.ourIdentityContractId) { return false }\n      const memberProfile = profiles[memberID]\n      if (!memberProfile) return false\n      const memberJoinedHeight = memberProfile.joinedHeight\n      const memberJoinedMs = new Date(memberProfile.joinedDate).getTime()\n      const joinedAfterUs = weJoinedHeight < memberJoinedHeight\n      return joinedAfterUs && Date.now() - memberJoinedMs < 604800000 // joined less than 1w (168h) ago.\n    }\n\n    const groupMembersPending = getters.groupMembersPending\n\n    // $FlowFixMe[method-unbinding]\n    return [groupMembersPending, getters.groupProfiles].flatMap(Object.keys)\n      .filter(memberID => getters.groupProfiles[memberID] ||\n          !(getters.groupMembersPending[memberID].expires < Date.now()))\n      .map(memberID => {\n        const { contractID, displayName, username } = getters.globalProfile(memberID) || groupMembersPending[memberID] || (getters.groupProfiles[memberID] ? { contractID: memberID } : {})\n        return {\n          id: memberID, // common unique ID: it can be either the contract ID or the invite key\n          contractID,\n          username,\n          displayName: displayName || username || memberID,\n          invitedBy: getters.groupMembersPending[memberID],\n          isNew: isNewMember(memberID)\n        }\n      })\n      .sort((userA, userB) => {\n        const nameA = userA.displayName.normalize().toUpperCase()\n        const nameB = userB.displayName.normalize().toUpperCase()\n        // Show pending members first\n        if (userA.invitedBy && !userB.invitedBy) { return -1 }\n        if (!userA.invitedBy && userB.invitedBy) { return 1 }\n        // Then new members...\n        if (userA.isNew && !userB.isNew) { return -1 }\n        if (!userA.isNew && userB.isNew) { return 1 }\n        // and sort them all by A-Z\n        return nameA < nameB ? -1 : 1\n      })\n  },\n  groupProposals (state, getters) {\n    return contractID => state[contractID]?.proposals\n  },\n  globalProfile (state, getters) {\n    // get profile from username who is part of current group\n    return memberID => {\n      return getters.ourContactProfilesById[memberID]\n    }\n  },\n  ourContactProfilesByUsername (state, getters) {\n    const profiles = {}\n    Object.keys(state.contracts)\n      .filter(contractID => state.contracts[contractID]?.type === 'gi.contracts/identity')\n      .forEach(contractID => {\n        const attributes = state[contractID].attributes\n        if (attributes) { // NOTE: this is for fixing the error while syncing the identity contracts\n          const username = checkedUsername(state, attributes.username, contractID)\n          if (!username) return\n          profiles[username] = {\n            ...attributes,\n            username,\n            contractID\n          }\n        }\n      })\n    return profiles\n  },\n  ourContactProfilesById (state, getters) {\n    const profiles = {}\n    Object.keys(state.contracts)\n      .filter(contractID => state.contracts[contractID]?.type === 'gi.contracts/identity')\n      .forEach(contractID => {\n        const attributes = state[contractID]?.attributes\n        if (attributes) { // NOTE: this is for fixing the error while syncing the identity contracts\n          const username = checkedUsername(state, attributes.username, contractID)\n          profiles[contractID] = {\n            ...attributes,\n            username,\n            contractID\n          }\n        } else {\n          profiles[contractID] = {\n            contractID\n          }\n        }\n      })\n    // For consistency, add users that were known in the past (since those\n    // contracts will be removed). This keeps mentions working in existing\n    // devices\n    Object.keys(state.reverseNamespaceLookups).forEach((contractID) => {\n      if (profiles[contractID] || state.contracts[contractID] === null) return\n      profiles[contractID] = {\n        username: state.reverseNamespaceLookups[contractID],\n        contractID\n      }\n    })\n    return profiles\n  },\n  currentGroupContactProfilesById (state, getters) {\n    const currentGroupProfileIds = Object.keys(getters.currentGroupState.profiles || {})\n    const filtered = {}\n\n    for (const identityContractID in getters.ourContactProfilesById) {\n      if (currentGroupProfileIds.includes(identityContractID)) {\n        filtered[identityContractID] = getters.ourContactProfilesById[identityContractID]\n      }\n    }\n    return filtered\n  },\n  ourContactsById (state, getters) {\n    return Object.keys(getters.ourContactProfilesById)\n      .sort((userIdA, userIdB) => {\n        const nameA = ((getters.ourContactProfilesById[userIdA].displayName)) || getters.ourContactProfilesById[userIdA].username || userIdA\n        const nameB = ((getters.ourContactProfilesById[userIdB].displayName)) || getters.ourContactProfilesById[userIdB].username || userIdB\n        return nameA.normalize().toUpperCase() > nameB.normalize().toUpperCase() ? 1 : -1\n      })\n  },\n  ourContactsByUsername (state, getters) {\n    return Object.keys(getters.ourContactProfilesByUsername)\n      .sort((usernameA, usernameB) => {\n        const nameA = getters.ourContactProfilesByUsername[usernameA].displayName || usernameA\n        const nameB = getters.ourContactProfilesByUsername[usernameB].displayName || usernameB\n        return nameA.normalize().toUpperCase() > nameB.normalize().toUpperCase() ? 1 : -1\n      })\n  },\n  seenWelcomeScreen (state, getters) {\n    return (\n      getters.currentIdentityState?.groups?.[state.currentGroupId]?.hasLeft ||\n      (\n        getters.ourProfileActive &&\n        getters.currentIdentityState?.groups?.[state.currentGroupId]?.seenWelcomeScreen\n      )\n    )\n  },\n  ...chatroomGetters,\n  ...groupGetters,\n  ...identityGetters\n}\n\nexport default getters\n", "'use strict'\n\nimport sbp from '@sbp/sbp'\nimport Vue from 'vue'\nimport { cloneDeep } from 'turtledash'\nimport { NOTIFICATION_EMITTED, NOTIFICATION_REMOVED, NOTIFICATION_STATUS_LOADED } from '~/frontend/utils/events.js'\nimport getters from './getters.js'\nimport * as keys from './mutationKeys.js'\n                                                   \nimport { compareOnTimestamp } from './utils.js'\n\nsbp('okTurtles.events/on', NOTIFICATION_EMITTED, (notification) => {\n  sbp('state/vuex/commit', keys.ADD_NOTIFICATION, notification)\n})\n\nsbp('okTurtles.events/on', NOTIFICATION_REMOVED, (hashes) => {\n  hashes.forEach(hash => sbp('state/vuex/commit', keys.REMOVE_NOTIFICATION, hash))\n})\n\nsbp('okTurtles.events/on', NOTIFICATION_STATUS_LOADED, (status) => {\n  sbp('state/vuex/commit', 'setNotificationStatus', status)\n})\n\nconst defaultState = {\n  items: [], status: {}\n}\n\nconst mutations = {\n  // Seems necessary because the red badge would not clear upon signing up a new user in Cypress via the bypassUI mechanism.\n  logout (state) {\n    Object.keys(state).forEach(key => {\n      Vue.delete(state, key)\n    })\n    Object.assign(state, cloneDeep(defaultState))\n  },\n\n  [keys.ADD_NOTIFICATION] (state, notification              ) {\n    if (state.items.some(item => item.hash === notification.hash)) {\n      // We cannot throw here, as this code might be called from within a contract side effect.\n      return console.error('[ADD_NOTIFICATION] This notification is already in the store.', notification.hash)\n    }\n    state.items.push(notification)\n    // Sort items in chronological order, newest items first.\n    state.items.sort(compareOnTimestamp)\n  },\n\n  [keys.REMOVE_NOTIFICATION] (state, hash        ) {\n    const index = state.items.findIndex(item => item.hash === hash)\n\n    if (index > -1) {\n      state.items.splice(index, 1)\n    }\n  },\n\n  [keys.REMOVE_ALL_NOTIFICATIONS] (state) {\n    // Just setting the length to zero wouldn't update the view immediately.\n    state.items.splice(0, state.items.length)\n  },\n\n  // Used upon successful login, with notifications from local storage.\n  [keys.SET_NOTIFICATIONS] (state, notifications                ) {\n    state.items.splice(0, state.items.length, ...notifications)\n  },\n\n  setNotificationStatus (state, status) {\n    state.status = status\n  }\n}\n\nexport default ({\n  state: () => cloneDeep(defaultState),\n  getters,\n  mutations\n}        )\n", "import { MAX_AGE_READ, MAX_AGE_UNREAD } from './storageConstants.js'\nimport { age, isNew, isOlder } from './utils.js'\n\nconst getters                                                                                            = {\n  notifications (state, getters, rootState) {\n    return state.items.map(item => {\n      const notification = { ...item, ...state.status[item.hash] }\n      // Notifications older than MAX_AGE_UNREAD are discarded\n      if (age(notification) > MAX_AGE_UNREAD) {\n        return null\n      } else if (!notification.read && age(notification) > MAX_AGE_READ) {\n        // Unread notifications older than MAX_AGE_READ are automatically\n        // marked as read\n        notification.read = true\n      }\n      return notification\n    }).filter(Boolean)\n  },\n  // Notifications relevant to the current group only.\n  currentGroupNotifications (state, getters, rootState) {\n    return getters.notifications.filter(item => item.groupID === rootState.currentGroupId)\n  },\n\n  // Notifications relevant to a specific group.\n  notificationsByGroup (state, getters) {\n    return groupID => getters.notifications.filter(item => item.groupID === groupID)\n  },\n\n  currentGroupUnreadNotificationCount (state, getters) {\n    return getters.currentGroupUnreadNotifications.length\n  },\n\n  // Unread notifications relevant to the current group only.\n  currentGroupUnreadNotifications (state, getters, rootState) {\n    return getters.currentGroupNotifications.filter(item => !item.read)\n  },\n\n  currentNewNotifications (state, getters) {\n    return getters.currentNotifications.filter(isNew)\n  },\n\n  currentNotificationCount (state, getters) {\n    return getters.currentNotifications.length\n  },\n\n  // Notifications relevant to the current group, plus notifications that don't belong to any group in particular.\n  currentNotifications (state, getters, rootState) {\n    return getters.notifications.filter(item => !item.groupID || item.groupID === rootState.currentGroupId)\n  },\n\n  currentOlderNotifications (state, getters) {\n    return getters.currentNotifications.filter(isOlder)\n  },\n\n  currentUnreadNotificationCount (state, getters) {\n    return getters.currentNotifications.filter(item => !item.read).length\n  },\n\n  currentUnreadNotifications (state, getters) {\n    return getters.currentNotifications.filter(item => !item.read)\n  },\n\n  totalUnreadNotificationCount (state, getters) {\n    return getters.notifications.filter(item => !item.read).length\n  },\n\n  // Finds what number to display on a group's avatar badge in the sidebar. Used in GroupsList.vue.\n  unreadGroupNotificationCountFor (state, getters) {\n    return (groupID) => getters.unreadGroupNotificationsFor(groupID).length\n  },\n\n  unreadGroupNotificationsFor (state, getters, rootState) {\n    return (groupID) => (\n      groupID === rootState.currentGroupId\n        ? getters.currentGroupUnreadNotifications\n        : getters.notifications.filter(item => !item.read && item.groupID === groupID)\n    )\n  }\n}\n\nexport default getters\n", "export const ADD_NOTIFICATION = 'addNotification'\nexport const MARK_ALL_NOTIFICATIONS_AS_READ = 'markAllNotificationsAsRead'\nexport const MARK_NOTIFICATION_AS_READ = 'markNotificationAsRead'\nexport const REMOVE_ALL_NOTIFICATIONS = 'removeAllNotifications'\nexport const REMOVE_NOTIFICATION = 'removeNotification'\nexport const SET_NOTIFICATIONS = 'setNotifications'\n", "'use strict'\n\nimport sbp from '@sbp/sbp'\nimport Colors from './colors.js'\nimport { LOGOUT, SET_APP_LOGS_FILTER, THEME_CHANGE } from '@utils/events.js'\nimport { cloneDeep } from 'turtledash'\nimport { THEME_LIGHT, THEME_DARK } from './themes.js'\nimport { DEVICE_SETTINGS } from '@utils/constants.js'\n\nconst checkSystemColor = () => {\n  return window.matchMedia?.('(prefers-color-scheme: dark)').matches\n    ? THEME_DARK\n    : THEME_LIGHT\n}\n\nconst updateMetaThemeTag = (theme        ) => {\n  // update the content of <meta name='theme-color' /> according to the changed theme\n  const metaTag      = document.querySelector('meta[name=\"theme-color\"]')\n\n  if (metaTag) {\n    metaTag.content = theme === THEME_DARK ? '#2E3032' : '#F5F5F5'\n  }\n}\n\nconst defaultTheme = 'system'\nconst defaultColor         = checkSystemColor()\n\nexport const defaultSettings = {\n  appLogsFilter: (((process.env.NODE_ENV === 'development' || new URLSearchParams(location.search).get('debug'))\n    ? ['error', 'warn', 'info', 'debug', 'log']\n    : ['error', 'warn', 'info'])          ),\n  fontSize: 16,\n  increasedContrast: false,\n  notificationEnabled: null, // 3 values: null (unset), true (user-enabled), false (user-disabled)\n  notificationVolume: 1,\n  reducedMotion: false,\n  theme: defaultTheme,\n  themeColor: defaultColor\n}\n\nconst getters = {\n  colors (state) {\n    return Colors[state.themeColor]\n  },\n  fontSize (state) {\n    return state.fontSize\n  },\n  isDarkTheme (state) {\n    return state.themeColor === THEME_DARK\n  },\n  isReducedMotionMode (state) {\n    return state.reducedMotion === true\n  },\n  notificationVolume (state) {\n    return state.notificationVolume\n  },\n  theme (state) {\n    return state.theme\n  }\n}\n\nconst mutations = {\n  resetSettings (state) {\n    Object.assign(state, cloneDeep(defaultSettings))\n  },\n  setAppLogsFilter (state, filter) {\n    state.appLogsFilter = filter\n    sbp('okTurtles.events/emit', SET_APP_LOGS_FILTER, filter)\n  },\n  setFontSize (state, fontSize) {\n    state.fontSize = fontSize\n  },\n  setIncreasedContrast (state, isChecked) {\n    state.increasedContrast = isChecked\n  },\n  setNotificationEnabled (state, enabled) {\n    console.info('[setNotificationEnabled] set to:', enabled)\n    state.notificationEnabled = enabled\n    // if necessary, prevents the service working from ignoring our notificationEnabled\n    // setting (which is not stored in the SW because it's Vuex-only) from requesting push\n    // notifications upon reconnecting to server\n    sbp('sw/deviceSettings/set', DEVICE_SETTINGS.DISABLE_NOTIFICATIONS, !enabled).catch(e => {\n      console.error(`Couldn't set DISABLE_NOTIFICATIONS (${!enabled}): ${e.message}`)\n    })\n    // We do this call to `service-worker` here to avoid DRY violations.\n    // The intent is creating a subscription if none exists and letting the\n    // server know of the subscription.\n    // Additionally, we call this regardless of whether or not `enabled` is equal\n    // to `state.notificationEnabled` before this function was called, just to\n    // increase the likelihood that the server gets the latest and most correct\n    // push URL for us.\n    sbp('service-worker/setup-push-subscription').catch(e => {\n      console.error(`[setNotificationEnabled] Error calling setup-push-subscription (enabled=${enabled})`, e)\n    })\n  },\n  setNotificationVolume (state, value) {\n    state.notificationVolume = value\n  },\n  setReducedMotion (state, isChecked) {\n    state.reducedMotion = isChecked\n  },\n  setTemporaryReducedMotion (state) {\n    const tempSettings = state.reducedMotion\n    state.reducedMotion = true\n    setTimeout(() => {\n      state.reducedMotion = tempSettings\n    }, 300)\n  },\n  setTheme (state, theme) {\n    state.theme = theme\n\n    const themeColor = theme === 'system' ? checkSystemColor() : theme\n    state.themeColor = themeColor\n    sbp('okTurtles.events/emit', THEME_CHANGE, themeColor)\n  }\n}\n\n// Default application settings must apply again when we're no longer logged in (#1344).\nsbp('okTurtles.events/on', LOGOUT, () => sbp('state/vuex/commit', 'resetSettings'))\n\n// make sure to set the status bar color according to the theme setting change.\nsbp('okTurtles.events/on', THEME_CHANGE, updateMetaThemeTag)\n\nexport default ({\n  state: () => cloneDeep(defaultSettings),\n  getters,\n  mutations\n}        )\n", "'use strict'\n\nimport { merge, union } from 'turtledash'\nimport { MESSAGE_NOTIFY_SETTINGS, CHATROOM_PRIVACY_LEVEL } from '@model/contracts/shared/constants.js'\n\nconst getters                                                                                            = {\n  currentChatRoomId (state, getters, rootState) {\n    return state.currentChatRoomIDs[rootState.currentGroupId] || null\n  },\n  currentChatRoomState (state, getters, rootState) {\n    return rootState[getters.currentChatRoomId] || {} // avoid \"undefined\" vue errors at inoportune times\n  },\n  chatNotificationSettings (state) {\n    return Object.assign({\n      publicDefault: {\n        messageNotification: MESSAGE_NOTIFY_SETTINGS.DIRECT_MESSAGES,\n        messageSound: MESSAGE_NOTIFY_SETTINGS.DIRECT_MESSAGES\n      },\n      privateDefault: {\n        messageNotification: MESSAGE_NOTIFY_SETTINGS.ALL_MESSAGES,\n        messageSound: MESSAGE_NOTIFY_SETTINGS.ALL_MESSAGES\n      }\n    }, state.chatNotificationSettings || {})\n  },\n  ourUnreadMessages (state) {\n    return state.unreadMessages || {}\n  },\n  directMessagesByGroup (state, getters, rootState) {\n    return groupID => {\n      const currentGroupDirectMessages = {}\n\n      if (!groupID) {\n        // NOTE: groupID could be null before finish syncing group contracts\n        return currentGroupDirectMessages\n      }\n\n      for (const chatRoomID of Object.keys(getters.ourDirectMessages)) {\n        const chatRoomState = rootState[chatRoomID]\n        const directMessageSettings = getters.ourDirectMessages[chatRoomID]\n        const myIdentityId = getters.ourIdentityContractId\n\n        // NOTE: skip DMs whose chatroom contracts are not synced yet\n        if (!getters.isJoinedChatRoom(chatRoomID, myIdentityId)) {\n          continue\n        }\n        // NOTE: direct messages should be filtered to the ones which are visible and of active group members\n        const members = Object.keys(chatRoomState.members)\n        const isDMToMyself = members.length === 1 && members[0] === myIdentityId\n        // Explicitly don't filter out on `hasLeft` attribute, so that DMs can\n        // still show all participants, past and present.\n        const partners = members\n          .filter(memberID => memberID !== myIdentityId)\n          .sort((p1, p2) => {\n            const p1JoinedDate = new Date(chatRoomState.members[p1].joinedDate).getTime()\n            const p2JoinedDate = new Date(chatRoomState.members[p2].joinedDate).getTime()\n            return p1JoinedDate - p2JoinedDate\n          })\n        // The following line ensured that DMs for former members were hidden.\n        // Until the DM global dashboard is implemented, this check has been\n        // replaced with a check for all members (past and present), so that\n        // a conversation doesn't suddenly become inaccessible.\n        // // const hasActiveMember = partners.some(memberID => Object.keys(getters.profilesByGroup(groupID)).includes(memberID))\n        const hasActiveMember = partners.some(memberID => !!rootState[groupID]?.profiles[memberID])\n        if (directMessageSettings.visible && (isDMToMyself || hasActiveMember)) {\n          // NOTE: lastJoinedParter is chatroom member who has joined the chatroom for the last time.\n          //       His profile picture can be used as the picture of the direct message\n          //       possibly with the badge of the number of partners.\n          const lastJoinedPartner = isDMToMyself ? myIdentityId : partners[partners.length - 1]\n          const lastMsgTimeStamp = chatRoomState.messages?.length > 0\n            ? new Date(chatRoomState.messages[chatRoomState.messages.length - 1].datetime).getTime()\n            : 0\n\n          currentGroupDirectMessages[chatRoomID] = {\n            ...directMessageSettings,\n            members,\n            partners: partners.map(memberID => ({\n              contractID: memberID,\n              username: getters.usernameFromID(memberID),\n              displayName: getters.userDisplayNameFromID(memberID)\n            })),\n            lastJoinedPartner,\n            // TODO: The UI should display display names, usernames and (in the future)\n            // identity contract IDs differently in some way (e.g., font, font size,\n            // prefix (@), etc.) to make it impossible (or at least obvious) to impersonate\n            // users (e.g., 'user1' changing their display name to 'user2')\n            title: isDMToMyself\n              ? getters.userDisplayNameFromID(myIdentityId)\n              : partners.map(cID => getters.userDisplayNameFromID(cID)).join(', '),\n            lastMsgTimeStamp,\n            picture: getters.ourContactProfilesById[lastJoinedPartner]?.picture,\n            isDMToMyself // Can be useful when certain things in UI are meant only for 'DM to myself'\n          }\n        }\n      }\n      return currentGroupDirectMessages\n    }\n  },\n  ourGroupDirectMessages (state, getters, rootState) {\n    return getters.directMessagesByGroup(rootState.currentGroupId)\n  },\n  // NOTE: this getter is used to find the ID of the direct message in the current group\n  //       with the name[s] of partner[s]. Normally it's more useful to find direct message\n  //       by the partners instead of contractID\n  ourGroupDirectMessageFromUserIds (state, getters, rootState) {\n    return (partners) => { // NOTE: string | string[]\n      if (typeof partners === 'string') {\n        partners = [partners]\n      }\n\n      const shouldFindDMToMyself = partners.length === 1 && partners[0] === rootState.loggedIn.identityContractID\n      const currentGroupDirectMessages = getters.ourGroupDirectMessages\n      return Object.keys(currentGroupDirectMessages).find(chatRoomID => {\n        const chatRoomSettings = currentGroupDirectMessages[chatRoomID]\n\n        if (shouldFindDMToMyself) return chatRoomSettings.isDMToMyself\n        else {\n          const cPartners = chatRoomSettings.partners.map(partner => partner.contractID)\n          return cPartners.length === partners.length && union(cPartners, ((partners     )          )).length === partners.length\n        }\n      })\n    }\n  },\n  isGroupDirectMessage (state, getters) {\n    // NOTE: identity contract could not be synced at the time of calling this getter\n    return chatRoomID => !!getters.ourGroupDirectMessages[chatRoomID || getters.currentChatRoomId]\n  },\n  isDirectMessage (state, getters) {\n    // NOTE: identity contract could not be synced at the time of calling this getter\n    return chatRoomID => !!getters.ourDirectMessages[chatRoomID || getters.currentChatRoomId]\n  },\n  isGroupDirectMessageToMyself (state, getters) {\n    return chatRoomID => {\n      const chatRoomSettings = getters.ourGroupDirectMessages[chatRoomID || getters.currentChatRoomId]\n      return !!chatRoomSettings && chatRoomSettings?.isDMToMyself\n    }\n  },\n  isJoinedChatRoom (state, getters, rootState) {\n    return (chatRoomID        , memberID         ) => {\n      return getters.isJoinedChatRoomForChatRoom(rootState[chatRoomID], memberID)\n    }\n  },\n  chatRoomActiveMemberIds (state, getters) {\n    return getters.chatRoomActiveMemberIdsForChatRoom(getters.currentChatRoomState)\n  },\n  currentChatVm (state, getters, rootState) {\n    return rootState?.[getters.currentChatRoomId]?._vm || null\n  },\n  currentChatRoomScrollPosition (state, getters) {\n    return state.chatRoomScrollPosition?.[getters.currentChatRoomId] // undefined means to the latest\n  },\n  currentChatRoomReadUntil (state, getters) {\n    // NOTE: Optional Chaining (?) is necessary when user viewing the chatroom which he is not part of\n    return getters.ourUnreadMessages[getters.currentChatRoomId]?.readUntil // undefined means to the latest\n  },\n  chatRoomUnreadMessages (state, getters) {\n    return (chatRoomID        ) => {\n      // NOTE: Optional Chaining (?) is necessary when user tries to get mentions of the chatroom which he is not part of\n      return getters.ourUnreadMessages[chatRoomID]?.unreadMessages || []\n    }\n  },\n  isChatRoomManuallyMarkedUnread (state, getters) {\n    return (chatroomID        ) => {\n      return Boolean(getters.ourUnreadMessages[chatroomID || getters.currentChatRoomId]?.readUntil?.isManuallyMarked)\n    }\n  },\n  groupUnreadMessages (state, getters, rootState) {\n    return (groupID        ) => {\n      const isGroupDirectMessage = cID => Object.keys(getters.directMessagesByGroup(groupID)).includes(cID)\n      const isGroupChatroom = cID => Object.keys(rootState[groupID]?.chatRooms || {}).includes(cID)\n      return Object.keys(getters.ourUnreadMessages)\n        .filter(cID => isGroupDirectMessage(cID) || isGroupChatroom(cID))\n        .map(cID => getters.ourUnreadMessages[cID].unreadMessages.length)\n        .reduce((sum, n) => sum + n, 0)\n    }\n  },\n  groupIdFromChatRoomId (state, getters, rootState) {\n    return (chatRoomID        ) => Object.keys(rootState.contracts)\n      .find(cId => rootState.contracts[cId]?.type === 'gi.contracts/group' &&\n        Object.keys(rootState[cId].chatRooms).includes(chatRoomID))\n  },\n  chatRoomsInDetail (state, getters, rootState) {\n    const chatRoomsInDetail = merge({}, getters.groupChatRooms)\n    const myIdentityId = rootState.loggedIn.identityContractID\n    for (const contractID in chatRoomsInDetail) {\n      const chatRoom = rootState[contractID]\n      if (chatRoom?.attributes && getters.isJoinedChatRoom(contractID, myIdentityId)) {\n        chatRoomsInDetail[contractID] = {\n          ...chatRoom.attributes,\n          id: contractID,\n          unreadMessagesCount: getters.chatRoomUnreadMessages(contractID).length,\n          joined: true\n        }\n      } else {\n        const { name, privacyLevel } = chatRoomsInDetail[contractID]\n        chatRoomsInDetail[contractID] = { id: contractID, name, privacyLevel, joined: false }\n      }\n    }\n    return chatRoomsInDetail\n  },\n  mentionableChatroomsInDetails (state, getters) {\n    // NOTE: Channel types a user can mention\n    //       1. All public/group channels (regardless of whether joined or not).\n    //       2. A private channel that he/she has joined.\n    return Object.values(getters.chatRoomsInDetail).filter(\n      (details     ) => [CHATROOM_PRIVACY_LEVEL.GROUP, CHATROOM_PRIVACY_LEVEL.PUBLIC].includes(details.privacyLevel) ||\n      (details.privacyLevel === CHATROOM_PRIVACY_LEVEL.PRIVATE && details.joined)\n    )\n  },\n  getChatroomNameById (state, getters) {\n    return chatRoomID => {\n      const found      = Object.values(getters.chatRoomsInDetail).find((details     ) => details.id === chatRoomID)\n      return found ? found.name : null\n    }\n  },\n  chatRoomMembersInSort (state, getters) {\n    return getters.groupMembersSorted\n      .map(member => ({ contractID: member.contractID, username: member.username, displayName: member.displayName }))\n      .filter(member => !!getters.chatRoomMembers[member.contractID]) || []\n  }\n}\n\nexport default getters\n", "'use strict'\n\nimport sbp from '@sbp/sbp'\nimport { cloneDeep } from 'turtledash'\nimport getters from './getters.js'\nimport Vue from 'vue'\n\nconst defaultState = {\n  currentChatRoomIDs: {}, // { [groupId]: currentChatRoomId }\n  pendingChatRoomIDs: {}, // { [groupId]: currentChatRoomId }\n  chatRoomScrollPosition: {}, // [chatRoomID]: messageHash\n  unreadMessages: null, // [chatRoomID]: { readUntil: { messageHash, createdHeight, isManuallyMarked?: boolean }, unreadMessages: [{ messageHash, createdHeight }]}\n  chatNotificationSettings: {} // { [chatRoomID]: { messageNotification: MESSAGE_NOTIFY_SETTINGS, messageSound: MESSAGE_NOTIFY_SETTINGS } }\n}\n\n// mutations\nconst mutations = {\n  setCurrentChatRoomId (state, { groupID, chatRoomID }) {\n    const rootState = sbp('state/vuex/state')\n\n    if (groupID && rootState[groupID]) {\n      if (chatRoomID) {\n        Vue.set(state.currentChatRoomIDs, groupID, chatRoomID)\n      } else {\n        Vue.set(state.currentChatRoomIDs, groupID, rootState[groupID].generalChatRoomId || null)\n      }\n      Vue.delete(state.pendingChatRoomIDs, groupID)\n    } else {\n      if (chatRoomID) {\n        Vue.set(state.currentChatRoomIDs, rootState.currentGroupId, chatRoomID)\n      } else {\n        Vue.set(state.currentChatRoomIDs, rootState.currentGroupId, null)\n      }\n      Vue.delete(state.pendingChatRoomIDs, rootState.currentGroupId)\n    }\n  },\n  setPendingChatRoomId (state, { groupID, chatRoomID }) {\n    const rootState = sbp('state/vuex/state')\n    const rootGetters = sbp('state/vuex/getters')\n\n    if (rootGetters.isJoinedChatRoom(chatRoomID)) {\n      mutations.setCurrentChatRoomId(state, { groupID, chatRoomID })\n      return\n    }\n\n    if (groupID && rootState[groupID]) {\n      if (chatRoomID) {\n        Vue.set(state.pendingChatRoomIDs, groupID, chatRoomID)\n      } else {\n        Vue.set(state.pendingChatRoomIDs, groupID, null)\n      }\n    }\n  },\n  setUnreadMessages (state, value) {\n    Vue.set(state, 'unreadMessages', value)\n  },\n  setChatRoomScrollPosition (state, { chatRoomID, messageHash }) {\n    Vue.set(state.chatRoomScrollPosition, chatRoomID, messageHash)\n  },\n  deleteChatRoomScrollPosition (state, { chatRoomID }) {\n    Vue.delete(state.chatRoomScrollPosition, chatRoomID)\n  },\n  setChatroomNotificationSettings (state, { chatRoomID, settings }) {\n    if (chatRoomID) {\n      if (!state.chatNotificationSettings[chatRoomID]) {\n        Vue.set(state.chatNotificationSettings, chatRoomID, {})\n      }\n      for (const key in settings) {\n        Vue.set(state.chatNotificationSettings[chatRoomID], key, settings[key])\n      }\n    }\n  }\n}\n\nexport default ({\n  state: () => cloneDeep(defaultState),\n  getters,\n  mutations\n}        )\n", "/* script */\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport sbp from '@sbp/sbp'\nimport { mapGetters, mapState } from 'vuex'\nimport { ACCEPTED_GROUP, OPEN_MODAL, PWA_INSTALLABLE } from '../../../frontend/utils/events.js'\nimport BannerSimple from '../../../frontend/views/components/banners/BannerSimple.vue'\nimport ButtonSubmit from '../../../frontend/views/components/ButtonSubmit.vue'\nimport RenderMessageWithMarkdown from '../../../frontend/views/containers/chatroom/chat-mentions/RenderMessageWithMarkdown.js'\nimport SvgCreateGroup from '../../../frontend/assets/svgs/create-group.svg'\nimport SvgJoinGroup from '../../../frontend/assets/svgs/join-group.svg'\nimport { ignoreWhenNavigationCancelled } from '../../../frontend/views/utils/misc.js'\n\nconst __vue_script__ = ({\n  name: 'Home',\n  components: {\n    SvgJoinGroup,\n    SvgCreateGroup,\n    BannerSimple,\n    ButtonSubmit,\n    RenderMessageWithMarkdown\n  },\n  computed: {\n    ...mapGetters([\n      'currentIdentityState',\n      'seenWelcomeScreen'\n    ]),\n    ...mapState([\n      'currentGroupId'\n    ]),\n    isLoggedIn () {\n      return !!this.$store.state.loggedIn\n    }\n  },\n  data () {\n    return {\n      ephemeral: {\n        serverMessages: [],\n        seenWelcomeScreen: false,\n        listener: ({ contractID }) => {\n          if (contractID !== this.currentGroupId) return\n          // For first time joins, force redirect to /pending-approval\n          this.ephemeral.seenWelcomeScreen = false\n        },\n        showPwaPromo: false\n      }\n    }\n  },\n  beforeMount () {\n    sbp('okTurtles.events/on', ACCEPTED_GROUP, this.ephemeral.listener)\n    this.checkPwaInstallability()\n    fetch(`${sbp('okTurtles.data/get', 'API_URL')}/serverMessages`).then(async (r) => {\n      const data = await r.json()\n      this.ephemeral.serverMessages = data.filter((msg) => msg.type === 'giHomeWarning').map((msg) => msg.message)\n    }).catch(e => {\n      console.error('[Home.vue] Error fetching or processing server announcements', e)\n    })\n  },\n  mounted () {\n    this.ephemeral.seenWelcomeScreen = this.seenWelcomeScreen\n    if (this.isLoggedIn && this.currentGroupId) {\n      this.navigateToGroupPage()\n    } else if (this.$route.query.next) {\n      this.openModal('LoginModal')\n    }\n  },\n  destroyed () {\n    sbp('okTurtles.events/off', ACCEPTED_GROUP, this.ephemeral.listener)\n  },\n  methods: {\n    openModal (mode) {\n      sbp('okTurtles.events/emit', OPEN_MODAL, mode)\n    },\n    navigateToGroupPage () {\n      // NOTE:\n      // When browser refresh is triggered, there is an issue that Vue router prematurely decides ('loginGuard' there) that\n      // the user is not signed in when in actual reality user-login is still being processed and then\n      // takes user to 'Home.vue' with the '$route.query.next' being set to the initial url.\n      // In this particular condition, the app needs to immediately redirect user to '$route.query.next'\n      // so that the user stays in the same page after the browser refresh.\n      // (Related GH issue: https://github.com/okTurtles/group-income/issues/1830)\n      const path = this.$route.query.next ?? (this.ephemeral.seenWelcomeScreen ? '/dashboard' : '/pending-approval')\n      this.$router.push({ path }).catch(e => ignoreWhenNavigationCancelled(e, path))\n    },\n    checkPwaInstallability () {\n      this.ephemeral.showPwaPromo = sbp('service-worker/check-pwa-installability')\n      sbp('okTurtles.events/once', PWA_INSTALLABLE, () => {\n        this.ephemeral.showPwaPromo = true\n      })\n    },\n    async onInstallClick () {\n      await sbp('service-worker/trigger-install-prompt')\n    }\n  },\n  watch: {\n    currentGroupId (to) {\n      // Redirect to `/pending-approval` if our profile isn't active or the\n      // welcome screen hasn't been approved\n      this.ephemeral.seenWelcomeScreen = this.seenWelcomeScreen\n      if (to && this.isLoggedIn) {\n        this.navigateToGroupPage()\n      }\n    },\n    isLoggedIn (to) {\n      if (to && this.currentGroupId) {\n        this.navigateToGroupPage()\n      }\n    }\n  }\n}        )\n\n/* template */\nvar __vue_render__ = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (!_vm.currentGroupId)?_c('main',{staticClass:\"c-splash\",attrs:{\"data-test\":\"homeLogo\"}},[(!_vm.isLoggedIn)?_c('header',{key:\"title-login\"},[_c('img',{staticClass:\"logo\",attrs:{\"src\":\"/assets/images/group-income-icon-transparent.png\"}}),_c('i18n',{staticClass:\"is-title-1\",attrs:{\"tag\":\"h1\",\"data-test\":\"welcomeHome\"}},[_vm._v(\"Welcome to Group Income\")])],1):_c('header',{key:\"title-not-login\"},[_c('img',{staticClass:\"logo-2\",attrs:{\"src\":\"/assets/images/logo-transparent.png\"}}),_c('i18n',{staticClass:\"is-subtitle\",attrs:{\"tag\":\"p\"}},[_vm._v(\"Welcome to Group Income\")]),_c('i18n',{staticClass:\"is-title-1\",attrs:{\"tag\":\"h1\",\"data-test\":\"welcomeHomeLoggedIn\"}},[_vm._v(\"Let\u2019s get this party started\")])],1),(!_vm.isLoggedIn)?_c('div',{key:\"body-loggin\",staticClass:\"buttons\"},[_c('i18n',{ref:\"loginBtn\",attrs:{\"tag\":\"button\",\"data-test\":\"loginBtn\"},on:{\"click\":function($event){return _vm.openModal(\"LoginModal\")}}},[_vm._v(\"Login\")]),_c('i18n',{directives:[{name:\"focus\",rawName:\"v-focus\"}],ref:\"signupBtn\",attrs:{\"tag\":\"button\",\"data-test\":\"signupBtn\"},on:{\"click\":function($event){return _vm.openModal(\"SignupModal\")},\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.openModal(\"SignupModal\")}}},[_vm._v(\"Signup\")])],1):_c('div',{key:\"body-create\",staticClass:\"create-or-join\"},[_c('div',{staticClass:\"card\"},[_c('svg-create-group'),_c('i18n',{staticClass:\"is-title-3\",attrs:{\"tag\":\"h3\"}},[_vm._v(\"Create\")]),_c('i18n',{attrs:{\"tag\":\"p\"}},[_vm._v(\"Create a new group and invite your friends.\")]),_c('i18n',{attrs:{\"tag\":\"button\",\"data-test\":\"createGroup\",\"aria-label\":_vm.L(\"Add a group\")},on:{\"click\":function($event){return _vm.openModal(\"GroupCreationModal\")}}},[_vm._v(\"Create Group\")])],1),_c('div',{staticClass:\"card\"},[_c('svg-join-group'),_c('i18n',{staticClass:\"is-title-3\",attrs:{\"tag\":\"h3\"}},[_vm._v(\"Join\")]),_c('i18n',{attrs:{\"tag\":\"p\"}},[_vm._v(\"Enter an existing group using your username.\")]),_c('i18n',{attrs:{\"tag\":\"button\",\"data-test\":\"joinGroup\"},on:{\"click\":function($event){return _vm.openModal(\"GroupJoinModal\")}}},[_vm._v(\"Join a Group\")])],1)]),(!_vm.isLoggedIn && _vm.ephemeral.showPwaPromo)?_c('banner-simple',{staticClass:\"hide-hoverable-device hide-tablet c-pwa-promo\",attrs:{\"severity\":\"general\"},scopedSlots:_vm._u([{key:\"header\",fn:function(){return [_c('i18n',[_vm._v(\"Install this web app on your device for better usability.\")])]},proxy:true}],null,false,1382767684)},[_c('button-submit',{staticClass:\"is-success is-small c-install-btn\",attrs:{\"type\":\"button\"},on:{\"click\":_vm.onInstallClick}},[_vm._v(_vm._s(_vm.L('Install')))])],1):_vm._e(),(!_vm.isLoggedIn && _vm.ephemeral.serverMessages.length > 0)?_c('footer',{staticClass:\"c-footer\"},_vm._l((_vm.ephemeral.serverMessages),function(text){return _c('banner-simple',{staticClass:\"c-demo-warning\",attrs:{\"severity\":\"warning\"}},[_c('render-message-with-markdown',{attrs:{\"text\":text}})],1)}),1):_vm._e()],1):_vm._e()}\nvar __vue_staticRenderFns__ = []\n\n  /* style */\n  const __vue_inject_styles__ = function (inject) {\n    if (!inject) return\n    inject(\"data-v-2fc59f2f_0\", { source: \".c-splash[data-v-2fc59f2f]{display:flex;flex-direction:column;text-align:center;align-items:center;min-height:100%}@media screen and (min-width:769px),print{.c-splash[data-v-2fc59f2f]{justify-content:center}}.logo[data-v-2fc59f2f]{width:8rem;margin:2rem auto}.logo-2[data-v-2fc59f2f]{width:8rem;margin:0 auto 3rem auto}@media screen and (min-width:769px),print{.logo-2[data-v-2fc59f2f]{margin:0;position:absolute;left:1.5rem;top:1.5rem}}@media screen and (min-width:769px),print{.is-subtitle[data-v-2fc59f2f]{margin-top:3rem}}@media screen and (min-width:1200px){.is-subtitle[data-v-2fc59f2f]{margin-top:0}}.buttons[data-v-2fc59f2f]{min-width:230px}.create-or-join[data-v-2fc59f2f]{display:flex;width:100%;flex-wrap:wrap;margin-top:.5rem;justify-content:center;text-align:left}@media screen and (min-width:769px),print{.create-or-join[data-v-2fc59f2f]{text-align:center}}.card[data-v-2fc59f2f]{margin:1.5rem 1.5rem 0 1.5rem;width:100%}@media screen and (min-width:769px),print{.card[data-v-2fc59f2f]{width:24.375rem}}.card h3[data-v-2fc59f2f]{margin-bottom:.25rem}.card svg[data-v-2fc59f2f]{width:6rem;margin-left:1rem;float:right}@media screen and (min-width:769px),print{.card svg[data-v-2fc59f2f]{float:none;width:9.75rem;margin:2.5rem auto 1.5rem auto}}.card .button[data-v-2fc59f2f]{margin-top:2rem}@media screen and (min-width:769px),print{.card .button[data-v-2fc59f2f]{margin-bottom:1rem}}.c-footer[data-v-2fc59f2f]{margin-top:2.25rem;padding:0 1rem;max-width:31.25rem}.c-demo-warning[data-v-2fc59f2f]{text-align:start;margin-block-end:1rem}.c-pwa-promo[data-v-2fc59f2f]{position:fixed;bottom:1.875rem;left:50%;transform:translateX(-50%);z-index:10;text-align:left;width:calc(100vw - 3rem);max-width:31.25rem}.c-pwa-promo[data-v-2fc59f2f]  .c-body{margin-top:1rem;text-align:right}.c-install-btn[data-v-2fc59f2f]{padding-left:1.75rem;padding-right:1.75rem}\", map: undefined, media: undefined })\n\n  }\n  /* scoped */\n  const __vue_scope_id__ = \"data-v-2fc59f2f\"\n  /* module identifier */\n  const __vue_module_identifier__ = undefined\n  /* functional template */\n  const __vue_is_functional_template__ = false\n  /* component normalizer */\n  function __vue_normalize__(\n    template, style, script,\n    scope, functional, moduleIdentifier, shadowMode,\n    createInjector, createInjectorSSR, createInjectorShadow\n  ) {\n    const component = (typeof script === 'function' ? script.options : script) || {}\n\n    // For security concerns, we use only base name in production mode.\n    component.__file = \"style>\\n\"\n\n    if (!component.render) {\n      component.render = template.render\n      component.staticRenderFns = template.staticRenderFns\n      component._compiled = true\n\n      if (functional) component.functional = true\n    }\n\n    component._scopeId = scope\n\n    if (true) {\n      let hook\n      if (false) {\n        // In SSR.\n        hook = function(context) {\n          // 2.3 injection\n          context =\n            context || // cached call\n            (this.$vnode && this.$vnode.ssrContext) || // stateful\n            (this.parent && this.parent.$vnode && this.parent.$vnode.ssrContext) // functional\n          // 2.2 with runInNewContext: true\n          if (!context && typeof __VUE_SSR_CONTEXT__ !== 'undefined') {\n            context = __VUE_SSR_CONTEXT__\n          }\n          // inject component styles\n          if (style) {\n            style.call(this, createInjectorSSR(context))\n          }\n          // register component module identifier for async chunk inference\n          if (context && context._registeredComponents) {\n            context._registeredComponents.add(moduleIdentifier)\n          }\n        }\n        // used by ssr in case component is cached and beforeCreate\n        // never gets called\n        component._ssrRegister = hook\n      }\n      else if (style) {\n        hook = shadowMode \n          ? function(context) {\n              style.call(this, createInjectorShadow(context, this.$root.$options.shadowRoot))\n            }\n          : function(context) {\n              style.call(this, createInjector(context))\n            }\n      }\n\n      if (hook !== undefined) {\n        if (component.functional) {\n          // register for functional component in vue file\n          const originalRender = component.render\n          component.render = function renderWithStyleInjection(h, context) {\n            hook.call(context)\n            return originalRender(h, context)\n          }\n        } else {\n          // inject component registration as beforeCreate hook\n          const existing = component.beforeCreate\n          component.beforeCreate = existing ? [].concat(existing, hook) : [hook]\n        }\n      }\n    }\n\n    return component\n  }\n  /* style inject */\n  function __vue_create_injector__() {\n    const styles = __vue_create_injector__.styles || (__vue_create_injector__.styles = {})\n    const isOldIE =\n      typeof navigator !== 'undefined' &&\n      /msie [6-9]\\\\b/.test(navigator.userAgent.toLowerCase())\n\n    return function addStyle(id, css) {\n      if (document.querySelector('style[data-vue-ssr-id~=\"' + id + '\"]')) return // SSR styles are present.\n\n      const group = isOldIE ? css.media || 'default' : id\n      const style = styles[group] || (styles[group] = { ids: [], parts: [], element: undefined })\n\n      if (!style.ids.includes(id)) {\n        let code = css.source\n        let index = style.ids.length\n\n        style.ids.push(id)\n\n        if (true && css.map) {\n          // https://developer.chrome.com/devtools/docs/javascript-debugging\n          // this makes source maps inside style tags work properly in Chrome\n          code += '\\n/*# sourceURL=' + css.map.sources[0] + ' */'\n          // http://stackoverflow.com/a/26603875\n          code +=\n            '\\n/*# sourceMappingURL=data:application/json;base64,' +\n            btoa(unescape(encodeURIComponent(JSON.stringify(css.map)))) +\n            ' */'\n        }\n\n        if (isOldIE) {\n          style.element = style.element || document.querySelector('style[data-group=' + group + ']')\n        }\n\n        if (!style.element) {\n          const head = document.head || document.getElementsByTagName('head')[0]\n          const el = style.element = document.createElement('style')\n          el.type = 'text/css'\n\n          if (css.media) el.setAttribute('media', css.media)\n          if (isOldIE) {\n            el.setAttribute('data-group', group)\n            el.setAttribute('data-next-index', '0')\n          }\n\n          head.appendChild(el)\n        }\n\n        if (isOldIE) {\n          index = parseInt(style.element.getAttribute('data-next-index'))\n          style.element.setAttribute('data-next-index', index + 1)\n        }\n\n        if (style.element.styleSheet) {\n          style.parts.push(code)\n          style.element.styleSheet.cssText = style.parts\n            .filter(Boolean)\n            .join('\\n')\n        } else {\n          const textNode = document.createTextNode(code)\n          const nodes = style.element.childNodes\n          if (nodes[index]) style.element.removeChild(nodes[index])\n          if (nodes.length) style.element.insertBefore(textNode, nodes[index])\n          else style.element.appendChild(textNode)\n        }\n      }\n    }\n  }\n  /* style inject SSR */\n  \n  /* style inject shadow dom */\n  \n\n  \n  const __vue_component__ = /*#__PURE__*/__vue_normalize__(\n    { render: __vue_render__, staticRenderFns: __vue_staticRenderFns__ },\n    __vue_inject_styles__,\n    __vue_script__,\n    __vue_scope_id__,\n    __vue_is_functional_template__,\n    __vue_module_identifier__,\n    false,\n    __vue_create_injector__,\n    undefined,\n    undefined\n  )\n\n  export default __vue_component__", "/* script */\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { L } from '../../../frontend/common/common.js'\nconst __vue_script__ = ({\n  name: 'Loading',\n  props: {\n    title: {\n      default: L('Hang in there'),\n      type: String\n    },\n    text: {\n      default: L('Magic is happening...'),\n      type: [String, Number]\n    },\n    theme: {\n      validator (value) {\n        return ['fullView', ''].indexOf(value) !== -1\n      }\n    }\n  }\n}        )\n\n/* template */\nvar __vue_render__ = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"c-loading has-text-centered\",class:{ \"c-fullView\": _vm.theme === \"fullView\" }},[_c('h1',{staticClass:\"is-title-1\"},[_vm._v(_vm._s(_vm.title))]),_c('p',[_vm._v(_vm._s(_vm.text))])])}\nvar __vue_staticRenderFns__ = []\n\n  /* style */\n  const __vue_inject_styles__ = function (inject) {\n    if (!inject) return\n    inject(\"data-v-78cdfd82_0\", { source: \".c-loading[data-v-78cdfd82]{opacity:0;padding:2rem 0;animation:showLoading-data-v-78cdfd82 .2s .5s forwards}.c-loading.c-fullView[data-v-78cdfd82]{min-height:100%;display:flex;flex-direction:column;justify-content:center}@keyframes showLoading-data-v-78cdfd82{from{opacity:0}to{opacity:1}}\", map: undefined, media: undefined })\n\n  }\n  /* scoped */\n  const __vue_scope_id__ = \"data-v-78cdfd82\"\n  /* module identifier */\n  const __vue_module_identifier__ = undefined\n  /* functional template */\n  const __vue_is_functional_template__ = false\n  /* component normalizer */\n  function __vue_normalize__(\n    template, style, script,\n    scope, functional, moduleIdentifier, shadowMode,\n    createInjector, createInjectorSSR, createInjectorShadow\n  ) {\n    const component = (typeof script === 'function' ? script.options : script) || {}\n\n    // For security concerns, we use only base name in production mode.\n    component.__file = \"style>\\n\"\n\n    if (!component.render) {\n      component.render = template.render\n      component.staticRenderFns = template.staticRenderFns\n      component._compiled = true\n\n      if (functional) component.functional = true\n    }\n\n    component._scopeId = scope\n\n    if (true) {\n      let hook\n      if (false) {\n        // In SSR.\n        hook = function(context) {\n          // 2.3 injection\n          context =\n            context || // cached call\n            (this.$vnode && this.$vnode.ssrContext) || // stateful\n            (this.parent && this.parent.$vnode && this.parent.$vnode.ssrContext) // functional\n          // 2.2 with runInNewContext: true\n          if (!context && typeof __VUE_SSR_CONTEXT__ !== 'undefined') {\n            context = __VUE_SSR_CONTEXT__\n          }\n          // inject component styles\n          if (style) {\n            style.call(this, createInjectorSSR(context))\n          }\n          // register component module identifier for async chunk inference\n          if (context && context._registeredComponents) {\n            context._registeredComponents.add(moduleIdentifier)\n          }\n        }\n        // used by ssr in case component is cached and beforeCreate\n        // never gets called\n        component._ssrRegister = hook\n      }\n      else if (style) {\n        hook = shadowMode \n          ? function(context) {\n              style.call(this, createInjectorShadow(context, this.$root.$options.shadowRoot))\n            }\n          : function(context) {\n              style.call(this, createInjector(context))\n            }\n      }\n\n      if (hook !== undefined) {\n        if (component.functional) {\n          // register for functional component in vue file\n          const originalRender = component.render\n          component.render = function renderWithStyleInjection(h, context) {\n            hook.call(context)\n            return originalRender(h, context)\n          }\n        } else {\n          // inject component registration as beforeCreate hook\n          const existing = component.beforeCreate\n          component.beforeCreate = existing ? [].concat(existing, hook) : [hook]\n        }\n      }\n    }\n\n    return component\n  }\n  /* style inject */\n  function __vue_create_injector__() {\n    const styles = __vue_create_injector__.styles || (__vue_create_injector__.styles = {})\n    const isOldIE =\n      typeof navigator !== 'undefined' &&\n      /msie [6-9]\\\\b/.test(navigator.userAgent.toLowerCase())\n\n    return function addStyle(id, css) {\n      if (document.querySelector('style[data-vue-ssr-id~=\"' + id + '\"]')) return // SSR styles are present.\n\n      const group = isOldIE ? css.media || 'default' : id\n      const style = styles[group] || (styles[group] = { ids: [], parts: [], element: undefined })\n\n      if (!style.ids.includes(id)) {\n        let code = css.source\n        let index = style.ids.length\n\n        style.ids.push(id)\n\n        if (true && css.map) {\n          // https://developer.chrome.com/devtools/docs/javascript-debugging\n          // this makes source maps inside style tags work properly in Chrome\n          code += '\\n/*# sourceURL=' + css.map.sources[0] + ' */'\n          // http://stackoverflow.com/a/26603875\n          code +=\n            '\\n/*# sourceMappingURL=data:application/json;base64,' +\n            btoa(unescape(encodeURIComponent(JSON.stringify(css.map)))) +\n            ' */'\n        }\n\n        if (isOldIE) {\n          style.element = style.element || document.querySelector('style[data-group=' + group + ']')\n        }\n\n        if (!style.element) {\n          const head = document.head || document.getElementsByTagName('head')[0]\n          const el = style.element = document.createElement('style')\n          el.type = 'text/css'\n\n          if (css.media) el.setAttribute('media', css.media)\n          if (isOldIE) {\n            el.setAttribute('data-group', group)\n            el.setAttribute('data-next-index', '0')\n          }\n\n          head.appendChild(el)\n        }\n\n        if (isOldIE) {\n          index = parseInt(style.element.getAttribute('data-next-index'))\n          style.element.setAttribute('data-next-index', index + 1)\n        }\n\n        if (style.element.styleSheet) {\n          style.parts.push(code)\n          style.element.styleSheet.cssText = style.parts\n            .filter(Boolean)\n            .join('\\n')\n        } else {\n          const textNode = document.createTextNode(code)\n          const nodes = style.element.childNodes\n          if (nodes[index]) style.element.removeChild(nodes[index])\n          if (nodes.length) style.element.insertBefore(textNode, nodes[index])\n          else style.element.appendChild(textNode)\n        }\n      }\n    }\n  }\n  /* style inject SSR */\n  \n  /* style inject shadow dom */\n  \n\n  \n  const __vue_component__ = /*#__PURE__*/__vue_normalize__(\n    { render: __vue_render__, staticRenderFns: __vue_staticRenderFns__ },\n    __vue_inject_styles__,\n    __vue_script__,\n    __vue_scope_id__,\n    __vue_is_functional_template__,\n    __vue_module_identifier__,\n    false,\n    __vue_create_injector__,\n    undefined,\n    undefined\n  )\n\n  export default __vue_component__", "/* script */\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { L, LTags } from '../../../frontend/common/common.js'\nimport Avatar from '../../../frontend/views/components/Avatar.vue'\nimport Loading from '../../../frontend/views/components/Loading.vue'\nimport LoginForm from '../../../frontend/views/containers/access/LoginForm.vue'\nimport SignupForm from '../../../frontend/views/containers/access/SignupForm.vue'\nimport sbp from '@sbp/sbp'\nimport SvgBrokenLink from '../../../frontend/assets/svgs/broken-link.svg'\nimport SvgCreateGroup from '../../../frontend/assets/svgs/create-group.svg'\nimport { LOGIN } from '../../../frontend/utils/events.js'\nimport { mapGetters, mapState } from 'vuex'\nimport { INVITE_STATUS } from '@chelonia/lib/constants'\nimport { PROFILE_STATUS } from '../../../frontend/model/contracts/shared/constants.js'\nimport { keyId } from '@chelonia/crypto'\n\nlet syncFinished = false\nsbp('okTurtles.events/once', LOGIN, () => { syncFinished = true })\n\nconst __vue_script__ = ({\n  name: 'Join',\n  components: {\n    Loading,\n    LoginForm,\n    SignupForm,\n    Avatar,\n    SvgBrokenLink,\n    SvgCreateGroup\n  },\n  data () {\n    return {\n      ephemeral: {\n        pageStatus: 'LOADING',\n        invitation: {},\n        groupInfo: {},\n        hash: null\n      }\n    }\n  },\n  computed: {\n    ...mapGetters(['ourIdentityContractId']),\n    ...mapState(['currentGroupId']),\n    pageStatus: {\n      get () { return this.ephemeral.pageStatus },\n      set (status) {\n        const possibleStatus = ['LOADING', 'SIGNING', 'LOGGING', 'INVALID', 'EXPIRED', 'JOINED']\n        if (!possibleStatus.includes(status)) {\n          throw new Error(`Bad status: ${status}. Use one of the following: ${possibleStatus.join(', ')}`)\n        }\n        this.ephemeral.pageStatus = status\n      }\n    }\n  },\n  mounted () {\n    // For some reason in some Cypress tests it loses the route hash when initialized is called\n    this.ephemeral.hash = new URLSearchParams(this.$route.hash.slice(1))\n    if (syncFinished || !this.ourIdentityContractId) {\n      this.initialize()\n    } else {\n      sbp('okTurtles.events/once', LOGIN, () => this.initialize())\n    }\n  },\n  methods: {\n    async initialize () {\n      try {\n        const messageToAskAnother = L('You should ask for a new one. Sorry about that!')\n        const groupId = this.ephemeral.hash.get('groupId')\n        const secret = this.ephemeral.hash.get('secret')\n        if (!groupId || !secret) {\n          console.error('Invalid invite link: missing group ID or secret')\n          this.ephemeral.errorMsg = messageToAskAnother\n          this.pageStatus = 'INVALID'\n          return\n        }\n        const state = await sbp('chelonia/latestContractState', groupId)\n        const publicKeyId = keyId(secret)\n        const invite = state._vm.invites[publicKeyId]\n        if (invite?.expires < Date.now()) {\n          console.log('Join.vue error: Link is already expired.')\n          this.ephemeral.errorMsg = messageToAskAnother\n          this.pageStatus = 'EXPIRED'\n          return\n        } else if (invite?.initialQuantity > 0 && !invite.quantity) {\n          console.log('Join.vue error: Link is already used.')\n          this.ephemeral.errorMsg = messageToAskAnother\n          this.pageStatus = 'INVALID'\n          return\n        } if (invite?.status !== INVITE_STATUS.VALID) {\n          console.error('Join.vue error: Link is not valid.')\n          this.ephemeral.errorMsg = messageToAskAnother\n          this.pageStatus = 'INVALID'\n          return\n        }\n        if (this.ourIdentityContractId) {\n          const targetGroupId = this.ephemeral.hash?.get('groupId') || ''\n          const targetGroupState = this.$store.state[targetGroupId] || {}\n\n          if (this.currentGroupId && [PROFILE_STATUS.ACTIVE, PROFILE_STATUS.PENDING].includes(targetGroupState?.profiles?.[this.ourIdentityContractId])) {\n            this.goToDashboard()\n          } else if (this.checkAlreadyJoinedGroup(targetGroupId)) { // if the user is already part of the target group.\n            this.ephemeral.groupInfo = {\n              name: targetGroupState.settings?.groupName || '',\n              id: targetGroupId\n            }\n            this.pageStatus = 'JOINED'\n\n            return\n          } else {\n            await this.accept()\n          }\n          return\n        }\n        const creatorID = this.ephemeral.hash.get('creatorID')\n        const creatorUsername = this.ephemeral.hash.get('creatorUsername')\n        const who = creatorUsername || creatorID\n        const message = who\n          ? L('{who} invited you to join their group!', { who })\n          : L('You were invited to join')\n\n        this.ephemeral.invitation = {\n          groupName: this.ephemeral.hash.get('groupName') ?? L('(group name unavailable)'),\n          creatorID,\n          creatorUsername,\n          message\n        }\n        this.pageStatus = 'SIGNING'\n      } catch (e) {\n        console.error(e)\n        this.ephemeral.errorMsg = `${L('Something went wrong. Please, try again.')} ${e.message}`\n        this.pageStatus = 'INVALID'\n      }\n    },\n    isStatus (status) {\n      return this.pageStatus === status\n    },\n    goHome () {\n      this.$router.push({ path: '/' })\n    },\n    checkAlreadyJoinedGroup (targetGroupId) {\n      if (this.ourIdentityContractId) {\n        const myGroups = this.$store.state[this.ourIdentityContractId]?.groups || {}\n        return myGroups[targetGroupId] && !myGroups[targetGroupId]?.hasLeft\n      } else return false\n    },\n    goToDashboard (toGroupId) {\n      if (toGroupId && this.currentGroupId !== toGroupId) {\n        sbp('gi.app/group/switch', toGroupId)\n      }\n\n      this.$router.push({ path: '/dashboard' })\n    },\n    async accept () {\n      this.ephemeral.errorMsg = null\n      const groupId = this.ephemeral.hash.get('groupId')\n      const secret = this.ephemeral.hash.get('secret')\n\n      const profileStatus = this.$store.state.contracts[groupId]?.profiles?.[this.ourIdentityContractId]?.status\n      if ([PROFILE_STATUS.ACTIVE, PROFILE_STATUS.PENDING].includes(profileStatus)) {\n        return this.goToDashboard()\n      }\n      try {\n        await sbp('gi.app/group/joinWithInviteSecret', groupId, secret)\n        // this.pageStatus = 'WELCOME'\n      } catch (e) {\n        console.error('Join.vue accept() error:', e)\n        this.ephemeral.errorMsg = e.message\n\n        const alreadyJoinedErr = this.checkAlreadyJoinedGroup(groupId)\n        this.pageStatus = alreadyJoinedErr ? 'JOINED' : 'INVALID'\n        if (alreadyJoinedErr) {\n          // if errored by attempting to join an already-joined group, show a different UI informing it.\n          const targetGroupState = this.$store.state[groupId] || {}\n\n          this.ephemeral.groupInfo = {\n            name: targetGroupState.settings?.groupName || '',\n            id: groupId\n          }\n        } else {\n          sbp('gi.ui/prompt', {\n            heading: L('Failed to join the group'),\n            question: L('Error details:{br_}{err}', { err: e.message, ...LTags() }),\n            primaryButton: L('Close')\n          })\n        }\n      }\n    }\n  }\n}        )\n\n/* template */\nvar __vue_render__ = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('img',{staticClass:\"c-logo\",attrs:{\"src\":\"/assets/images/logo-transparent.png\"}}),(_vm.isStatus(\"LOADING\"))?_c('loading',{attrs:{\"theme\":\"fullView\"}}):_c('div',{staticClass:\"c-page\"},[(_vm.isStatus(\"SIGNING\") || _vm.isStatus(\"LOGGING\"))?_c('div',[_c('div',{staticClass:\"c-header\"},[_c('div',{staticClass:\"c-avatars\"},[(_vm.ephemeral.invitation.groupPicture)?_c('avatar',{staticClass:\"c-avatars-group\",attrs:{\"src\":_vm.ephemeral.invitation.groupPicture,\"size\":\"lg\"}}):_vm._e(),(_vm.ephemeral.invitation.creatorPicture)?_c('avatar',{staticClass:\"c-avatars-creator\",attrs:{\"src\":_vm.ephemeral.invitation.creatorPicture}}):_vm._e()],1),_c('h1',{staticClass:\"is-title-1 c-title\",attrs:{\"data-test\":\"groupName\"}},[_vm._v(_vm._s(_vm.ephemeral.invitation.groupName))]),_c('p',{staticClass:\"has-text-1\",attrs:{\"data-test\":\"invitationMessage\"}},[_vm._v(_vm._s(_vm.ephemeral.invitation.message))])]),_c('div',{staticClass:\"card\"},[(_vm.isStatus(\"SIGNING\"))?_c('signup-form',{attrs:{\"postSubmit\":_vm.accept}}):_c('login-form',{attrs:{\"postSubmit\":_vm.accept}})],1),(_vm.isStatus(\"SIGNING\"))?_c('p',{staticClass:\"c-switchEnter\"},[_c('i18n',[_vm._v(\"Already have an account?\")]),_vm._v(\"\u00A0\"),_c('i18n',{staticClass:\"link\",attrs:{\"tag\":\"button\"},on:{\"click\":function($event){_vm.pageStatus = \"LOGGING\"}}},[_vm._v(\"Log in\")])],1):_c('p',{staticClass:\"c-switchEnter\"},[_c('i18n',[_vm._v(\"Not on Group Income yet?\")]),_vm._v(\"\u00A0\"),_c('i18n',{staticClass:\"link\",attrs:{\"tag\":\"button\"},on:{\"click\":function($event){_vm.pageStatus = \"SIGNING\"}}},[_vm._v(\"Create an account\")])],1)]):(_vm.isStatus(\"JOINED\"))?_c('div',{staticClass:\"c-joined\"},[_c('svg-create-group',{staticClass:\"c-svg\"}),_c('i18n',{staticClass:\"is-title-1\",attrs:{\"tag\":\"h1\",\"data-test\":\"pageTitle\",\"args\":{ groupName: _vm.ephemeral.groupInfo.name }}},[_vm._v(\"You are already a member of '{groupName}'\")]),_c('i18n',{staticClass:\"has-text-1\",attrs:{\"tag\":\"p\",\"data-test\":\"helperText\"}},[_vm._v(\"You cannot join already joined group.\")]),_c('i18n',{staticClass:\"c-goHome\",attrs:{\"tag\":\"button\"},on:{\"click\":function($event){return _vm.goToDashboard(_vm.ephemeral.groupInfo.id)}}},[_vm._v(\"Go to dashboard\")])],1):(_vm.isStatus(\"INVALID\"))?_c('div',{staticClass:\"c-broken\"},[_c('svg-broken-link',{staticClass:\"c-svg\"}),_c('i18n',{staticClass:\"is-title-1\",attrs:{\"tag\":\"h1\",\"data-test\":\"pageTitle\",\"args\":_vm.LTags()}},[_vm._v(\"Oh no! {br_}This invite is not valid\")]),_c('p',{staticClass:\"has-text-1\",attrs:{\"data-test\":\"helperText\"}},[_vm._v(_vm._s(_vm.ephemeral.errorMsg))]),_c('i18n',{staticClass:\"c-goHome\",attrs:{\"tag\":\"button\"},on:{\"click\":_vm.goHome}},[_vm._v(\"Take me home\")])],1):(_vm.isStatus(\"EXPIRED\"))?_c('div',{staticClass:\"c-broken\"},[_c('svg-broken-link',{staticClass:\"c-svg\"}),_c('i18n',{staticClass:\"is-title-1\",attrs:{\"tag\":\"h1\",\"data-test\":\"pageTitle\",\"args\":_vm.LTags()}},[_vm._v(\"Oh no! {br_}This invite is already expired\")]),_c('p',{staticClass:\"has-text-1\",attrs:{\"data-test\":\"helperText\"}},[_vm._v(_vm._s(_vm.ephemeral.errorMsg))]),_c('i18n',{staticClass:\"c-goHome\",attrs:{\"tag\":\"button\"},on:{\"click\":_vm.goHome}},[_vm._v(\"Take me home\")])],1):_vm._e()])],1)}\nvar __vue_staticRenderFns__ = []\n\n  /* style */\n  const __vue_inject_styles__ = function (inject) {\n    if (!inject) return\n    inject(\"data-v-66143ea6_0\", { source: \".c-logo[data-v-66143ea6]{min-width:8rem;width:8rem;margin:auto}@media screen and (min-width:769px),print{.c-logo[data-v-66143ea6]{position:absolute;top:1.5rem;left:1.5rem}}.c-page[data-v-66143ea6]{max-width:33rem;margin:auto;height:100%}.c-welcome[data-v-66143ea6]{margin-top:-1.5rem}.c-header[data-v-66143ea6]{margin-top:1rem;display:flex;flex-direction:column;align-items:center}.c-header .c-title[data-v-66143ea6]{order:2}@media screen and (min-width:769px),print{.c-header[data-v-66143ea6]{margin-top:2.5rem}}.c-avatars[data-v-66143ea6]{position:relative;margin-bottom:1.5rem}@media screen and (min-width:769px),print{.c-avatars .c-avatars-group.is-lg[data-v-66143ea6]{width:8rem;height:8rem}}.c-avatars .c-avatars-creator[data-v-66143ea6]{position:absolute;bottom:0;right:0;border:2px solid #fff}.card[data-v-66143ea6]{padding:1.5rem 1rem;margin-top:1.5rem}@media screen and (min-width:769px),print{.card[data-v-66143ea6]{padding:2.5rem}}.c-switchEnter[data-v-66143ea6]{margin-top:1.5rem;text-align:center}.c-broken[data-v-66143ea6],.c-joined[data-v-66143ea6]{margin-top:20vh;text-align:center}.c-broken .is-title-1[data-v-66143ea6],.c-joined .is-title-1[data-v-66143ea6]{margin-top:3rem;margin-bottom:.5rem}.c-broken .c-goHome[data-v-66143ea6],.c-joined .c-goHome[data-v-66143ea6]{margin-top:2rem}@media screen and (min-width:769px),print{.c-debug[data-v-66143ea6]{position:absolute;bottom:1rem;right:1rem}}\", map: undefined, media: undefined })\n\n  }\n  /* scoped */\n  const __vue_scope_id__ = \"data-v-66143ea6\"\n  /* module identifier */\n  const __vue_module_identifier__ = undefined\n  /* functional template */\n  const __vue_is_functional_template__ = false\n  /* component normalizer */\n  function __vue_normalize__(\n    template, style, script,\n    scope, functional, moduleIdentifier, shadowMode,\n    createInjector, createInjectorSSR, createInjectorShadow\n  ) {\n    const component = (typeof script === 'function' ? script.options : script) || {}\n\n    // For security concerns, we use only base name in production mode.\n    component.__file = \"style>\\n\"\n\n    if (!component.render) {\n      component.render = template.render\n      component.staticRenderFns = template.staticRenderFns\n      component._compiled = true\n\n      if (functional) component.functional = true\n    }\n\n    component._scopeId = scope\n\n    if (true) {\n      let hook\n      if (false) {\n        // In SSR.\n        hook = function(context) {\n          // 2.3 injection\n          context =\n            context || // cached call\n            (this.$vnode && this.$vnode.ssrContext) || // stateful\n            (this.parent && this.parent.$vnode && this.parent.$vnode.ssrContext) // functional\n          // 2.2 with runInNewContext: true\n          if (!context && typeof __VUE_SSR_CONTEXT__ !== 'undefined') {\n            context = __VUE_SSR_CONTEXT__\n          }\n          // inject component styles\n          if (style) {\n            style.call(this, createInjectorSSR(context))\n          }\n          // register component module identifier for async chunk inference\n          if (context && context._registeredComponents) {\n            context._registeredComponents.add(moduleIdentifier)\n          }\n        }\n        // used by ssr in case component is cached and beforeCreate\n        // never gets called\n        component._ssrRegister = hook\n      }\n      else if (style) {\n        hook = shadowMode \n          ? function(context) {\n              style.call(this, createInjectorShadow(context, this.$root.$options.shadowRoot))\n            }\n          : function(context) {\n              style.call(this, createInjector(context))\n            }\n      }\n\n      if (hook !== undefined) {\n        if (component.functional) {\n          // register for functional component in vue file\n          const originalRender = component.render\n          component.render = function renderWithStyleInjection(h, context) {\n            hook.call(context)\n            return originalRender(h, context)\n          }\n        } else {\n          // inject component registration as beforeCreate hook\n          const existing = component.beforeCreate\n          component.beforeCreate = existing ? [].concat(existing, hook) : [hook]\n        }\n      }\n    }\n\n    return component\n  }\n  /* style inject */\n  function __vue_create_injector__() {\n    const styles = __vue_create_injector__.styles || (__vue_create_injector__.styles = {})\n    const isOldIE =\n      typeof navigator !== 'undefined' &&\n      /msie [6-9]\\\\b/.test(navigator.userAgent.toLowerCase())\n\n    return function addStyle(id, css) {\n      if (document.querySelector('style[data-vue-ssr-id~=\"' + id + '\"]')) return // SSR styles are present.\n\n      const group = isOldIE ? css.media || 'default' : id\n      const style = styles[group] || (styles[group] = { ids: [], parts: [], element: undefined })\n\n      if (!style.ids.includes(id)) {\n        let code = css.source\n        let index = style.ids.length\n\n        style.ids.push(id)\n\n        if (true && css.map) {\n          // https://developer.chrome.com/devtools/docs/javascript-debugging\n          // this makes source maps inside style tags work properly in Chrome\n          code += '\\n/*# sourceURL=' + css.map.sources[0] + ' */'\n          // http://stackoverflow.com/a/26603875\n          code +=\n            '\\n/*# sourceMappingURL=data:application/json;base64,' +\n            btoa(unescape(encodeURIComponent(JSON.stringify(css.map)))) +\n            ' */'\n        }\n\n        if (isOldIE) {\n          style.element = style.element || document.querySelector('style[data-group=' + group + ']')\n        }\n\n        if (!style.element) {\n          const head = document.head || document.getElementsByTagName('head')[0]\n          const el = style.element = document.createElement('style')\n          el.type = 'text/css'\n\n          if (css.media) el.setAttribute('media', css.media)\n          if (isOldIE) {\n            el.setAttribute('data-group', group)\n            el.setAttribute('data-next-index', '0')\n          }\n\n          head.appendChild(el)\n        }\n\n        if (isOldIE) {\n          index = parseInt(style.element.getAttribute('data-next-index'))\n          style.element.setAttribute('data-next-index', index + 1)\n        }\n\n        if (style.element.styleSheet) {\n          style.parts.push(code)\n          style.element.styleSheet.cssText = style.parts\n            .filter(Boolean)\n            .join('\\n')\n        } else {\n          const textNode = document.createTextNode(code)\n          const nodes = style.element.childNodes\n          if (nodes[index]) style.element.removeChild(nodes[index])\n          if (nodes.length) style.element.insertBefore(textNode, nodes[index])\n          else style.element.appendChild(textNode)\n        }\n      }\n    }\n  }\n  /* style inject SSR */\n  \n  /* style inject shadow dom */\n  \n\n  \n  const __vue_component__ = /*#__PURE__*/__vue_normalize__(\n    { render: __vue_render__, staticRenderFns: __vue_staticRenderFns__ },\n    __vue_inject_styles__,\n    __vue_script__,\n    __vue_scope_id__,\n    __vue_is_functional_template__,\n    __vue_module_identifier__,\n    false,\n    __vue_create_injector__,\n    undefined,\n    undefined\n  )\n\n  export default __vue_component__", "import Vue from 'vue'\nimport ErrorModal from '@views/containers/loading-error/ErrorModal.vue'\nimport ErrorPage from '@views/containers/loading-error/ErrorPage.vue'\nimport LoadingModal from '@views/containers/loading-error/LoadingModal.vue'\nimport LoadingModalFullScreen from '@views/containers/loading-error/LoadingBaseModal.vue'\nimport LoadingPage from '@views/containers/loading-error/LoadingPage.vue'\n\n                                        \n\n// See https://v2.vuejs.org/v2/guide/components-dynamic-async.html#Async-Components\nfunction asyncHandler (lazyImport, { loading, error } = {}) {\n  return () => ({\n    // HACK: sometimes a bundler bug makes it necessary to use\n    // `.then(m => m.default ?? m)` when importing a module with `import()`.\n    component: lazyImport().then(m => m.default ?? m),\n    loading,\n    error\n  })\n}\n\nexport function lazyComponent (name        , lazyImport            , { loading, error }         = {}) {\n  Vue.component(name, asyncHandler(lazyImport, { loading, error }))\n}\n\nexport function lazyModal (name        , lazyImport            ) {\n  lazyComponent(name, lazyImport, {\n    loading: LoadingModal,\n    error: ErrorModal\n  })\n}\n\nexport function lazyModalFullScreen (name        , lazyImport            ) {\n  lazyComponent(name, lazyImport, {\n    loading: LoadingModalFullScreen,\n    error: ErrorModal\n  })\n}\n\n/*\nThis method of loading components is documented here and is used to ensure compatibility\nwith lazy-loaded routes:\nhttps://github.com/vuejs/vue-router/pull/2140/files#diff-7d999265ce5b22152fdffee108ca6385\n\nWARNING: Components loaded with this strategy will **not** have access to in-component guards,\nsuch as `beforeRouteEnter`, `beforeRouteUpdate`, and `beforeRouteLeave`. If you need to use\nthese, you must either use route-level guards instead or lazy-load the component directly, without\nhandling loading state.\n*/\nexport function lazyPage (\n  lazyImport            ,\n  { loading = LoadingPage, error = ErrorPage }         = {}\n)           {\n  const handler = asyncHandler(lazyImport, { loading, error })\n\n  return () => Promise.resolve({\n    functional: true,\n    render (h, { data, children }) {\n      return h(handler, data, children)\n    }\n  })\n}\n\nlazyModal('AccountRemovalModal', () => import('../views/containers/user-settings/AccountRemovalModal.vue'))\nlazyModal('ChatMembersAllModal', () => import('../views/containers/chatroom/ChatMembersAllModal.vue'))\nlazyModal('CreateNewChannelModal', () => import('../views/containers/chatroom/CreateNewChannelModal.vue'))\nlazyModal('DeleteChannelModal', () => import('../views/containers/chatroom/DeleteChannelModal.vue'))\nlazyModal('EditChannelDescriptionModal', () => import('../views/containers/chatroom/EditChannelDescriptionModal.vue'))\nlazyModal('EditChannelNameModal', () => import('../views/containers/chatroom/EditChannelNameModal.vue'))\nlazyModal('ChatNotificationSettingsModal', () => import('../views/containers/chatroom/ChatNotificationSettingsModal.vue'))\nlazyModal('GroupLeaveModal', () => import('../views/containers/group-settings/GroupLeaveModal.vue'))\nlazyModal('GroupDeletionModal', () => import('../views/containers/group-settings/GroupDeletionModal.vue'))\nlazyModal('InvitationLinkModal', () => import('../views/containers/group-settings/InvitationLinkModal.vue'))\nlazyModal('LeaveChannelModal', () => import('../views/containers/chatroom/LeaveChannelModal.vue'))\nlazyModal('LoginModal', () => import('../views/containers/access/LoginModal.vue'))\nlazyModal('NotificationModal', () => import('../views/containers/notifications/NotificationModal.vue'))\nlazyModal('PasswordModal', () => import('../views/containers/access/PasswordModal.vue'))\nlazyModal('SignupModal', () => import('../views/containers/access/SignupModal.vue'))\nlazyModal('Prompt', () => import('../views/components/modal/Prompt.vue'))\nlazyModal('SendThankYouModal', () => import('../views/containers/payments/SendThankYouModal.vue'))\nlazyModal('ThankYouNoteModal', () => import('../views/containers/payments/ThankYouNoteModal.vue'))\nlazyModal('AvatarEditorModal', () => import('../views/components/avatar-editor/AvatarEditorModal.vue'))\nlazyModal('ChatFileAttachmentWarningModal', () => import('../views/containers/chatroom/file-attachment/ChatFileAttachmentWarningModal.vue'))\nlazyModal('ImageViewerModal', () => import('../views/containers/chatroom/image-viewer/ImageViewerModal.vue'))\nlazyModalFullScreen('GroupCreationModal', () => import('../views/containers/group-settings/GroupCreationModal.vue'))\nlazyModalFullScreen('GroupJoinModal', () => import('../views/containers/group-settings/GroupJoinModal.vue'))\nlazyModalFullScreen('GroupMembersAllModal', () => import('../views/containers/dashboard/GroupMembersAllModal.vue'))\nlazyModalFullScreen('IncomeDetails', () => import('../views/containers/contributions/IncomeDetails.vue'))\nlazyModalFullScreen('UserSettingsModal', () => import('../views/containers/user-settings/UserSettingsModal.vue'))\n\nlazyComponent('AddMembers', () => import('../views/containers/proposals/AddMembers.vue'))\nlazyComponent('ChangeVotingRules', () => import('../views/containers/proposals/ChangeVotingRules.vue'))\nlazyComponent('MincomeProposal', () => import('../views/containers/proposals/Mincome.vue'))\nlazyComponent('DistributionDateProposal', () => import('../views/containers/proposals/DistributionDate.vue'))\nlazyComponent('PaymentsHistoryModal', () => import('../views/containers/payments/PaymentsHistoryModal.vue'))\nlazyComponent('RemoveMember', () => import('../views/containers/proposals/RemoveMember.vue'))\nlazyComponent('GenericProposal', () => import('../views/containers/proposals/GenericProposal.vue'))\nlazyModalFullScreen('PropositionsAllModal', () => import('../views/containers/proposals/PropositionsAllModal.vue'))\n\nlazyComponent('PaymentDetail', () => import('../views/containers/payments/PaymentDetail.vue'))\nlazyComponent('RecordPayment', () => import('../views/containers/payments/RecordPayment.vue'))\nlazyComponent('SendPaymentsViaLightning', () => import('../views/containers/payments/SendPaymentsViaLightning.vue'))\nlazyComponent('ExportPaymentsModal', () => import('../views/containers/payments/ExportPaymentsModal.vue'))\n\nlazyComponent('Appearence', () => import('../views/containers/user-settings/Appearence.vue'))\nlazyComponent('NotificationSettings', () => import('../views/containers/user-settings/NotificationSettings.vue'))\nlazyComponent('AppLogs', () => import('../views/containers/user-settings/AppLogs.vue'))\nlazyComponent('NewDirectMessageModal', () => import('../views/containers/chatroom/NewDirectMessageModal.vue'))\nlazyComponent('Placeholder', () => import('../views/containers/user-settings/Placeholder.vue'))\nlazyComponent('Troubleshooting', () => import('../views/containers/user-settings/Troubleshooting.vue'))\nlazyComponent('UserProfile', () => import('../views/containers/user-settings/UserProfile.vue'))\nlazyComponent('Acknowledgements', () => import('../views/containers/user-settings/Acknowledgements.vue'))\n\n// TODO Remove after design test period.\nlazyComponent('DSModalFullscreen', () => import('../views/containers/design-system/DSModalFullscreen.vue'))\nlazyComponent('DSModalNested', () => import('../views/containers/design-system/DSModalNested.vue'))\nlazyComponent('DSModalQuery', () => import('../views/containers/design-system/DSModalQuery.vue'))\n// lazyComponent('TimeTravel', () => import('../views/containers/navigation/TimeTravel.vue'))\n", "/* script */\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport ModalTemplate from '../../../../frontend/views/components/modal/ModalTemplate.vue'\n\nconst __vue_script__ = ({\n  name: 'LoadingModal',\n  components: {\n    ModalTemplate\n  },\n  props: {\n    type: {\n      type: Number,\n      default: 500\n    }\n  }\n}        )\n\n/* template */\nvar __vue_render__ = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('modal-template',{ref:\"modal\",staticClass:\"has-background\",attrs:{\"a11yTitle\":_vm.L(\"Loading\")}},[_c('template',{slot:\"title\"},[(_vm.type===500)?_c('i18n',{staticClass:\"is-title-2 c-title\",attrs:{\"tag\":\"h2\"}},[_vm._v(\"500\")]):_c('i18n',{staticClass:\"is-title-2 c-title\",attrs:{\"tag\":\"h2\"}},[_vm._v(\"404\")])],1),(_vm.type===500)?_c('div',{staticClass:\"c-wrapper\"},[_c('i18n',{staticClass:\"is-title-3 c-title\",attrs:{\"tag\":\"h2\"}},[_vm._v(\"Server error\")]),_c('i18n',{staticClass:\"c-text\",attrs:{\"tag\":\"p\"}},[_vm._v(\"We are having some trouble. Please try again later.\")])],1):_c('div',{staticClass:\"c-wrapper\"},[_c('i18n',{staticClass:\"is-title-3 c-title\",attrs:{\"tag\":\"h2\"}},[_vm._v(\"Page not found\")]),_c('i18n',{staticClass:\"c-text\",attrs:{\"tag\":\"p\"}},[_vm._v(\"We couldn\u2019t find what you are looking for.\")]),_c('router-link',{staticClass:\"button\",attrs:{\"to\":\"/\"}},[_c('i18n',[_vm._v(\"Take me home\")])],1)],1)],2)}\nvar __vue_staticRenderFns__ = []\n\n  /* style */\n  const __vue_inject_styles__ = function (inject) {\n    if (!inject) return\n    inject(\"data-v-6a5ffef8_0\", { source: \".c-title[data-v-6a5ffef8]{padding:1.5rem 0}.c-wrapper[data-v-6a5ffef8]{text-align:center}\", map: undefined, media: undefined })\n\n  }\n  /* scoped */\n  const __vue_scope_id__ = \"data-v-6a5ffef8\"\n  /* module identifier */\n  const __vue_module_identifier__ = undefined\n  /* functional template */\n  const __vue_is_functional_template__ = false\n  /* component normalizer */\n  function __vue_normalize__(\n    template, style, script,\n    scope, functional, moduleIdentifier, shadowMode,\n    createInjector, createInjectorSSR, createInjectorShadow\n  ) {\n    const component = (typeof script === 'function' ? script.options : script) || {}\n\n    // For security concerns, we use only base name in production mode.\n    component.__file = \"style>\\n\"\n\n    if (!component.render) {\n      component.render = template.render\n      component.staticRenderFns = template.staticRenderFns\n      component._compiled = true\n\n      if (functional) component.functional = true\n    }\n\n    component._scopeId = scope\n\n    if (true) {\n      let hook\n      if (false) {\n        // In SSR.\n        hook = function(context) {\n          // 2.3 injection\n          context =\n            context || // cached call\n            (this.$vnode && this.$vnode.ssrContext) || // stateful\n            (this.parent && this.parent.$vnode && this.parent.$vnode.ssrContext) // functional\n          // 2.2 with runInNewContext: true\n          if (!context && typeof __VUE_SSR_CONTEXT__ !== 'undefined') {\n            context = __VUE_SSR_CONTEXT__\n          }\n          // inject component styles\n          if (style) {\n            style.call(this, createInjectorSSR(context))\n          }\n          // register component module identifier for async chunk inference\n          if (context && context._registeredComponents) {\n            context._registeredComponents.add(moduleIdentifier)\n          }\n        }\n        // used by ssr in case component is cached and beforeCreate\n        // never gets called\n        component._ssrRegister = hook\n      }\n      else if (style) {\n        hook = shadowMode \n          ? function(context) {\n              style.call(this, createInjectorShadow(context, this.$root.$options.shadowRoot))\n            }\n          : function(context) {\n              style.call(this, createInjector(context))\n            }\n      }\n\n      if (hook !== undefined) {\n        if (component.functional) {\n          // register for functional component in vue file\n          const originalRender = component.render\n          component.render = function renderWithStyleInjection(h, context) {\n            hook.call(context)\n            return originalRender(h, context)\n          }\n        } else {\n          // inject component registration as beforeCreate hook\n          const existing = component.beforeCreate\n          component.beforeCreate = existing ? [].concat(existing, hook) : [hook]\n        }\n      }\n    }\n\n    return component\n  }\n  /* style inject */\n  function __vue_create_injector__() {\n    const styles = __vue_create_injector__.styles || (__vue_create_injector__.styles = {})\n    const isOldIE =\n      typeof navigator !== 'undefined' &&\n      /msie [6-9]\\\\b/.test(navigator.userAgent.toLowerCase())\n\n    return function addStyle(id, css) {\n      if (document.querySelector('style[data-vue-ssr-id~=\"' + id + '\"]')) return // SSR styles are present.\n\n      const group = isOldIE ? css.media || 'default' : id\n      const style = styles[group] || (styles[group] = { ids: [], parts: [], element: undefined })\n\n      if (!style.ids.includes(id)) {\n        let code = css.source\n        let index = style.ids.length\n\n        style.ids.push(id)\n\n        if (true && css.map) {\n          // https://developer.chrome.com/devtools/docs/javascript-debugging\n          // this makes source maps inside style tags work properly in Chrome\n          code += '\\n/*# sourceURL=' + css.map.sources[0] + ' */'\n          // http://stackoverflow.com/a/26603875\n          code +=\n            '\\n/*# sourceMappingURL=data:application/json;base64,' +\n            btoa(unescape(encodeURIComponent(JSON.stringify(css.map)))) +\n            ' */'\n        }\n\n        if (isOldIE) {\n          style.element = style.element || document.querySelector('style[data-group=' + group + ']')\n        }\n\n        if (!style.element) {\n          const head = document.head || document.getElementsByTagName('head')[0]\n          const el = style.element = document.createElement('style')\n          el.type = 'text/css'\n\n          if (css.media) el.setAttribute('media', css.media)\n          if (isOldIE) {\n            el.setAttribute('data-group', group)\n            el.setAttribute('data-next-index', '0')\n          }\n\n          head.appendChild(el)\n        }\n\n        if (isOldIE) {\n          index = parseInt(style.element.getAttribute('data-next-index'))\n          style.element.setAttribute('data-next-index', index + 1)\n        }\n\n        if (style.element.styleSheet) {\n          style.parts.push(code)\n          style.element.styleSheet.cssText = style.parts\n            .filter(Boolean)\n            .join('\\n')\n        } else {\n          const textNode = document.createTextNode(code)\n          const nodes = style.element.childNodes\n          if (nodes[index]) style.element.removeChild(nodes[index])\n          if (nodes.length) style.element.insertBefore(textNode, nodes[index])\n          else style.element.appendChild(textNode)\n        }\n      }\n    }\n  }\n  /* style inject SSR */\n  \n  /* style inject shadow dom */\n  \n\n  \n  const __vue_component__ = /*#__PURE__*/__vue_normalize__(\n    { render: __vue_render__, staticRenderFns: __vue_staticRenderFns__ },\n    __vue_inject_styles__,\n    __vue_script__,\n    __vue_scope_id__,\n    __vue_is_functional_template__,\n    __vue_module_identifier__,\n    false,\n    __vue_create_injector__,\n    undefined,\n    undefined\n  )\n\n  export default __vue_component__", "/* script */\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nconst __vue_script__ = ({\n  name: 'ErrorPage',\n  props: {\n    type: {\n      type: Number,\n      default: 500\n    }\n  },\n  data () {\n    return {\n      ephemeral: {\n        isOnline: null // show 'Retry' button only when the browser is online\n      }\n    }\n  },\n  methods: {\n    onlineHandler () {\n      this.ephemeral.isOnline = true\n    },\n    offlineHandler () {\n      this.ephemeral.isOnline = false\n    },\n    onRetryClick () {\n      window.location.reload()\n    }\n  },\n  mounted () {\n    if (navigator.onLine === true) {\n      this.onlineHandler()\n    }\n\n    window.addEventListener('online', this.onlineHandler)\n    window.addEventListener('offline', this.offlineHandler)\n  },\n  beforeDestroy () {\n    window.removeEventListener('online', this.onlineHandler)\n    window.removeEventListener('offline', this.offlineHandler)\n  }\n}        )\n\n/* template */\nvar __vue_render__ = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.type===500)?_c('div',{staticClass:\"p-wrapper\"},[_c('h1',{staticClass:\"is-title-1 p-title\"},[_vm._v(\"500\")]),_c('i18n',{staticClass:\"is-title-3 c-title\",attrs:{\"tag\":\"h2\"}},[_vm._v(\"Server error\")]),_c('i18n',{staticClass:\"c-text\",attrs:{\"tag\":\"p\"}},[_vm._v(\"We are having some trouble. Please try again later.\")]),(_vm.ephemeral.isOnline)?_c('i18n',{staticClass:\"is-outlined is-small c-retry-btn\",attrs:{\"tag\":\"button\"},on:{\"click\":_vm.onRetryClick}},[_vm._v(\"Retry\")]):_vm._e()],1):_c('div',{staticClass:\"p-wrapper\"},[_c('h1',{staticClass:\"is-title-1 p-title\"},[_vm._v(\"404\")]),_c('i18n',{staticClass:\"is-title-3 c-title\",attrs:{\"tag\":\"h2\"}},[_vm._v(\"Page not found\")]),_c('i18n',{staticClass:\"c-text\",attrs:{\"tag\":\"p\"}},[_vm._v(\"We couldn\u2019t find what you are looking for.\")]),_c('router-link',{staticClass:\"button\",attrs:{\"to\":\"/\"}},[_c('i18n',[_vm._v(\"Take me home\")])],1)],1)}\nvar __vue_staticRenderFns__ = []\n\n  /* style */\n  const __vue_inject_styles__ = function (inject) {\n    if (!inject) return\n    inject(\"data-v-09c500b0_0\", { source: \".p-wrapper[data-v-09c500b0]{display:flex;flex-direction:column;text-align:center;justify-content:center;align-items:center}.c-title[data-v-09c500b0]{margin-bottom:.5rem}.c-text[data-v-09c500b0]{color:var(--text_1)}.c-text+.button[data-v-09c500b0]{align-self:center;margin-top:2rem}.c-retry-btn[data-v-09c500b0]{width:max-content}\", map: undefined, media: undefined })\n\n  }\n  /* scoped */\n  const __vue_scope_id__ = \"data-v-09c500b0\"\n  /* module identifier */\n  const __vue_module_identifier__ = undefined\n  /* functional template */\n  const __vue_is_functional_template__ = false\n  /* component normalizer */\n  function __vue_normalize__(\n    template, style, script,\n    scope, functional, moduleIdentifier, shadowMode,\n    createInjector, createInjectorSSR, createInjectorShadow\n  ) {\n    const component = (typeof script === 'function' ? script.options : script) || {}\n\n    // For security concerns, we use only base name in production mode.\n    component.__file = \"style>\\n\"\n\n    if (!component.render) {\n      component.render = template.render\n      component.staticRenderFns = template.staticRenderFns\n      component._compiled = true\n\n      if (functional) component.functional = true\n    }\n\n    component._scopeId = scope\n\n    if (true) {\n      let hook\n      if (false) {\n        // In SSR.\n        hook = function(context) {\n          // 2.3 injection\n          context =\n            context || // cached call\n            (this.$vnode && this.$vnode.ssrContext) || // stateful\n            (this.parent && this.parent.$vnode && this.parent.$vnode.ssrContext) // functional\n          // 2.2 with runInNewContext: true\n          if (!context && typeof __VUE_SSR_CONTEXT__ !== 'undefined') {\n            context = __VUE_SSR_CONTEXT__\n          }\n          // inject component styles\n          if (style) {\n            style.call(this, createInjectorSSR(context))\n          }\n          // register component module identifier for async chunk inference\n          if (context && context._registeredComponents) {\n            context._registeredComponents.add(moduleIdentifier)\n          }\n        }\n        // used by ssr in case component is cached and beforeCreate\n        // never gets called\n        component._ssrRegister = hook\n      }\n      else if (style) {\n        hook = shadowMode \n          ? function(context) {\n              style.call(this, createInjectorShadow(context, this.$root.$options.shadowRoot))\n            }\n          : function(context) {\n              style.call(this, createInjector(context))\n            }\n      }\n\n      if (hook !== undefined) {\n        if (component.functional) {\n          // register for functional component in vue file\n          const originalRender = component.render\n          component.render = function renderWithStyleInjection(h, context) {\n            hook.call(context)\n            return originalRender(h, context)\n          }\n        } else {\n          // inject component registration as beforeCreate hook\n          const existing = component.beforeCreate\n          component.beforeCreate = existing ? [].concat(existing, hook) : [hook]\n        }\n      }\n    }\n\n    return component\n  }\n  /* style inject */\n  function __vue_create_injector__() {\n    const styles = __vue_create_injector__.styles || (__vue_create_injector__.styles = {})\n    const isOldIE =\n      typeof navigator !== 'undefined' &&\n      /msie [6-9]\\\\b/.test(navigator.userAgent.toLowerCase())\n\n    return function addStyle(id, css) {\n      if (document.querySelector('style[data-vue-ssr-id~=\"' + id + '\"]')) return // SSR styles are present.\n\n      const group = isOldIE ? css.media || 'default' : id\n      const style = styles[group] || (styles[group] = { ids: [], parts: [], element: undefined })\n\n      if (!style.ids.includes(id)) {\n        let code = css.source\n        let index = style.ids.length\n\n        style.ids.push(id)\n\n        if (true && css.map) {\n          // https://developer.chrome.com/devtools/docs/javascript-debugging\n          // this makes source maps inside style tags work properly in Chrome\n          code += '\\n/*# sourceURL=' + css.map.sources[0] + ' */'\n          // http://stackoverflow.com/a/26603875\n          code +=\n            '\\n/*# sourceMappingURL=data:application/json;base64,' +\n            btoa(unescape(encodeURIComponent(JSON.stringify(css.map)))) +\n            ' */'\n        }\n\n        if (isOldIE) {\n          style.element = style.element || document.querySelector('style[data-group=' + group + ']')\n        }\n\n        if (!style.element) {\n          const head = document.head || document.getElementsByTagName('head')[0]\n          const el = style.element = document.createElement('style')\n          el.type = 'text/css'\n\n          if (css.media) el.setAttribute('media', css.media)\n          if (isOldIE) {\n            el.setAttribute('data-group', group)\n            el.setAttribute('data-next-index', '0')\n          }\n\n          head.appendChild(el)\n        }\n\n        if (isOldIE) {\n          index = parseInt(style.element.getAttribute('data-next-index'))\n          style.element.setAttribute('data-next-index', index + 1)\n        }\n\n        if (style.element.styleSheet) {\n          style.parts.push(code)\n          style.element.styleSheet.cssText = style.parts\n            .filter(Boolean)\n            .join('\\n')\n        } else {\n          const textNode = document.createTextNode(code)\n          const nodes = style.element.childNodes\n          if (nodes[index]) style.element.removeChild(nodes[index])\n          if (nodes.length) style.element.insertBefore(textNode, nodes[index])\n          else style.element.appendChild(textNode)\n        }\n      }\n    }\n  }\n  /* style inject SSR */\n  \n  /* style inject shadow dom */\n  \n\n  \n  const __vue_component__ = /*#__PURE__*/__vue_normalize__(\n    { render: __vue_render__, staticRenderFns: __vue_staticRenderFns__ },\n    __vue_inject_styles__,\n    __vue_script__,\n    __vue_scope_id__,\n    __vue_is_functional_template__,\n    __vue_module_identifier__,\n    false,\n    __vue_create_injector__,\n    undefined,\n    undefined\n  )\n\n  export default __vue_component__", "/* script */\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport ModalTemplate from '../../../../frontend/views/components/modal/ModalTemplate.vue'\n\nconst __vue_script__ = ({\n  name: 'LoadingModal',\n  components: {\n    ModalTemplate\n  }\n}        )\n\n/* template */\nvar __vue_render__ = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('modal-template',{ref:\"modal\",staticClass:\"has-background\",attrs:{\"a11yTitle\":_vm.L(\"Loading\"),\"loading\":true,\"data-test\":\"loadingModal\"}},[_c('template',{slot:\"title\"},[_c('i18n',{staticClass:\"is-title-2 c-title\",attrs:{\"tag\":\"h2\"}},[_vm._v(\"Loading...\")])],1),_c('div',{staticClass:\"loading-box\"})],2)}\nvar __vue_staticRenderFns__ = []\n\n  /* style */\n  const __vue_inject_styles__ = function (inject) {\n    if (!inject) return\n    inject(\"data-v-1809ff32_0\", { source: \".c-title[data-v-1809ff32]{padding:1.5rem 0}\", map: undefined, media: undefined })\n\n  }\n  /* scoped */\n  const __vue_scope_id__ = \"data-v-1809ff32\"\n  /* module identifier */\n  const __vue_module_identifier__ = undefined\n  /* functional template */\n  const __vue_is_functional_template__ = false\n  /* component normalizer */\n  function __vue_normalize__(\n    template, style, script,\n    scope, functional, moduleIdentifier, shadowMode,\n    createInjector, createInjectorSSR, createInjectorShadow\n  ) {\n    const component = (typeof script === 'function' ? script.options : script) || {}\n\n    // For security concerns, we use only base name in production mode.\n    component.__file = \"style>\\n\"\n\n    if (!component.render) {\n      component.render = template.render\n      component.staticRenderFns = template.staticRenderFns\n      component._compiled = true\n\n      if (functional) component.functional = true\n    }\n\n    component._scopeId = scope\n\n    if (true) {\n      let hook\n      if (false) {\n        // In SSR.\n        hook = function(context) {\n          // 2.3 injection\n          context =\n            context || // cached call\n            (this.$vnode && this.$vnode.ssrContext) || // stateful\n            (this.parent && this.parent.$vnode && this.parent.$vnode.ssrContext) // functional\n          // 2.2 with runInNewContext: true\n          if (!context && typeof __VUE_SSR_CONTEXT__ !== 'undefined') {\n            context = __VUE_SSR_CONTEXT__\n          }\n          // inject component styles\n          if (style) {\n            style.call(this, createInjectorSSR(context))\n          }\n          // register component module identifier for async chunk inference\n          if (context && context._registeredComponents) {\n            context._registeredComponents.add(moduleIdentifier)\n          }\n        }\n        // used by ssr in case component is cached and beforeCreate\n        // never gets called\n        component._ssrRegister = hook\n      }\n      else if (style) {\n        hook = shadowMode \n          ? function(context) {\n              style.call(this, createInjectorShadow(context, this.$root.$options.shadowRoot))\n            }\n          : function(context) {\n              style.call(this, createInjector(context))\n            }\n      }\n\n      if (hook !== undefined) {\n        if (component.functional) {\n          // register for functional component in vue file\n          const originalRender = component.render\n          component.render = function renderWithStyleInjection(h, context) {\n            hook.call(context)\n            return originalRender(h, context)\n          }\n        } else {\n          // inject component registration as beforeCreate hook\n          const existing = component.beforeCreate\n          component.beforeCreate = existing ? [].concat(existing, hook) : [hook]\n        }\n      }\n    }\n\n    return component\n  }\n  /* style inject */\n  function __vue_create_injector__() {\n    const styles = __vue_create_injector__.styles || (__vue_create_injector__.styles = {})\n    const isOldIE =\n      typeof navigator !== 'undefined' &&\n      /msie [6-9]\\\\b/.test(navigator.userAgent.toLowerCase())\n\n    return function addStyle(id, css) {\n      if (document.querySelector('style[data-vue-ssr-id~=\"' + id + '\"]')) return // SSR styles are present.\n\n      const group = isOldIE ? css.media || 'default' : id\n      const style = styles[group] || (styles[group] = { ids: [], parts: [], element: undefined })\n\n      if (!style.ids.includes(id)) {\n        let code = css.source\n        let index = style.ids.length\n\n        style.ids.push(id)\n\n        if (true && css.map) {\n          // https://developer.chrome.com/devtools/docs/javascript-debugging\n          // this makes source maps inside style tags work properly in Chrome\n          code += '\\n/*# sourceURL=' + css.map.sources[0] + ' */'\n          // http://stackoverflow.com/a/26603875\n          code +=\n            '\\n/*# sourceMappingURL=data:application/json;base64,' +\n            btoa(unescape(encodeURIComponent(JSON.stringify(css.map)))) +\n            ' */'\n        }\n\n        if (isOldIE) {\n          style.element = style.element || document.querySelector('style[data-group=' + group + ']')\n        }\n\n        if (!style.element) {\n          const head = document.head || document.getElementsByTagName('head')[0]\n          const el = style.element = document.createElement('style')\n          el.type = 'text/css'\n\n          if (css.media) el.setAttribute('media', css.media)\n          if (isOldIE) {\n            el.setAttribute('data-group', group)\n            el.setAttribute('data-next-index', '0')\n          }\n\n          head.appendChild(el)\n        }\n\n        if (isOldIE) {\n          index = parseInt(style.element.getAttribute('data-next-index'))\n          style.element.setAttribute('data-next-index', index + 1)\n        }\n\n        if (style.element.styleSheet) {\n          style.parts.push(code)\n          style.element.styleSheet.cssText = style.parts\n            .filter(Boolean)\n            .join('\\n')\n        } else {\n          const textNode = document.createTextNode(code)\n          const nodes = style.element.childNodes\n          if (nodes[index]) style.element.removeChild(nodes[index])\n          if (nodes.length) style.element.insertBefore(textNode, nodes[index])\n          else style.element.appendChild(textNode)\n        }\n      }\n    }\n  }\n  /* style inject SSR */\n  \n  /* style inject shadow dom */\n  \n\n  \n  const __vue_component__ = /*#__PURE__*/__vue_normalize__(\n    { render: __vue_render__, staticRenderFns: __vue_staticRenderFns__ },\n    __vue_inject_styles__,\n    __vue_script__,\n    __vue_scope_id__,\n    __vue_is_functional_template__,\n    __vue_module_identifier__,\n    false,\n    __vue_create_injector__,\n    undefined,\n    undefined\n  )\n\n  export default __vue_component__", "/* script */\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport ModalBaseTemplate from '../../../../frontend/views/components/modal/ModalBaseTemplate.vue'\n\nconst __vue_script__ = ({\n  name: 'LoadingModal',\n  components: {\n    ModalBaseTemplate\n  }\n}        )\n\n/* template */\nvar __vue_render__ = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('modal-base-template',{ref:\"modal\",staticClass:\"has-background\",attrs:{\"a11yTitle\":_vm.L(\"Loading\"),\"loading\":true}},[_c('div',{staticClass:\"wrapper-container\"},[_c('div',{staticClass:\"container\"},[_c('i18n',{staticClass:\"is-title-2 c-title\",attrs:{\"tag\":\"h2\"}},[_vm._v(\"Loading...\")]),_c('div',{staticClass:\"loading-box\"})],1)])])}\nvar __vue_staticRenderFns__ = []\n\n  /* style */\n  const __vue_inject_styles__ = function (inject) {\n    if (!inject) return\n    inject(\"data-v-4f5fa5b8_0\", { source: \".wrapper-container[data-v-4f5fa5b8]{height:100%;width:100%;opacity:1;background-color:var(--general_2)}.container[data-v-4f5fa5b8]{max-width:66vw;margin:0 auto}.c-title[data-v-4f5fa5b8]{padding:2.5rem 0 1rem 0}\", map: undefined, media: undefined })\n\n  }\n  /* scoped */\n  const __vue_scope_id__ = \"data-v-4f5fa5b8\"\n  /* module identifier */\n  const __vue_module_identifier__ = undefined\n  /* functional template */\n  const __vue_is_functional_template__ = false\n  /* component normalizer */\n  function __vue_normalize__(\n    template, style, script,\n    scope, functional, moduleIdentifier, shadowMode,\n    createInjector, createInjectorSSR, createInjectorShadow\n  ) {\n    const component = (typeof script === 'function' ? script.options : script) || {}\n\n    // For security concerns, we use only base name in production mode.\n    component.__file = \"style>\\n\"\n\n    if (!component.render) {\n      component.render = template.render\n      component.staticRenderFns = template.staticRenderFns\n      component._compiled = true\n\n      if (functional) component.functional = true\n    }\n\n    component._scopeId = scope\n\n    if (true) {\n      let hook\n      if (false) {\n        // In SSR.\n        hook = function(context) {\n          // 2.3 injection\n          context =\n            context || // cached call\n            (this.$vnode && this.$vnode.ssrContext) || // stateful\n            (this.parent && this.parent.$vnode && this.parent.$vnode.ssrContext) // functional\n          // 2.2 with runInNewContext: true\n          if (!context && typeof __VUE_SSR_CONTEXT__ !== 'undefined') {\n            context = __VUE_SSR_CONTEXT__\n          }\n          // inject component styles\n          if (style) {\n            style.call(this, createInjectorSSR(context))\n          }\n          // register component module identifier for async chunk inference\n          if (context && context._registeredComponents) {\n            context._registeredComponents.add(moduleIdentifier)\n          }\n        }\n        // used by ssr in case component is cached and beforeCreate\n        // never gets called\n        component._ssrRegister = hook\n      }\n      else if (style) {\n        hook = shadowMode \n          ? function(context) {\n              style.call(this, createInjectorShadow(context, this.$root.$options.shadowRoot))\n            }\n          : function(context) {\n              style.call(this, createInjector(context))\n            }\n      }\n\n      if (hook !== undefined) {\n        if (component.functional) {\n          // register for functional component in vue file\n          const originalRender = component.render\n          component.render = function renderWithStyleInjection(h, context) {\n            hook.call(context)\n            return originalRender(h, context)\n          }\n        } else {\n          // inject component registration as beforeCreate hook\n          const existing = component.beforeCreate\n          component.beforeCreate = existing ? [].concat(existing, hook) : [hook]\n        }\n      }\n    }\n\n    return component\n  }\n  /* style inject */\n  function __vue_create_injector__() {\n    const styles = __vue_create_injector__.styles || (__vue_create_injector__.styles = {})\n    const isOldIE =\n      typeof navigator !== 'undefined' &&\n      /msie [6-9]\\\\b/.test(navigator.userAgent.toLowerCase())\n\n    return function addStyle(id, css) {\n      if (document.querySelector('style[data-vue-ssr-id~=\"' + id + '\"]')) return // SSR styles are present.\n\n      const group = isOldIE ? css.media || 'default' : id\n      const style = styles[group] || (styles[group] = { ids: [], parts: [], element: undefined })\n\n      if (!style.ids.includes(id)) {\n        let code = css.source\n        let index = style.ids.length\n\n        style.ids.push(id)\n\n        if (true && css.map) {\n          // https://developer.chrome.com/devtools/docs/javascript-debugging\n          // this makes source maps inside style tags work properly in Chrome\n          code += '\\n/*# sourceURL=' + css.map.sources[0] + ' */'\n          // http://stackoverflow.com/a/26603875\n          code +=\n            '\\n/*# sourceMappingURL=data:application/json;base64,' +\n            btoa(unescape(encodeURIComponent(JSON.stringify(css.map)))) +\n            ' */'\n        }\n\n        if (isOldIE) {\n          style.element = style.element || document.querySelector('style[data-group=' + group + ']')\n        }\n\n        if (!style.element) {\n          const head = document.head || document.getElementsByTagName('head')[0]\n          const el = style.element = document.createElement('style')\n          el.type = 'text/css'\n\n          if (css.media) el.setAttribute('media', css.media)\n          if (isOldIE) {\n            el.setAttribute('data-group', group)\n            el.setAttribute('data-next-index', '0')\n          }\n\n          head.appendChild(el)\n        }\n\n        if (isOldIE) {\n          index = parseInt(style.element.getAttribute('data-next-index'))\n          style.element.setAttribute('data-next-index', index + 1)\n        }\n\n        if (style.element.styleSheet) {\n          style.parts.push(code)\n          style.element.styleSheet.cssText = style.parts\n            .filter(Boolean)\n            .join('\\n')\n        } else {\n          const textNode = document.createTextNode(code)\n          const nodes = style.element.childNodes\n          if (nodes[index]) style.element.removeChild(nodes[index])\n          if (nodes.length) style.element.insertBefore(textNode, nodes[index])\n          else style.element.appendChild(textNode)\n        }\n      }\n    }\n  }\n  /* style inject SSR */\n  \n  /* style inject shadow dom */\n  \n\n  \n  const __vue_component__ = /*#__PURE__*/__vue_normalize__(\n    { render: __vue_render__, staticRenderFns: __vue_staticRenderFns__ },\n    __vue_inject_styles__,\n    __vue_script__,\n    __vue_scope_id__,\n    __vue_is_functional_template__,\n    __vue_module_identifier__,\n    false,\n    __vue_create_injector__,\n    undefined,\n    undefined\n  )\n\n  export default __vue_component__", "/* script */\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nconst __vue_script__ = ({\n  name: 'LoadingPage'\n}        )\n\n/* template */\nvar __vue_render__ = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"p-wrapper\"},[_c('header',{staticClass:\"p-header\"},[_c('h1',{staticClass:\"is-title-2 p-title\"},[_c('img',{staticClass:\"c-logo\",attrs:{\"src\":\"/assets/images/group-income-icon-transparent.png\",\"alt\":\"\"}}),_vm._v(_vm._s(_vm.$route.meta.title))])]),_vm._m(0)])}\nvar __vue_staticRenderFns__ = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('main',{staticClass:\"p-main\"},[_c('div',{staticClass:\"loading-box\"}),_c('div',{staticClass:\"loading-box\"}),_c('div',{staticClass:\"loading-box\"})])}]\n\n  /* style */\n  const __vue_inject_styles__ = function (inject) {\n    if (!inject) return\n    inject(\"data-v-0f1d4d2c_0\", { source: \".p-wrapper[data-v-0f1d4d2c]{display:grid;grid-template-areas:\\\"p-header\\\" \\\"p-main\\\";grid-template-columns:1fr;grid-template-rows:auto minmax(0,1fr);height:100%;width:100vw}@media screen and (min-width:1200px){.p-wrapper[data-v-0f1d4d2c]{width:auto;grid-template-columns:minmax(0,1fr) 16.5rem;grid-template-areas:\\\"p-header p-sidebar\\\" \\\"p-main p-sidebar\\\"}}.p-main[data-v-0f1d4d2c]{grid-area:p-main;width:calc(100% - 2rem);margin:0 auto;padding-top:1.5rem;max-width:50rem;display:flex;flex-direction:column;-webkit-overflow-scrolling:touch}@media screen and (min-width:769px),print{.p-main[data-v-0f1d4d2c]{width:calc(100% - 4rem)}}@media screen and (min-width:1200px){.p-main[data-v-0f1d4d2c]{width:auto;padding-top:0;margin-right:2rem;margin-left:5.5rem}}.p-header[data-v-0f1d4d2c]{grid-area:p-header;transition:padding ease-out .3s;text-align:center;min-height:4rem}@media screen and (max-width:1199px){.p-header[data-v-0f1d4d2c]{display:flex;justify-content:center;align-items:center;position:sticky;top:0;background:var(--general_2);z-index:3}}@media screen and (min-width:1200px){.p-header[data-v-0f1d4d2c]{display:block;padding-top:1.125rem;text-align:left;min-height:4.75rem;padding-left:5.5rem}}.p-title[data-v-0f1d4d2c]{display:flex;align-items:center}.c-logo[data-v-0f1d4d2c]{width:1.5rem;height:1.5rem;margin-right:1rem}@media screen and (min-width:1200px){.c-logo[data-v-0f1d4d2c]{display:none}}\", map: undefined, media: undefined })\n\n  }\n  /* scoped */\n  const __vue_scope_id__ = \"data-v-0f1d4d2c\"\n  /* module identifier */\n  const __vue_module_identifier__ = undefined\n  /* functional template */\n  const __vue_is_functional_template__ = false\n  /* component normalizer */\n  function __vue_normalize__(\n    template, style, script,\n    scope, functional, moduleIdentifier, shadowMode,\n    createInjector, createInjectorSSR, createInjectorShadow\n  ) {\n    const component = (typeof script === 'function' ? script.options : script) || {}\n\n    // For security concerns, we use only base name in production mode.\n    component.__file = \"style>\\n\"\n\n    if (!component.render) {\n      component.render = template.render\n      component.staticRenderFns = template.staticRenderFns\n      component._compiled = true\n\n      if (functional) component.functional = true\n    }\n\n    component._scopeId = scope\n\n    if (true) {\n      let hook\n      if (false) {\n        // In SSR.\n        hook = function(context) {\n          // 2.3 injection\n          context =\n            context || // cached call\n            (this.$vnode && this.$vnode.ssrContext) || // stateful\n            (this.parent && this.parent.$vnode && this.parent.$vnode.ssrContext) // functional\n          // 2.2 with runInNewContext: true\n          if (!context && typeof __VUE_SSR_CONTEXT__ !== 'undefined') {\n            context = __VUE_SSR_CONTEXT__\n          }\n          // inject component styles\n          if (style) {\n            style.call(this, createInjectorSSR(context))\n          }\n          // register component module identifier for async chunk inference\n          if (context && context._registeredComponents) {\n            context._registeredComponents.add(moduleIdentifier)\n          }\n        }\n        // used by ssr in case component is cached and beforeCreate\n        // never gets called\n        component._ssrRegister = hook\n      }\n      else if (style) {\n        hook = shadowMode \n          ? function(context) {\n              style.call(this, createInjectorShadow(context, this.$root.$options.shadowRoot))\n            }\n          : function(context) {\n              style.call(this, createInjector(context))\n            }\n      }\n\n      if (hook !== undefined) {\n        if (component.functional) {\n          // register for functional component in vue file\n          const originalRender = component.render\n          component.render = function renderWithStyleInjection(h, context) {\n            hook.call(context)\n            return originalRender(h, context)\n          }\n        } else {\n          // inject component registration as beforeCreate hook\n          const existing = component.beforeCreate\n          component.beforeCreate = existing ? [].concat(existing, hook) : [hook]\n        }\n      }\n    }\n\n    return component\n  }\n  /* style inject */\n  function __vue_create_injector__() {\n    const styles = __vue_create_injector__.styles || (__vue_create_injector__.styles = {})\n    const isOldIE =\n      typeof navigator !== 'undefined' &&\n      /msie [6-9]\\\\b/.test(navigator.userAgent.toLowerCase())\n\n    return function addStyle(id, css) {\n      if (document.querySelector('style[data-vue-ssr-id~=\"' + id + '\"]')) return // SSR styles are present.\n\n      const group = isOldIE ? css.media || 'default' : id\n      const style = styles[group] || (styles[group] = { ids: [], parts: [], element: undefined })\n\n      if (!style.ids.includes(id)) {\n        let code = css.source\n        let index = style.ids.length\n\n        style.ids.push(id)\n\n        if (true && css.map) {\n          // https://developer.chrome.com/devtools/docs/javascript-debugging\n          // this makes source maps inside style tags work properly in Chrome\n          code += '\\n/*# sourceURL=' + css.map.sources[0] + ' */'\n          // http://stackoverflow.com/a/26603875\n          code +=\n            '\\n/*# sourceMappingURL=data:application/json;base64,' +\n            btoa(unescape(encodeURIComponent(JSON.stringify(css.map)))) +\n            ' */'\n        }\n\n        if (isOldIE) {\n          style.element = style.element || document.querySelector('style[data-group=' + group + ']')\n        }\n\n        if (!style.element) {\n          const head = document.head || document.getElementsByTagName('head')[0]\n          const el = style.element = document.createElement('style')\n          el.type = 'text/css'\n\n          if (css.media) el.setAttribute('media', css.media)\n          if (isOldIE) {\n            el.setAttribute('data-group', group)\n            el.setAttribute('data-next-index', '0')\n          }\n\n          head.appendChild(el)\n        }\n\n        if (isOldIE) {\n          index = parseInt(style.element.getAttribute('data-next-index'))\n          style.element.setAttribute('data-next-index', index + 1)\n        }\n\n        if (style.element.styleSheet) {\n          style.parts.push(code)\n          style.element.styleSheet.cssText = style.parts\n            .filter(Boolean)\n            .join('\\n')\n        } else {\n          const textNode = document.createTextNode(code)\n          const nodes = style.element.childNodes\n          if (nodes[index]) style.element.removeChild(nodes[index])\n          if (nodes.length) style.element.insertBefore(textNode, nodes[index])\n          else style.element.appendChild(textNode)\n        }\n      }\n    }\n  }\n  /* style inject SSR */\n  \n  /* style inject shadow dom */\n  \n\n  \n  const __vue_component__ = /*#__PURE__*/__vue_normalize__(\n    { render: __vue_render__, staticRenderFns: __vue_staticRenderFns__ },\n    __vue_inject_styles__,\n    __vue_script__,\n    __vue_scope_id__,\n    __vue_is_functional_template__,\n    __vue_module_identifier__,\n    false,\n    __vue_create_injector__,\n    undefined,\n    undefined\n  )\n\n  export default __vue_component__", "'use strict'\n\nimport sbp from '@sbp/sbp'\nimport { L } from '@common/common.js'\nimport Router from 'vue-router'\nimport store from '~/frontend/model/state.js'\nimport Home from '@pages/Home.vue'\nimport Join from '@pages/Join.vue'\nimport { lazyPage } from '@utils/lazyLoadedView.js'\nimport Vue from 'vue'\n\n/*\n * Lazy load all the pages that are not necessary at initial loading of the app.\n *\n * By default `lazyPage()` will use the generic `LoadingPage` and `ErrorPage` components,\n * but other components can be specified using the `loading` and `error` options.\n */\nconst lazyContributions = lazyPage(() => import('@pages/Contributions.vue'))\nconst lazyDesignSystem = lazyPage(() => import('@pages/DesignSystem.vue'))\nconst lazyGroupChat = lazyPage(() => import('@pages/GroupChat.vue'))\nconst lazyGroupDashboard = lazyPage(() => import('@pages/GroupDashboard.vue'))\nconst lazyGlobalDashboard = lazyPage(() => import('@pages/GlobalDashboard.vue'))\nconst lazyGroupSettings = lazyPage(() => import('@pages/GroupSettings.vue'))\nconst lazyPayments = lazyPage(() => import('@pages/Payments.vue'))\nconst lazyPendingApproval = lazyPage(() => import('@pages/PendingApproval.vue'))\n\nVue.use(Router)\n\n/*\n  The following are reusable guard for routes\n  the 'guard' defines how the route is blocked and the redirect determines the redirect behavior\n  when a route is blocked.\n */\nconst homeGuard = {\n  guard: (to, from) => !!store.state.currentGroupId,\n  redirect: (to, from) => {\n    return ({\n      path:\n      // If we haven't accepted the invite OR we haven't clicked 'Awesome' on\n      // the welcome screen, redirect to the '/pending-approval' page\n      store.getters.seenWelcomeScreen\n        ? '/dashboard'\n        : '/pending-approval'\n    })\n  }\n}\n\nconst loginGuard = {\n  guard: (to, from) => !store.state.loggedIn,\n  redirect: (to, from) => ({ path: '/', query: { next: to.fullPath } })\n}\n\nconst inviteGuard = {\n  guard: (to, from) => {\n    // ex: http://localhost:8000/app/join#?groupId=21XWnNRE7vggw4ngGqmQz5D4vAwPYqcREhEkGop2mYZTKVkx8H&secret=5157\n    return !(to.hash.includes('groupId=') && to.hash.includes('secret='))\n  },\n  redirect: (to, from) => ({ path: '/' })\n}\n\n// Check if user has a group\nconst groupGuard = {\n  guard: (to, from) => !store.state.currentGroupId,\n  redirect: (to, from) => ({ path: '/' })\n}\n\nconst pendingApprovalGuard = {\n  guard: (to, from) => store.state.currentGroupId && !store.getters.ourProfileActive,\n  redirect: (to, from) => ({ path: '/pending-approval' })\n}\n\n// TODO: add state machine guard and redirect to critical error page if necessary\nfunction createEnterGuards (...guards) {\n  return function (to, from, next) {\n    for (const current of guards) {\n      if (current.guard(to, from)) {\n        return next(current.redirect(to, from))\n      }\n    }\n    next()\n  }\n}\n\nconst router      = new Router({\n  mode: 'history',\n  base: '/app',\n  scrollBehavior (to, from, savedPosition) {\n    return { x: 0, y: 0 }\n  },\n  routes: [\n    {\n      path: '/',\n      component: Home,\n      name: 'home',\n      meta: { title: L('Group Income') }, // page title. see issue #45\n      beforeEnter: createEnterGuards(homeGuard)\n    },\n    {\n      path: '/design-system',\n      component: lazyDesignSystem,\n      name: 'DesignSystem',\n      meta: { title: L('Design System') }\n      // beforeEnter: createEnterGuards(designGuard)\n    },\n    {\n      path: '/dashboard',\n      component: lazyGroupDashboard,\n      name: 'GroupDashboard',\n      meta: { title: L('Group Dashboard') },\n      beforeEnter: createEnterGuards(loginGuard, groupGuard, pendingApprovalGuard)\n    },\n    {\n      path: '/global-dashboard/:id',\n      component: lazyGlobalDashboard,\n      name: 'GlobalDashboard',\n      meta: { title: L('Global Dashboard') },\n      beforeEnter: createEnterGuards(loginGuard, groupGuard)\n    },\n    {\n      path: '/global-dashboard', redirect: '/global-dashboard/news-and-updates'\n    },\n    {\n      path: '/contributions',\n      component: lazyContributions,\n      name: 'Contributions',\n      meta: { title: L('Contributions') },\n      beforeEnter: createEnterGuards(loginGuard, groupGuard, pendingApprovalGuard)\n    },\n    {\n      path: '/payments',\n      component: lazyPayments,\n      name: 'Payments',\n      meta: { title: L('Payments') },\n      beforeEnter: createEnterGuards(loginGuard, groupGuard, pendingApprovalGuard)\n    },\n    {\n      path: '/group-chat',\n      component: lazyGroupChat,\n      name: 'GroupChat',\n      meta: { title: L('Group Chat') },\n      beforeEnter: createEnterGuards(loginGuard, groupGuard, pendingApprovalGuard)\n    },\n    {\n      path: '/group-chat/:chatRoomID',\n      component: lazyGroupChat,\n      name: 'GroupChatConversation',\n      meta: { title: L('Loading') },\n      /**\n       * The weird title `Loading` is used as title until the page is loaded\n       * Chatroom details could be retrieved from the backend using it's id(chatRoomID)\n       * So until that time, chatroom name is unknown and could display `Loading`\n       */\n      beforeEnter: createEnterGuards(loginGuard, groupGuard, pendingApprovalGuard)\n    },\n    {\n      path: '/group-settings',\n      component: lazyGroupSettings,\n      name: 'GroupSettings',\n      meta: { title: L('Group Settings') },\n      beforeEnter: createEnterGuards(loginGuard, groupGuard, pendingApprovalGuard)\n    },\n    {\n      path: '/join',\n      name: Join.name,\n      component: Join,\n      meta: { title: L('Join a Group') },\n      beforeEnter: createEnterGuards(inviteGuard)\n    },\n    {\n      path: '/pending-approval',\n      component: lazyPendingApproval,\n      name: 'PendingApproval',\n      meta: { title: L('Pending Approval') },\n      beforeEnter: createEnterGuards(loginGuard)\n    },\n    ...(process.env.NODE_ENV === 'development'\n      ? [{\n          path: '/error-testing',\n          name: 'ErrorTesting',\n          component: () => import('../views/pages/ErrorTesting.vue'),\n          meta: { title: L('Error Testing') }\n        }]\n      : []),\n    {\n      path: '*',\n      redirect: '/'\n    }\n  ]\n})\n\nrouter.beforeEach((to, from, next) => {\n  if (to.query.modal &&\n    !['Prompt', 'SignupModal', 'LoginModal'].includes(to.query.modal) &&\n    !store.state.loggedIn) {\n    // if modal is queried and,\n    // the requested modal is only meant to be used post authentication and\n    // the user is not logged in now, navigate to home page and set the next query param\n    // to redirect to the requested page after login.\n    return next({ path: '/', query: { next: to.fullPath } })\n  }\n\n  document.title = to.meta.title\n  next()\n})\n\nsbp('sbp/selectors/register', {\n  'controller/router': () => router\n})\n\nexport default router\n", "export default ((() => {\n  let isPwa\n\n  return () => {\n    if (isPwa == null) {\n      isPwa =\n        window.matchMedia('(display-mode: standalone) or (display-mode: window-controls-overlay)').matches ||\n        // $FlowFixMe[prop-missing]\n        navigator.standalone\n    }\n\n    return isPwa\n  }\n})()               )\n", "'use strict'\n\nimport { deserializer, serializer } from '@chelonia/serdes'\nimport { L } from '@common/common.js'\nimport sbp from '@sbp/sbp'\nimport { CAPTURED_LOGS, CONTRACT_SYNCS_RESET, LOGIN_COMPLETE, NEW_CHATROOM_NOTIFICATION_SETTINGS, NEW_CHATROOM_UNREAD_POSITION, PWA_INSTALLABLE, SET_APP_LOGS_FILTER } from '@utils/events.js'\nimport isPwa from '@utils/isPwa.js'\nimport { HOURS_MILLIS } from '~/frontend/model/contracts/shared/time.js'\nimport { SPMessage } from '@chelonia/lib/SPMessage'\nimport { Secret } from '@chelonia/lib/Secret'\nimport { getSubscriptionId } from '@chelonia/lib/functions'\n\nconst pwa = {\n  deferredInstallPrompt: null,\n  installed: false\n}\n\ndeserializer.register(SPMessage)\ndeserializer.register(Secret)\n\n// How to provide your own in-app PWA install experience:\n// https://web.dev/articles/customize-install\n\n// PWA related event handlers\n// NOTE: Apparently, 'beforeinstallprompt' is not fired either when a PWA from the browser is already installed.\nwindow.addEventListener('beforeinstallprompt', e => {\n  // e.preventDefault() - uncomment this if we want to prevent the browser from displaying its own install UI.\n\n  pwa.deferredInstallPrompt = e\n  sbp('okTurtles.events/emit', PWA_INSTALLABLE)\n})\n\nconst serviceWorkerMap = new WeakMap()\nconst waitUntilSwReady = () => {\n  const promise = new Promise((resolve, reject) => {\n    const messageChannel = new MessageChannel()\n    messageChannel.port1.onmessage = (event) => {\n      if (event.data.type === 'ready') {\n        // For backward- and forward-compatibility (`currentSyncs` may not be\n        // defined in a different SW version)\n        if (event.data.currentSyncs) {\n          sbp('okTurtles.events/emit', CONTRACT_SYNCS_RESET, event.data.currentSyncs)\n        }\n        resolve()\n      } else {\n        reject(event.data.error)\n      }\n      messageChannel.port1.close()\n    }\n    messageChannel.port1.onmessageerror = () => {\n      reject(new Error('Message error'))\n      messageChannel.port1.close()\n    }\n    const oncontrollerchange = () => {\n      navigator.serviceWorker.removeEventListener('controllerchange', oncontrollerchange, false)\n      // If the SW controller has changed (e.g., because of an update), we call\n      // `waitUntilSwReady` again and return the result of that call. That will\n      // also populate `serviceWorkerMap`\n      resolve(waitUntilSwReady())\n    }\n    navigator.serviceWorker.addEventListener('controllerchange', oncontrollerchange, false)\n\n    navigator.serviceWorker.ready.then((worker) => {\n      if (serviceWorkerMap.has(worker.active)) {\n        resolve(serviceWorkerMap.get(worker.active))\n        return\n      }\n      serviceWorkerMap.set(worker.active, promise)\n      worker.active.postMessage({\n        type: 'ready',\n        port: messageChannel.port2,\n        GI_VERSION: process.env.GI_VERSION\n      }, [messageChannel.port2])\n    }).catch((e) => {\n      reject(e)\n      messageChannel.port1.close()\n    })\n  })\n\n  return promise\n}\n\nsbp('sbp/selectors/register', {\n  'service-worker/setup': async function () {\n    // setup service worker\n    // TODO: move ahead with encryption stuff ignoring this service worker stuff for now\n    // TODO: improve updating the sw: https://stackoverflow.com/a/49748437\n    // NOTE: user should still be able to use app even if all the SW stuff fails\n    if (!('serviceWorker' in navigator)) {\n      throw new Error('Service worker APIs missing')\n    }\n\n    try {\n      // Using hash (#) is possible, but seems to get reset when the SW restarts\n      const params = new URLSearchParams([\n        ['routerBase', sbp('controller/router').options.base ?? ''],\n        ['standalone', isPwa() ? '1' : '0']\n      ])\n      const swRegistration = await navigator.serviceWorker.register(`/assets/js/sw-primary.js?${params}`, { scope: '/' })\n\n      // This probably happens if the SW immediately crashed after registration\n      // (e.g., trying to access indexedDB if it's undefined). In any case, we\n      // can't proceed when this happens and .update() below will fail. The goal\n      // of this check is to provide a more useful error message.\n      if (swRegistration.active == null && swRegistration.installing == null && swRegistration.waiting == null) {\n        throw new Error('No valid service worker found')\n      }\n\n      // if an active service-worker exists, checks for the updates immediately first and then repeats it every 1hr\n      await swRegistration.update()\n      setInterval(() => sbp('service-worker/update'), HOURS_MILLIS)\n\n      navigator.serviceWorker.addEventListener('message', event => {\n        const data = event.data\n        const silentEmit = sbp('sbp/selectors/fn', 'okTurtles.events/emit')\n\n        if (typeof data === 'object' && data.type) {\n          switch (data.type) {\n            case 'pong':\n              break\n            case 'event': {\n              sbp('okTurtles.events/emit', event.data.subtype, ...deserializer(event.data.data))\n              break\n            }\n            case 'navigate': {\n              if (data.groupID) {\n                sbp('state/vuex/commit', 'setCurrentGroupId', { contractID: data.groupID })\n              }\n              sbp('controller/router').push({ path: data.path }).catch(console.warn)\n              break\n            }\n            // `sbp` invocations from the SW to the app. Used by the\n            // `notificationclick` handler for notifications that have an\n            // `sbpInvocation` instead of a `linkTo` property.\n            case 'sbp': {\n              sbp(...deserializer(event.data.data))\n              break\n            }\n            case CAPTURED_LOGS: {\n              // Emit silently to avoid flooding logs with event emitted entries\n              silentEmit(CAPTURED_LOGS, ...deserializer(event.data.data))\n              break\n            }\n            default:\n              console.error('[sw] Received unknown message type from the service worker:', data)\n              break\n          }\n        }\n      })\n\n      // Send a 'ready' message to the SW and wait back for a response\n      // This way we ensure that Chelonia has been set up\n      await waitUntilSwReady()\n\n      if (!process.env.CI && typeof PeriodicSyncManager === 'function') {\n        navigator.permissions.query({\n          name: 'periodic-background-sync'\n        }).then((status) => {\n          if (status.state !== 'granted') {\n            console.error('[service-workers/setup] Periodic sync event permission denied')\n            return\n          }\n\n          return navigator.serviceWorker.ready.then((registration) =>\n            registration.periodicSync.register('periodic-notifications', {\n              // An interval of 12 hours\n              minInterval: 12 * HOURS_MILLIS\n            })\n          )\n        }).catch((e) => {\n          console.error('[service-workers/setup] Error setting up periodic background sync events', e)\n        })\n      }\n\n      // Set up an event listener to have SW call `skipWaiting` after\n      // installation is complete. The SW already does this, but we had some\n      // issues with the SW being installed but not activated after an update\n      // for yet-unknown reasons. This logic attemps to force a new call to\n      // `skipWaiting`, increasing the odds of the new SW replacing the old\n      // version. (When a SW updates, both versions exist simultaneously,\n      // although only one is connected to a page at a time.)\n      swRegistration.addEventListener('updatefound', (e) => {\n        const handler = (e) => {\n          if (['activated', 'redundant'].includes(e.target.state)) {\n            e.target.removeEventListener('statechange', handler)\n            return\n          }\n          if (e.target.state === 'installed') {\n            e.target.postMessage({ type: 'skip-waiting' })\n          }\n        }\n        e.target.installing.addEventListener('statechange', handler, false)\n      })\n\n      // Keep the service worker alive while the window is open\n      // The default idle timeout on Chrome and Firefox is 30 seconds. We send\n      // a ping message every 5 seconds to ensure that the worker remains\n      // active.\n      // The downside of this is that there are messges going back and forth\n      // between the service worker and each tab, the number of which is\n      // proportional to the number of tabs open.\n      // The upside of this is that the service worker remains active while\n      // there are open tabs, which makes it faster and smoother to interact\n      // with contracts than if the service worker had to be restarted.\n      setInterval(() => navigator.serviceWorker.controller?.postMessage({ type: 'ping' }), 5000)\n    } catch (e) {\n      console.error('error setting up service worker:', e)\n      throw e\n    }\n  },\n  // We call this when the notification permission changes, to create a push\n  // subscription and report it to the server. We need to do this outside of the\n  // service worker because this generally happens after requesting the\n  // notifications permission, which requires user interaction and can't be\n  // done form the SW itself.\n  // In theory, the `PushManager` APIs used are available in the SW and we could\n  // have this function there. However, most examples perform this outside of the\n  // SW, and private testing showed that it's more reliable doing it here.\n  'service-worker/setup-push-subscription': async function (attemptNumber = 1) {\n    if (process.env.CI) {\n      throw new Error('Push disabled in CI mode')\n    }\n    let retryAttemptsPromise = null\n    await sbp('okTurtles.eventQueue/queueEvent', 'service-worker/setup-push-subscription', async () => {\n      const { notificationEnabled } = sbp('state/vuex/state').settings\n      // Get the installed service-worker registration\n      const registration = await navigator.serviceWorker.ready\n      if (!registration) {\n        throw new Error('No service-worker registration found!')\n      }\n      // Safari sometimes incorrectly reports 'prompt' when using `registration.pushManager.permissionState`\n      const permissionState = await registration.pushManager.permissionState({ userVisibleOnly: true })\n      const granted = permissionState === 'granted' || Notification.permission === 'granted'\n      console.info(`[service-worker/setup-push-subscription] setup: notifications (${notificationEnabled}) perms (${granted})`)\n      try {\n        let subscription = null\n        let subID = null\n        // get a real push subscription only if both browser permissions allow and user wants us to\n        if (notificationEnabled && granted) {\n          subscription = await registration.pushManager.getSubscription()\n          let newSub = false\n          let endpoint = null\n          if (!subscription || (subscription.expirationTime != null && subscription.expirationTime <= Date.now())) {\n            const subscriptionOptions = await sbp('push/getSubscriptionOptions')\n            subscription = await registration.pushManager.subscribe(subscriptionOptions)\n            newSub = true\n          }\n          if (subscription?.endpoint) {\n            endpoint = new URL(subscription.endpoint).host // hide the full endpoint from the logs for privacy\n            subID = await getSubscriptionId(subscription.toJSON())\n          }\n          console.info(`[service-worker/setup-push-subscription] got ${newSub ? 'new' : 'existing'} subscription '${subID}':`, endpoint)\n        }\n        console.info('[service-worker/setup-push-subscription] calling push/reportExistingSubscription on:', subID)\n        await sbp('push/reportExistingSubscription', subscription?.toJSON(), subscription?.options.applicationServerKey)\n      } catch (e) {\n        console.error('[service-worker/setup-push-subscription] error getting a subscription:', e)\n\n        if (attemptNumber >= 12) {\n          console.error('[service-worker/setup-push-subscription] maxAttempts reached, giving up')\n          sbp('gi.ui/prompt', {\n            heading: L('Error setting up push notifications'),\n            question: L('Error setting up push notifications: {errMsg}{br_}{br_}Please make sure {a_}push services are enabled{_a} in your Browser settings, and then try reloading the app and toggling the push notifications toggle in the Notifications user settings.', {\n              errMsg: e?.message,\n              a_: '<a class=\"link\" target=\"_blank\" href=\"https://stackoverflow.com/a/69624651\">',\n              _a: '</a>',\n              br_: '<br/>'\n            }),\n            primaryButton: L('Close')\n          })\n          // NOTE: we do not need to setup an ONLINE event listener here because one is already setup in main.js\n          throw e // give up\n        }\n        // this outer promise is a way to wait on this sub-call to finish without getting the eventQueue stuck\n        retryAttemptsPromise = new Promise((resolve, reject) => {\n          // try again in 5 seconds\n          setTimeout(() => {\n            sbp('service-worker/setup-push-subscription', attemptNumber + 1).then(resolve).catch(reject)\n          }, 5e3)\n        })\n      }\n    })\n    if (retryAttemptsPromise) {\n      // wait until all attempts have finished\n      await retryAttemptsPromise\n    }\n  },\n  'service-worker/update': async function () {\n    // This function manually checks for the service worker updates and trigger them if there are.\n    // reference-1: https://web.dev/articles/service-worker-lifecycle#manual_updates\n    // reference-2: https://developer.mozilla.org/en-US/docs/Web/API/ServiceWorkerRegistration/update\n    if ('serviceWorker' in navigator) {\n      try {\n        const swRegistration = await navigator.serviceWorker.ready\n\n        if (swRegistration) {\n          const newRegistration = await swRegistration.update()\n          return newRegistration\n        } else {\n          console.debug('[sw] No active service-worker was found while checking for the updates.')\n          return\n        }\n      } catch (err) {\n        console.error(`[sw] Failed to update the service-worker! - ${err.message}`)\n      }\n    }\n  },\n  'service-worker/check-pwa-installability': function () {\n    return Boolean(pwa.deferredInstallPrompt)\n  },\n  'service-worker/trigger-install-prompt': async function () {\n    if (!pwa.deferredInstallPrompt) { return false }\n\n    const result = await pwa.deferredInstallPrompt.prompt()\n    return result.outcome\n  }\n})\n\n// Events that need to be relayed to the SW\n;[LOGIN_COMPLETE, SET_APP_LOGS_FILTER].forEach((event) =>\n  sbp('okTurtles.events/on', event, (...data) => {\n    navigator.serviceWorker.controller?.postMessage({ type: 'event', subtype: event, data })\n  })\n)\n\nsbp('okTurtles.events/on', NEW_CHATROOM_UNREAD_POSITION, (obj        ) => {\n  // Don't send messages from the SW back to the SW to prevent infinite loops\n  if (obj.from === 'sw') return\n  navigator.serviceWorker.controller?.postMessage({ type: 'event', subtype: NEW_CHATROOM_UNREAD_POSITION, data: [obj] })\n})\n\nsbp('okTurtles.events/on', NEW_CHATROOM_NOTIFICATION_SETTINGS, (obj        ) => {\n  // Don't send messages from the SW back to the SW to prevent infinite loops\n  if (obj.from === 'sw') return\n  navigator.serviceWorker.controller?.postMessage({ type: 'event', subtype: NEW_CHATROOM_NOTIFICATION_SETTINGS, data: [obj] })\n})\n\nconst swRpc = (() => {\n  if (!navigator.serviceWorker) {\n    throw new Error('Missing service worker object')\n  }\n  let controller                 = navigator.serviceWorker.controller\n  navigator.serviceWorker.addEventListener('controllerchange', (ev       ) => {\n    controller = (navigator.serviceWorker     ).controller\n  }, false)\n\n  const fn = async (maxControllerChanges, ...args) => {\n    if (!controller) {\n      throw new Error('Service worker not ready')\n    }\n    await waitUntilSwReady()\n    return new Promise((resolve, reject) => {\n      const messageChannel = new MessageChannel()\n      const onmessage = (event              ) => {\n        if (event.data && Array.isArray(event.data)) {\n          const r = deserializer(event.data[1])\n          // $FlowFixMe[incompatible-use]\n          if (event.data[0] === true) {\n            resolve(r)\n          } else {\n            reject(r)\n          }\n          cleanup()\n        }\n      }\n      const onmessageerror = (event              ) => {\n        reject(event.data)\n        cleanup()\n      }\n      const oncontrollerchange = (event       ) => {\n        if (maxControllerChanges > 0) {\n          resolve(fn(maxControllerChanges - 1, ...args))\n        } else {\n          reject(new Error('SW controller changed'))\n        }\n        cleanup()\n      }\n      const cleanup = () => {\n        // This can help prevent memory leaks if the GC doesn't clean up once\n        // the port goes out of scope\n        messageChannel.port1.removeEventListener('message', onmessage, false)\n        messageChannel.port1.removeEventListener('messageerror', onmessageerror, false)\n        navigator.serviceWorker.removeEventListener('controllerchange', oncontrollerchange, false)\n        messageChannel.port1.close()\n      }\n      messageChannel.port1.addEventListener('message', onmessage, false)\n      messageChannel.port1.addEventListener('messageerror', onmessageerror, false)\n      navigator.serviceWorker.addEventListener('controllerchange', oncontrollerchange, false)\n      messageChannel.port1.start()\n      const { data, transferables } = serializer(args)\n      controller.postMessage({\n        type: 'sbp',\n        port: messageChannel.port2,\n        data\n      }, [messageChannel.port2, ...transferables])\n    })\n  }\n\n  return (...args) => fn(3, ...args)\n})()\n\nsbp('sbp/selectors/register', {\n  'gi.actions/*': swRpc,\n  'chelonia/*': swRpc,\n  'sw-namespace/*': (...args) => {\n    // Remove the `sw-` prefix from the selector\n    return swRpc(args[0].slice(3), ...args.slice(1))\n  },\n  'gi.notifications/*': swRpc,\n  'sw/*': swRpc,\n  'swLogs/*': swRpc,\n  'push/*': swRpc\n})\n", "/* script */\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport colorsMixins from '../../../frontend/views/utils/colorsManipulation.js'\n\n// importing this here (outside of the style tag) is important,\n// because this is what results in the global main.css file\n// being placed in dist/assets/css/main.css, which is included\n// by index.html\nimport '../../../frontend/assets/style/main.scss'\nimport { mapGetters } from 'vuex'\n\nconst __vue_script__ = ({\n  name: 'AppStyles',\n\n  mixins: [colorsMixins],\n\n  computed: {\n    ...mapGetters([\n      'fontSize',\n      'colors'\n    ]),\n    softTone () {\n      return this.colors.theme === 'dark' ? 0.1 : -0.1\n    }\n  }\n}        )\n\n/* template */\nvar __vue_render__ = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-style',[_vm._v(\":root {\\n  --primary_0: \"+_vm._s(_vm.colors.primary_0)+\";\\n  --primary_0_1: \"+_vm._s(_vm.lightenDarkenColor(_vm.colors.primary_0, _vm.softTone))+\";\\n  --primary_1: \"+_vm._s(_vm.colors.primary_1)+\";\\n  --primary_2: \"+_vm._s(_vm.colors.primary_2)+\";\\n  --success_0: \"+_vm._s(_vm.colors.success_0)+\";\\n  --success_0_1: \"+_vm._s(_vm.lightenDarkenColor(_vm.colors.success_0, _vm.softTone))+\";\\n  --success_1: \"+_vm._s(_vm.colors.success_1)+\";\\n  --success_2: \"+_vm._s(_vm.colors.success_2)+\";\\n  --warning_0: \"+_vm._s(_vm.colors.warning_0)+\";\\n  --warning_0_1: \"+_vm._s(_vm.lightenDarkenColor(_vm.colors.warning_0, _vm.softTone))+\";\\n  --warning_0_text: \"+_vm._s(_vm.colors.warning_0_text)+\";\\n  --warning_0_2: \"+_vm._s(_vm.colors.warning_0_2)+\";\\n  --warning_1: \"+_vm._s(_vm.colors.warning_1)+\";\\n  --warning_2: \"+_vm._s(_vm.colors.warning_2)+\";\\n  --danger_0: \"+_vm._s(_vm.colors.danger_0)+\";\\n  --danger_0_1: \"+_vm._s(_vm.lightenDarkenColor(_vm.colors.danger_0, _vm.softTone))+\";\\n  --danger_1: \"+_vm._s(_vm.colors.danger_1)+\";\\n  --danger_2: \"+_vm._s(_vm.colors.danger_2)+\";\\n  --danger_3: \"+_vm._s(_vm.colors.danger_3)+\";\\n  --text_0: \"+_vm._s(_vm.colors.text_0)+\";\\n  --text_1: \"+_vm._s(_vm.colors.text_1)+\";\\n  --general_0: \"+_vm._s(_vm.colors.general_0)+\";\\n  --general_1: \"+_vm._s(_vm.colors.general_1)+\";\\n  --general_1_opacity_6: \"+_vm._s(_vm.hexToRgbA(_vm.colors.general_1, 0.6))+\";\\n  --general_2: \"+_vm._s(_vm.colors.general_2)+\";\\n  --background_0: \"+_vm._s(_vm.colors.background_0)+\";\\n  --background_0_opacity_0: \"+_vm._s(_vm.hexToRgbA(_vm.colors.background_0, 0))+\";\\n  --text-size: \"+_vm._s(_vm.fontSize)+\"px;\\n}\")])}\nvar __vue_staticRenderFns__ = []\n\n  /* style */\n  const __vue_inject_styles__ = undefined\n  /* scoped */\n  const __vue_scope_id__ = undefined\n  /* module identifier */\n  const __vue_module_identifier__ = undefined\n  /* functional template */\n  const __vue_is_functional_template__ = false\n  /* component normalizer */\n  function __vue_normalize__(\n    template, style, script,\n    scope, functional, moduleIdentifier, shadowMode,\n    createInjector, createInjectorSSR, createInjectorShadow\n  ) {\n    const component = (typeof script === 'function' ? script.options : script) || {}\n\n    // For security concerns, we use only base name in production mode.\n    component.__file = \"script>\\n\"\n\n    if (!component.render) {\n      component.render = template.render\n      component.staticRenderFns = template.staticRenderFns\n      component._compiled = true\n\n      if (functional) component.functional = true\n    }\n\n    component._scopeId = scope\n\n    if (false) {\n      let hook\n      if (false) {\n        // In SSR.\n        hook = function(context) {\n          // 2.3 injection\n          context =\n            context || // cached call\n            (this.$vnode && this.$vnode.ssrContext) || // stateful\n            (this.parent && this.parent.$vnode && this.parent.$vnode.ssrContext) // functional\n          // 2.2 with runInNewContext: true\n          if (!context && typeof __VUE_SSR_CONTEXT__ !== 'undefined') {\n            context = __VUE_SSR_CONTEXT__\n          }\n          // inject component styles\n          if (style) {\n            style.call(this, createInjectorSSR(context))\n          }\n          // register component module identifier for async chunk inference\n          if (context && context._registeredComponents) {\n            context._registeredComponents.add(moduleIdentifier)\n          }\n        }\n        // used by ssr in case component is cached and beforeCreate\n        // never gets called\n        component._ssrRegister = hook\n      }\n      else if (style) {\n        hook = shadowMode \n          ? function(context) {\n              style.call(this, createInjectorShadow(context, this.$root.$options.shadowRoot))\n            }\n          : function(context) {\n              style.call(this, createInjector(context))\n            }\n      }\n\n      if (hook !== undefined) {\n        if (component.functional) {\n          // register for functional component in vue file\n          const originalRender = component.render\n          component.render = function renderWithStyleInjection(h, context) {\n            hook.call(context)\n            return originalRender(h, context)\n          }\n        } else {\n          // inject component registration as beforeCreate hook\n          const existing = component.beforeCreate\n          component.beforeCreate = existing ? [].concat(existing, hook) : [hook]\n        }\n      }\n    }\n\n    return component\n  }\n  /* style inject */\n  \n  /* style inject SSR */\n  \n  /* style inject shadow dom */\n  \n\n  \n  const __vue_component__ = /*#__PURE__*/__vue_normalize__(\n    { render: __vue_render__, staticRenderFns: __vue_staticRenderFns__ },\n    __vue_inject_styles__,\n    __vue_script__,\n    __vue_scope_id__,\n    __vue_is_functional_template__,\n    __vue_module_identifier__,\n    false,\n    undefined,\n    undefined,\n    undefined\n  )\n\n  export default __vue_component__", "/* script */\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport TransitionExpand from '../../../../frontend/views/components/TransitionExpand.vue'\nimport { debounce } from 'turtledash'\n\nconst __vue_script__ = ({\n  name: 'BannerGeneral',\n  components: {\n    TransitionExpand\n  },\n  data: () => ({\n    ephemeral: {\n      message: null,\n      icon: null,\n      severity: null\n    }\n  }),\n  methods: {\n    // To be used by parent. Example:\n    // this.$refs.bannerGeneral.show(L('Trying to reconnect...'), 'wifi')\n    clean () {\n      this.ephemeral.message = ''\n      this.ephemeral.icon = ''\n      this.ephemeral.severity = ''\n    },\n    show (message, icon) {\n      this.ephemeral.message = message\n      this.ephemeral.icon = icon\n      this.ephemeral.severity = 'neutral'\n    },\n    danger (message, icon) {\n      this.ephemeral.message = message\n      this.ephemeral.icon = icon\n      this.ephemeral.severity = 'danger'\n    },\n    severity () {\n      return this.ephemeral.severity\n    },\n    debouncedShow ({ message, icon, seconds, clearWhen }   \n                                                                           \n     ) {\n      let clearBannerTimer\n      return debounce((...args) => {\n        const clearBanner = () => {\n          if (clearWhen()) {\n            if (this.severity() !== 'danger') {\n              this.clean()\n            }\n            clearBannerTimer = undefined\n          } else {\n            // after first n seconds, check every half a second for clearWhen to change\n            setTimeout(clearBanner, 500)\n          }\n        }\n        if (!clearBannerTimer && !clearWhen()) {\n          this.show(message(...args), icon)\n          clearBannerTimer = setTimeout(clearBanner, 1000 * seconds)\n        }\n      }, 1000 * seconds)\n    }\n  }\n}        )\n\n/* template */\nvar __vue_render__ = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('transition-expand',[(_vm.ephemeral.message)?_c('div',{staticClass:\"l-banner\",class:(\"is-\" + (_vm.ephemeral.severity)),attrs:{\"data-test\":\"bannerGeneral\",\"aria-live\":\"polite\"}},[_c('i',{class:(\"icon-\" + (_vm.ephemeral.icon) + \" is-prefix\")}),_c('div',{directives:[{name:\"safe-html\",rawName:\"v-safe-html:a\",value:(_vm.ephemeral.message),expression:\"ephemeral.message\",arg:\"a\"}],staticClass:\"c-banner-content\"})]):_vm._e()])}\nvar __vue_staticRenderFns__ = []\n\n  /* style */\n  const __vue_inject_styles__ = function (inject) {\n    if (!inject) return\n    inject(\"data-v-42dd8395_0\", { source: \".l-banner[data-v-42dd8395]{display:flex;justify-content:center;align-items:flex-start}.l-banner .c-banner-content[data-v-42dd8395]{text-align:left;word-break:break-word}.l-banner[data-v-42dd8395]  .link{color:inherit;border-bottom-color:inherit;font-weight:inherit}.is-neutral[data-v-42dd8395]{background-color:var(--text_0);color:var(--background_0)}.is-danger[data-v-42dd8395]{background-color:var(--danger_0);color:var(--background_0)}\", map: undefined, media: undefined })\n\n  }\n  /* scoped */\n  const __vue_scope_id__ = \"data-v-42dd8395\"\n  /* module identifier */\n  const __vue_module_identifier__ = undefined\n  /* functional template */\n  const __vue_is_functional_template__ = false\n  /* component normalizer */\n  function __vue_normalize__(\n    template, style, script,\n    scope, functional, moduleIdentifier, shadowMode,\n    createInjector, createInjectorSSR, createInjectorShadow\n  ) {\n    const component = (typeof script === 'function' ? script.options : script) || {}\n\n    // For security concerns, we use only base name in production mode.\n    component.__file = \"style>\\n\"\n\n    if (!component.render) {\n      component.render = template.render\n      component.staticRenderFns = template.staticRenderFns\n      component._compiled = true\n\n      if (functional) component.functional = true\n    }\n\n    component._scopeId = scope\n\n    if (true) {\n      let hook\n      if (false) {\n        // In SSR.\n        hook = function(context) {\n          // 2.3 injection\n          context =\n            context || // cached call\n            (this.$vnode && this.$vnode.ssrContext) || // stateful\n            (this.parent && this.parent.$vnode && this.parent.$vnode.ssrContext) // functional\n          // 2.2 with runInNewContext: true\n          if (!context && typeof __VUE_SSR_CONTEXT__ !== 'undefined') {\n            context = __VUE_SSR_CONTEXT__\n          }\n          // inject component styles\n          if (style) {\n            style.call(this, createInjectorSSR(context))\n          }\n          // register component module identifier for async chunk inference\n          if (context && context._registeredComponents) {\n            context._registeredComponents.add(moduleIdentifier)\n          }\n        }\n        // used by ssr in case component is cached and beforeCreate\n        // never gets called\n        component._ssrRegister = hook\n      }\n      else if (style) {\n        hook = shadowMode \n          ? function(context) {\n              style.call(this, createInjectorShadow(context, this.$root.$options.shadowRoot))\n            }\n          : function(context) {\n              style.call(this, createInjector(context))\n            }\n      }\n\n      if (hook !== undefined) {\n        if (component.functional) {\n          // register for functional component in vue file\n          const originalRender = component.render\n          component.render = function renderWithStyleInjection(h, context) {\n            hook.call(context)\n            return originalRender(h, context)\n          }\n        } else {\n          // inject component registration as beforeCreate hook\n          const existing = component.beforeCreate\n          component.beforeCreate = existing ? [].concat(existing, hook) : [hook]\n        }\n      }\n    }\n\n    return component\n  }\n  /* style inject */\n  function __vue_create_injector__() {\n    const styles = __vue_create_injector__.styles || (__vue_create_injector__.styles = {})\n    const isOldIE =\n      typeof navigator !== 'undefined' &&\n      /msie [6-9]\\\\b/.test(navigator.userAgent.toLowerCase())\n\n    return function addStyle(id, css) {\n      if (document.querySelector('style[data-vue-ssr-id~=\"' + id + '\"]')) return // SSR styles are present.\n\n      const group = isOldIE ? css.media || 'default' : id\n      const style = styles[group] || (styles[group] = { ids: [], parts: [], element: undefined })\n\n      if (!style.ids.includes(id)) {\n        let code = css.source\n        let index = style.ids.length\n\n        style.ids.push(id)\n\n        if (true && css.map) {\n          // https://developer.chrome.com/devtools/docs/javascript-debugging\n          // this makes source maps inside style tags work properly in Chrome\n          code += '\\n/*# sourceURL=' + css.map.sources[0] + ' */'\n          // http://stackoverflow.com/a/26603875\n          code +=\n            '\\n/*# sourceMappingURL=data:application/json;base64,' +\n            btoa(unescape(encodeURIComponent(JSON.stringify(css.map)))) +\n            ' */'\n        }\n\n        if (isOldIE) {\n          style.element = style.element || document.querySelector('style[data-group=' + group + ']')\n        }\n\n        if (!style.element) {\n          const head = document.head || document.getElementsByTagName('head')[0]\n          const el = style.element = document.createElement('style')\n          el.type = 'text/css'\n\n          if (css.media) el.setAttribute('media', css.media)\n          if (isOldIE) {\n            el.setAttribute('data-group', group)\n            el.setAttribute('data-next-index', '0')\n          }\n\n          head.appendChild(el)\n        }\n\n        if (isOldIE) {\n          index = parseInt(style.element.getAttribute('data-next-index'))\n          style.element.setAttribute('data-next-index', index + 1)\n        }\n\n        if (style.element.styleSheet) {\n          style.parts.push(code)\n          style.element.styleSheet.cssText = style.parts\n            .filter(Boolean)\n            .join('\\n')\n        } else {\n          const textNode = document.createTextNode(code)\n          const nodes = style.element.childNodes\n          if (nodes[index]) style.element.removeChild(nodes[index])\n          if (nodes.length) style.element.insertBefore(textNode, nodes[index])\n          else style.element.appendChild(textNode)\n        }\n      }\n    }\n  }\n  /* style inject SSR */\n  \n  /* style inject shadow dom */\n  \n\n  \n  const __vue_component__ = /*#__PURE__*/__vue_normalize__(\n    { render: __vue_render__, staticRenderFns: __vue_staticRenderFns__ },\n    __vue_inject_styles__,\n    __vue_script__,\n    __vue_scope_id__,\n    __vue_is_functional_template__,\n    __vue_module_identifier__,\n    false,\n    __vue_create_injector__,\n    undefined,\n    undefined\n  )\n\n  export default __vue_component__", "/* script */\n//\n//\n//\n//\n//\n\nimport sbp from '@sbp/sbp'\nimport { OPEN_MODAL, REPLACE_MODAL, CLOSE_MODAL, SET_MODAL_QUERIES } from '../../../../frontend/utils/events.js'\nimport { omit } from 'turtledash'\n\nconst __vue_script__ = ({\n  name: 'Modal',\n  data () {\n    return {\n      content: null, // Main modal\n      subcontent: [], // Collection of modal on top of modals\n      queries: { // Queries to be used by modals\n        // [modalName]: { queryKey: queryValue }\n      },\n      replacementQueries: {}, // queries to be used for REPLACE_MODAL\n      childData: {},\n      replacement: null, // Replace the modal once the first one is close without updating the url\n      lastFocus: null // Record element that open the modal\n    }\n  },\n  computed: {\n    activeSubContent () {\n      return this.subcontent.length ? this.subcontent[this.subcontent.length - 1] : null\n    }\n  },\n  created () {\n    sbp('okTurtles.events/on', OPEN_MODAL, this.openModal)\n    sbp('okTurtles.events/on', CLOSE_MODAL, this.unloadModal)\n    sbp('okTurtles.events/on', REPLACE_MODAL, this.replaceModal)\n    sbp('okTurtles.events/on', SET_MODAL_QUERIES, this.setModalQueries)\n    // When press escape it should close the modal\n    window.addEventListener('keyup', this.handleKeyUp)\n  },\n  mounted () {\n    const { modal, subcontent } = this.$route.query\n    if (modal) this.openModal(modal)\n    if (subcontent) this.openModal(subcontent)\n  },\n  beforeDestroy () {\n    sbp('okTurtles.events/off', OPEN_MODAL)\n    sbp('okTurtles.events/off', CLOSE_MODAL)\n    sbp('okTurtles.events/off', REPLACE_MODAL)\n    sbp('okTurtles.events/off', SET_MODAL_QUERIES)\n    window.removeEventListener('keyup', this.handleKeyUp)\n  },\n  watch: {\n    '$route' (to, from) {\n      const toModal = to.query.modal\n\n      if (toModal) {\n        // We reset the modals with no animation for simplicity\n        if (toModal !== this.content) {\n          if (this.content) this.replaceModal(toModal, omit(to.query, 'modal')) // if another modal is already open, replace it.\n          else this.content = toModal\n        }\n\n        // Sometimes, the query string for modal has both 'modal' and 'subcontent' eg.) '/app/?modal=SignupModal&subcontent=Prompt'\n        if (to.query.subcontent) {\n          const subContentTo = to.query.subcontent.split('+').pop()\n          if (subContentTo !== this.activeSubContent) {\n            // Try to find the target subcontent in the list of subcontent\n            const i = this.subcontent.indexOf(subContentTo)\n            if (i !== -1) {\n              this.subcontent = this.subcontent.slice(0, i)\n            } else {\n              this.subcontent = [subContentTo]\n            }\n          }\n        }\n      } else {\n        // Prevent a bug where we click to close a modal at the same time we\n        // redirect a page (ex: setting modal -> logout). Sometimes the logout\n        // and redirect would happen before the modal closes. At this moment\n        // from.query.modal doesn't exist anymore. But the modal should be closed,\n        // so we force the unloadModal.\n        if (this.content) {\n          this.unloadModal()\n        }\n      }\n    }\n  },\n  methods: {\n    handleKeyUp (e) {\n      if (this.content && e.key === 'Escape') {\n        e.preventDefault()\n        this.unloadModal()\n      }\n    },\n    updateUrl () {\n      const subContentLen = this.subcontent.length\n      if (this.content || subContentLen > 0) {\n        const contentQueries = this.queries[this.content] || {}\n        const subContentQueries = this.queries[this.subcontent[subContentLen - 1]] || {}\n        this.$router.push({\n          query: {\n            ...this.$route.query,\n            ...contentQueries,\n            ...subContentQueries,\n            modal: this.content,\n            subcontent: subContentLen ? this.subcontent.join('+') : undefined\n          }\n        }).catch(console.error)\n      } else if (this.$route.query.modal || this.$route.query.subcontent) {\n        const rQueries = { ...this.$route.query }\n        const queriesToDelete = {\n          modal: true,\n          subcontent: true,\n          ...this.queries[rQueries.modal]\n        }\n\n        for (const mQuery in queriesToDelete) {\n          delete rQueries[mQuery]\n        }\n\n        this.$router.push({ rQueries }).catch(console.error)\n      }\n    },\n    openModal (componentName, queries = {}, childData = {}) {\n      // Don't open the same kind of modal twice.\n      if (this.content === componentName) return\n\n      this.lastFocus = document.activeElement\n      if (this.content) {\n        this.subcontent.push(componentName)\n      } else {\n        this.content = componentName\n      }\n      this.queries[componentName] = queries\n      this.updateUrl()\n      this.childData[componentName] = childData\n    },\n    unloadModal (targetModal = '') {\n      const clearChildData = key => { delete this.childData[key] }\n      const hasSubContent = this.subcontent.length > 0\n      let unloadDone = false\n      const unloadFromContentAndReFocus = (targetModal) => {\n        clearChildData(targetModal)\n        this.content = null\n        unloadDone = true\n        // Refocus on the button that opened this modal, if any.\n        // TODO - find a way to support lastFocus when opened through profile|notifications card.\n        if (this.lastFocus) this.lastFocus.focus()\n      }\n\n      if (targetModal) {\n        // when it's queried to close a particular modal, check if it's being presented now and unload it if so.\n        if (hasSubContent && this.subcontent.indexOf(targetModal) >= 0) {\n          clearChildData(targetModal)\n          this.subcontent = this.subcontent.filter(modalName => modalName !== targetModal)\n          unloadDone = true\n        } else if (this.content === targetModal) {\n          unloadFromContentAndReFocus(targetModal)\n        }\n      } else {\n        // when there is no particular modal queried, unload the latest one first.\n        if (hasSubContent) {\n          clearChildData(this.activeSubContent)\n          this.subcontent.pop()\n          unloadDone = true\n        } else {\n          unloadFromContentAndReFocus(this.content)\n        }\n      }\n\n      if (!unloadDone) { return } // If nothing has been unloaded, no need to perform below actions.\n\n      if (this.replacement) {\n        this.openModal(this.replacement, this.replacementQueries[this.replacement])\n\n        delete this.replacementQueries[this.replacement]\n        this.replacement = null\n      } else {\n        this.updateUrl()\n      }\n    },\n    replaceModal (componentName, queries = null) {\n      this.replacement = componentName\n      // At the moment you can only replace a modal if it's the main one by design\n      // Use direct children instead of sbp to wait for animation out\n      if (queries) {\n        this.replacementQueries[componentName] = queries\n      }\n\n      this.$refs[this.activeSubContent ? 'subcontent' : 'content'].$children[0].close()\n    },\n    setModalQueries (componentName, queries) {\n      this.queries[componentName] = queries\n    }\n  }\n}        )\n\n/* template */\nvar __vue_render__ = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c(_vm.content,_vm._b({ref:\"content\",tag:\"component\"},'component',_vm.childData[_vm.content],false)),(_vm.activeSubContent)?_c(_vm.activeSubContent,_vm._b({ref:\"subcontent\",tag:\"component\"},'component',_vm.childData[_vm.activeSubContent],false)):_vm._e()],1)}\nvar __vue_staticRenderFns__ = []\n\n  /* style */\n  const __vue_inject_styles__ = undefined\n  /* scoped */\n  const __vue_scope_id__ = undefined\n  /* module identifier */\n  const __vue_module_identifier__ = undefined\n  /* functional template */\n  const __vue_is_functional_template__ = false\n  /* component normalizer */\n  function __vue_normalize__(\n    template, style, script,\n    scope, functional, moduleIdentifier, shadowMode,\n    createInjector, createInjectorSSR, createInjectorShadow\n  ) {\n    const component = (typeof script === 'function' ? script.options : script) || {}\n\n    // For security concerns, we use only base name in production mode.\n    component.__file = \"script>\\n\"\n\n    if (!component.render) {\n      component.render = template.render\n      component.staticRenderFns = template.staticRenderFns\n      component._compiled = true\n\n      if (functional) component.functional = true\n    }\n\n    component._scopeId = scope\n\n    if (false) {\n      let hook\n      if (false) {\n        // In SSR.\n        hook = function(context) {\n          // 2.3 injection\n          context =\n            context || // cached call\n            (this.$vnode && this.$vnode.ssrContext) || // stateful\n            (this.parent && this.parent.$vnode && this.parent.$vnode.ssrContext) // functional\n          // 2.2 with runInNewContext: true\n          if (!context && typeof __VUE_SSR_CONTEXT__ !== 'undefined') {\n            context = __VUE_SSR_CONTEXT__\n          }\n          // inject component styles\n          if (style) {\n            style.call(this, createInjectorSSR(context))\n          }\n          // register component module identifier for async chunk inference\n          if (context && context._registeredComponents) {\n            context._registeredComponents.add(moduleIdentifier)\n          }\n        }\n        // used by ssr in case component is cached and beforeCreate\n        // never gets called\n        component._ssrRegister = hook\n      }\n      else if (style) {\n        hook = shadowMode \n          ? function(context) {\n              style.call(this, createInjectorShadow(context, this.$root.$options.shadowRoot))\n            }\n          : function(context) {\n              style.call(this, createInjector(context))\n            }\n      }\n\n      if (hook !== undefined) {\n        if (component.functional) {\n          // register for functional component in vue file\n          const originalRender = component.render\n          component.render = function renderWithStyleInjection(h, context) {\n            hook.call(context)\n            return originalRender(h, context)\n          }\n        } else {\n          // inject component registration as beforeCreate hook\n          const existing = component.beforeCreate\n          component.beforeCreate = existing ? [].concat(existing, hook) : [hook]\n        }\n      }\n    }\n\n    return component\n  }\n  /* style inject */\n  \n  /* style inject SSR */\n  \n  /* style inject shadow dom */\n  \n\n  \n  const __vue_component__ = /*#__PURE__*/__vue_normalize__(\n    { render: __vue_render__, staticRenderFns: __vue_staticRenderFns__ },\n    __vue_inject_styles__,\n    __vue_script__,\n    __vue_scope_id__,\n    __vue_is_functional_template__,\n    __vue_module_identifier__,\n    false,\n    undefined,\n    undefined,\n    undefined\n  )\n\n  export default __vue_component__", "/* script */\n//\n//\n//\n//\n//\n//\n\nimport sbp from '@sbp/sbp'\nimport { MESSAGE_RECEIVE, MESSAGE_SEND } from '../../../../frontend/model/contracts/shared/constants.js'\nimport isPwa from '../../../../frontend/utils/isPwa.js'\n\nconst __vue_script__ = ({\n  name: 'BackgroundSounds',\n  created () {\n    sbp('okTurtles.events/on', MESSAGE_RECEIVE, this.playMessageReceive)\n    sbp('okTurtles.events/on', MESSAGE_SEND, this.playMessageSend)\n  },\n  computed: {\n    volumeFromStore () {\n      return this.$store.getters.notificationVolume ?? 1 // The volume value in the store can be 0 too and we use it if that's the case.\n    },\n    isAppIdle () {\n      // NOTE: idle-vue plugin will provide this.isAppIdle\n      //       but sometimes it returns undefined, so redefine here\n      return this.$store.state.idleVue?.isIdle\n    }\n  },\n  methods: {\n    shouldPlay (contractID        ) {\n      return !isPwa() && !((this.$route.name === 'GroupChatConversation' && this.$route.params.chatRoomID === contractID) && !this.isAppIdle)\n    },\n    playMessageReceive ({ contractID }   \n                         \n                          \n                         \n     ) {\n      if (this.shouldPlay(contractID)) {\n        this.$refs.msgReceive.play()\n      }\n    },\n    playMessageSend () {\n      if (this.shouldPlay()) {\n        this.$refs.msgSend.play()\n      }\n    },\n    updateAudioVolumes () {\n      this.$refs.msgReceive.volume = this.volumeFromStore\n      this.$refs.msgSend.volume = this.volumeFromStore\n    }\n  },\n  mounted () {\n    this.updateAudioVolumes()\n  },\n  watch: {\n    volumeFromStore () {\n      // Update the audio elements accordingly when the volume change in the store is detected.\n      this.updateAudioVolumes()\n    }\n  }\n}        )\n\n/* template */\nvar __vue_render__ = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"c-bgsound-wrapper\"},[_c('audio',{ref:\"msgReceive\",attrs:{\"src\":\"/assets/audio/msg-received.mp3\",\"type\":\"audio/mpeg\"}}),_c('audio',{ref:\"msgSend\",attrs:{\"src\":\"/assets/audio/msg-sent.mp3\",\"type\":\"audio/mpeg\"}})])}\nvar __vue_staticRenderFns__ = []\n\n  /* style */\n  const __vue_inject_styles__ = undefined\n  /* scoped */\n  const __vue_scope_id__ = \"data-v-445785f9\"\n  /* module identifier */\n  const __vue_module_identifier__ = undefined\n  /* functional template */\n  const __vue_is_functional_template__ = false\n  /* component normalizer */\n  function __vue_normalize__(\n    template, style, script,\n    scope, functional, moduleIdentifier, shadowMode,\n    createInjector, createInjectorSSR, createInjectorShadow\n  ) {\n    const component = (typeof script === 'function' ? script.options : script) || {}\n\n    // For security concerns, we use only base name in production mode.\n    component.__file = \"style>\\n\"\n\n    if (!component.render) {\n      component.render = template.render\n      component.staticRenderFns = template.staticRenderFns\n      component._compiled = true\n\n      if (functional) component.functional = true\n    }\n\n    component._scopeId = scope\n\n    if (false) {\n      let hook\n      if (false) {\n        // In SSR.\n        hook = function(context) {\n          // 2.3 injection\n          context =\n            context || // cached call\n            (this.$vnode && this.$vnode.ssrContext) || // stateful\n            (this.parent && this.parent.$vnode && this.parent.$vnode.ssrContext) // functional\n          // 2.2 with runInNewContext: true\n          if (!context && typeof __VUE_SSR_CONTEXT__ !== 'undefined') {\n            context = __VUE_SSR_CONTEXT__\n          }\n          // inject component styles\n          if (style) {\n            style.call(this, createInjectorSSR(context))\n          }\n          // register component module identifier for async chunk inference\n          if (context && context._registeredComponents) {\n            context._registeredComponents.add(moduleIdentifier)\n          }\n        }\n        // used by ssr in case component is cached and beforeCreate\n        // never gets called\n        component._ssrRegister = hook\n      }\n      else if (style) {\n        hook = shadowMode \n          ? function(context) {\n              style.call(this, createInjectorShadow(context, this.$root.$options.shadowRoot))\n            }\n          : function(context) {\n              style.call(this, createInjector(context))\n            }\n      }\n\n      if (hook !== undefined) {\n        if (component.functional) {\n          // register for functional component in vue file\n          const originalRender = component.render\n          component.render = function renderWithStyleInjection(h, context) {\n            hook.call(context)\n            return originalRender(h, context)\n          }\n        } else {\n          // inject component registration as beforeCreate hook\n          const existing = component.beforeCreate\n          component.beforeCreate = existing ? [].concat(existing, hook) : [hook]\n        }\n      }\n    }\n\n    return component\n  }\n  /* style inject */\n  \n  /* style inject SSR */\n  \n  /* style inject shadow dom */\n  \n\n  \n  const __vue_component__ = /*#__PURE__*/__vue_normalize__(\n    { render: __vue_render__, staticRenderFns: __vue_staticRenderFns__ },\n    __vue_inject_styles__,\n    __vue_script__,\n    __vue_scope_id__,\n    __vue_is_functional_template__,\n    __vue_module_identifier__,\n    false,\n    undefined,\n    undefined,\n    undefined\n  )\n\n  export default __vue_component__", "/* script */\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport sbp from '@sbp/sbp'\nimport { mapState, mapGetters } from 'vuex'\nimport { OPEN_MODAL } from '../../../../frontend/utils/events.js'\nimport ModalClose from '../../../../frontend/views/components/modal/ModalClose.vue'\nimport Tooltip from '../../../../frontend/views/components/Tooltip.vue'\nimport NotificationList from './NotificationList.vue'\n\nconst __vue_script__ = {\n  name: 'NotificationCard',\n  components: {\n    ModalClose,\n    NotificationList,\n    Tooltip\n  },\n  methods: {\n    toggleTooltip () {\n      this.$refs.tooltip.toggle()\n    },\n    handleSettingsClick () {\n      // BUG - Section notification does not open. Fixed at #946\n      sbp('okTurtles.events/emit', OPEN_MODAL, 'UserSettingsModal', {\n        tab: 'notifications'\n      })\n      this.toggleTooltip()\n    },\n    markAllNotificationsAsRead () {\n      sbp('gi.notifications/markAllAsRead', this.currentGroupId)\n    }\n  },\n  computed: {\n    ...mapState([\n      'currentGroupId'\n    ]),\n    ...mapGetters([\n      'currentNotificationCount'\n    ])\n  }\n}\n\n/* template */\nvar __vue_render__ = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('tooltip',{ref:\"tooltip\",attrs:{\"direction\":\"right\",\"manual\":true,\"opacity\":1,\"aria-label\":_vm.L(\"Show notifications\")}},[_vm._t(\"default\"),_c('template',{slot:\"tooltip\"},[_c('div',{staticClass:\"card c-card\",attrs:{\"role\":\"dialog\",\"aria-label\":_vm.L(\"Notifications\"),\"data-test\":\"notificationCard\"}},[_c('div',{staticClass:\"c-header\"},[_c('i18n',{staticClass:\"is-title-4\",attrs:{\"tag\":\"h2\"}},[_vm._v(\"Notifications\")]),_c('button',{staticClass:\"is-icon-small c-settings-btn\",on:{\"click\":_vm.handleSettingsClick}},[_c('i',{staticClass:\"icon-cog\"})])],1),_c('div',{staticClass:\"c-body\"},[_c('notification-list',{attrs:{\"variant\":\"compact\"},on:{\"select\":_vm.toggleTooltip}})],1),(_vm.currentNotificationCount)?_c('div',{staticClass:\"c-footer\"},[_c('i18n',{staticClass:\"link\",attrs:{\"tag\":\"button\",\"data-test\":\"markAllAsRead_In_Tooltip\"},on:{\"click\":_vm.markAllNotificationsAsRead}},[_vm._v(\"Mark all as read\")]),_c('router-link',{staticClass:\"link\",attrs:{\"to\":{ query: { modal: \"NotificationModal\" }}},nativeOn:{\"click\":function($event){return _vm.toggleTooltip($event)}}},[_c('i18n',[_vm._v(\"See all\")])],1)],1):_vm._e(),_c('modal-close',{staticClass:\"c-close\",attrs:{\"aria-label\":_vm.L(\"Close profile\")},on:{\"close\":_vm.toggleTooltip}})],1)])],2)}\nvar __vue_staticRenderFns__ = []\n\n  /* style */\n  const __vue_inject_styles__ = function (inject) {\n    if (!inject) return\n    inject(\"data-v-32fe52eb_0\", { source: \".c-card[data-v-32fe52eb]{position:relative;padding:0 0 4rem;color:var(--text_0);max-width:100vw;border-radius:3px;width:100vw;box-shadow:none}.c-card[data-v-32fe52eb]:last-child{margin-bottom:0}.is-active .c-card[data-v-32fe52eb]{animation:zoom .1s both cubic-bezier(.165,.84,.44,1)}@media screen and (max-width:768px){.is-active .c-card[data-v-32fe52eb]{animation-name:enterFromBottom}}@media screen and (min-width:769px),print{.c-card[data-v-32fe52eb]{margin-top:-.5rem;box-shadow:0 .5rem 1.25rem rgba(54,54,54,.3);width:25rem;padding:0}.c-card[data-v-32fe52eb]::before{content:\\\"\\\";position:absolute;top:1rem;left:-.5rem;display:block;width:0;z-index:0;border-top:.5rem solid transparent;border-right:.5rem solid var(--background_0);border-bottom:.5rem solid transparent}}.c-close[data-v-32fe52eb]{left:calc(100vw - 4rem);top:1.5rem}@media screen and (min-width:769px),print{.c-close[data-v-32fe52eb]{left:auto;right:1rem;opacity:0;pointer-events:none}.c-close[data-v-32fe52eb]:focus{opacity:1}}.c-footer[data-v-32fe52eb],.c-header[data-v-32fe52eb]{display:flex;justify-content:space-between;align-items:center}.c-header[data-v-32fe52eb]{padding:1rem 1rem .5rem}.c-footer[data-v-32fe52eb]{border-top:1px solid var(--general_1);padding:.75rem 1rem}.c-body[data-v-32fe52eb]{height:18rem;overflow:auto;overscroll-behavior-y:contain}.c-settings-btn .icon-cog[data-v-32fe52eb]{transform-origin:49% 48%}.c-settings-btn:focus .icon-cog[data-v-32fe52eb],.c-settings-btn:hover .icon-cog[data-v-32fe52eb]{animation:cog-data-v-32fe52eb .4s forwards}@keyframes cog-data-v-32fe52eb{to{transform:rotate(180deg)}}\", map: undefined, media: undefined })\n\n  }\n  /* scoped */\n  const __vue_scope_id__ = \"data-v-32fe52eb\"\n  /* module identifier */\n  const __vue_module_identifier__ = undefined\n  /* functional template */\n  const __vue_is_functional_template__ = false\n  /* component normalizer */\n  function __vue_normalize__(\n    template, style, script,\n    scope, functional, moduleIdentifier, shadowMode,\n    createInjector, createInjectorSSR, createInjectorShadow\n  ) {\n    const component = (typeof script === 'function' ? script.options : script) || {}\n\n    // For security concerns, we use only base name in production mode.\n    component.__file = \"style>\\n\"\n\n    if (!component.render) {\n      component.render = template.render\n      component.staticRenderFns = template.staticRenderFns\n      component._compiled = true\n\n      if (functional) component.functional = true\n    }\n\n    component._scopeId = scope\n\n    if (true) {\n      let hook\n      if (false) {\n        // In SSR.\n        hook = function(context) {\n          // 2.3 injection\n          context =\n            context || // cached call\n            (this.$vnode && this.$vnode.ssrContext) || // stateful\n            (this.parent && this.parent.$vnode && this.parent.$vnode.ssrContext) // functional\n          // 2.2 with runInNewContext: true\n          if (!context && typeof __VUE_SSR_CONTEXT__ !== 'undefined') {\n            context = __VUE_SSR_CONTEXT__\n          }\n          // inject component styles\n          if (style) {\n            style.call(this, createInjectorSSR(context))\n          }\n          // register component module identifier for async chunk inference\n          if (context && context._registeredComponents) {\n            context._registeredComponents.add(moduleIdentifier)\n          }\n        }\n        // used by ssr in case component is cached and beforeCreate\n        // never gets called\n        component._ssrRegister = hook\n      }\n      else if (style) {\n        hook = shadowMode \n          ? function(context) {\n              style.call(this, createInjectorShadow(context, this.$root.$options.shadowRoot))\n            }\n          : function(context) {\n              style.call(this, createInjector(context))\n            }\n      }\n\n      if (hook !== undefined) {\n        if (component.functional) {\n          // register for functional component in vue file\n          const originalRender = component.render\n          component.render = function renderWithStyleInjection(h, context) {\n            hook.call(context)\n            return originalRender(h, context)\n          }\n        } else {\n          // inject component registration as beforeCreate hook\n          const existing = component.beforeCreate\n          component.beforeCreate = existing ? [].concat(existing, hook) : [hook]\n        }\n      }\n    }\n\n    return component\n  }\n  /* style inject */\n  function __vue_create_injector__() {\n    const styles = __vue_create_injector__.styles || (__vue_create_injector__.styles = {})\n    const isOldIE =\n      typeof navigator !== 'undefined' &&\n      /msie [6-9]\\\\b/.test(navigator.userAgent.toLowerCase())\n\n    return function addStyle(id, css) {\n      if (document.querySelector('style[data-vue-ssr-id~=\"' + id + '\"]')) return // SSR styles are present.\n\n      const group = isOldIE ? css.media || 'default' : id\n      const style = styles[group] || (styles[group] = { ids: [], parts: [], element: undefined })\n\n      if (!style.ids.includes(id)) {\n        let code = css.source\n        let index = style.ids.length\n\n        style.ids.push(id)\n\n        if (true && css.map) {\n          // https://developer.chrome.com/devtools/docs/javascript-debugging\n          // this makes source maps inside style tags work properly in Chrome\n          code += '\\n/*# sourceURL=' + css.map.sources[0] + ' */'\n          // http://stackoverflow.com/a/26603875\n          code +=\n            '\\n/*# sourceMappingURL=data:application/json;base64,' +\n            btoa(unescape(encodeURIComponent(JSON.stringify(css.map)))) +\n            ' */'\n        }\n\n        if (isOldIE) {\n          style.element = style.element || document.querySelector('style[data-group=' + group + ']')\n        }\n\n        if (!style.element) {\n          const head = document.head || document.getElementsByTagName('head')[0]\n          const el = style.element = document.createElement('style')\n          el.type = 'text/css'\n\n          if (css.media) el.setAttribute('media', css.media)\n          if (isOldIE) {\n            el.setAttribute('data-group', group)\n            el.setAttribute('data-next-index', '0')\n          }\n\n          head.appendChild(el)\n        }\n\n        if (isOldIE) {\n          index = parseInt(style.element.getAttribute('data-next-index'))\n          style.element.setAttribute('data-next-index', index + 1)\n        }\n\n        if (style.element.styleSheet) {\n          style.parts.push(code)\n          style.element.styleSheet.cssText = style.parts\n            .filter(Boolean)\n            .join('\\n')\n        } else {\n          const textNode = document.createTextNode(code)\n          const nodes = style.element.childNodes\n          if (nodes[index]) style.element.removeChild(nodes[index])\n          if (nodes.length) style.element.insertBefore(textNode, nodes[index])\n          else style.element.appendChild(textNode)\n        }\n      }\n    }\n  }\n  /* style inject SSR */\n  \n  /* style inject shadow dom */\n  \n\n  \n  const __vue_component__ = /*#__PURE__*/__vue_normalize__(\n    { render: __vue_render__, staticRenderFns: __vue_staticRenderFns__ },\n    __vue_inject_styles__,\n    __vue_script__,\n    __vue_scope_id__,\n    __vue_is_functional_template__,\n    __vue_module_identifier__,\n    false,\n    __vue_create_injector__,\n    undefined,\n    undefined\n  )\n\n  export default __vue_component__", "/* script */\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { mapGetters } from 'vuex'\nimport Badge from '../../../../frontend/views/components/Badge.vue'\nimport NotificationCard from './NotificationCard.vue'\n\nconst __vue_script__ = {\n  name: 'NotificationBell',\n  components: {\n    Badge,\n    NotificationCard\n  },\n  computed: {\n    ...mapGetters([\n      'currentUnreadNotificationCount'\n    ])\n  }\n}\n\n/* template */\nvar __vue_render__ = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('router-link',{staticClass:\"button is-icon-small c-btn hide-tablet\",attrs:{\"to\":{ query: { modal: \"NotificationModal\" }}}},[_c('i',{staticClass:\"icon-bell\",class:{ \"is-active\": _vm.currentUnreadNotificationCount }}),(_vm.currentUnreadNotificationCount)?_c('badge',{attrs:{\"data-test\":\"alertNotification\"}},[_vm._v(_vm._s(_vm.currentUnreadNotificationCount))]):_vm._e()],1),_c('notification-card',[_c('button',{staticClass:\"is-icon-small c-btn hide-phone\"},[_c('i',{staticClass:\"icon-bell\",class:{ \"is-active\": _vm.currentUnreadNotificationCount }}),(_vm.currentUnreadNotificationCount)?_c('badge',{attrs:{\"data-test\":\"alertNotification\"}},[_vm._v(_vm._s(_vm.currentUnreadNotificationCount))]):_vm._e()],1)])],1)}\nvar __vue_staticRenderFns__ = []\n\n  /* style */\n  const __vue_inject_styles__ = function (inject) {\n    if (!inject) return\n    inject(\"data-v-67f648b3_0\", { source: \".c-badge[data-v-67f648b3]{top:-.25rem;right:-.25rem}.icon-bell[data-v-67f648b3]{font-size:.9rem;transform-origin:center 2px;margin-top:2px}.icon-bell.is-active[data-v-67f648b3]{font-weight:900}.c-btn:focus .icon-bell[data-v-67f648b3],.c-btn:hover .icon-bell[data-v-67f648b3]{animation:bell-data-v-67f648b3 750ms forwards}@keyframes bell-data-v-67f648b3{10%{transform:rotate(15deg)}20%{transform:rotate(-15deg)}35%{transform:rotate(15deg)}60%{transform:rotate(-10deg)}80%{transform:rotate(5deg)}}\", map: undefined, media: undefined })\n\n  }\n  /* scoped */\n  const __vue_scope_id__ = \"data-v-67f648b3\"\n  /* module identifier */\n  const __vue_module_identifier__ = undefined\n  /* functional template */\n  const __vue_is_functional_template__ = false\n  /* component normalizer */\n  function __vue_normalize__(\n    template, style, script,\n    scope, functional, moduleIdentifier, shadowMode,\n    createInjector, createInjectorSSR, createInjectorShadow\n  ) {\n    const component = (typeof script === 'function' ? script.options : script) || {}\n\n    // For security concerns, we use only base name in production mode.\n    component.__file = \"style>\\n\"\n\n    if (!component.render) {\n      component.render = template.render\n      component.staticRenderFns = template.staticRenderFns\n      component._compiled = true\n\n      if (functional) component.functional = true\n    }\n\n    component._scopeId = scope\n\n    if (true) {\n      let hook\n      if (false) {\n        // In SSR.\n        hook = function(context) {\n          // 2.3 injection\n          context =\n            context || // cached call\n            (this.$vnode && this.$vnode.ssrContext) || // stateful\n            (this.parent && this.parent.$vnode && this.parent.$vnode.ssrContext) // functional\n          // 2.2 with runInNewContext: true\n          if (!context && typeof __VUE_SSR_CONTEXT__ !== 'undefined') {\n            context = __VUE_SSR_CONTEXT__\n          }\n          // inject component styles\n          if (style) {\n            style.call(this, createInjectorSSR(context))\n          }\n          // register component module identifier for async chunk inference\n          if (context && context._registeredComponents) {\n            context._registeredComponents.add(moduleIdentifier)\n          }\n        }\n        // used by ssr in case component is cached and beforeCreate\n        // never gets called\n        component._ssrRegister = hook\n      }\n      else if (style) {\n        hook = shadowMode \n          ? function(context) {\n              style.call(this, createInjectorShadow(context, this.$root.$options.shadowRoot))\n            }\n          : function(context) {\n              style.call(this, createInjector(context))\n            }\n      }\n\n      if (hook !== undefined) {\n        if (component.functional) {\n          // register for functional component in vue file\n          const originalRender = component.render\n          component.render = function renderWithStyleInjection(h, context) {\n            hook.call(context)\n            return originalRender(h, context)\n          }\n        } else {\n          // inject component registration as beforeCreate hook\n          const existing = component.beforeCreate\n          component.beforeCreate = existing ? [].concat(existing, hook) : [hook]\n        }\n      }\n    }\n\n    return component\n  }\n  /* style inject */\n  function __vue_create_injector__() {\n    const styles = __vue_create_injector__.styles || (__vue_create_injector__.styles = {})\n    const isOldIE =\n      typeof navigator !== 'undefined' &&\n      /msie [6-9]\\\\b/.test(navigator.userAgent.toLowerCase())\n\n    return function addStyle(id, css) {\n      if (document.querySelector('style[data-vue-ssr-id~=\"' + id + '\"]')) return // SSR styles are present.\n\n      const group = isOldIE ? css.media || 'default' : id\n      const style = styles[group] || (styles[group] = { ids: [], parts: [], element: undefined })\n\n      if (!style.ids.includes(id)) {\n        let code = css.source\n        let index = style.ids.length\n\n        style.ids.push(id)\n\n        if (true && css.map) {\n          // https://developer.chrome.com/devtools/docs/javascript-debugging\n          // this makes source maps inside style tags work properly in Chrome\n          code += '\\n/*# sourceURL=' + css.map.sources[0] + ' */'\n          // http://stackoverflow.com/a/26603875\n          code +=\n            '\\n/*# sourceMappingURL=data:application/json;base64,' +\n            btoa(unescape(encodeURIComponent(JSON.stringify(css.map)))) +\n            ' */'\n        }\n\n        if (isOldIE) {\n          style.element = style.element || document.querySelector('style[data-group=' + group + ']')\n        }\n\n        if (!style.element) {\n          const head = document.head || document.getElementsByTagName('head')[0]\n          const el = style.element = document.createElement('style')\n          el.type = 'text/css'\n\n          if (css.media) el.setAttribute('media', css.media)\n          if (isOldIE) {\n            el.setAttribute('data-group', group)\n            el.setAttribute('data-next-index', '0')\n          }\n\n          head.appendChild(el)\n        }\n\n        if (isOldIE) {\n          index = parseInt(style.element.getAttribute('data-next-index'))\n          style.element.setAttribute('data-next-index', index + 1)\n        }\n\n        if (style.element.styleSheet) {\n          style.parts.push(code)\n          style.element.styleSheet.cssText = style.parts\n            .filter(Boolean)\n            .join('\\n')\n        } else {\n          const textNode = document.createTextNode(code)\n          const nodes = style.element.childNodes\n          if (nodes[index]) style.element.removeChild(nodes[index])\n          if (nodes.length) style.element.insertBefore(textNode, nodes[index])\n          else style.element.appendChild(textNode)\n        }\n      }\n    }\n  }\n  /* style inject SSR */\n  \n  /* style inject shadow dom */\n  \n\n  \n  const __vue_component__ = /*#__PURE__*/__vue_normalize__(\n    { render: __vue_render__, staticRenderFns: __vue_staticRenderFns__ },\n    __vue_inject_styles__,\n    __vue_script__,\n    __vue_scope_id__,\n    __vue_is_functional_template__,\n    __vue_module_identifier__,\n    false,\n    __vue_create_injector__,\n    undefined,\n    undefined\n  )\n\n  export default __vue_component__", "/* script */\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport sbp from '@sbp/sbp'\nimport { mapGetters, mapState } from 'vuex'\nimport Avatar from '../../../../frontend/views/components/Avatar.vue'\nimport Badge from '../../../../frontend/views/components/Badge.vue'\nimport Tooltip from '../../../../frontend/views/components/Tooltip.vue'\nimport { OPEN_MODAL } from '../../../../frontend/utils/events.js'\n\nconst __vue_script__ = ({\n  name: 'GroupsList',\n  components: {\n    Avatar,\n    Badge,\n    Tooltip\n  },\n  computed: {\n    ...mapState([\n      'currentGroupId'\n    ]),\n    ...mapGetters([\n      'groupsByName',\n      'groupUnreadMessages',\n      'unreadGroupNotificationCountFor'\n    ]),\n    badgeVisiblePerGroup () {\n      return Object.fromEntries(\n        this.groupsByName.map(group => ([\n          group.contractID,\n          this.groupUnreadMessages(group.contractID) + this.unreadGroupNotificationCountFor(group.contractID) > 0\n        ]))\n      )\n    },\n    isInGlobalDashboard () {\n      return this.$route.path.startsWith('/global-dashboard')\n    }\n  },\n  methods: {\n    openModal (mode) {\n      sbp('okTurtles.events/emit', OPEN_MODAL, mode)\n    },\n    handleMenuSelect (id) {\n      id && this.changeGroup(id)\n\n      if (this.isInGlobalDashboard) {\n        this.$router.push('/dashboard')\n      }\n    },\n    onGlobalDashboardClick () {\n      this.$router.push(({ path: '/global-dashboard' }))\n    },\n    changeGroup (hash) {\n      const path = this.$route.path\n      const emptyGroupPicture = this.groupPictureForContract(hash) === ''\n      if (hash !== this.currentGroupId) {\n        sbp('gi.app/group/switch', hash)\n      }\n      if (emptyGroupPicture && path !== '/pending-approval') {\n        this.$router.push(({ path: '/pending-approval' }))\n      } else if (!emptyGroupPicture && path === '/pending-approval') {\n        this.$router.push(({ path: '/dashboard' }))\n      }\n    },\n    groupPictureForContract (contractID) {\n      return this.$store.state[contractID]?.settings?.groupPicture || ''\n    }\n  }\n}        )\n\n/* template */\nvar __vue_render__ = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.groupsByName.length)?_c('ul',{staticClass:\"c-group-list\",attrs:{\"data-test\":\"groupsList\"}},[_c('li',{staticClass:\"c-group-list-item group-badge\",class:{ \"is-active\": _vm.isInGlobalDashboard }},[_c('tooltip',{attrs:{\"direction\":\"right\",\"text\":_vm.L(\"Global dashboard\")}},[_c('button',{staticClass:\"c-group-picture is-unstyled c-global-dashboard-logo\",on:{\"click\":_vm.onGlobalDashboardClick}},[_c('avatar',{staticClass:\"c-avatar\",attrs:{\"src\":\"/assets/images/group-income-icon-transparent-circle.png\",\"alt\":\"Global dashboard logo\"}})],1)])],1),_vm._l((_vm.groupsByName),function(group,index){return _c('li',{key:(\"group-\" + index),staticClass:\"c-group-list-item group-badge\",class:{ \"is-active\": !_vm.isInGlobalDashboard && _vm.currentGroupId === group.contractID}},[_c('tooltip',{attrs:{\"direction\":\"right\",\"text\":group.groupName}},[_c('button',{staticClass:\"c-group-picture is-unstyled\",on:{\"click\":function($event){return _vm.handleMenuSelect(group.contractID)}}},[_c('avatar',{staticClass:\"c-avatar\",attrs:{\"src\":_vm.groupPictureForContract(group.contractID)}})],1),(_vm.badgeVisiblePerGroup[group.contractID])?_c('badge',{attrs:{\"type\":\"compact\",\"data-test\":(\"groupBadge-\" + (group.groupName))}}):_vm._e()],1)],1)}),_c('li',{staticClass:\"c-group-list-item\"},[_c('tooltip',{attrs:{\"direction\":\"right\",\"text\":_vm.L(\"Create a new group\")}},[_c('button',{staticClass:\"is-icon has-background\",attrs:{\"data-test\":\"createGroup\",\"aria-label\":_vm.L(\"Add a group\")},on:{\"click\":function($event){return _vm.openModal(\"GroupCreationModal\")}}},[_c('i',{staticClass:\"icon-plus\"})])])],1)],2):_vm._e()}\nvar __vue_staticRenderFns__ = []\n\n  /* style */\n  const __vue_inject_styles__ = function (inject) {\n    if (!inject) return\n    inject(\"data-v-1c75e934_0\", { source: \".c-badge[data-v-1c75e934]{top:0;right:1px;z-index:2}.c-group-list[data-v-1c75e934]{width:3.5rem;padding-top:.7rem;background-color:var(--general_1)}.c-group-list-item[data-v-1c75e934]{position:relative;display:flex;justify-content:center;align-items:center;height:3.2rem;margin-bottom:.25rem}.group-badge[data-v-1c75e934]::before{content:\\\"\\\";position:absolute;width:3rem;height:3rem;border:1px solid transparent;border-radius:50%;transform:scale(.7);transition:all .25s cubic-bezier(.18,.89,.32,1.38)}.group-badge.is-active[data-v-1c75e934]::before{transform:scale(1);border-color:var(--text_0);animation:spin-data-v-1c75e934 .5s ease-out}.group-badge[data-v-1c75e934]:not(.is-active){cursor:pointer}.group-badge[data-v-1c75e934]:not(.is-active):focus::before,.group-badge[data-v-1c75e934]:not(.is-active):hover::before{border-color:#fff;border-width:3px;transform:scale(1.1)}@keyframes spin-data-v-1c75e934{0%{transform:rotate(45deg);filter:hue-rotate(0);border-color:var(--primary_0) transparent transparent}50%{transform:rotate(315deg);filter:hue-rotate(360deg);border-color:var(--primary_0) transparent transparent}100%{transform:rotate(585deg);border-color:#fff}}.c-avatar[data-v-1c75e934]{position:relative;z-index:1}.c-group-picture[data-v-1c75e934]{display:flex}.c-group-picture.c-global-dashboard-logo[data-v-1c75e934]{background-color:var(--background_0);border-radius:50%;width:2.5rem;height:2.5rem}.c-group-picture.c-global-dashboard-logo[data-v-1c75e934]  img.c-avatar{width:1.75rem;height:1.75rem}\", map: undefined, media: undefined })\n\n  }\n  /* scoped */\n  const __vue_scope_id__ = \"data-v-1c75e934\"\n  /* module identifier */\n  const __vue_module_identifier__ = undefined\n  /* functional template */\n  const __vue_is_functional_template__ = false\n  /* component normalizer */\n  function __vue_normalize__(\n    template, style, script,\n    scope, functional, moduleIdentifier, shadowMode,\n    createInjector, createInjectorSSR, createInjectorShadow\n  ) {\n    const component = (typeof script === 'function' ? script.options : script) || {}\n\n    // For security concerns, we use only base name in production mode.\n    component.__file = \"style>\\n\"\n\n    if (!component.render) {\n      component.render = template.render\n      component.staticRenderFns = template.staticRenderFns\n      component._compiled = true\n\n      if (functional) component.functional = true\n    }\n\n    component._scopeId = scope\n\n    if (true) {\n      let hook\n      if (false) {\n        // In SSR.\n        hook = function(context) {\n          // 2.3 injection\n          context =\n            context || // cached call\n            (this.$vnode && this.$vnode.ssrContext) || // stateful\n            (this.parent && this.parent.$vnode && this.parent.$vnode.ssrContext) // functional\n          // 2.2 with runInNewContext: true\n          if (!context && typeof __VUE_SSR_CONTEXT__ !== 'undefined') {\n            context = __VUE_SSR_CONTEXT__\n          }\n          // inject component styles\n          if (style) {\n            style.call(this, createInjectorSSR(context))\n          }\n          // register component module identifier for async chunk inference\n          if (context && context._registeredComponents) {\n            context._registeredComponents.add(moduleIdentifier)\n          }\n        }\n        // used by ssr in case component is cached and beforeCreate\n        // never gets called\n        component._ssrRegister = hook\n      }\n      else if (style) {\n        hook = shadowMode \n          ? function(context) {\n              style.call(this, createInjectorShadow(context, this.$root.$options.shadowRoot))\n            }\n          : function(context) {\n              style.call(this, createInjector(context))\n            }\n      }\n\n      if (hook !== undefined) {\n        if (component.functional) {\n          // register for functional component in vue file\n          const originalRender = component.render\n          component.render = function renderWithStyleInjection(h, context) {\n            hook.call(context)\n            return originalRender(h, context)\n          }\n        } else {\n          // inject component registration as beforeCreate hook\n          const existing = component.beforeCreate\n          component.beforeCreate = existing ? [].concat(existing, hook) : [hook]\n        }\n      }\n    }\n\n    return component\n  }\n  /* style inject */\n  function __vue_create_injector__() {\n    const styles = __vue_create_injector__.styles || (__vue_create_injector__.styles = {})\n    const isOldIE =\n      typeof navigator !== 'undefined' &&\n      /msie [6-9]\\\\b/.test(navigator.userAgent.toLowerCase())\n\n    return function addStyle(id, css) {\n      if (document.querySelector('style[data-vue-ssr-id~=\"' + id + '\"]')) return // SSR styles are present.\n\n      const group = isOldIE ? css.media || 'default' : id\n      const style = styles[group] || (styles[group] = { ids: [], parts: [], element: undefined })\n\n      if (!style.ids.includes(id)) {\n        let code = css.source\n        let index = style.ids.length\n\n        style.ids.push(id)\n\n        if (true && css.map) {\n          // https://developer.chrome.com/devtools/docs/javascript-debugging\n          // this makes source maps inside style tags work properly in Chrome\n          code += '\\n/*# sourceURL=' + css.map.sources[0] + ' */'\n          // http://stackoverflow.com/a/26603875\n          code +=\n            '\\n/*# sourceMappingURL=data:application/json;base64,' +\n            btoa(unescape(encodeURIComponent(JSON.stringify(css.map)))) +\n            ' */'\n        }\n\n        if (isOldIE) {\n          style.element = style.element || document.querySelector('style[data-group=' + group + ']')\n        }\n\n        if (!style.element) {\n          const head = document.head || document.getElementsByTagName('head')[0]\n          const el = style.element = document.createElement('style')\n          el.type = 'text/css'\n\n          if (css.media) el.setAttribute('media', css.media)\n          if (isOldIE) {\n            el.setAttribute('data-group', group)\n            el.setAttribute('data-next-index', '0')\n          }\n\n          head.appendChild(el)\n        }\n\n        if (isOldIE) {\n          index = parseInt(style.element.getAttribute('data-next-index'))\n          style.element.setAttribute('data-next-index', index + 1)\n        }\n\n        if (style.element.styleSheet) {\n          style.parts.push(code)\n          style.element.styleSheet.cssText = style.parts\n            .filter(Boolean)\n            .join('\\n')\n        } else {\n          const textNode = document.createTextNode(code)\n          const nodes = style.element.childNodes\n          if (nodes[index]) style.element.removeChild(nodes[index])\n          if (nodes.length) style.element.insertBefore(textNode, nodes[index])\n          else style.element.appendChild(textNode)\n        }\n      }\n    }\n  }\n  /* style inject SSR */\n  \n  /* style inject shadow dom */\n  \n\n  \n  const __vue_component__ = /*#__PURE__*/__vue_normalize__(\n    { render: __vue_render__, staticRenderFns: __vue_staticRenderFns__ },\n    __vue_inject_styles__,\n    __vue_script__,\n    __vue_scope_id__,\n    __vue_is_functional_template__,\n    __vue_module_identifier__,\n    false,\n    __vue_create_injector__,\n    undefined,\n    undefined\n  )\n\n  export default __vue_component__", "/* script */\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport sbp from '@sbp/sbp'\nimport AvatarUser from '../../../../frontend/views/components/AvatarUser.vue'\nimport ProfileCard from '../../../../frontend/views/components/ProfileCard.vue'\nimport { OPEN_MODAL } from '../../../../frontend/utils/events.js'\nimport { mapGetters } from 'vuex'\n\nconst __vue_script__ = ({\n  name: 'Profile',\n  components: {\n    AvatarUser,\n    ProfileCard\n  },\n  computed: {\n    ...mapGetters([\n      'ourUsername',\n      'ourIdentityContractId'\n    ]),\n    ourDisplayName () {\n      const userContract = this.$store.getters.currentIdentityState\n      return userContract && userContract.attributes && userContract.attributes.displayName\n    }\n  },\n  methods: {\n    openModalUserSettings () {\n      sbp('okTurtles.events/emit', OPEN_MODAL, 'UserSettingsModal')\n    }\n  }\n}        )\n\n/* template */\nvar __vue_render__ = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.$store.state.loggedIn)?_c('div',{staticClass:\"c-profile\",attrs:{\"data-test\":\"userProfile\"}},[_c('profile-card',{attrs:{\"contractID\":_vm.ourIdentityContractId,\"direction\":\"top-left\"}},[_c('button',{staticClass:\"is-unstyled c-avatar-user\",attrs:{\"data-test\":\"openProfileCard\"}},[_c('avatar-user',{attrs:{\"contractID\":_vm.ourIdentityContractId,\"size\":\"sm\"}}),_c('div',{staticClass:\"c-user\"},[_c('strong',{staticClass:\"has-ellipsis\",attrs:{\"data-test\":_vm.ourDisplayName ? \"profileDisplayName\" : \"profileName\"}},[_vm._v(_vm._s(_vm.ourDisplayName || _vm.ourUsername || _vm.ourIdentityContractId))]),(_vm.ourDisplayName)?_c('span',{staticClass:\"has-ellipsis\",attrs:{\"data-test\":\"profileName\"}},[_vm._v(\"@\"+_vm._s(_vm.ourUsername))]):_vm._e()])],1)]),_c('button',{staticClass:\"is-icon-small\",attrs:{\"data-test\":\"settingsBtn\"},on:{\"click\":_vm.openModalUserSettings}},[_c('i',{staticClass:\"icon-cog\"})])],1):_vm._e()}\nvar __vue_staticRenderFns__ = []\n\n  /* style */\n  const __vue_inject_styles__ = function (inject) {\n    if (!inject) return\n    inject(\"data-v-469c796a_0\", { source: \".c-profile[data-v-469c796a]{display:flex;justify-content:space-between;align-items:center;height:4rem;padding:0 1rem}.c-avatar-user[data-v-469c796a]{display:flex;align-items:center}.c-avatar-user:focus .c-user strong[data-v-469c796a],.c-avatar-user:hover .c-user strong[data-v-469c796a]{border-bottom-color:var(--text_0)}.c-user[data-v-469c796a]{display:flex;flex-direction:column;align-items:flex-start;margin-left:.5rem;max-width:7rem;white-space:nowrap;line-height:1.3;margin-top:1px}.c-user strong[data-v-469c796a]{border-bottom:1px solid transparent;width:100%}.c-user span[data-v-469c796a]{font-family:Lato;color:var(--text_1);width:100%}button .icon-cog[data-v-469c796a]{font-size:.875rem;transform-origin:49% 48%}button:focus .icon-cog[data-v-469c796a],button:hover .icon-cog[data-v-469c796a]{animation:cog-data-v-469c796a .4s forwards}@keyframes cog-data-v-469c796a{to{transform:rotate(180deg)}}\", map: undefined, media: undefined })\n\n  }\n  /* scoped */\n  const __vue_scope_id__ = \"data-v-469c796a\"\n  /* module identifier */\n  const __vue_module_identifier__ = undefined\n  /* functional template */\n  const __vue_is_functional_template__ = false\n  /* component normalizer */\n  function __vue_normalize__(\n    template, style, script,\n    scope, functional, moduleIdentifier, shadowMode,\n    createInjector, createInjectorSSR, createInjectorShadow\n  ) {\n    const component = (typeof script === 'function' ? script.options : script) || {}\n\n    // For security concerns, we use only base name in production mode.\n    component.__file = \"style>\\n\"\n\n    if (!component.render) {\n      component.render = template.render\n      component.staticRenderFns = template.staticRenderFns\n      component._compiled = true\n\n      if (functional) component.functional = true\n    }\n\n    component._scopeId = scope\n\n    if (true) {\n      let hook\n      if (false) {\n        // In SSR.\n        hook = function(context) {\n          // 2.3 injection\n          context =\n            context || // cached call\n            (this.$vnode && this.$vnode.ssrContext) || // stateful\n            (this.parent && this.parent.$vnode && this.parent.$vnode.ssrContext) // functional\n          // 2.2 with runInNewContext: true\n          if (!context && typeof __VUE_SSR_CONTEXT__ !== 'undefined') {\n            context = __VUE_SSR_CONTEXT__\n          }\n          // inject component styles\n          if (style) {\n            style.call(this, createInjectorSSR(context))\n          }\n          // register component module identifier for async chunk inference\n          if (context && context._registeredComponents) {\n            context._registeredComponents.add(moduleIdentifier)\n          }\n        }\n        // used by ssr in case component is cached and beforeCreate\n        // never gets called\n        component._ssrRegister = hook\n      }\n      else if (style) {\n        hook = shadowMode \n          ? function(context) {\n              style.call(this, createInjectorShadow(context, this.$root.$options.shadowRoot))\n            }\n          : function(context) {\n              style.call(this, createInjector(context))\n            }\n      }\n\n      if (hook !== undefined) {\n        if (component.functional) {\n          // register for functional component in vue file\n          const originalRender = component.render\n          component.render = function renderWithStyleInjection(h, context) {\n            hook.call(context)\n            return originalRender(h, context)\n          }\n        } else {\n          // inject component registration as beforeCreate hook\n          const existing = component.beforeCreate\n          component.beforeCreate = existing ? [].concat(existing, hook) : [hook]\n        }\n      }\n    }\n\n    return component\n  }\n  /* style inject */\n  function __vue_create_injector__() {\n    const styles = __vue_create_injector__.styles || (__vue_create_injector__.styles = {})\n    const isOldIE =\n      typeof navigator !== 'undefined' &&\n      /msie [6-9]\\\\b/.test(navigator.userAgent.toLowerCase())\n\n    return function addStyle(id, css) {\n      if (document.querySelector('style[data-vue-ssr-id~=\"' + id + '\"]')) return // SSR styles are present.\n\n      const group = isOldIE ? css.media || 'default' : id\n      const style = styles[group] || (styles[group] = { ids: [], parts: [], element: undefined })\n\n      if (!style.ids.includes(id)) {\n        let code = css.source\n        let index = style.ids.length\n\n        style.ids.push(id)\n\n        if (true && css.map) {\n          // https://developer.chrome.com/devtools/docs/javascript-debugging\n          // this makes source maps inside style tags work properly in Chrome\n          code += '\\n/*# sourceURL=' + css.map.sources[0] + ' */'\n          // http://stackoverflow.com/a/26603875\n          code +=\n            '\\n/*# sourceMappingURL=data:application/json;base64,' +\n            btoa(unescape(encodeURIComponent(JSON.stringify(css.map)))) +\n            ' */'\n        }\n\n        if (isOldIE) {\n          style.element = style.element || document.querySelector('style[data-group=' + group + ']')\n        }\n\n        if (!style.element) {\n          const head = document.head || document.getElementsByTagName('head')[0]\n          const el = style.element = document.createElement('style')\n          el.type = 'text/css'\n\n          if (css.media) el.setAttribute('media', css.media)\n          if (isOldIE) {\n            el.setAttribute('data-group', group)\n            el.setAttribute('data-next-index', '0')\n          }\n\n          head.appendChild(el)\n        }\n\n        if (isOldIE) {\n          index = parseInt(style.element.getAttribute('data-next-index'))\n          style.element.setAttribute('data-next-index', index + 1)\n        }\n\n        if (style.element.styleSheet) {\n          style.parts.push(code)\n          style.element.styleSheet.cssText = style.parts\n            .filter(Boolean)\n            .join('\\n')\n        } else {\n          const textNode = document.createTextNode(code)\n          const nodes = style.element.childNodes\n          if (nodes[index]) style.element.removeChild(nodes[index])\n          if (nodes.length) style.element.insertBefore(textNode, nodes[index])\n          else style.element.appendChild(textNode)\n        }\n      }\n    }\n  }\n  /* style inject SSR */\n  \n  /* style inject shadow dom */\n  \n\n  \n  const __vue_component__ = /*#__PURE__*/__vue_normalize__(\n    { render: __vue_render__, staticRenderFns: __vue_staticRenderFns__ },\n    __vue_inject_styles__,\n    __vue_script__,\n    __vue_scope_id__,\n    __vue_is_functional_template__,\n    __vue_module_identifier__,\n    false,\n    __vue_create_injector__,\n    undefined,\n    undefined\n  )\n\n  export default __vue_component__", "/* script */\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport sbp from '@sbp/sbp'\nimport Badge from '../../../../frontend/views/components/Badge.vue'\nimport NotificationBell from '../../../../frontend/views/containers/notifications/NotificationBell.vue'\nimport GroupsList from './GroupsList.vue'\nimport Profile from './Profile.vue'\nimport Toggle from '../../../../frontend/views/components/Toggle.vue'\nimport ListItem from '../../../../frontend/views/components/ListItem.vue'\nimport { mapState, mapGetters } from 'vuex'\nimport { OPEN_MODAL } from '../../../../frontend/utils/events.js'\nimport { DESKTOP } from '../../../../frontend/views/utils/breakpoints.js'\nimport { showNavMixin } from '../../../../frontend/views/utils/misc.js'\nimport { GLOBAL_DASHBOARD_SETTINGS } from '../../../../frontend/views/pages/GlobalDashboard.vue'\nimport { debounce } from 'turtledash'\n\nconst __vue_script__ = ({\n  name: 'Navigation',\n  mixins: [showNavMixin],\n  components: {\n    Badge,\n    Toggle,\n    NotificationBell,\n    GroupsList,\n    Profile,\n    ListItem\n  },\n  data () {\n    return {\n      config: {\n        debounceResize: debounce(this.checkIsTouch, 250),\n        globalDashboard: Object.entries(GLOBAL_DASHBOARD_SETTINGS)\n          .map(([key, entry]) => ({ ...entry, id: key }))\n      },\n      ephemeral: {\n        isActive: false,\n        isTouch: null\n      }\n    }\n  },\n  created () {\n    this.checkIsTouch()\n  },\n  mounted () {\n    // TODO - Create a single resize listener to be reused on components\n    window.addEventListener('resize', this.config.debounceResize)\n  },\n  beforeDestroy () {\n    window.removeEventListener('resize', this.config.debounceResize)\n  },\n  watch: {\n    $route (to, from) {\n      const isDifferentPage = from.path !== to.path\n      if (this.ephemeral.isActive && isDifferentPage) {\n        this.ephemeral.isActive = false\n      }\n    }\n  },\n  computed: {\n    ...mapState(['currentGroupId', 'loggedIn']),\n    ...mapGetters([\n      'groupsByName',\n      'colors',\n      'totalUnreadNotificationCount',\n      'groupUnreadMessages'\n    ]),\n    currentGroupUnreadMessagesCount () {\n      return !this.currentGroupId ? 0 : this.groupUnreadMessages(this.currentGroupId)\n    },\n    logo () {\n      const name = this.colors.theme === 'dark' ? '-white' : ''\n      return `/assets/images/logo-transparent${name}.png`\n    },\n    isInert () {\n      return !this.ephemeral.isActive && this.ephemeral.isTouch\n    },\n    notApprovedToGroupYet () {\n      // TODO: once the relevant work is implemented on back-end, this check logic needs to be updated accordingly\n      return this.$route.path === '/pending-approval'\n    },\n    isInGlobalDashboard () {\n      return this.$route.path.startsWith('/global-dashboard')\n    }\n  },\n  methods: {\n    toggleMenu () {\n      this.ephemeral.isActive = !this.ephemeral.isActive\n    },\n    openModal (mode) {\n      sbp('okTurtles.events/emit', OPEN_MODAL, mode)\n    },\n    checkIsTouch () {\n      this.ephemeral.isTouch = window.innerWidth < DESKTOP\n    },\n    onMenuItemsClick () {\n      // Close the menu when a menu item is clicked.\n      this.ephemeral.isActive = false\n    }\n  }\n}        )\n\n/* template */\nvar __vue_render__ = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('nav',{staticClass:\"c-navigation\",class:{ \"is-active\": _vm.ephemeral.isActive },attrs:{\"aria-label\":_vm.L(\"Main\"),\"data-test\":\"navMenu\"}},[_c('toggle',{attrs:{\"element\":\"navigation\",\"aria-expanded\":_vm.ephemeral.isActive,\"data-test\":\"NavigationToggleBtn\"},on:{\"toggle\":_vm.toggleMenu}},[(_vm.totalUnreadNotificationCount)?_c('badge',{staticClass:\"c-toggle-badge\",attrs:{\"data-test\":\"dashboardBadge\"}},[_vm._v(_vm._s(_vm.totalUnreadNotificationCount))]):(_vm.currentGroupUnreadMessagesCount)?_c('badge',{staticClass:\"c-toggle-badge\",attrs:{\"data-test\":\"dashboardBadge\"}},[_vm._v(_vm._s(_vm.currentGroupUnreadMessagesCount))]):_vm._e()],1),(_vm.groupsByName.length >= 1)?_c('groups-list',{attrs:{\"inert\":_vm.isInert}}):_vm._e(),_c('div',{staticClass:\"c-navigation-wrapper\",attrs:{\"inert\":_vm.isInert}},[(_vm.isInGlobalDashboard)?[_c('div',{staticClass:\"c-navigation-header\"},[_c('i18n',{staticClass:\"sr-only\",attrs:{\"tag\":\"h1\"}},[_vm._v(\"Global Dashboard Menu\")]),_c('img',{staticClass:\"c-logo\",attrs:{\"src\":_vm.logo,\"alt\":\"GroupIncome's logo\"}})],1),_c('div',{staticClass:\"c-navigation-body\"},[_c('div',{staticClass:\"c-navigation-body-top\"},[_c('ul',{staticClass:\"c-menu-list\"},_vm._l((_vm.config.globalDashboard),function(entry){return _c('list-item',{key:entry.id,attrs:{\"tag\":\"router-link\",\"icon\":entry.icon,\"to\":entry.routeTo,\"data-test\":\"global-dashboard_\" + entry.id}},[_vm._v(_vm._s(entry.title))])}),1)])])]:[_c('div',{staticClass:\"c-navigation-header\"},[_c('i18n',{staticClass:\"sr-only\",attrs:{\"tag\":\"h1\"}},[_vm._v(\"Main Menu\")]),_c('router-link',{attrs:{\"to\":\"/home\"}},[_c('img',{staticClass:\"c-logo\",attrs:{\"src\":_vm.logo,\"alt\":\"GroupIncome's logo\"}})]),(!_vm.notApprovedToGroupYet)?_c('notification-bell',{attrs:{\"data-test\":\"notificationBell\"}}):_vm._e()],1),(!_vm.notApprovedToGroupYet && _vm.groupsByName.length)?_c('div',{staticClass:\"c-navigation-body\",on:{\"click\":function($event){$event.stopPropagation();return _vm.onMenuItemsClick($event)}}},[_c('div',{staticClass:\"c-navigation-body-top\"},[_c('ul',{staticClass:\"c-menu-list\"},[_c('list-item',{attrs:{\"tag\":\"router-link\",\"icon\":\"columns\",\"to\":\"/dashboard\",\"data-test\":\"dashboard\"}},[_c('i18n',[_vm._v(\"Dashboard\")])],1),_c('list-item',{attrs:{\"tag\":\"router-link\",\"icon\":\"chart-pie\",\"to\":\"/contributions\",\"data-test\":\"contributionsLink\"}},[_c('i18n',[_vm._v(\"Contributions\")])],1),_c('list-item',{attrs:{\"tag\":\"router-link\",\"icon\":\"tag\",\"to\":\"/payments\",\"data-test\":\"paymentsLink\"}},[_c('i18n',[_vm._v(\"Payments\")])],1),_c('list-item',{attrs:{\"tag\":\"router-link\",\"icon\":\"comments\",\"to\":\"/group-chat\",\"badgeCount\":_vm.currentGroupUnreadMessagesCount,\"data-test\":\"groupChatLink\"}},[_c('i18n',[_vm._v(\"Chat\")])],1),_c('list-item',{attrs:{\"tag\":\"router-link\",\"icon\":\"cog\",\"to\":\"/group-settings\",\"data-test\":\"groupSettingsLink\"}},[_c('i18n',[_vm._v(\"Group Settings\")])],1)],1),(_vm.groupsByName.length < 2)?_c('div',{staticClass:\"c-navigation-separator\"},[_c('button',{staticClass:\"is-small is-outlined\",attrs:{\"data-test\":\"createGroup\",\"aria-label\":_vm.L(\"Add a group\")},on:{\"click\":function($event){return _vm.openModal(\"GroupCreationModal\")}}},[_c('i',{staticClass:\"icon-plus is-prefix\"}),_c('i18n',[_vm._v(\"Add a group\")])],1)]):_vm._e()]),_c('div',{staticClass:\"c-navigation-bottom\"},[_c('ul',{staticClass:\"c-menu-list-bottom\"},[_c('i18n',{attrs:{\"tag\":\"a\",\"href\":_vm.ALLOWED_URLS.BLOG_PAGE,\"target\":\"_blank\",\"rel\":\"noopener noreferrer\"}},[_vm._v(\"Blog\")]),_c('i18n',{attrs:{\"tag\":\"a\",\"href\":_vm.ALLOWED_URLS.COMMUNITY_PAGE,\"target\":\"_blank\",\"rel\":\"noopener noreferrer\"}},[_vm._v(\"Help & Feedback\")]),_c('i18n',{attrs:{\"tag\":\"a\",\"href\":_vm.ALLOWED_URLS.DONATE_PAGE,\"target\":\"_blank\",\"rel\":\"noopener noreferrer\"}},[_vm._v(\"Donate\")])],1)])]):_vm._e()],(_vm.showNav)?_c('div',{staticClass:\"c-navigation-footer\"},[_c('profile')],1):_vm._e()],2)],1)}\nvar __vue_staticRenderFns__ = []\n\n  /* style */\n  const __vue_inject_styles__ = function (inject) {\n    if (!inject) return\n    inject(\"data-v-813981b2_0\", { source: \".c-navigation[data-v-813981b2]{display:flex;flex-direction:row;font-weight:400;background:var(--general_2)}.c-navigation-wrapper[data-v-813981b2]{display:flex;flex-direction:column;min-width:14.375rem;justify-content:space-between;height:100%}.c-navigation-header[data-v-813981b2]{display:flex;justify-content:space-between;align-items:center;flex-shrink:0;padding:0 1rem;height:4.6rem;margin-bottom:-.1rem}.c-navigation-body[data-v-813981b2]{display:flex;overflow:auto;-webkit-overflow-scrolling:touch;flex-direction:column;justify-content:space-between;flex-grow:1}.c-navigation-separator[data-v-813981b2]{text-align:center;margin:1.5rem 1.5rem 0 1.5rem;border-top:1px solid var(--general_0);padding-top:1.5rem}.c-navigation-bottom[data-v-813981b2]{padding-top:2rem;padding-bottom:.5rem}.c-navigation-footer[data-v-813981b2]{flex-shrink:0}.c-menu-list-bottom[data-v-813981b2]{display:flex;flex-direction:column;margin-left:1rem;font-size:.75rem}.c-menu-list-bottom a[data-v-813981b2]{line-height:1.65rem;color:var(--text_1)}.c-menu-list-bottom a[data-v-813981b2]:focus,.c-menu-list-bottom a[data-v-813981b2]:hover{color:var(--text_0);outline:0}.c-logo[data-v-813981b2]{min-width:8rem;width:8rem}.c-toggle[data-v-813981b2]{left:100%}\", map: undefined, media: undefined })\n\n  }\n  /* scoped */\n  const __vue_scope_id__ = \"data-v-813981b2\"\n  /* module identifier */\n  const __vue_module_identifier__ = undefined\n  /* functional template */\n  const __vue_is_functional_template__ = false\n  /* component normalizer */\n  function __vue_normalize__(\n    template, style, script,\n    scope, functional, moduleIdentifier, shadowMode,\n    createInjector, createInjectorSSR, createInjectorShadow\n  ) {\n    const component = (typeof script === 'function' ? script.options : script) || {}\n\n    // For security concerns, we use only base name in production mode.\n    component.__file = \"style>\\n\"\n\n    if (!component.render) {\n      component.render = template.render\n      component.staticRenderFns = template.staticRenderFns\n      component._compiled = true\n\n      if (functional) component.functional = true\n    }\n\n    component._scopeId = scope\n\n    if (true) {\n      let hook\n      if (false) {\n        // In SSR.\n        hook = function(context) {\n          // 2.3 injection\n          context =\n            context || // cached call\n            (this.$vnode && this.$vnode.ssrContext) || // stateful\n            (this.parent && this.parent.$vnode && this.parent.$vnode.ssrContext) // functional\n          // 2.2 with runInNewContext: true\n          if (!context && typeof __VUE_SSR_CONTEXT__ !== 'undefined') {\n            context = __VUE_SSR_CONTEXT__\n          }\n          // inject component styles\n          if (style) {\n            style.call(this, createInjectorSSR(context))\n          }\n          // register component module identifier for async chunk inference\n          if (context && context._registeredComponents) {\n            context._registeredComponents.add(moduleIdentifier)\n          }\n        }\n        // used by ssr in case component is cached and beforeCreate\n        // never gets called\n        component._ssrRegister = hook\n      }\n      else if (style) {\n        hook = shadowMode \n          ? function(context) {\n              style.call(this, createInjectorShadow(context, this.$root.$options.shadowRoot))\n            }\n          : function(context) {\n              style.call(this, createInjector(context))\n            }\n      }\n\n      if (hook !== undefined) {\n        if (component.functional) {\n          // register for functional component in vue file\n          const originalRender = component.render\n          component.render = function renderWithStyleInjection(h, context) {\n            hook.call(context)\n            return originalRender(h, context)\n          }\n        } else {\n          // inject component registration as beforeCreate hook\n          const existing = component.beforeCreate\n          component.beforeCreate = existing ? [].concat(existing, hook) : [hook]\n        }\n      }\n    }\n\n    return component\n  }\n  /* style inject */\n  function __vue_create_injector__() {\n    const styles = __vue_create_injector__.styles || (__vue_create_injector__.styles = {})\n    const isOldIE =\n      typeof navigator !== 'undefined' &&\n      /msie [6-9]\\\\b/.test(navigator.userAgent.toLowerCase())\n\n    return function addStyle(id, css) {\n      if (document.querySelector('style[data-vue-ssr-id~=\"' + id + '\"]')) return // SSR styles are present.\n\n      const group = isOldIE ? css.media || 'default' : id\n      const style = styles[group] || (styles[group] = { ids: [], parts: [], element: undefined })\n\n      if (!style.ids.includes(id)) {\n        let code = css.source\n        let index = style.ids.length\n\n        style.ids.push(id)\n\n        if (true && css.map) {\n          // https://developer.chrome.com/devtools/docs/javascript-debugging\n          // this makes source maps inside style tags work properly in Chrome\n          code += '\\n/*# sourceURL=' + css.map.sources[0] + ' */'\n          // http://stackoverflow.com/a/26603875\n          code +=\n            '\\n/*# sourceMappingURL=data:application/json;base64,' +\n            btoa(unescape(encodeURIComponent(JSON.stringify(css.map)))) +\n            ' */'\n        }\n\n        if (isOldIE) {\n          style.element = style.element || document.querySelector('style[data-group=' + group + ']')\n        }\n\n        if (!style.element) {\n          const head = document.head || document.getElementsByTagName('head')[0]\n          const el = style.element = document.createElement('style')\n          el.type = 'text/css'\n\n          if (css.media) el.setAttribute('media', css.media)\n          if (isOldIE) {\n            el.setAttribute('data-group', group)\n            el.setAttribute('data-next-index', '0')\n          }\n\n          head.appendChild(el)\n        }\n\n        if (isOldIE) {\n          index = parseInt(style.element.getAttribute('data-next-index'))\n          style.element.setAttribute('data-next-index', index + 1)\n        }\n\n        if (style.element.styleSheet) {\n          style.parts.push(code)\n          style.element.styleSheet.cssText = style.parts\n            .filter(Boolean)\n            .join('\\n')\n        } else {\n          const textNode = document.createTextNode(code)\n          const nodes = style.element.childNodes\n          if (nodes[index]) style.element.removeChild(nodes[index])\n          if (nodes.length) style.element.insertBefore(textNode, nodes[index])\n          else style.element.appendChild(textNode)\n        }\n      }\n    }\n  }\n  /* style inject SSR */\n  \n  /* style inject shadow dom */\n  \n\n  \n  const __vue_component__ = /*#__PURE__*/__vue_normalize__(\n    { render: __vue_render__, staticRenderFns: __vue_staticRenderFns__ },\n    __vue_inject_styles__,\n    __vue_script__,\n    __vue_scope_id__,\n    __vue_is_functional_template__,\n    __vue_module_identifier__,\n    false,\n    __vue_create_injector__,\n    undefined,\n    undefined\n  )\n\n  export default __vue_component__", "'use strict'\n\nimport sbp from '@sbp/sbp'\nimport blockies from '@utils/blockies.js'\nimport Colors from '~/frontend/model/settings/colors.js'\nimport { randomFromArray } from 'turtledash'\nimport { imageDataURItoBlob } from '@utils/image.js'\n\nconst colorOptions = ['primary', 'warning', 'danger', 'success']\nconst theme = Colors.light\n\nsbp('sbp/selectors/register', {\n  'gi.utils/avatar/create': function () {\n    // creates a random avatar image and upload it\n    let avatarBase64, avatarBlob\n\n    try {\n      const palette = randomFromArray(colorOptions)\n\n      avatarBase64 = blockies.create({\n        bgcolor: theme[`${palette}_0`], // darkest\n        color: theme[`${palette}_1`], // medium\n        spotcolor: theme[`${palette}_2`], // lightest\n        size: 6,\n        scale: 12\n      }).toDataURL('image/png')\n\n      avatarBlob = imageDataURItoBlob(avatarBase64)\n    } catch (e) {\n      // This may fail in old browsers (e.g. IE, Opera Mini, etc...)\n      console.warn(\"utils/avatar.js Avatar generation process didn't go well.\", e)\n      return null\n    }\n\n    return avatarBlob\n  }\n})\n", "'use strict'\n\nimport { L, LTags } from '@common/common.js'\nimport dompurify from 'dompurify'\nimport Vue from 'vue'\nimport { defaultConfig as defaultDompurifyConfig } from './vSafeHtml.js'\n\nVue.prototype.L = L\nVue.prototype.LTags = LTags\n\n/**\n * Allow 'href' and 'target' attributes to avoid breaking our hyperlinks,\n * but keep sanitizing their values.\n * See https://github.com/cure53/DOMPurify#can-i-configure-dompurify\n */\nconst dompurifyConfig = {\n  ...defaultDompurifyConfig,\n  ALLOWED_ATTR: ['class', 'href', 'rel', 'target'],\n  ALLOWED_TAGS: ['a', 'b', 'br', 'button', 'em', 'i', 'p', 'small', 'span', 'strong', 'sub', 'sup', 'u'],\n  RETURN_DOM_FRAGMENT: false\n}\n\nfunction sanitize (inputString) {\n  return dompurify.sanitize(inputString, dompurifyConfig)\n}\n\nVue.component('i18n', {\n  functional: true,\n  props: {\n    args: [Object, Array],\n    tag: {\n      type: String,\n      default: 'span'\n    },\n    compile: Boolean\n  },\n  render: function (h, context) {\n    const text = context.children[0].text\n    const translation = L(text, context.props.args || {})\n    if (!translation) {\n      console.warn('The following i18n text was not translated correctly:', text)\n      return h(context.props.tag, context.data, text)\n    }\n    // Prevent reverse tabnabbing by including `rel=\"noopener noreferrer\"` when rendering as an outbound hyperlink.\n    if (context.props.tag === 'a' && context.data.attrs.target === '_blank') {\n      context.data.attrs.rel = 'noopener noreferrer'\n    }\n    if (context.props.compile) {\n      const result = Vue.compile('<wrap>' + sanitize(translation) + '</wrap>')\n      // console.log('TRANSLATED RENDERED TEXT:', context, result.render.toString())\n      return result.render.call({\n        _c: (tag, ...args) => {\n          if (tag === 'wrap') {\n            return h(context.props.tag, context.data, ...args)\n          } else {\n            return h(tag, ...args)\n          }\n        },\n        _v: x => x\n      })\n    } else {\n      if (!context.data.domProps) context.data.domProps = {}\n      context.data.domProps.innerHTML = sanitize(translation)\n      return h(context.props.tag, context.data)\n    }\n  }\n})\n", "/*\n * Copyright GitLab B.V.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\n/*\n * This file is mainly a copy of the `safe-html.js` directive found in the\n * [gitlab-ui](https://gitlab.com/gitlab-org/gitlab-ui) project,\n * slightly modifed for linting purposes and to immediately register it via\n * `Vue.directive()` rather than exporting it, consistently with our other\n * custom Vue directives.\n */\n\nimport dompurify from 'dompurify'\nimport Vue from 'vue'\nimport { cloneDeep } from 'turtledash'\n\n// See https://github.com/cure53/DOMPurify#can-i-configure-dompurify\nexport const defaultConfig = {\n  ALLOWED_ATTR: ['class'],\n  ALLOWED_TAGS: ['b', 'br', 'em', 'i', 'p', 'small', 'span', 'strong', 'sub', 'sup', 'u', 's', 'code', 'ul', 'li', 'pre', 'blockquote', 'del'],\n  // This option was in the original file.\n  RETURN_DOM_FRAGMENT: true\n}\n\nconst transform = (el, binding) => {\n  if (binding.oldValue !== binding.value) {\n    let config = defaultConfig\n    const tagAllowedAttrs = {\n      'a': ['href', 'target'],\n      'button': ['type']\n    }\n\n    if (Object.keys(tagAllowedAttrs).includes(binding.arg)) {\n      config = cloneDeep(config)\n      config.ALLOWED_TAGS.push(binding.arg)\n      config.ALLOWED_ATTR.push(...(tagAllowedAttrs[binding.arg] || []))\n    }\n\n    el.textContent = ''\n    el.appendChild(dompurify.sanitize(binding.value, config))\n  }\n}\n\n/*\n * Register a global custom directive called `v-safe-html`.\n *\n * Please use this instead of `v-html` everywhere user input is expected,\n *   in order to avoid XSS vulnerabilities.\n *\n * See https://github.com/okTurtles/group-income/issues/975\n */\n\nVue.directive('safe-html', {\n  bind: transform,\n  update: transform\n})\n", "import Vue from 'vue'\n\n// Register a global custom directive called `v-error`\n// to automatically display vuelidate error messages\n//\n// Config:\n//         validations: {\n//           form: {\n//             incomeAmount: {\n//               [L('field is required')]: required,\n//               [L('cannot be negative')]: v => v >= 0,\n//               [L('cannot have more than 2 decimals')]: decimals(2)\n//             },\n//\n// Markup:\n//         i18n.label(tag='label') Enter your income:\n//         input.input.is-primary(\n//           type='text'\n//           v-model='$v.form.incomeAmount.$model'\n//           :class='{error: $v.form.incomeAmount.$error}'\n//           v-error:incomeAmount='{ tag: \"p\", attrs: { \"data-test\": \"badIncome\" } }'\n//         )\n\nVue.directive('error', {\n  inserted (el, binding, vnode) {\n    if (!binding.arg) {\n      throw new Error(`v-error: missing argument on ${el.outerHTML}`)\n    }\n    if (!vnode.context.$v.form[binding.arg]) {\n      throw new Error(`v-error: vuelidate doesn't have validation for ${binding.arg}`)\n    }\n    const opts = binding.value || {}\n    const pErr = document.createElement(opts.tag || 'span')\n    for (const attr in opts.attrs) {\n      pErr.setAttribute(attr, opts.attrs[attr])\n    }\n    pErr.classList.add('error', 'is-hidden')\n    el.insertAdjacentElement('afterend', pErr)\n  },\n  update (el, binding, vnode) {\n    if (vnode.context.$v.form[binding.arg].$error) {\n      for (const key in vnode.context.$v.form[binding.arg].$params) {\n        if (!vnode.context.$v.form[binding.arg][key]) {\n          el.nextElementSibling.innerText = key\n          break\n        }\n      }\n      el.nextElementSibling.classList.remove('is-hidden')\n    } else {\n      el.nextElementSibling.classList.add('is-hidden')\n    }\n  },\n  unbind (el) {\n    el.nextElementSibling.remove()\n  }\n})\n", "import Vue from 'vue'\n// Register a global custom directive called `v-focus`\nVue.directive('focus', {\n  // When the bound element is inserted into the DOM...\n  inserted: (el, args) => {\n    // Focus the element\n    if (!args || args.value !== false) el.focus()\n  }\n})\n", "const requiredFeatures = {\n  fetch: typeof fetch === 'function' && typeof Request === 'function' && typeof Response === 'function',\n  streams: typeof ReadableStream === 'function',\n  webSocket: typeof WebSocket === 'function',\n  reflect: typeof Reflect === 'object',\n  serviceWorker: typeof Navigator === 'function' && typeof navigator === 'object' && navigator instanceof Navigator && typeof navigator === 'object' && typeof ServiceWorkerContainer === 'function' && navigator.serviceWorker instanceof ServiceWorkerContainer,\n  // $FlowFixMe[cannot-resolve-name]\n  indexedDB: typeof IDBFactory === 'function' && typeof indexedDB === 'object' && indexedDB instanceof IDBFactory,\n  sessionStorage: typeof Storage === 'function' && typeof sessionStorage === 'object' && sessionStorage instanceof Storage\n}\n\nconsole.info('Feature check', requiredFeatures)\n\nconst hasAllRequiredFeatures          = Object.values(requiredFeatures).every(Boolean)\n\nexport default hasAllRequiredFeatures\n", "'use strict'\n\nimport sbp from '@sbp/sbp'\n// $FlowFixMe\nimport { isFunction, objectOf, string } from '@model/contracts/misc/flowTyper.js'\nimport { MINS_MILLIS } from '@model/contracts/shared/time.js'\n\n// This file is used in both the SW and window contexts.\n// We do not import Vue for two reasons:\n//   (1) it's bulk that's not needed in the SW, and\n//   (2) there is no place in the app to re-render in response to state updates\n//       in `alreadyFired` and `lastRun`\n\nlet shortestDelay        \nexport const PERIODIC_NOTIFICATION_TYPE = {\n  MIN1: '1MIN',\n  MIN5: '5MIN',\n  MIN15: '15MIN',\n  MIN30: '30MIN'\n}\n\nconst ephemeralNotificationState   \n                                                                  \n  = {\n  notifications: [], partition: Object.create(null)\n}\n\nconst typeToDelayMap = {\n  [PERIODIC_NOTIFICATION_TYPE.MIN1]: 1 * MINS_MILLIS,\n  [PERIODIC_NOTIFICATION_TYPE.MIN5]: 5 * MINS_MILLIS,\n  [PERIODIC_NOTIFICATION_TYPE.MIN15]: 15 * MINS_MILLIS,\n  [PERIODIC_NOTIFICATION_TYPE.MIN30]: 30 * MINS_MILLIS\n}\n\nconst validateNotificationData = objectOf({\n  stateKey: (value) => {\n    value = string(value)\n    if (value.length === 0) {\n      throw new TypeError('Empty notification data state key')\n    }\n    return value\n  },\n  emitCondition: isFunction,\n  emit: isFunction,\n  shouldClearStateKey: isFunction\n})\n\n/**\n * Runs a recursive notification list handler that checks and emits\n * notifications based on specified conditions and delays.\n *\n * The function performs the following steps:\n * 1. Checks if enough time has passed since the last run based on the specified\n * delay.\n * 2. Iterates over each notification entry in the `data.notifications` array:\n *    - If the notification has not been fired and its emit condition evaluates\n *      to true, it:\n *        - Calls the emit function associated with the notification.\n *        - Marks the notification as fired in the `firedMap`.\n *    - If the notification has been fired and its clear condition evaluates to\n *      true, it:\n *        - Removes the notification from the `firedMap`.\n * 3. Updates the `lastRun` timestamp to the current time.\n * 4. Sets a timeout to recursively call `runNotificationListRecursive` after\n * the specified delay, adjusting for the time that has already passed since the\n * last run.\n */\nasync function runNotificationListRecursive () {\n  const rootState = sbp('state/vuex/state')\n  const rootGetters = sbp('state/vuex/getters')\n  const firedMap = rootState.periodicNotificationAlreadyFiredMap.alreadyFired\n  const lastRunMap = rootState.periodicNotificationAlreadyFiredMap.lastRun\n  const callWithStates = (func, stateKey) => func.call(ephemeralNotificationState.partition[stateKey], { rootState, rootGetters })\n\n  // Exit if a timeout is already set\n  if (ephemeralNotificationState.clearTimeout) return\n  // Prevent accidentally calling `runNotificationListRecursive` while it's\n  // still running\n  // We set `clearTimeout` to a local value to stop processing notifications\n  // when clearing stop notifications, to avoid calling\n  // `runNotificationListRecursive` while it's running and to be able to compare\n  // it to the local value later to replace `clearTimeout` later on in this\n  // function\n  let aborted          = false\n  const abort = () => { aborted = true }\n  ephemeralNotificationState.clearTimeout = abort\n\n  // If there are any queued invocations, wait until they're done\n  // This is needed because some of the notifications might need contract state\n  // to be ready. By waiting on all queues, we ensure that we have the latest\n  // state after setting up Chelonia. When periodic notifications were used\n  // only in the browser window (instead of also in the SW), a timeout was used\n  // for a similar effect.\n  await Promise.all(\n    ((Object.entries(sbp('okTurtles.eventQueue/queuedInvocations'))     )                                   )\n      .map(([queue, invocations]) => {\n        return !!invocations.length && sbp('okTurtles.eventQueue/queueEvent', queue, () => {}).catch(() => {})\n      })\n  )\n\n  // Check if enough time has passed since the last run\n  for (const entry of ephemeralNotificationState.notifications) {\n    if (aborted) break\n    const stateKey = entry.stateKey\n    const lastRun = lastRunMap[stateKey] || 0\n    // Use the delay from the notification entry\n    const delay = entry.delay\n    if ((Date.now() - lastRun) >= delay) {\n      try {\n        if (!firedMap[stateKey] && callWithStates(entry.emitCondition, stateKey)) {\n          await callWithStates(entry.emit, stateKey)\n          firedMap[stateKey] = true\n        }\n\n        if (firedMap[stateKey] && callWithStates(entry.shouldClearStateKey, stateKey)) {\n          delete firedMap[stateKey]\n        }\n      } catch (e) {\n        console.error('runNotificationListRecursive: Error calling notification', stateKey, e)\n      }\n\n      // Update the last run timestamp\n      lastRunMap[stateKey] = Date.now()\n    }\n  }\n\n  // Set a timeout for the next run of the notification check\n  // But only do so if `clearTimeout` hasn't been reset\n  if (ephemeralNotificationState.clearTimeout !== abort) return\n  ephemeralNotificationState.clearTimeout = (() => {\n    const timeoutId = setTimeout(\n      () => {\n        delete ephemeralNotificationState.clearTimeout\n        runNotificationListRecursive()\n      },\n      shortestDelay\n    )\n    return () => clearTimeout(timeoutId)\n  })()\n}\n\nfunction clearTimeoutObject () {\n  if (ephemeralNotificationState.clearTimeout) {\n    ephemeralNotificationState.clearTimeout()\n    delete ephemeralNotificationState.clearTimeout\n  }\n\n  ephemeralNotificationState.notifications.forEach(({ stateKey }) => {\n    ephemeralNotificationState.partition[stateKey] = Object.create(null)\n  })\n}\n\nsbp('sbp/selectors/register', {\n  'gi.periodicNotifications/init': function () {\n    return runNotificationListRecursive().catch((e) => {\n      console.error('[gi.periodicNotifications/init] Error', e)\n    })\n  },\n  'gi.periodicNotifications/clearStatesAndStopTimers': function () {\n    const rootState = sbp('state/vuex/state')\n\n    rootState.periodicNotificationAlreadyFiredMap = {\n      alreadyFired: Object.create(null), // { notificationKey: boolean },\n      lastRun: Object.create(null) // { notificationKey: number },\n    }\n    clearTimeoutObject()\n  },\n  'gi.periodicNotifications/importNotifications': function (entries) {\n    const keySet = new Set()\n    for (const { type, notificationData } of entries) {\n      if (!type || !notificationData) throw new Error('A required field in a periodic notification entry is missing.')\n\n      const delay = typeToDelayMap[type]\n      if (!delay) {\n        throw new RangeError('Invalid delay')\n      }\n      // Using inverted logic because `shortestDelay` could be undefined (on\n      // the first call to this function) and `undefined` is coerced to NaN.\n      if (!(shortestDelay <= delay)) shortestDelay = delay\n\n      validateNotificationData(notificationData)\n      if (keySet.has(notificationData.stateKey)) {\n        throw new Error('Duplicate periodic notification state key: ' + notificationData.stateKey)\n      }\n      keySet.add(notificationData.stateKey)\n\n      ephemeralNotificationState.partition[notificationData.stateKey] = Object.create(null)\n      ephemeralNotificationState.notifications.push({\n        ...notificationData,\n        delay\n      })\n    }\n  }\n})\n", "'use strict'\n\nimport { compareISOTimestamps, dateToPeriodStamp, MONTHS_MILLIS } from '@model/contracts/shared/time.js'\nimport sbp from '@sbp/sbp'\nimport { PERIODIC_NOTIFICATION_TYPE } from './periodicNotifications.js'\n\n// util functions\nconst myNotificationHas = (checkFunc, groupId = '') => {\n  const myNotifications = groupId\n    ? sbp('state/vuex/getters').notificationsByGroup(groupId)\n    : sbp('state/vuex/getters').currentNotifications\n\n  return myNotifications.some(item => checkFunc(item))\n}\n\n/*\n\n *** NOTE: This mixin is imported into the root Vue instance in 'main.js'. feel free to extend the notification entry lists\n           for defining more notifications.\n\n  There is two types of notifications that can be defined here.\n  1) one-time notification: A type of notification that is checked & emitted once when user has signed in on their group.\n                            (Executed in response to 'SWITCH_GROUP' event)\n  2) periodic notification: A type of notication that is checked periodically and emitted when the conditions are met.\n\n  *-*-*-* notification entry structure *-*-*-*\n\n  1. oneTimeNotification: { name?: string, emitCondition: function, emit: function }\n    - name: An optional identifier of the entry.\n    - emitCondition: a function that returns a boolean that determines whether or not to emit a notification\n    - emit: logic to emit a notification\n\n  2. periodicNotification: { type: string, notificationData: object }\n    * type: MIN1 | MIN5 | MIN30\n      - MIN1: a notification that is validated&emitted every 1 min.\n      - MIN5: a notification that is validated&emitted every 5 min.\n      - MIN15: a notification that is validated&emitted every 15 min.\n      - MIN30: a notification that is validated&emitted every 30 min.\n\n    * notificationData: { stateKey: string, emitCondition: function, emit: function, shouldClearStateKey: function }\n      - stateKey: a key name used to store a boolean in rootState.periodicNotificationAlreadyFiredMap.\n                  Being undefined in the rootState means the notification hasn't been fired, and setting it to 'true' means it has.\n      - emitCondition: a function that returns a boolean that determines whether or not to emit a notification\n      - emit: logic to emit a notification\n      - shouldClearStateKey: a function that returns true to delete the stateKey from rootState, which marks the notification as 'has not been fired' again.\n\n  *-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-**-*-*\n*/\nconst oneTimeNotificationEntries = [\n  {\n    name: 'INCOME_DETAILS_OLD',\n    emitCondition ({ rootGetters }) {\n      const { incomeDetailsLastUpdatedDate } = (rootGetters.ourGroupProfile || {})\n      const now = dateToPeriodStamp(new Date())\n\n      return incomeDetailsLastUpdatedDate &&\n        compareISOTimestamps(now, incomeDetailsLastUpdatedDate) > 6 * MONTHS_MILLIS &&\n        !myNotificationHas(item => item.type === 'INCOME_DETAILS_OLD' && item.data.lastUpdatedDate === incomeDetailsLastUpdatedDate)\n    },\n    emit ({ rootGetters }) {\n      sbp('gi.notifications/emit', 'INCOME_DETAILS_OLD', {\n        months: 6,\n        lastUpdatedDate: rootGetters.ourGroupProfile.incomeDetailsLastUpdatedDate\n      })\n    }\n  }\n]\n\nconst periodicNotificationEntries = [\n  // The following fixes a rare issue that we're not sure exactly why it happens.\n  // Sometimes, the `namespace/lookup` call made as a side-effect in the identity\n  // contract seems to fail. The result of this is that the corresponding cached\n  // namespace lookup entry isn't populated and the username is missing from the\n  // UI. To fix this, we check for users that are missing a username and\n  // do this lookup manually.\n  // See: <https://github.com/okTurtles/group-income/pull/2306#pullrequestreview-2305605028>\n  {\n    type: PERIODIC_NOTIFICATION_TYPE.MIN30,\n    notificationData: {\n      stateKey: 'username-fetch',\n      emitCondition: () => true,\n      emit ({ rootState, rootGetters }) {\n        Object.values(rootGetters.ourContactProfilesById)\n          // Only get users that are missing the cached lookup entry (!username)\n          // and that have a username defined (!!rootState[contractID]?.attributes?.username)\n          .filter(\n            // $FlowFixMe[incompatible-use]\n            ({ username, contractID }) => !username && !!rootState[contractID]?.attributes?.username)\n          // $FlowFixMe[incompatible-use]\n          .forEach(({ contractID }) => {\n            const username = rootState[contractID].attributes.username\n            // Do a manual lookup. This will populate the cache if successful.\n            sbp('namespace/lookup', username, { skipCache: true }).then((cID) => {\n              if (cID !== contractID) {\n                console.error(`[periodic notification] Mismatched username. The lookup result was ${cID} instead of ${contractID}`)\n              }\n            }).catch((e) => {\n              console.error('[periodic notification] Error looking up username', username, 'for', contractID, e)\n            })\n          })\n      },\n      shouldClearStateKey: () => true\n    }\n  }\n]\n\nconst notificationMixin = {\n  methods: {\n    initOrResetPeriodicNotifications () {\n      // make sure clear the states and timers for either previous user or previous group of the user, and re-init them.\n      sbp('gi.periodicNotifications/clearStatesAndStopTimers')\n      sbp('gi.periodicNotifications/init')\n    },\n    async checkAndEmitOneTimeNotifications () {\n      const arg = { rootState: sbp('state/vuex/state'), rootGetters: sbp('state/vuex/getters') }\n\n      for (const entry of oneTimeNotificationEntries) {\n        if (entry.emitCondition(arg)) {\n          await entry.emit(arg)\n        }\n      }\n    }\n  },\n  mounted () {\n    sbp('gi.periodicNotifications/importNotifications', periodicNotificationEntries)\n  }\n}\n\nexport default notificationMixin\n", "/*!\n * FaviconBadge - A small library for manipulating the Favicon\n * Modified from Tinycon.js by Tom Moor\n * Original project: https://github.com/tommoor/tinycon\n * Copyright (c) 2023 Alex Jin\n * @license MIT Licensed\n */\n\nlet currentFavicon = null\nlet originalFavicon = null\nlet faviconImage\nlet canvas = null\nlet options = {}\n// Chrome browsers with nonstandard zoom report fractional devicePixelRatio.\nconst r = Math.ceil(window.devicePixelRatio) || 1\nconst size = 16 * r\nconst defaults = {\n  width: 8,\n  height: 8,\n  background: '#ff0000',\n  crossOrigin: true\n}\n\n// private methods\nconst getFaviconTag = () => {\n  const links = document.getElementsByTagName('link')\n\n  for (let i = 0, len = links.length; i < len; i++) {\n    if ((links[i].getAttribute('rel') || '').match(/\\bicon\\b/i)) {\n      return links[i]\n    }\n  }\n\n  return null\n}\n\nconst removeFaviconTag = () => {\n  const links = document.getElementsByTagName('link')\n\n  for (let i = 0, len = links.length; i < len; i++) {\n    const exists = (typeof (links[i]) !== 'undefined')\n    if (exists && (links[i].getAttribute('rel') || '').match(/\\bicon\\b/i)) {\n      links[i].parentNode?.removeChild(links[i])\n    }\n  }\n}\n\nconst getCurrentFavicon = () => {\n  if (!originalFavicon || !currentFavicon) {\n    const tag = getFaviconTag()\n    currentFavicon = tag?.getAttribute('href') || '/assets/images/group-income-icon-transparent.png'\n    if (!originalFavicon) {\n      originalFavicon = currentFavicon\n    }\n  }\n\n  return currentFavicon\n}\n\nconst getCanvas = ()                    => {\n  if (!canvas) {\n    canvas = document.createElement('canvas')\n    canvas.width = size\n    canvas.height = size\n  }\n\n  return canvas\n}\n\nconst setFaviconTag = (url) => {\n  if (url) {\n    removeFaviconTag()\n\n    const link = document.createElement('link')\n    link.type = 'image/x-icon'\n    link.rel = 'icon'\n    link.href = url\n    document.getElementsByTagName('head')[0].appendChild(link)\n  }\n}\n\nconst drawFavicon = (bubble) => {\n  const context = getCanvas().getContext('2d')\n  const src = getCurrentFavicon()\n\n  faviconImage = document.createElement('img')\n  faviconImage.onload = function () {\n    // clear canvas\n    context.clearRect(0, 0, size, size)\n\n    // draw the favicon\n    context.drawImage(faviconImage, 0, 0, faviconImage?.width, faviconImage?.height, 0, 0, size, size)\n\n    // draw bubble over the top\n    if (bubble) drawBubble(context)\n\n    // refresh tag in page\n    refreshFavicon()\n  }\n\n  // allow cross origin resource requests if the image is not a data:uri\n  // as detailed here: https://github.com/mrdoob/three.js/issues/1305\n  if (!src?.match(/^data/) && options.crossOrigin) {\n    faviconImage.crossOrigin = 'anonymous'\n  }\n\n  faviconImage.src = src\n}\n\nconst drawBubble = (context) => {\n  const width = options.width * r + (6 * r)\n  const height = options.height * r\n  // const top = size - height\n  // const left = size - width - r\n  const bottom = 16 * r\n  const right = 16 * r\n  // const radius = 2 * r\n  const arcRadius = Math.min(width, height) / 2\n\n  context.fillStyle = options.background\n  context.strokeStyle = options.background\n  context.lineWidth = r\n\n  // bubble\n  context.arc(right - arcRadius, bottom - arcRadius, arcRadius, 0, 2 * Math.PI)\n  context.fill()\n}\n\nconst refreshFavicon = () => {\n  // check support\n  if (getCanvas() instanceof HTMLCanvasElement) {\n    setFaviconTag(getCanvas().toDataURL())\n  }\n}\n\nconst FaviconBadge = {\n  setOptions: function (custom        ) {\n    options = {}\n\n    for (const key in defaults) {\n      options[key] = custom[key] || defaults[key]\n    }\n  },\n  setImage: function (url        ) {\n    currentFavicon = url\n    refreshFavicon()\n  },\n  setBubble: function (bubble         ) {\n    drawFavicon(bubble)\n  },\n  reset: function () {\n    currentFavicon = originalFavicon\n    setFaviconTag(originalFavicon)\n  }\n}\n\n// NOTE: set default options when it's not initiated\nif (!Object.keys(options).length) {\n  FaviconBadge.setOptions(defaults)\n}\n\nexport default FaviconBadge\n", "import Vue from 'vue'\nimport PortalVue from 'portal-vue'\n\n// 1. Setup vue2-touch-events\nif ('ontouchstart' in window || 'msMaxTouchPoints' in navigator) {\n  import('vue2-touch-events').then(Vue2TouchEvents => Vue.use(Vue2TouchEvents.default))\n} else Vue.directive('touch', {})\n\n// 2. Setup portal-vue (https://v2.portal-vue.linusb.org/guide/getting-started.html)\nVue.use(PortalVue)\n", "import Vue from 'vue'\n/*\n* Style tag overload because Vue is trying to compile\n* the content inside the tag otherwise\n*/\nVue.component('v-style', {\n  render: function (createElement) {\n    return createElement('style', this.$slots.default)\n  }\n})\n"],
  "mappings": "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,MACA,MACA,QACA,aACA,OACA,KACA,SACA,SACA,UACA,SACA,OACA,OACA,MACA,WACA,UACA,OACA,WACA,KACA,YACA,MACA,UACA,MACA,SACA,MACA,MACA,KACA,KACA,UACA,KACA,WACA,aACA,SACA,OACA,SACA,OACA,KACA,KACA,KACA,KACA,KACA,KACA,OACA,SACA,SACA,KACA,OACA,IACA,MACA,QACA,MACA,MACA,QACA,SACA,KACA,OACA,MACA,OACA,UACA,OACA,WACA,QACA,MACA,OACA,KACA,WACA,SACA,SACA,IACA,UACA,MACA,WACA,IACA,KACA,KACA,OACA,IACA,OACA,UACA,SACA,SACA,QACA,SACA,SACA,OACA,SACA,SACA,QACA,MACA,UACA,MACA,QACA,QACA,KACA,WACA,WACA,QACA,KACA,QACA,OACA,KACA,QACA,KACA,IACA,KACA,MACA,QACA,KArHyB,CAAP,EAyHPgE,GAAMhE,EAAO,CACxB,MACA,IACA,WACA,cACA,eACA,eACA,gBACA,mBACA,SACA,WACA,OACA,OACA,UACA,SACA,OACA,IACA,QACA,WACA,QACA,QACA,OACA,iBACA,SACA,OACA,WACA,QACA,OACA,UACA,UACA,WACA,iBACA,OACA,OACA,QACA,SACA,SACA,OACA,WACA,QACA,OACA,QACA,OACA,OA3CwB,CAAP,EA8CNiE,GAAajE,EAAO,CAC/B,UACA,gBACA,sBACA,cACA,mBACA,oBACA,oBACA,iBACA,UACA,UACA,UACA,UACA,UACA,iBACA,UACA,cACA,eACA,WACA,eACA,qBACA,cACA,SACA,cAvB+B,CAAP,EA8BbkE,GAAgBlE,EAAO,CAClC,UACA,gBACA,SACA,UACA,eACA,UACA,YACA,mBACA,iBACA,gBACA,gBACA,gBACA,QACA,YACA,OACA,eACA,YACA,UACA,gBACA,SACA,MACA,aACA,UACA,KAxBkC,CAAP,EA2BhBmE,GAASnE,EAAO,CAC3B,OACA,WACA,SACA,UACA,QACA,SACA,KACA,aACA,gBACA,KACA,KACA,QACA,UACA,WACA,QACA,OACA,KACA,SACA,QACA,SACA,OACA,OACA,UACA,SACA,MACA,QACA,MACA,SACA,YA7B2B,CAAP,EAkCToE,GAAmBpE,EAAO,CACrC,UACA,cACA,aACA,WACA,YACA,UACA,UACA,SACA,SACA,QACA,YACA,aACA,iBACA,cACA,MAfqC,CAAP,EAkBnBqE,GAAOrE,EAAO,CAAC,OAAD,CAAP,ECpRP+D,GAAO/D,EAAO,CACzB,SACA,SACA,QACA,MACA,iBACA,eACA,uBACA,WACA,aACA,UACA,SACA,UACA,cACA,cACA,UACA,OACA,QACA,QACA,QACA,OACA,UACA,WACA,eACA,SACA,cACA,WACA,WACA,UACA,MACA,WACA,0BACA,wBACA,WACA,YACA,UACA,eACA,OACA,MACA,UACA,SACA,SACA,OACA,OACA,WACA,KACA,YACA,YACA,QACA,OACA,QACA,OACA,OACA,UACA,OACA,MACA,MACA,YACA,QACA,SACA,MACA,YACA,WACA,QACA,OACA,UACA,aACA,SACA,OACA,UACA,UACA,cACA,cACA,SACA,UACA,UACA,aACA,WACA,MACA,WACA,MACA,WACA,OACA,OACA,UACA,aACA,QACA,WACA,QACA,OACA,QACA,OACA,UACA,QACA,MACA,SACA,OACA,QACA,UACA,WACA,QACA,YACA,OACA,SACA,SACA,QACA,QACA,OA3GyB,CAAP,EA8GPgE,GAAMhE,EAAO,CACxB,gBACA,aACA,WACA,qBACA,SACA,gBACA,gBACA,UACA,gBACA,iBACA,QACA,OACA,KACA,QACA,OACA,gBACA,YACA,YACA,QACA,sBACA,8BACA,gBACA,kBACA,KACA,KACA,IACA,KACA,KACA,kBACA,YACA,UACA,UACA,MACA,WACA,YACA,MACA,OACA,eACA,YACA,SACA,cACA,cACA,gBACA,cACA,YACA,mBACA,eACA,aACA,eACA,cACA,KACA,KACA,KACA,KACA,aACA,WACA,gBACA,oBACA,SACA,OACA,KACA,kBACA,KACA,MACA,IACA,KACA,KACA,KACA,KACA,UACA,YACA,aACA,WACA,OACA,eACA,iBACA,eACA,mBACA,iBACA,QACA,aACA,aACA,eACA,eACA,cACA,cACA,mBACA,YACA,MACA,OACA,QACA,SACA,OACA,MACA,OACA,aACA,SACA,WACA,UACA,QACA,SACA,cACA,SACA,WACA,cACA,OACA,aACA,sBACA,mBACA,eACA,SACA,gBACA,sBACA,iBACA,IACA,KACA,KACA,SACA,OACA,OACA,cACA,YACA,UACA,SACA,SACA,QACA,OACA,kBACA,mBACA,mBACA,eACA,cACA,eACA,cACA,aACA,eACA,mBACA,oBACA,iBACA,kBACA,oBACA,iBACA,SACA,eACA,QACA,eACA,iBACA,WACA,UACA,UACA,YACA,cACA,kBACA,iBACA,aACA,OACA,KACA,KACA,UACA,SACA,UACA,aACA,UACA,aACA,gBACA,gBACA,QACA,eACA,OACA,eACA,mBACA,mBACA,IACA,KACA,KACA,QACA,IACA,KACA,KACA,IACA,YArLwB,CAAP,EAwLNmE,GAASnE,EAAO,CAC3B,SACA,cACA,QACA,WACA,QACA,eACA,cACA,aACA,aACA,QACA,MACA,UACA,eACA,WACA,QACA,QACA,SACA,OACA,KACA,UACA,SACA,gBACA,SACA,SACA,iBACA,YACA,WACA,cACA,UACA,UACA,gBACA,WACA,WACA,OACA,WACA,WACA,aACA,UACA,SACA,SACA,cACA,gBACA,uBACA,YACA,YACA,aACA,WACA,iBACA,iBACA,YACA,UACA,QACA,OArD2B,CAAP,EAwDTsE,GAAMtE,EAAO,CACxB,aACA,SACA,cACA,YACA,aALwB,CAAP,EC7VNuE,GAAgBtE,EAAK,2BAAL,EAChBuE,GAAWvE,EAAK,uBAAL,EACXwE,GAAYxE,EAAK,4BAAL,EACZyE,GAAYzE,EAAK,gBAAL,EACZ0E,GAAiB1E,EAC5B,uFAD4B,EAGjB2E,GAAoB3E,EAAK,uBAAL,EACpB4E,GAAkB5E,EAC7B,6DAD6B,6UCS/B,IAAM6E,GAAY,UAAA,CAAA,OAAO,OAAOC,OAAW,IAAc,KAAOA,MAA9C,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",
  "names": ["module", "exports", "modules", "__webpack_require__", "moduleId", "installedModules", "i", "l", "call", "m", "c", "value", "d", "name", "getter", "o", "Object", "defineProperty", "configurable", "enumerable", "get", "n", "__esModule", "object", "property", "prototype", "hasOwnProperty", "p", "s", "cssWithMappingToString", "item", "useSourceMap", "content", "cssMapping", "btoa", "sourceMapping", "toComment", "concat", "sources", "map", "source", "sourceRoot", "join", "sourceMap", "unescape", "encodeURIComponent", "JSON", "stringify", "list", "toString", "this", "mediaQuery", "alreadyImportedModules", "length", "id", "push", "rawScriptExports", "compiledTemplate", "injectStyles", "scopeId", "moduleIdentifier", "esModule", "scriptExports", "type", "default", "options", "render", "staticRenderFns", "_scopeId", "hook", "context", "$vnode", "ssrContext", "parent", "__VUE_SSR_CONTEXT__", "_registeredComponents", "add", "_ssrRegister", "functional", "existing", "beforeCreate", "h", "addStylesToDom", "styles", "domStyle", "stylesInDom", "refs", "j", "parts", "addStyle", "createStyleElement", "styleElement", "document", "createElement", "head", "appendChild", "obj", "update", "remove", "querySelector", "isProduction", "noop", "parentNode", "removeChild", "isOldIE", "styleIndex", "singletonCounter", "singletonElement", "applyToSingletonTag", "bind", "applyToTag", "newObj", "css", "media", "index", "styleSheet", "cssText", "replaceText", "cssNode", "createTextNode", "childNodes", "insertBefore", "setAttribute", "firstChild", "hasDocument", "DEBUG", "Error", "listToStyles", "getElementsByTagName", "navigator", "test", "userAgent", "toLowerCase", "parentId", "_isProduction", "newList", "mayRemove", "textStore", "replacement", "filter", "Boolean", "root", "factory", "loaded", "_classCallCheck", "instance", "Constructor", "TypeError", "_extends", "assign", "target", "arguments", "key", "_createClass", "defineProperties", "props", "descriptor", "writable", "protoProps", "staticProps", "bulkAddEventListener", "events", "callback", "forEach", "event", "addEventListener", "bulkRemoveEventListener", "removeEventListener", "IdleJs", "defaults", "idle", "onIdle", "onActive", "onHide", "onShow", "keepTracking", "startAtIdle", "recurIdleCall", "settings", "visible", "visibilityEvents", "lastId", "clearTimeout", "timeout", "timer", "setInterval", "setTimeout", "window", "resetTimeout", "hidden", "webkitHidden", "mozHidden", "msHidden", "injectStyle", "Component", "_interopRequireDefault", "_defineProperty", "_idleJs", "_idleJs2", "_Idle", "_Idle2", "IdleView", "install", "Vue", "_ref", "eventEmitter", "store", "_ref$moduleName", "moduleName", "_ref$idleTime", "idleTime", "_ref$events", "_ref$keepTracking", "_ref$startAtIdle", "registerModule", "state", "isIdle", "mutations", "onIdleStr", "onActiveStr", "$emit", "commit", "start", "component", "mixin", "data", "_ref2", "created", "$options", "$on", "destroyed", "$off", "computed", "isAppIdle", "_Sprite", "_Sprite2", "components", "Sprite", "$refs", "sprite", "play", "stop", "spriteSrc", "String", "spriteId", "spriteW", "Number", "spriteH", "spriteSpeed", "frameIndex", "tickCount", "frameLength", "ticksPerFrame", "numberOfFrames", "frameRate", "ctx", "canvas", "mySprite", "animationFrameId", "mounted", "vm", "$nextTick", "Image", "onload", "e", "spriteInit", "src", "methods", "img", "$el", "getContext", "width", "spriteLoop", "spriteUpdate", "spriteRender", "clearRect", "toDraw", "drawImage", "requestAnimationFrame", "cancelAnimationFrame", "version", "names", "mappings", "file", "sourcesContent", "_vm", "_h", "$createElement", "_c", "_self", "staticClass", "attrs", "height", "class", "_v", "ref", "locals", "newStyles", "part", "require_blockies", "__commonJSMin", "exports", "module", "e", "o", "c", "r", "t", "l", "n", "a", "i", "f", "s", "h", "hasOwnProperty", "Object", "setPrototypeOf", "isFrozen", "getPrototypeOf", "getOwnPropertyDescriptor", "freeze", "seal", "create", "Reflect", "apply", "construct", "fun", "thisValue", "args", "x", "Func", "_toConsumableArray", "arrayForEach", "unapply", "Array", "prototype", "forEach", "arrayPop", "pop", "arrayPush", "push", "stringToLowerCase", "String", "toLowerCase", "stringMatch", "match", "stringReplace", "replace", "stringIndexOf", "indexOf", "stringTrim", "trim", "regExpTest", "RegExp", "test", "typeErrorCreate", "unconstruct", "TypeError", "func", "thisArg", "_len", "_key", "_len2", "_key2", "addToSet", "set", "array", "l", "length", "element", "lcElement", "clone", "object", "newObject", "property", "lookupGetter", "prop", "desc", "get", "value", "fallbackValue", "console", "warn", "html", "svg", "svgFilters", "svgDisallowed", "mathMl", "mathMlDisallowed", "text", "xml", "MUSTACHE_EXPR", "ERB_EXPR", "DATA_ATTR", "ARIA_ATTR", "IS_ALLOWED_URI", "IS_SCRIPT_OR_DATA", "ATTR_WHITESPACE", "getGlobal", "window", "_createTrustedTypesPolicy", "trustedTypes", "document", "_typeof", "createPolicy", "suffix", "ATTR_NAME", "currentScript", "hasAttribute", "getAttribute", "policyName", "createHTML", "createDOMPurify", "DOMPurify", "root", "version", "VERSION", "removed", "nodeType", "isSupported", "originalDocument", "DocumentFragment", "HTMLTemplateElement", "Node", "Element", "NodeFilter", "_window$NamedNodeMap", "NamedNodeMap", "MozNamedAttrMap", "Text", "Comment", "DOMParser", "ElementPrototype", "cloneNode", "getNextSibling", "getChildNodes", "getParentNode", "template", "createElement", "content", "ownerDocument", "trustedTypesPolicy", "emptyHTML", "RETURN_TRUSTED_TYPE", "_document", "implementation", "createNodeIterator", "getElementsByTagName", "createDocumentFragment", "importNode", "documentMode", "hooks", "createHTMLDocument", "EXPRESSIONS", "ALLOWED_TAGS", "DEFAULT_ALLOWED_TAGS", "_toConsumableArray$1", "TAGS", "ALLOWED_ATTR", "DEFAULT_ALLOWED_ATTR", "ATTRS", "FORBID_TAGS", "FORBID_ATTR", "ALLOW_ARIA_ATTR", "ALLOW_DATA_ATTR", "ALLOW_UNKNOWN_PROTOCOLS", "SAFE_FOR_TEMPLATES", "WHOLE_DOCUMENT", "SET_CONFIG", "FORCE_BODY", "RETURN_DOM", "RETURN_DOM_FRAGMENT", "RETURN_DOM_IMPORT", "SANITIZE_DOM", "KEEP_CONTENT", "IN_PLACE", "USE_PROFILES", "FORBID_CONTENTS", "DATA_URI_TAGS", "DEFAULT_DATA_URI_TAGS", "URI_SAFE_ATTRIBUTES", "DEFAULT_URI_SAFE_ATTRIBUTES", "CONFIG", "formElement", "_parseConfig", "cfg", "ADD_URI_SAFE_ATTR", "ADD_DATA_URI_TAGS", "ALLOWED_URI_REGEXP", "ADD_TAGS", "ADD_ATTR", "table", "tbody", "MATHML_TEXT_INTEGRATION_POINTS", "HTML_INTEGRATION_POINTS", "ALL_SVG_TAGS", "ALL_MATHML_TAGS", "MATHML_NAMESPACE", "SVG_NAMESPACE", "HTML_NAMESPACE", "_checkValidNamespace", "parent", "tagName", "namespaceURI", "parentTagName", "Boolean", "commonSvgAndHTMLElements", "_forceRemove", "node", "parentNode", "removeChild", "outerHTML", "remove", "_removeAttribute", "name", "attribute", "getAttributeNode", "from", "removeAttribute", "setAttribute", "_initDocument", "dirty", "doc", "leadingWhitespace", "matches", "dirtyPayload", "parseFromString", "documentElement", "_doc", "body", "firstElementChild", "insertBefore", "createTextNode", "childNodes", "call", "_createIterator", "SHOW_ELEMENT", "SHOW_COMMENT", "SHOW_TEXT", "FILTER_ACCEPT", "_isClobbered", "elm", "nodeName", "textContent", "attributes", "_isNode", "_executeHook", "entryPoint", "currentNode", "data", "hook", "_sanitizeElements", "allowedTags", "innerHTML", "childCount", "i", "_isValidAttribute", "lcTag", "lcName", "_sanitizeAttributes", "attr", "hookEvent", "attrName", "attrValue", "keepAttr", "allowedAttributes", "_attr", "forceKeepAttr", "undefined", "setAttributeNS", "_sanitizeShadowDOM", "fragment", "shadowNode", "shadowIterator", "nextNode", "sanitize", "importedNode", "oldNode", "returnNode", "toString", "toStaticHTML", "appendChild", "firstChild", "nodeIterator", "serializedHTML", "setConfig", "clearConfig", "isValidAttribute", "tag", "addHook", "hookFunction", "removeHook", "removeHooks", "removeAllHooks", "purify", "inBrowser", "window", "freeze", "item", "Array", "isArray", "_typeof", "Object", "combinePassengers", "transports", "slotProps", "reduce", "passengers", "transport", "temp", "newPassengers", "concat", "stableSort", "array", "compareFn", "map", "v", "idx", "sort", "a", "b", "c", "pick", "obj", "keys", "acc", "key", "hasOwnProperty", "targets", "sources", "Wormhole", "Vue", "extend", "data", "trackInstances", "methods", "open", "to", "from", "order", "Infinity", "newTransport", "indexOf", "set", "currentIndex", "$_getTransportIndex", "newTransports", "slice", "push", "close", "force", "index", "splice", "registerTarget", "target", "vm", "console", "warn", "$set", "unregisterTarget", "$delete", "registerSource", "source", "unregisterSource", "hasTarget", "hasSource", "hasContentFor", "length", "_ref", "i", "wormhole", "_id", "Portal", "name", "props", "disabled", "type", "Boolean", "String", "default", "Number", "slim", "tag", "Math", "round", "random", "created", "$nextTick", "_this", "mounted", "sendUpdate", "updated", "clear", "beforeDestroy", "watch", "newValue", "oldValue", "closer", "normalizeSlots", "$scopedSlots", "$slots", "normalizeOwnChildren", "children", "slotContent", "_toConsumableArray", "render", "h", "Tag", "class", "style", "display", "PortalTarget", "multiple", "required", "transition", "Function", "firstRender", "ownTransports", "$emit", "newVal", "oldVal", "_this2", "computed", "noWrapper", "undefined", "portalProps", "targetProps", "MountingPortal", "inheritAttrs", "append", "bail", "mountTo", "targetSlim", "targetSlotProps", "targetTag", "document", "el", "querySelector", "error", "$props", "portalTarget", "mountEl", "createElement", "appendChild", "_props", "parent", "$parent", "propsData", "$el", "parentNode", "removeChild", "$destroy", "manual", "attrs", "$attrs", "on", "$listeners", "scopedSlots", "content", "install", "options", "component", "portalName", "portalTargetName", "MountingPortalName", "CircularList", "#buffer", "#capacity", "#defaultValue", "#isFull", "#offset", "capacity", "defaultValue", "entry", "offset", "entries", "buffer", "loggingLevels", "originalConsole", "noop", "args", "createLogger", "config", "getItem", "removeItem", "setItem", "entries", "CircularList", "methods", "name", "captureLogEntry", "logger", "appLogsFilter", "consoleProxy", "o", "p", "r", "error", "filter", "level", "previousEntries", "stored", "type", "source", "entry", "arg", "seen", "_", "v", "e", "esm_default", "CAPTURED_LOGS", "_store", "module_default", "esm_default", "key", "data", "array", "aLen", "filtered", "v", "fn", "listenKey", "evt", "esm_default", "event", "e", "handler", "cbWithOff", "args", "data", "_a", "listener", "errorHandler", "logServer_default", "console", "config", "MAX_LOG_ENTRIES", "originalConsole", "logger", "identityContractID", "getItem", "key", "removeItem", "setItem", "value", "captureLogsStart", "userLogged", "createLogger", "esm_default", "SET_APP_LOGS_FILTER", "isNewSession", "captureLogsPause", "wipeOut", "clearLogs", "event", "e", "logServer_default", "captureLogs_default", "userID", "savedID", "isEventQueueSbpEvent", "esm_default", "name", "_a", "_b", "events", "event", "invocation", "accept", "promise", "resolve", "thisEvent", "import_idle_vue", "_createClass", "defineProperties", "target", "props", "i", "descriptor", "Constructor", "protoProps", "staticProps", "_classCallCheck", "instance", "slice", "matches", "_focusableElementsString", "InertRoot", "rootElement", "inertManager", "inertNode", "startNode", "_this2", "composedTreeWalk", "node", "activeElement", "root", "element", "_this3", "inertSubroot", "savedInertNode", "records", "self", "record", "managedNode", "ariaHidden", "InertNode", "inertRoot", "tabIndex", "InertManager", "document", "addInertStyle", "inert", "parent", "_inertRoot", "inertElements", "inertElement", "_this", "callback", "shadowRootAncestor", "shadowRoot", "content", "distributedNodes", "slot", "_distributedNodes", "_i", "child", "style", "local_selectors_default", "esm_default", "stateSelector", "reactiveSet", "reactiveDel", "EVENT_HANDLED", "contractID", "message", "contractState", "cheloniaState", "externalState", "cloneDeep", "EVENT_HANDLED_READY", "CONTRACTS_MODIFIED", "subscriptionSet", "added", "removed", "permanent", "states", "vuexState", "CONTRACTS_MODIFIED_READY", "localState", "resolve", "removeListener", "cID", "switchCurrentChatRoomHandler", "identityContractID", "groupContractID", "chatRoomID", "rootState", "esm_default", "JOINED_CHATROOM", "attemptCount", "setCurrentChatRoomId", "LEFT_CHATROOM", "DELETED_CHATROOM", "NEW_CHATROOM_UNREAD_POSITION", "messageHash", "NEW_CHATROOM_NOTIFICATION_SETTINGS", "settings", "esm_default", "ERROR_GROUP_GENERAL_CHATROOM_DOES_NOT_EXIST", "identityContractID", "groupContractID", "rootState", "L", "ERROR_JOINING_CHATROOM", "chatRoomID", "rootGetters", "PROFILE_STATUS", "JOINED_GROUP", "LEFT_GROUP", "state", "currentGroupId", "groupIdToSwitch", "cID", "hasLeft", "NEW_LAST_LOGGED_IN", "contractID", "data", "group_default", "params", "groupId", "isNewlyCreated", "SWITCH_GROUP", "secret", "result", "groupMembersCount", "currentGroupState", "memberInvitesCount", "invite", "INVITE_INITIAL_CREATOR", "MAX_GROUP_MEMBER_COUNT", "translationArgs", "allowedUrls_default", "promptConfig", "primaryButtonSelected", "OPEN_MODAL", "withGroupCurrency", "promptOptions", "REPLACE_MODAL", "init_vue_esm", "import_buffer", "import_buffer", "import_scrypt_async", "import_tweetnacl", "AUTHSALT", "CONTRACTSALT", "CS", "SU", "base64ToBase64url", "s", "base64urlToBase64", "hashStringArray", "args", "nacl", "hashRawStringArray", "randomNonce", "hash", "v", "base64ToBase64url", "nacl", "computeCAndHc", "r", "s", "h", "\u0127", "hashStringArray", "c", "hc", "decryptContractSalt", "c", "encryptedContractSaltBox", "encryptionKey", "hashRawStringArray", "CS", "nacl", "encryptedContractSaltBoxBuf", "base64urlToBase64", "nonce", "encryptedContractSalt", "decrypted", "hashPassword", "password", "salt", "resolve", "scrypt", "boxKeyPair", "nacl", "saltAgreement", "publicKey", "secretKey", "publicKeyBuf", "base64urlToBase64", "dhKey", "authSalt", "hashStringArray", "AUTHSALT", "contractSalt", "CONTRACTSALT", "buildRegisterSaltRequest", "publicKey", "secretKey", "password", "saltAgreementRes", "saltAgreement", "authSalt", "contractSalt", "hashedPassword", "hashPassword", "nonce", "nacl", "encryptionKey", "encryptedHashedPasswordBuf", "base64ToBase64url", "buildUpdateSaltRequestEc", "c", "hashStringArray", "AUTHSALT", "CONTRACTSALT", "hashRawStringArray", "SU", "encryptedArgsCiphertext", "encryptedArgs", "_instances", "localforage", "lazyInitDb", "name", "storeName", "promise", "resolve", "reject", "openDB", "version", "request", "event", "db", "error", "e", "key", "value", "generateEncryptionParams", "stateKeyEncryptionKeyFn", "stateEncryptionKey", "keygen", "CURVE25519XSALSA20POLY1305", "stateEncryptionKeyId", "keyId", "stateEncryptionKeyS", "serializeKey", "stateEncryptionKeyP", "salt", "generateSalt", "stateKeyEncryptionKey", "encryptedStateEncryptionKey", "encrypt", "appSettings", "EmptyValue", "SETTING_CURRENT_USER", "SETTING_CHELONIA_STATE", "esm_default", "encryptionParams", "encryptedState", "encryptedValue", "data", "x", "decrypt", "stateEncryptionKeyIdActual", "filesCache", "maxFileEntries", "cacheKey", "blob", "keys", "v", "idx", "last", "file", "archive", "logs", "handleFetchResult", "type", "r", "msg", "ChelErrorResourceGone", "ChelErrorUnexpectedHttpResponseCode", "loadState", "identityContractID", "password", "stateKeyEncryptionKeyFn", "stateEncryptionKeyId", "salt", "deriveKeyFromPassword", "CURVE25519XSALSA20POLY1305", "encryptionParams", "state", "esm_default", "cheloniaState", "LOGIN", "EVENT_HANDLED", "vuexState", "cloneDeep", "k", "vue_esm_default", "currentState", "gId", "cID", "e", "LOGIN_COMPLETE", "LOGIN_ERROR", "NEW_UNREAD_MESSAGES", "currentChatRoomUnreadMessages", "NEW_PREFERENCES", "preferences", "NEW_KV_LOAD_STATUS", "data", "identity_default", "r", "randomNonce", "b", "hash", "authHash", "handleFetchResult", "authSalt", "s", "sig", "h", "hashPassword", "c", "hc", "computeCAndHc", "contractHash", "decryptContractSalt", "oldPassword", "newPassword", "contractSalt", "encryptedArgs", "buildUpdateSaltRequestEc", "response", "oldContractSalt", "updateToken", "username", "email", "picture", "publishOptions", "keyPair", "boxKeyPair", "registrationRes", "Eh", "encryptionKey", "buildRegisterSaltRequest", "saltRegistrationTokenReq", "encryptedToken", "token", "IPK", "EDWARDS25519SHA512BATCH", "IEK", "Secret", "serializeKey", "GIErrorUIRuntimeError", "L", "LError", "randomAvatar", "message", "wpassword", "nsIdentityContractID", "transientSecretKeys", "oldKeysAnchorCid", "cid", "loginCompleteHandler", "loginErrorHandler", "loginCompletePromise", "resolve", "reject", "id", "removeLoginErrorHandler", "error", "removeLoginCompleteHandler", "errMessage", "forkedChain", "deleted", "promptOptions", "LTags", "humanErr", "contractID", "errorState", "wipeOut", "SETTING_CHELONIA_STATE", "params", "wOldPassword", "wNewPassword", "getters", "newContractSalt", "oldIPK", "oldIEK", "newIPK", "newIEK", "wPassword", "_store", "esm_default", "key", "data", "array", "aLen", "filtered", "v", "fn", "listenKey", "evt", "esm_default", "event", "e", "handler", "cbWithOff", "args", "data", "_a", "listener", "errorHandler", "NOTIFICATION_TYPE", "REQUEST_TYPE", "RESPONSE_TYPE", "PUSH_SERVER_ACTION_TYPE", "PUBSUB_ERROR", "PUBSUB_RECONNECTION_FAILED", "PUBSUB_RECONNECTION_SUCCEEDED", "PUBSUB_SUBSCRIPTION_SUCCEEDED", "createMessage", "type", "data", "meta", "message", "string", "stringify", "createRequest", "type", "data", "defaultClientEventHandlers", "event", "client", "name", "socketEventNames", "channelID", "esm_default", "PUBSUB_RECONNECTION_FAILED", "isDefinetelyOffline", "PUBSUB_ERROR", "msg", "messageParser", "error", "handler", "options", "PUBSUB_RECONNECTION_SUCCEEDED", "kvFilter", "REQUEST_TYPE", "delay", "nth", "defaultMessageHandlers", "NOTIFICATION_TYPE", "createMessage", "key", "RESPONSE_TYPE", "reason", "actionType", "message", "PUBSUB_SUBSCRIPTION_SUCCEEDED", "globalEventNames", "globalEventMap", "ev", "name", "defaultClientEventHandlers", "socketEventNames", "esm_default", "target", "detail", "ev", "PUBSUB_INSTANCE", "languageFileMap", "esm_default", "NOTIFICATION_TYPE", "versionInfo", "existingSerialized", "existingVersionInfo", "HOURS_MILLIS", "e", "PUBSUB_INSTANCE", "backend_default", "language", "languageCode", "languageFileName", "handleFetchResult", "esm_default", "name", "id", "skipCache", "cached", "init_vue_esm", "MAX_AGE_READ", "DAYS_MILLIS", "MAX_AGE_UNREAD", "MAX_COUNT", "MAX_COUNT_READ", "MAX_COUNT_UNREAD", "NEW_STATUS_DURATION", "HOURS_MILLIS", "age", "notification", "applyStorageRules", "notifications", "status", "items", "item", "isExpired", "MAX_COUNT", "compareOnPriority", "MAX_COUNT_READ", "MAX_COUNT_UNREAD", "condition", "associatedMaxCount", "count", "compareOnTimestamp", "notificationA", "notificationB", "TWO_DAYS", "DAYS_MILLIS", "FIFTEEN_DAYS", "THREE_WEEKS", "preferA", "preferB", "read", "unread", "preferred", "maxAge", "isNew", "isOlder", "MAX_AGE_READ", "MAX_AGE_UNREAD", "chatroom_default", "state", "getters", "a", "b", "memberID", "members", "group_default", "state", "getters", "member", "PROFILE_STATUS", "profiles", "profile", "distributionDate", "distributionPeriodLength", "keys", "MAX_SAVED_PERIODS", "dateToPeriodStamp", "addTimeToDate", "date", "periods", "periodStampsForDate", "groupState", "periodStamp", "periodPayments", "paymentHashesFromPaymentPeriod", "invites", "vmInvites", "pendingMembers", "inviteKeyId", "INVITE_STATUS", "INVITE_INITIAL_CREATOR", "currentDate", "proposalType", "PROPOSAL_GENERIC", "mincomeCurrency", "currencies_default", "currentPeriod", "groupProfiles", "haveNeeds", "memberID", "incomeDetailsType", "joinedDate", "amount", "haveNeed", "when", "dateFromPeriodStamp", "dateIsWithinPeriod", "hashes", "events", "payments", "paymentHash", "payment", "PAYMENT_COMPLETED", "createPaymentInfo", "identity_default", "state", "getters", "checkedUsername", "state", "username", "userID", "anyoneCanJoinInviteId", "invites", "getters", "invite", "INVITE_INITIAL_CREATOR", "INVITE_STATUS", "identityContractID", "gId", "groupProfiles", "ourIdentityContractId", "ourGroupProfile", "doWeNeedIncome", "distribution", "nonMonetaryContributionsOf", "memberID", "who", "whoIds", "total", "p", "acc", "payment", "needed", "listWho", "listWhat", "contr", "displayName", "what", "contributionIndex", "c", "contributions", "profile", "periodPayments", "pPeriod", "pPayments", "todo", "unadjustedDistribution", "paymentInfo", "period", "adjustedDistribution", "payments", "thisPeriodPayments", "paymentsFrom", "allPayments", "toMemberID", "paymentHash", "data", "meta", "height", "paymentA", "paymentB", "fromMemberID", "cPeriod", "currentSent", "previousSent", "currentReceived", "previousReceived", "isNeeder", "isOurPayment", "sumUpAmountReducer", "ourAdjustedPayments", "receivedOrSent", "markedAsNotReceived", "PAYMENT_NOT_RECEIVED", "markedAsNotReceivedTotal", "paymentsTotal", "nonLateAdjusted", "paymentsDone", "hasPartials", "amountDone", "amountLeft", "amountTotal", "inviteId", "expires", "groups", "hasLeft", "contractID", "L", "PROFILE_STATUS", "groupID", "profiles", "member", "weJoinedHeight", "isNewMember", "memberProfile", "memberJoinedHeight", "memberJoinedMs", "groupMembersPending", "userA", "userB", "nameA", "nameB", "attributes", "currentGroupProfileIds", "filtered", "userIdA", "userIdB", "usernameA", "usernameB", "chatroom_default", "group_default", "identity_default", "getters_default", "init_vue_esm", "getters", "state", "rootState", "item", "notification", "age", "MAX_AGE_UNREAD", "MAX_AGE_READ", "groupID", "isNew", "isOlder", "getters_default", "ADD_NOTIFICATION", "REMOVE_ALL_NOTIFICATIONS", "REMOVE_NOTIFICATION", "SET_NOTIFICATIONS", "esm_default", "NOTIFICATION_EMITTED", "notification", "ADD_NOTIFICATION", "NOTIFICATION_REMOVED", "hashes", "hash", "REMOVE_NOTIFICATION", "NOTIFICATION_STATUS_LOADED", "status", "defaultState", "mutations", "state", "key", "vue_esm_default", "cloneDeep", "item", "compareOnTimestamp", "index", "REMOVE_ALL_NOTIFICATIONS", "SET_NOTIFICATIONS", "notifications", "vuexModule_default", "getters_default", "checkSystemColor", "THEME_DARK", "THEME_LIGHT", "updateMetaThemeTag", "theme", "metaTag", "defaultTheme", "defaultColor", "defaultSettings", "getters", "state", "colors_default", "mutations", "cloneDeep", "filter", "esm_default", "SET_APP_LOGS_FILTER", "fontSize", "isChecked", "enabled", "DEVICE_SETTINGS", "e", "value", "tempSettings", "themeColor", "THEME_CHANGE", "LOGOUT", "vuexModule_default", "getters", "state", "rootState", "MESSAGE_NOTIFY_SETTINGS", "groupID", "currentGroupDirectMessages", "chatRoomID", "chatRoomState", "directMessageSettings", "myIdentityId", "members", "isDMToMyself", "partners", "memberID", "p1", "p2", "p1JoinedDate", "p2JoinedDate", "hasActiveMember", "lastJoinedPartner", "lastMsgTimeStamp", "cID", "shouldFindDMToMyself", "chatRoomSettings", "cPartners", "partner", "union", "chatroomID", "isGroupDirectMessage", "isGroupChatroom", "sum", "n", "cId", "chatRoomsInDetail", "merge", "contractID", "chatRoom", "name", "privacyLevel", "details", "CHATROOM_PRIVACY_LEVEL", "found", "member", "getters_default", "init_vue_esm", "defaultState", "mutations", "state", "groupID", "chatRoomID", "rootState", "esm_default", "vue_esm_default", "value", "messageHash", "settings", "key", "vuexModule_default", "cloneDeep", "getters_default", "vue_esm_default", "Vuex", "initialState", "KV_LOAD_STATUS", "esm_default", "store", "reactiveDate", "rememberedPeriodStamp", "currentPeriodStamp", "state", "cloneDeep", "vuexModule_default", "id", "payload", "identityContractIDs", "type", "username", "e", "value", "name", "encrypted", "identityContractID", "encryptionParams", "applyStorageRules", "mutations", "user", "currentGroupId", "forceRefresh", "isNewlyCreated", "groupID", "status", "getters_default", "getters", "logoutInProgress", "debouncedSave", "debounce", "commit", "EVENT_HANDLED", "LOGOUT", "CONTRACT_REGISTERED", "contract", "manifests", "newPeriod", "oldPeriod", "distributionDateInSettings", "distributionStarted", "state_default", "__vue_script__", "join_group_default", "create_group_default", "BannerSimple_default", "ButtonSubmit_default", "RenderMessageWithMarkdown_default", "mapGetters", "mapState", "contractID", "esm_default", "ACCEPTED_GROUP", "r", "data", "msg", "mode", "OPEN_MODAL", "path", "e", "ignoreWhenNavigationCancelled", "PWA_INSTALLABLE", "to", "__vue_render__", "_vm", "_h", "_c", "$event", "text", "__vue_staticRenderFns__", "__vue_inject_styles__", "inject", "__vue_scope_id__", "__vue_module_identifier__", "__vue_is_functional_template__", "__vue_normalize__", "template", "style", "script", "scope", "functional", "moduleIdentifier", "shadowMode", "createInjector", "createInjectorSSR", "createInjectorShadow", "component", "hook", "context", "originalRender", "h", "existing", "__vue_create_injector__", "styles", "isOldIE", "id", "css", "group", "code", "index", "head", "el", "textNode", "nodes", "__vue_component__", "Home_default", "__vue_script__", "L", "value", "__vue_render__", "_vm", "_h", "_c", "__vue_staticRenderFns__", "__vue_inject_styles__", "inject", "__vue_scope_id__", "__vue_module_identifier__", "__vue_is_functional_template__", "__vue_normalize__", "template", "style", "script", "scope", "functional", "moduleIdentifier", "shadowMode", "createInjector", "createInjectorSSR", "createInjectorShadow", "component", "hook", "context", "originalRender", "h", "existing", "__vue_create_injector__", "styles", "isOldIE", "id", "css", "group", "code", "index", "head", "el", "textNode", "nodes", "__vue_component__", "Loading_default", "syncFinished", "esm_default", "LOGIN", "__vue_script__", "Loading_default", "LoginForm_default", "SignupForm_default", "Avatar_default", "broken_link_default", "create_group_default", "mapGetters", "mapState", "status", "possibleStatus", "messageToAskAnother", "L", "groupId", "secret", "state", "publicKeyId", "keyId", "invite", "INVITE_STATUS", "targetGroupId", "targetGroupState", "PROFILE_STATUS", "creatorID", "creatorUsername", "who", "message", "myGroups", "toGroupId", "profileStatus", "e", "alreadyJoinedErr", "LTags", "__vue_render__", "_vm", "_h", "_c", "$event", "__vue_staticRenderFns__", "__vue_inject_styles__", "inject", "__vue_scope_id__", "__vue_module_identifier__", "__vue_is_functional_template__", "__vue_normalize__", "template", "style", "script", "scope", "functional", "moduleIdentifier", "shadowMode", "createInjector", "createInjectorSSR", "createInjectorShadow", "component", "hook", "context", "originalRender", "h", "existing", "__vue_create_injector__", "styles", "isOldIE", "id", "css", "group", "code", "index", "head", "el", "textNode", "nodes", "__vue_component__", "Join_default", "init_vue_esm", "__vue_script__", "ModalTemplate_default", "__vue_render__", "_vm", "_h", "_c", "__vue_staticRenderFns__", "__vue_inject_styles__", "inject", "__vue_scope_id__", "__vue_module_identifier__", "__vue_is_functional_template__", "__vue_normalize__", "template", "style", "script", "scope", "functional", "moduleIdentifier", "shadowMode", "createInjector", "createInjectorSSR", "createInjectorShadow", "component", "hook", "context", "originalRender", "h", "existing", "__vue_create_injector__", "styles", "isOldIE", "id", "css", "group", "code", "index", "head", "el", "textNode", "nodes", "__vue_component__", "ErrorModal_default", "__vue_script__", "__vue_render__", "_vm", "_h", "_c", "__vue_staticRenderFns__", "__vue_inject_styles__", "inject", "__vue_scope_id__", "__vue_module_identifier__", "__vue_is_functional_template__", "__vue_normalize__", "template", "style", "script", "scope", "functional", "moduleIdentifier", "shadowMode", "createInjector", "createInjectorSSR", "createInjectorShadow", "component", "hook", "context", "originalRender", "h", "existing", "__vue_create_injector__", "styles", "isOldIE", "id", "css", "group", "code", "index", "head", "el", "textNode", "nodes", "__vue_component__", "ErrorPage_default", "__vue_script__", "ModalTemplate_default", "__vue_render__", "_vm", "_h", "_c", "__vue_staticRenderFns__", "__vue_inject_styles__", "inject", "__vue_scope_id__", "__vue_module_identifier__", "__vue_is_functional_template__", "__vue_normalize__", "template", "style", "script", "scope", "functional", "moduleIdentifier", "shadowMode", "createInjector", "createInjectorSSR", "createInjectorShadow", "component", "hook", "context", "originalRender", "h", "existing", "__vue_create_injector__", "styles", "isOldIE", "id", "css", "group", "code", "index", "head", "el", "textNode", "nodes", "__vue_component__", "LoadingModal_default", "__vue_script__", "ModalBaseTemplate_default", "__vue_render__", "_vm", "_h", "_c", "__vue_staticRenderFns__", "__vue_inject_styles__", "inject", "__vue_scope_id__", "__vue_module_identifier__", "__vue_is_functional_template__", "__vue_normalize__", "template", "style", "script", "scope", "functional", "moduleIdentifier", "shadowMode", "createInjector", "createInjectorSSR", "createInjectorShadow", "component", "hook", "context", "originalRender", "h", "existing", "__vue_create_injector__", "styles", "isOldIE", "id", "css", "group", "code", "index", "head", "el", "textNode", "nodes", "__vue_component__", "LoadingBaseModal_default", "__vue_script__", "__vue_render__", "_vm", "_h", "_c", "__vue_staticRenderFns__", "__vue_inject_styles__", "inject", "__vue_scope_id__", "__vue_module_identifier__", "__vue_is_functional_template__", "__vue_normalize__", "template", "style", "script", "scope", "functional", "moduleIdentifier", "shadowMode", "createInjector", "createInjectorSSR", "createInjectorShadow", "component", "hook", "context", "originalRender", "h", "existing", "__vue_create_injector__", "styles", "isOldIE", "id", "css", "group", "code", "index", "head", "el", "textNode", "nodes", "__vue_component__", "LoadingPage_default", "asyncHandler", "lazyImport", "loading", "error", "m", "lazyComponent", "name", "vue_esm_default", "lazyModal", "LoadingModal_default", "ErrorModal_default", "lazyModalFullScreen", "LoadingBaseModal_default", "lazyPage", "LoadingPage_default", "ErrorPage_default", "handler", "h", "data", "children", "init_vue_esm", "lazyContributions", "lazyPage", "lazyDesignSystem", "lazyGroupChat", "lazyGroupDashboard", "lazyGlobalDashboard", "lazyGroupSettings", "lazyPayments", "lazyPendingApproval", "vue_esm_default", "vue_router_esm_default", "homeGuard", "to", "from", "state_default", "loginGuard", "inviteGuard", "groupGuard", "pendingApprovalGuard", "createEnterGuards", "guards", "next", "current", "router", "savedPosition", "Home_default", "L", "Join_default", "esm_default", "router_default", "isPwa_default", "isPwa", "pwa", "deserializer", "SPMessage", "Secret", "esm_default", "PWA_INSTALLABLE", "serviceWorkerMap", "waitUntilSwReady", "promise", "resolve", "reject", "messageChannel", "event", "CONTRACT_SYNCS_RESET", "oncontrollerchange", "worker", "e", "params", "isPwa_default", "swRegistration", "HOURS_MILLIS", "data", "silentEmit", "CAPTURED_LOGS", "status", "registration", "handler", "attemptNumber", "retryAttemptsPromise", "notificationEnabled", "granted", "subscription", "subID", "newSub", "endpoint", "subscriptionOptions", "getSubscriptionId", "L", "err", "LOGIN_COMPLETE", "SET_APP_LOGS_FILTER", "NEW_CHATROOM_UNREAD_POSITION", "obj", "NEW_CHATROOM_NOTIFICATION_SETTINGS", "swRpc", "controller", "ev", "fn", "maxControllerChanges", "args", "onmessage", "r", "cleanup", "onmessageerror", "transferables", "serializer", "__vue_script__", "colorsManipulation_default", "mapGetters", "__vue_render__", "_vm", "_h", "_c", "__vue_staticRenderFns__", "__vue_inject_styles__", "__vue_scope_id__", "__vue_module_identifier__", "__vue_is_functional_template__", "__vue_normalize__", "template", "style", "script", "scope", "functional", "moduleIdentifier", "shadowMode", "createInjector", "createInjectorSSR", "createInjectorShadow", "component", "__vue_component__", "AppStyles_default", "__vue_script__", "TransitionExpand_default", "message", "icon", "seconds", "clearWhen", "clearBannerTimer", "debounce", "args", "clearBanner", "__vue_render__", "_vm", "_h", "_c", "__vue_staticRenderFns__", "__vue_inject_styles__", "inject", "__vue_scope_id__", "__vue_module_identifier__", "__vue_is_functional_template__", "__vue_normalize__", "template", "style", "script", "scope", "functional", "moduleIdentifier", "shadowMode", "createInjector", "createInjectorSSR", "createInjectorShadow", "component", "hook", "context", "originalRender", "h", "existing", "__vue_create_injector__", "styles", "isOldIE", "id", "css", "group", "code", "index", "head", "el", "textNode", "nodes", "__vue_component__", "BannerGeneral_default", "__vue_script__", "esm_default", "OPEN_MODAL", "CLOSE_MODAL", "REPLACE_MODAL", "SET_MODAL_QUERIES", "modal", "subcontent", "to", "from", "toModal", "omit", "subContentTo", "i", "subContentLen", "contentQueries", "subContentQueries", "rQueries", "queriesToDelete", "mQuery", "componentName", "queries", "childData", "targetModal", "clearChildData", "key", "hasSubContent", "unloadDone", "unloadFromContentAndReFocus", "modalName", "__vue_render__", "_vm", "_h", "_c", "__vue_staticRenderFns__", "__vue_inject_styles__", "__vue_scope_id__", "__vue_module_identifier__", "__vue_is_functional_template__", "__vue_normalize__", "template", "style", "script", "scope", "functional", "moduleIdentifier", "shadowMode", "createInjector", "createInjectorSSR", "createInjectorShadow", "component", "__vue_component__", "Modal_default", "__vue_script__", "esm_default", "MESSAGE_RECEIVE", "MESSAGE_SEND", "contractID", "isPwa_default", "__vue_render__", "_vm", "_h", "_c", "__vue_staticRenderFns__", "__vue_inject_styles__", "__vue_scope_id__", "__vue_module_identifier__", "__vue_is_functional_template__", "__vue_normalize__", "template", "style", "script", "scope", "functional", "moduleIdentifier", "shadowMode", "createInjector", "createInjectorSSR", "createInjectorShadow", "component", "__vue_component__", "Background_default", "__vue_script__", "ModalClose_default", "NotificationList_default", "Tooltip_default", "esm_default", "OPEN_MODAL", "mapState", "mapGetters", "__vue_render__", "_vm", "_h", "_c", "$event", "__vue_staticRenderFns__", "__vue_inject_styles__", "inject", "__vue_scope_id__", "__vue_module_identifier__", "__vue_is_functional_template__", "__vue_normalize__", "template", "style", "script", "scope", "functional", "moduleIdentifier", "shadowMode", "createInjector", "createInjectorSSR", "createInjectorShadow", "component", "hook", "context", "originalRender", "h", "existing", "__vue_create_injector__", "styles", "isOldIE", "id", "css", "group", "code", "index", "head", "el", "textNode", "nodes", "__vue_component__", "NotificationCard_default", "__vue_script__", "Badge_default", "NotificationCard_default", "mapGetters", "__vue_render__", "_vm", "_h", "_c", "__vue_staticRenderFns__", "__vue_inject_styles__", "inject", "__vue_scope_id__", "__vue_module_identifier__", "__vue_is_functional_template__", "__vue_normalize__", "template", "style", "script", "scope", "functional", "moduleIdentifier", "shadowMode", "createInjector", "createInjectorSSR", "createInjectorShadow", "component", "hook", "context", "originalRender", "h", "existing", "__vue_create_injector__", "styles", "isOldIE", "id", "css", "group", "code", "index", "head", "el", "textNode", "nodes", "__vue_component__", "NotificationBell_default", "__vue_script__", "Avatar_default", "Badge_default", "Tooltip_default", "mapState", "mapGetters", "group", "mode", "esm_default", "OPEN_MODAL", "id", "hash", "path", "emptyGroupPicture", "contractID", "__vue_render__", "_vm", "_h", "_c", "index", "$event", "__vue_staticRenderFns__", "__vue_inject_styles__", "inject", "__vue_scope_id__", "__vue_module_identifier__", "__vue_is_functional_template__", "__vue_normalize__", "template", "style", "script", "scope", "functional", "moduleIdentifier", "shadowMode", "createInjector", "createInjectorSSR", "createInjectorShadow", "component", "hook", "context", "originalRender", "h", "existing", "__vue_create_injector__", "styles", "isOldIE", "css", "code", "head", "el", "textNode", "nodes", "__vue_component__", "GroupsList_default", "__vue_script__", "AvatarUser_default", "ProfileCard_default", "mapGetters", "userContract", "esm_default", "OPEN_MODAL", "__vue_render__", "_vm", "_h", "_c", "__vue_staticRenderFns__", "__vue_inject_styles__", "inject", "__vue_scope_id__", "__vue_module_identifier__", "__vue_is_functional_template__", "__vue_normalize__", "template", "style", "script", "scope", "functional", "moduleIdentifier", "shadowMode", "createInjector", "createInjectorSSR", "createInjectorShadow", "component", "hook", "context", "originalRender", "h", "existing", "__vue_create_injector__", "styles", "isOldIE", "id", "css", "group", "code", "index", "head", "el", "textNode", "nodes", "__vue_component__", "Profile_default", "__vue_script__", "showNavMixin", "Badge_default", "Toggle_default", "NotificationBell_default", "GroupsList_default", "Profile_default", "ListItem_default", "debounce", "GLOBAL_DASHBOARD_SETTINGS", "key", "entry", "to", "from", "isDifferentPage", "mapState", "mapGetters", "mode", "esm_default", "OPEN_MODAL", "__vue_render__", "_vm", "_h", "_c", "$event", "__vue_staticRenderFns__", "__vue_inject_styles__", "inject", "__vue_scope_id__", "__vue_module_identifier__", "__vue_is_functional_template__", "__vue_normalize__", "template", "style", "script", "scope", "functional", "moduleIdentifier", "shadowMode", "createInjector", "createInjectorSSR", "createInjectorShadow", "component", "hook", "context", "originalRender", "h", "existing", "__vue_create_injector__", "styles", "isOldIE", "id", "css", "group", "code", "index", "head", "el", "textNode", "nodes", "__vue_component__", "Navigation_default", "import_blockies", "colorOptions", "theme", "colors_default", "esm_default", "avatarBase64", "avatarBlob", "palette", "randomFromArray", "blockies", "imageDataURItoBlob", "e", "import_dompurify", "init_vue_esm", "import_dompurify", "init_vue_esm", "defaultConfig", "transform", "el", "binding", "config", "tagAllowedAttrs", "cloneDeep", "dompurify", "vue_esm_default", "vue_esm_default", "L", "LTags", "dompurifyConfig", "defaultConfig", "sanitize", "inputString", "dompurify", "h", "context", "text", "translation", "tag", "args", "x", "init_vue_esm", "vue_esm_default", "el", "binding", "vnode", "opts", "pErr", "attr", "key", "init_vue_esm", "vue_esm_default", "el", "args", "requiredFeatures", "hasAllRequiredFeatures", "featureCheck_default", "init_vue_esm", "shortestDelay", "PERIODIC_NOTIFICATION_TYPE", "ephemeralNotificationState", "typeToDelayMap", "MINS_MILLIS", "validateNotificationData", "objectOf", "value", "string", "isFunction", "runNotificationListRecursive", "rootState", "esm_default", "rootGetters", "firedMap", "lastRunMap", "callWithStates", "func", "stateKey", "aborted", "abort", "queue", "invocations", "entry", "lastRun", "delay", "e", "timeoutId", "clearTimeoutObject", "entries", "keySet", "type", "notificationData", "myNotificationHas", "checkFunc", "groupId", "esm_default", "item", "oneTimeNotificationEntries", "rootGetters", "incomeDetailsLastUpdatedDate", "now", "dateToPeriodStamp", "compareISOTimestamps", "MONTHS_MILLIS", "periodicNotificationEntries", "PERIODIC_NOTIFICATION_TYPE", "rootState", "username", "contractID", "cID", "e", "notificationMixin", "arg", "entry", "mainNotificationsMixin_default", "currentFavicon", "originalFavicon", "faviconImage", "canvas", "options", "r", "size", "defaults", "getFaviconTag", "links", "i", "len", "removeFaviconTag", "getCurrentFavicon", "getCanvas", "setFaviconTag", "url", "link", "drawFavicon", "bubble", "context", "src", "drawBubble", "refreshFavicon", "width", "height", "bottom", "right", "arcRadius", "FaviconBadge", "custom", "key", "faviconBadge_default", "init_vue_esm", "import_portal_vue", "Vue2TouchEvents", "vue_esm_default", "PortalVue", "init_vue_esm", "vue_esm_default", "createElement", "esm_default", "vue_esm_default", "err", "vm", "info", "startApp", "debugParam", "reducer", "o", "v", "domainBlacklist", "selectorBlacklist", "domain", "selector", "data", "NAMESPACE_REGISTRATION", "name", "value", "deletedValue", "cache", "reverseCache", "SERIOUS_ERROR", "error", "contractID", "rootState", "type", "L", "e", "initialSyncs", "syncFn", "isSyncing", "id", "initialSyncFn", "errMsg", "allowedUrls_default", "featureCheck_default", "resolve", "reject", "router_default", "mainNotificationsMixin_default", "showNavMixin", "AppStyles_default", "Background_default", "BannerGeneral_default", "Navigation_default", "Modal_default", "CONTRACT_SYNCS_RESET", "currentSyncs", "oldIdentityContractID", "bannerGeneral", "CONTRACT_IS_SYNCING", "LOGIN_COMPLETE", "setupNativeNotificationsListeners", "IdleVue", "state_default", "LOGOUT", "state", "LOGIN_ERROR", "SWITCH_GROUP", "isNewlyCreated", "ONLINE", "OFFLINE", "RECONNECTING", "RECONNECTION_FAILED", "KV_EVENT", "key", "KV_KEYS", "THEME_CHANGE", "identityContractID", "SETTING_CURRENT_USER", "removeHandler", "OPEN_MODAL", "LError", "mapGetters", "mapState", "cId", "a", "b", "mapMutations", "faviconBadge_default", "loadingScreenEl", "to", "from"]
}
