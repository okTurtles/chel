import{a as C}from"./chunk-WMVHT3GJ-cached.js";import{a as S}from"./chunk-XHZPFS4B-cached.js";import{a as y,c as x}from"./chunk-6P74MMKF-cached.js";import"./chunk-VUYUNB2W-cached.js";import{b as E}from"./chunk-B4L7IMS4-cached.js";import"./chunk-R4DRX7L2-cached.js";import{a as $}from"./chunk-FTWBMR5D-cached.js";import{a as I}from"./chunk-GA3LN23N-cached.js";import"./chunk-3VFZYJBQ-cached.js";import"./chunk-MEHASGB7-cached.js";import"./chunk-Z7X5SDSD-cached.js";import"./chunk-TEH4GFTX-cached.js";import{b as f}from"./chunk-QVCKPSEU-cached.js";import{a as v}from"./chunk-OMOH7TRL-cached.js";import{b as h,d as b}from"./chunk-WBBXU2FL-cached.js";import{e as g}from"./chunk-XMZXE55N-cached.js";var M=g($());var R=g(E());var N={name:"GroupDeletionModal",mixins:[M.validationMixin,S],components:{ModalTemplate:I,BannerSimple:y,BannerScoped:x,ButtonSubmit:C},data(){return{form:{confirmation:null}}},computed:{...h(["currentGroupId"]),...b(["groupMembersCount","groupSettings","ourIdentityContractId"]),code(){let e=this.groupSettings.groupName||"";return f("DELETE {GROUP_NAME}",{GROUP_NAME:e.toUpperCase()})}},methods:{close(){this.$refs.modal.close()},async submit(){if(!this.$v.form.$invalid)try{await v("chelonia/out/deleteContract",this.currentGroupId,{[this.currentGroupId]:{billableContractID:this.ourIdentityContractId}}),this.close()}catch(e){console.error("GroupDeletionModal submit() error:",e),this.$refs.formMsg.danger(e.message)}}},validations:{form:{confirmation:{[f("This field is required")]:R.required,[f("Does not match")]:function(e){return e===this.code}}}}},w=function(){var e=this,i=e.$createElement,t=e._self._c||i;return t("modal-template",{ref:"modal",attrs:{a11yTitle:e.L("Delete group")}},[t("template",{slot:"title"},[t("i18n",[e._v("Delete group")])],1),t("form",{attrs:{novalidate:"novalidate","data-test":"deleteGroup"},on:{submit:function(r){return r.preventDefault(),e.submit(r)}}},[t("p",[e.groupMembersCount>1?t("i18n",{attrs:{args:{groupMembersCount:e.groupMembersCount}}},[e._v("This group has {groupMembersCount} active members.")]):e._e(),e.groupMembersCount>1?t("span",[e._v(e._s(" "))]):e._e(),t("i18n",[e._v("Leaving the group when you're the the admin will delete it and all its associated data.")])],1),t("i18n",{staticClass:"has-text-bold",attrs:{tag:"p"}},[e._v("Are you sure you want to delete this group?")]),t("i18n",{attrs:{tag:"p",args:e.LTags("strong")}},[e._v("All messages exchanged between members will be {strong_} deleted permanently{_strong}.")]),t("banner-simple",{staticClass:"c-banner",attrs:{severity:"danger"}},[t("i18n",{attrs:{args:e.LTags("strong")}},[e._v("This action {strong_}cannot be undone{_strong}.")])],1),t("form",{attrs:{novalidate:"novalidate"},on:{submit:function(r){return r.preventDefault(),e.submit(r)}}},[t("label",{staticClass:"field"},[t("i18n",{staticClass:"label",attrs:{args:{code:e.code}}},[e._v('Type "{code}" below')]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.form.confirmation,expression:"form.confirmation"},{name:"error",rawName:"v-error:confirmation",arg:"confirmation"}],staticClass:"input",class:{error:e.$v.form.confirmation.$error},attrs:{type:"text","data-test":"confirmation"},domProps:{value:e.form.confirmation},on:{input:[function(r){r.target.composing||e.$set(e.form,"confirmation",r.target.value)},function(r){return e.debounceField("confirmation")}],blur:function(r){return e.updateField("confirmation")}}})],1),t("banner-scoped",{ref:"formMsg"}),t("div",{staticClass:"buttons"},[t("i18n",{staticClass:"is-outlined",attrs:{tag:"button",type:"button"},on:{click:e.close}},[e._v("Cancel")]),t("button-submit",{staticClass:"is-danger",attrs:{disabled:e.$v.form.$invalid,"data-test":"btnSubmit"},on:{click:e.submit}},[e._v(e._s(e.L("Delete Group")))])],1)],1)],1)],2)},D=[],A=function(e){e&&e("data-v-ff1e6294_0",{source:".c-banner[data-v-ff1e6294]{margin:1.5rem 0}",map:void 0,media:void 0})},G="data-v-ff1e6294",L=void 0,U=!1;function j(e,i,t,r,a,c,o,d,u,l){let n=(typeof t=="function"?t.options:t)||{};n.__file=`style>
`,n.render||(n.render=e.render,n.staticRenderFns=e.staticRenderFns,n._compiled=!0,a&&(n.functional=!0)),n._scopeId=r;{let m;if(i&&(m=o?function(s){i.call(this,l(s,this.$root.$options.shadowRoot))}:function(s){i.call(this,d(s))}),m!==void 0)if(n.functional){let s=n.render;n.render=function(T,_){return m.call(_),s(T,_)}}else{let s=n.beforeCreate;n.beforeCreate=s?[].concat(s,m):[m]}}return n}function p(){let e=p.styles||(p.styles={}),i=typeof navigator<"u"&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());return function(r,a){if(document.querySelector('style[data-vue-ssr-id~="'+r+'"]'))return;let c=i?a.media||"default":r,o=e[c]||(e[c]={ids:[],parts:[],element:void 0});if(!o.ids.includes(r)){let d=a.source,u=o.ids.length;if(o.ids.push(r),a.map&&(d+=`
/*# sourceURL=`+a.map.sources[0]+" */",d+=`
/*# sourceMappingURL=data:application/json;base64,`+btoa(unescape(encodeURIComponent(JSON.stringify(a.map))))+" */"),i&&(o.element=o.element||document.querySelector("style[data-group="+c+"]")),!o.element){let l=document.head||document.getElementsByTagName("head")[0],n=o.element=document.createElement("style");n.type="text/css",a.media&&n.setAttribute("media",a.media),i&&(n.setAttribute("data-group",c),n.setAttribute("data-next-index","0")),l.appendChild(n)}if(i&&(u=parseInt(o.element.getAttribute("data-next-index")),o.element.setAttribute("data-next-index",u+1)),o.element.styleSheet)o.parts.push(d),o.element.styleSheet.cssText=o.parts.filter(Boolean).join(`
`);else{let l=document.createTextNode(d),n=o.element.childNodes;n[u]&&o.element.removeChild(n[u]),n.length?o.element.insertBefore(l,n[u]):o.element.appendChild(l)}}}}var B=j({render:w,staticRenderFns:D},A,N,G,U,L,!1,p,void 0,void 0),W=B;export{W as default};
//# sourceMappingURL=GroupDeletionModal-HK5NSPE2-cached.js.map
