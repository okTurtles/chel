import{a as x}from"./chunk-J6JZCQQT-cached.js";import"./chunk-GB4D3I4D-cached.js";import"./chunk-NUXCLDQR-cached.js";import"./chunk-CLLOOAK2-cached.js";import"./chunk-OJPGIG5M-cached.js";import"./chunk-OYX4NVDU-cached.js";import"./chunk-MMWHE4QG-cached.js";import"./chunk-WWKTCH3O-cached.js";import"./chunk-KRTYB7RO-cached.js";import"./chunk-P7FSS7WT-cached.js";import"./chunk-TMYX4GL6-cached.js";import{a as g}from"./chunk-3IOIYPZC-cached.js";import"./chunk-4XLIKA67-cached.js";import"./chunk-WMVHT3GJ-cached.js";import"./chunk-6P74MMKF-cached.js";import"./chunk-SZPI64OI-cached.js";import"./chunk-3VFZYJBQ-cached.js";import"./chunk-MEHASGB7-cached.js";import"./chunk-Z7X5SDSD-cached.js";import"./chunk-TEH4GFTX-cached.js";import"./chunk-QVCKPSEU-cached.js";import{a as _}from"./chunk-OMOH7TRL-cached.js";import{b as h,d as v}from"./chunk-WBBXU2FL-cached.js";import"./chunk-XMZXE55N-cached.js";var b={name:"PropositionsAllModal",components:{ModalBaseTemplate:g,ProposalItem:x},data:()=>({ephemeral:{selectbox:{focused:!1,selectedOption:"Newest"},proposals:[]}}),async mounted(){let e=`proposals/${this.ourIdentityContractId}/${this.currentGroupId}`;this.ephemeral.proposals=await _("gi.db/archive/load",e)||[],this.checkTargetAndScroll()},methods:{unfocusSelect(){this.$refs.select.blur()},checkTargetAndScroll(){let e=this.$route.query?.targetProposal||"";e&&this.ephemeral.proposals.some(o=>o[0]===e)&&this.$nextTick(()=>{let o=this.$refs.pList.querySelector(`[data-proposal-hash="${e}"]`);o&&o.scrollIntoView({block:"center"})})}},computed:{...h(["currentGroupId"]),...v(["currentGroupState","ourIdentityContractId"]),proposals(){let e=this.ephemeral.proposals;return this.ephemeral.selectbox.selectedOption==="Newest"?e:[...e].reverse()}}},C=function(){var e=this,o=e.$createElement,a=e._self._c||o;return a("modal-base-template",{ref:"modal",staticClass:"has-background",attrs:{fullscreen:!0,a11yTitle:e.L("All proposals")}},[a("div",{staticClass:"c-container"},[a("div",{staticClass:"c-header"},[a("i18n",{staticClass:"is-title-2 c-title",attrs:{tag:"h2"}},[e._v("Archived proposals")])],1),a("div",{staticClass:"c-header-info"},[a("i18n",{staticClass:"has-text-1",attrs:{tag:"div",args:{groupProposalsCount:e.proposals.length}}},[e._v("{groupProposalsCount} proposals")]),a("div",{staticClass:"selectsolo"},[a("select",{directives:[{name:"model",rawName:"v-model",value:e.ephemeral.selectbox.selectedOption,expression:"ephemeral.selectbox.selectedOption"}],ref:"select",staticClass:"select",on:{change:[function(i){var s=Array.prototype.filter.call(i.target.options,function(r){return r.selected}).map(function(r){var n="_value"in r?r._value:r.value;return n});e.$set(e.ephemeral.selectbox,"selectedOption",i.target.multiple?s:s[0])},e.unfocusSelect]}},[a("option",{attrs:{value:"Newest"}},[e._v(e._s(e.L("Newest first")))]),a("option",{attrs:{value:"Oldest"}},[e._v(e._s(e.L("Oldest first")))])])])],1),a("div",{staticClass:"card c-card"},[a("ul",{ref:"pList",attrs:{"data-test":"proposalsWidget"}},e._l(e.proposals,function(i){var s=i[0],r=i[1];return a("proposal-item",{key:s,attrs:{proposalHash:s,proposalObject:r}})}),1)])])])},S=[],I=function(e){e&&e("data-v-af0350d6_0",{source:".c-container[data-v-af0350d6]{height:100%;width:100%;background-color:var(--general_2)}@media screen and (min-width:769px),print{.c-container[data-v-af0350d6],.c-header[data-v-af0350d6]{width:50rem;max-width:100%}}.c-header[data-v-af0350d6]{display:flex;height:4.75rem;justify-content:center;align-items:center;padding-top:0;background-color:var(--background_0);margin:0 -1rem}@media screen and (max-width:768px){.c-header[data-v-af0350d6]{justify-content:left;padding-left:1rem}}@media screen and (min-width:769px),print{.c-header[data-v-af0350d6]{padding-top:2rem;justify-content:flex-start;background-color:transparent;margin:0}}.c-description[data-v-af0350d6]{color:var(--text_1)}@media screen and (max-width:768px){.c-description[data-v-af0350d6]{position:absolute;top:5.5rem}}.c-header-info[data-v-af0350d6]{display:flex;height:3.75rem;align-items:center;justify-content:space-between}",map:void 0,media:void 0})},w="data-v-af0350d6",$=void 0,k=!1;function R(e,o,a,i,s,r,n,l,c,p){let t=(typeof a=="function"?a.options:a)||{};t.__file=`style>
`,t.render||(t.render=e.render,t.staticRenderFns=e.staticRenderFns,t._compiled=!0,s&&(t.functional=!0)),t._scopeId=i;{let u;if(o&&(u=n?function(d){o.call(this,p(d,this.$root.$options.shadowRoot))}:function(d){o.call(this,l(d))}),u!==void 0)if(t.functional){let d=t.render;t.render=function(y,m){return u.call(m),d(y,m)}}else{let d=t.beforeCreate;t.beforeCreate=d?[].concat(d,u):[u]}}return t}function f(){let e=f.styles||(f.styles={}),o=typeof navigator<"u"&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());return function(i,s){if(document.querySelector('style[data-vue-ssr-id~="'+i+'"]'))return;let r=o?s.media||"default":i,n=e[r]||(e[r]={ids:[],parts:[],element:void 0});if(!n.ids.includes(i)){let l=s.source,c=n.ids.length;if(n.ids.push(i),s.map&&(l+=`
/*# sourceURL=`+s.map.sources[0]+" */",l+=`
/*# sourceMappingURL=data:application/json;base64,`+btoa(unescape(encodeURIComponent(JSON.stringify(s.map))))+" */"),o&&(n.element=n.element||document.querySelector("style[data-group="+r+"]")),!n.element){let p=document.head||document.getElementsByTagName("head")[0],t=n.element=document.createElement("style");t.type="text/css",s.media&&t.setAttribute("media",s.media),o&&(t.setAttribute("data-group",r),t.setAttribute("data-next-index","0")),p.appendChild(t)}if(o&&(c=parseInt(n.element.getAttribute("data-next-index")),n.element.setAttribute("data-next-index",c+1)),n.element.styleSheet)n.parts.push(l),n.element.styleSheet.cssText=n.parts.filter(Boolean).join(`
`);else{let p=document.createTextNode(l),t=n.element.childNodes;t[c]&&n.element.removeChild(t[c]),t.length?n.element.insertBefore(p,t[c]):n.element.appendChild(p)}}}}var j=R({render:C,staticRenderFns:S},I,b,w,k,$,!1,f,void 0,void 0),L=j;export{L as default};
//# sourceMappingURL=PropositionsAllModal-CQLGUIRH-cached.js.map
