import{a as of}from"./chunk-NAVF63QR-cached.js";import{a as en,b as tn,c as rn}from"./chunk-4XLIKA67-cached.js";import{d as Wr,e as or,f as Zr,g as Rt,h as Qr}from"./chunk-QVCKPSEU-cached.js";import{a as hr}from"./chunk-OMOH7TRL-cached.js";import{a as Tr,c as Jt,e as fr}from"./chunk-XMZXE55N-cached.js";var Cr=Jt((Oo,cn)=>{var wf="Input must be an string, Buffer or Uint8Array";function mf(t){let r;if(t instanceof Uint8Array)r=t;else if(typeof t=="string")r=new TextEncoder().encode(t);else throw new Error(wf);return r}function Ef(t){return Array.prototype.map.call(t,function(r){return(r<16?"0":"")+r.toString(16)}).join("")}function gr(t){return(4294967296+t).toString(16).substring(1)}function vf(t,r,f){let c=`
`+t+" = ";for(let x=0;x<r.length;x+=2){if(f===32)c+=gr(r[x]).toUpperCase(),c+=" ",c+=gr(r[x+1]).toUpperCase();else if(f===64)c+=gr(r[x+1]).toUpperCase(),c+=gr(r[x]).toUpperCase();else throw new Error("Invalid size "+f);x%6===4?c+=`
`+new Array(t.length+4).join(" "):x<r.length-2&&(c+=" ")}console.log(c)}function _f(t,r,f){let c=new Date().getTime(),x=new Uint8Array(r);for(let y=0;y<r;y++)x[y]=y%256;let u=new Date().getTime();console.log("Generated random input in "+(u-c)+"ms"),c=u;for(let y=0;y<f;y++){let g=t(x),U=new Date().getTime(),D=U-c;c=U,console.log("Hashed in "+D+"ms: "+g.substring(0,20)+"..."),console.log(Math.round(r/(1<<20)/(D/1e3)*100)/100+" MB PER SECOND")}}cn.exports={normalizeInput:mf,toHex:Ef,debugPrint:vf,testSpeed:_f}});var yn=Jt((ko,pn)=>{var mr=Cr();function wr(t,r,f){let c=t[r]+t[f],x=t[r+1]+t[f+1];c>=4294967296&&x++,t[r]=c,t[r+1]=x}function an(t,r,f,c){let x=t[r]+f;f<0&&(x+=4294967296);let u=t[r+1]+c;x>=4294967296&&u++,t[r]=x,t[r+1]=u}function xn(t,r){return t[r]^t[r+1]<<8^t[r+2]<<16^t[r+3]<<24}function kt(t,r,f,c,x,u){let y=ir[x],g=ir[x+1],U=ir[u],D=ir[u+1];wr(re,t,r),an(re,t,y,g);let A=re[c]^re[t],H=re[c+1]^re[t+1];re[c]=H,re[c+1]=A,wr(re,f,c),A=re[r]^re[f],H=re[r+1]^re[f+1],re[r]=A>>>24^H<<8,re[r+1]=H>>>24^A<<8,wr(re,t,r),an(re,t,U,D),A=re[c]^re[t],H=re[c+1]^re[t+1],re[c]=A>>>16^H<<16,re[c+1]=H>>>16^A<<16,wr(re,f,c),A=re[r]^re[f],H=re[r+1]^re[f+1],re[r]=H>>>31^A<<1,re[r+1]=A>>>31^H<<1}var un=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),Af=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3],Ze=new Uint8Array(Af.map(function(t){return t*2})),re=new Uint32Array(32),ir=new Uint32Array(32);function dn(t,r){let f=0;for(f=0;f<16;f++)re[f]=t.h[f],re[f+16]=un[f];for(re[24]=re[24]^t.t,re[25]=re[25]^t.t/4294967296,r&&(re[28]=~re[28],re[29]=~re[29]),f=0;f<32;f++)ir[f]=xn(t.b,4*f);for(f=0;f<12;f++)kt(0,8,16,24,Ze[f*16+0],Ze[f*16+1]),kt(2,10,18,26,Ze[f*16+2],Ze[f*16+3]),kt(4,12,20,28,Ze[f*16+4],Ze[f*16+5]),kt(6,14,22,30,Ze[f*16+6],Ze[f*16+7]),kt(0,10,20,30,Ze[f*16+8],Ze[f*16+9]),kt(2,12,22,24,Ze[f*16+10],Ze[f*16+11]),kt(4,14,16,26,Ze[f*16+12],Ze[f*16+13]),kt(6,8,18,28,Ze[f*16+14],Ze[f*16+15]);for(f=0;f<16;f++)t.h[f]=t.h[f]^re[f]^re[f+16]}var Ut=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);function ln(t,r,f,c){if(t===0||t>64)throw new Error("Illegal output length, expected 0 < length <= 64");if(r&&r.length>64)throw new Error("Illegal key, expected Uint8Array with 0 < length <= 64");if(f&&f.length!==16)throw new Error("Illegal salt, expected Uint8Array with length is 16");if(c&&c.length!==16)throw new Error("Illegal personal, expected Uint8Array with length is 16");let x={b:new Uint8Array(128),h:new Uint32Array(16),t:0,c:0,outlen:t};Ut.fill(0),Ut[0]=t,r&&(Ut[1]=r.length),Ut[2]=1,Ut[3]=1,f&&Ut.set(f,32),c&&Ut.set(c,48);for(let u=0;u<16;u++)x.h[u]=un[u]^xn(Ut,u*4);return r&&(Ir(x,r),x.c=128),x}function Ir(t,r){for(let f=0;f<r.length;f++)t.c===128&&(t.t+=t.c,dn(t,!1),t.c=0),t.b[t.c++]=r[f]}function bn(t){for(t.t+=t.c;t.c<128;)t.b[t.c++]=0;dn(t,!0);let r=new Uint8Array(t.outlen);for(let f=0;f<t.outlen;f++)r[f]=t.h[f>>2]>>8*(f&3);return r}function hn(t,r,f,c,x){f=f||64,t=mr.normalizeInput(t),c&&(c=mr.normalizeInput(c)),x&&(x=mr.normalizeInput(x));let u=ln(f,r,c,x);return Ir(u,t),bn(u)}function Sf(t,r,f,c,x){let u=hn(t,r,f,c,x);return mr.toHex(u)}pn.exports={blake2b:hn,blake2bHex:Sf,blake2bInit:ln,blake2bUpdate:Ir,blake2bFinal:bn}});var Sn=Jt((Uo,An)=>{var gn=Cr();function Of(t,r){return t[r]^t[r+1]<<8^t[r+2]<<16^t[r+3]<<24}function Tt(t,r,f,c,x,u){be[t]=be[t]+be[r]+x,be[c]=Er(be[c]^be[t],16),be[f]=be[f]+be[c],be[r]=Er(be[r]^be[f],12),be[t]=be[t]+be[r]+u,be[c]=Er(be[c]^be[t],8),be[f]=be[f]+be[c],be[r]=Er(be[r]^be[f],7)}function Er(t,r){return t>>>r^t<<32-r}var wn=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Qe=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0]),be=new Uint32Array(16),Ve=new Uint32Array(16);function mn(t,r){let f=0;for(f=0;f<8;f++)be[f]=t.h[f],be[f+8]=wn[f];for(be[12]^=t.t,be[13]^=t.t/4294967296,r&&(be[14]=~be[14]),f=0;f<16;f++)Ve[f]=Of(t.b,4*f);for(f=0;f<10;f++)Tt(0,4,8,12,Ve[Qe[f*16+0]],Ve[Qe[f*16+1]]),Tt(1,5,9,13,Ve[Qe[f*16+2]],Ve[Qe[f*16+3]]),Tt(2,6,10,14,Ve[Qe[f*16+4]],Ve[Qe[f*16+5]]),Tt(3,7,11,15,Ve[Qe[f*16+6]],Ve[Qe[f*16+7]]),Tt(0,5,10,15,Ve[Qe[f*16+8]],Ve[Qe[f*16+9]]),Tt(1,6,11,12,Ve[Qe[f*16+10]],Ve[Qe[f*16+11]]),Tt(2,7,8,13,Ve[Qe[f*16+12]],Ve[Qe[f*16+13]]),Tt(3,4,9,14,Ve[Qe[f*16+14]],Ve[Qe[f*16+15]]);for(f=0;f<8;f++)t.h[f]^=be[f]^be[f+8]}function En(t,r){if(!(t>0&&t<=32))throw new Error("Incorrect output length, should be in [1, 32]");let f=r?r.length:0;if(r&&!(f>0&&f<=32))throw new Error("Incorrect key length, should be in [1, 32]");let c={h:new Uint32Array(wn),b:new Uint8Array(64),c:0,t:0,outlen:t};return c.h[0]^=16842752^f<<8^t,f>0&&(Pr(c,r),c.c=64),c}function Pr(t,r){for(let f=0;f<r.length;f++)t.c===64&&(t.t+=t.c,mn(t,!1),t.c=0),t.b[t.c++]=r[f]}function vn(t){for(t.t+=t.c;t.c<64;)t.b[t.c++]=0;mn(t,!0);let r=new Uint8Array(t.outlen);for(let f=0;f<t.outlen;f++)r[f]=t.h[f>>2]>>8*(f&3)&255;return r}function _n(t,r,f){f=f||32,t=gn.normalizeInput(t);let c=En(f,r);return Pr(c,t),vn(c)}function kf(t,r,f){let c=_n(t,r,f);return gn.toHex(c)}An.exports={blake2s:_n,blake2sHex:kf,blake2sInit:En,blake2sUpdate:Pr,blake2sFinal:vn}});var zr=Jt((To,On)=>{var sr=yn(),cr=Sn();On.exports={blake2b:sr.blake2b,blake2bHex:sr.blake2bHex,blake2bInit:sr.blake2bInit,blake2bUpdate:sr.blake2bUpdate,blake2bFinal:sr.blake2bFinal,blake2s:cr.blake2s,blake2sHex:cr.blake2sHex,blake2sInit:cr.blake2sInit,blake2sUpdate:cr.blake2sUpdate,blake2sFinal:cr.blake2sFinal}});var Rn=Jt((s0,Fr)=>{function no(t,r,f,c,x,u,y,g){"use strict";function U(v){var _=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],N=1779033703,p=3144134277,V=1013904242,ce=2773480762,Le=1359893119,Ee=2600822924,ve=528734635,Pe=1541459225,rt=new Array(64);function _t(st){for(var Ot=0,S=st.length;S>=64;){var ze=N,Ye=p,He=V,Je=ce,Oe=Le,qe=Ee,nt=ve,ct=Pe,_e,pe,Fe,Re,Me;for(pe=0;pe<16;pe++)Fe=Ot+pe*4,rt[pe]=(st[Fe]&255)<<24|(st[Fe+1]&255)<<16|(st[Fe+2]&255)<<8|st[Fe+3]&255;for(pe=16;pe<64;pe++)_e=rt[pe-2],Re=(_e>>>17|_e<<15)^(_e>>>19|_e<<13)^_e>>>10,_e=rt[pe-15],Me=(_e>>>7|_e<<25)^(_e>>>18|_e<<14)^_e>>>3,rt[pe]=(Re+rt[pe-7]|0)+(Me+rt[pe-16]|0)|0;for(pe=0;pe<64;pe++)Re=(((Oe>>>6|Oe<<26)^(Oe>>>11|Oe<<21)^(Oe>>>25|Oe<<7))+(Oe&qe^~Oe&nt)|0)+(ct+(_[pe]+rt[pe]|0)|0)|0,Me=((ze>>>2|ze<<30)^(ze>>>13|ze<<19)^(ze>>>22|ze<<10))+(ze&Ye^ze&He^Ye&He)|0,ct=nt,nt=qe,qe=Oe,Oe=Je+Re|0,Je=He,He=Ye,Ye=ze,ze=Re+Me|0;N=N+ze|0,p=p+Ye|0,V=V+He|0,ce=ce+Je|0,Le=Le+Oe|0,Ee=Ee+qe|0,ve=ve+nt|0,Pe=Pe+ct|0,Ot+=64,S-=64}}_t(v);var At,St=v.length%64,mt=v.length/536870912|0,yt=v.length<<3,Pt=St<56?56:120,Ue=v.slice(v.length-St,v.length);for(Ue.push(128),At=St+1;At<Pt;At++)Ue.push(0);return Ue.push(mt>>>24&255),Ue.push(mt>>>16&255),Ue.push(mt>>>8&255),Ue.push(mt>>>0&255),Ue.push(yt>>>24&255),Ue.push(yt>>>16&255),Ue.push(yt>>>8&255),Ue.push(yt>>>0&255),_t(Ue),[N>>>24&255,N>>>16&255,N>>>8&255,N>>>0&255,p>>>24&255,p>>>16&255,p>>>8&255,p>>>0&255,V>>>24&255,V>>>16&255,V>>>8&255,V>>>0&255,ce>>>24&255,ce>>>16&255,ce>>>8&255,ce>>>0&255,Le>>>24&255,Le>>>16&255,Le>>>8&255,Le>>>0&255,Ee>>>24&255,Ee>>>16&255,Ee>>>8&255,Ee>>>0&255,ve>>>24&255,ve>>>16&255,ve>>>8&255,ve>>>0&255,Pe>>>24&255,Pe>>>16&255,Pe>>>8&255,Pe>>>0&255]}function D(v,_,N){v.length>64&&(v=U(v.push?v:Array.prototype.slice.call(v,0)));var p,V=64+_.length+4,ce=new Array(V),Le=new Array(64),Ee=[];for(p=0;p<64;p++)ce[p]=54;for(p=0;p<v.length;p++)ce[p]^=v[p];for(p=0;p<_.length;p++)ce[64+p]=_[p];for(p=V-4;p<V;p++)ce[p]=0;for(p=0;p<64;p++)Le[p]=92;for(p=0;p<v.length;p++)Le[p]^=v[p];function ve(){for(var Pe=V-1;Pe>=V-4;Pe--){if(ce[Pe]++,ce[Pe]<=255)return;ce[Pe]=0}}for(;N>=32;)ve(),Ee=Ee.concat(U(Le.concat(U(ce)))),N-=32;return N>0&&(ve(),Ee=Ee.concat(U(Le.concat(U(ce))).slice(0,N))),Ee}function A(v,_,N,p){var V=v[0]^_[N++],ce=v[1]^_[N++],Le=v[2]^_[N++],Ee=v[3]^_[N++],ve=v[4]^_[N++],Pe=v[5]^_[N++],rt=v[6]^_[N++],_t=v[7]^_[N++],At=v[8]^_[N++],St=v[9]^_[N++],mt=v[10]^_[N++],yt=v[11]^_[N++],Pt=v[12]^_[N++],Ue=v[13]^_[N++],st=v[14]^_[N++],Ot=v[15]^_[N++],S,ze,Ye=V,He=ce,Je=Le,Oe=Ee,qe=ve,nt=Pe,ct=rt,_e=_t,pe=At,Fe=St,Re=mt,Me=yt,at=Pt,bt=Ue,xt=st,ut=Ot;for(ze=0;ze<8;ze+=2)S=Ye+at,qe^=S<<7|S>>>25,S=qe+Ye,pe^=S<<9|S>>>23,S=pe+qe,at^=S<<13|S>>>19,S=at+pe,Ye^=S<<18|S>>>14,S=nt+He,Fe^=S<<7|S>>>25,S=Fe+nt,bt^=S<<9|S>>>23,S=bt+Fe,He^=S<<13|S>>>19,S=He+bt,nt^=S<<18|S>>>14,S=Re+ct,xt^=S<<7|S>>>25,S=xt+Re,Je^=S<<9|S>>>23,S=Je+xt,ct^=S<<13|S>>>19,S=ct+Je,Re^=S<<18|S>>>14,S=ut+Me,Oe^=S<<7|S>>>25,S=Oe+ut,_e^=S<<9|S>>>23,S=_e+Oe,Me^=S<<13|S>>>19,S=Me+_e,ut^=S<<18|S>>>14,S=Ye+Oe,He^=S<<7|S>>>25,S=He+Ye,Je^=S<<9|S>>>23,S=Je+He,Oe^=S<<13|S>>>19,S=Oe+Je,Ye^=S<<18|S>>>14,S=nt+qe,ct^=S<<7|S>>>25,S=ct+nt,_e^=S<<9|S>>>23,S=_e+ct,qe^=S<<13|S>>>19,S=qe+_e,nt^=S<<18|S>>>14,S=Re+Fe,Me^=S<<7|S>>>25,S=Me+Re,pe^=S<<9|S>>>23,S=pe+Me,Fe^=S<<13|S>>>19,S=Fe+pe,Re^=S<<18|S>>>14,S=ut+xt,at^=S<<7|S>>>25,S=at+ut,bt^=S<<9|S>>>23,S=bt+at,xt^=S<<13|S>>>19,S=xt+bt,ut^=S<<18|S>>>14;_[p++]=v[0]=Ye+V|0,_[p++]=v[1]=He+ce|0,_[p++]=v[2]=Je+Le|0,_[p++]=v[3]=Oe+Ee|0,_[p++]=v[4]=qe+ve|0,_[p++]=v[5]=nt+Pe|0,_[p++]=v[6]=ct+rt|0,_[p++]=v[7]=_e+_t|0,_[p++]=v[8]=pe+At|0,_[p++]=v[9]=Fe+St|0,_[p++]=v[10]=Re+mt|0,_[p++]=v[11]=Me+yt|0,_[p++]=v[12]=at+Pt|0,_[p++]=v[13]=bt+Ue|0,_[p++]=v[14]=xt+st|0,_[p++]=v[15]=ut+Ot|0}function H(v,_,N,p,V){for(;V--;)v[_++]=N[p++]}function me(v,_,N,p,V){for(;V--;)v[_++]^=N[p++]}function ke(v,_,N,p,V){H(v,0,_,N+(2*V-1)*16,16);for(var ce=0;ce<2*V;ce+=2)A(v,_,N+ce*16,p+ce*8),A(v,_,N+ce*16+16,p+ce*8+V*16)}function se(v,_,N){return v[_+(2*N-1)*16]}function Ie(v){for(var _=[],N=0;N<v.length;N++){var p=v.charCodeAt(N);if(p<128)_.push(p);else if(p<2048)_.push(192|p>>6),_.push(128|p&63);else if(p<55296)_.push(224|p>>12),_.push(128|p>>6&63),_.push(128|p&63);else{if(N>=v.length-1)throw new Error("invalid string");N++,p=(p&1023)<<10,p|=v.charCodeAt(N)&1023,p+=65536,_.push(240|p>>18),_.push(128|p>>12&63),_.push(128|p>>6&63),_.push(128|p&63)}}return _}function it(v){for(var _="0123456789abcdef".split(""),N=v.length,p=[],V=0;V<N;V++)p.push(_[v[V]>>>4&15]),p.push(_[v[V]>>>0&15]);return p.join("")}function et(v){for(var _="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),N=v.length,p=[],V=0,ce,Le,Ee,ve;V<N;)ce=V<N?v[V++]:0,Le=V<N?v[V++]:0,Ee=V<N?v[V++]:0,ve=(ce<<16)+(Le<<8)+Ee,p.push(_[ve>>>3*6&63]),p.push(_[ve>>>2*6&63]),p.push(_[ve>>>1*6&63]),p.push(_[ve>>>0*6&63]);return N%3>0&&(p[p.length-1]="=",N%3===1&&(p[p.length-2]="=")),p.join("")}var Be=-1>>>0,Ae=1;if(typeof f=="object"){if(arguments.length>4)throw new Error("scrypt: incorrect number of arguments");var he=f;if(y=c,f=he.logN,typeof f>"u")if(typeof he.N<"u"){if(he.N<2||he.N>Be)throw new Error("scrypt: N is out of range");if(he.N&he.N-1)throw new Error("scrypt: N is not a power of 2");f=Math.log(he.N)/Math.LN2}else throw new Error("scrypt: missing N parameter");Ae=he.p||1,c=he.r,x=he.dkLen||32,u=he.interruptStep||0,g=he.encoding}if(Ae<1)throw new Error("scrypt: invalid p");if(c<=0)throw new Error("scrypt: invalid r");if(f<1||f>31)throw new Error("scrypt: logN must be between 1 and 31");var ge=1<<f>>>0,we,Ke,Se,tt;if(c*Ae>=1<<30||c>Be/128/Ae||c>Be/256||ge>Be/128/c)throw new Error("scrypt: parameters are too large");typeof t=="string"&&(t=Ie(t)),typeof r=="string"&&(r=Ie(r)),typeof Int32Array<"u"?(we=new Int32Array(64*c),Ke=new Int32Array(32*ge*c),tt=new Int32Array(16)):(we=[],Ke=[],tt=new Array(16)),Se=D(t,r,Ae*128*c);var ot=0,ht=32*c;function rr(v){for(var _=0;_<32*c;_++){var N=v+_*4;we[ot+_]=(Se[N+3]&255)<<24|(Se[N+2]&255)<<16|(Se[N+1]&255)<<8|(Se[N+0]&255)<<0}}function Bt(v,_){for(var N=v;N<_;N+=2)H(Ke,N*(32*c),we,ot,32*c),ke(tt,we,ot,ht,c),H(Ke,(N+1)*(32*c),we,ht,32*c),ke(tt,we,ht,ot,c)}function Ht(v,_){for(var N=v;N<_;N+=2){var p=se(we,ot,c)&ge-1;me(we,ot,Ke,p*(32*c),32*c),ke(tt,we,ot,ht,c),p=se(we,ht,c)&ge-1,me(we,ht,Ke,p*(32*c),32*c),ke(tt,we,ht,ot,c)}}function lt(v){for(var _=0;_<32*c;_++){var N=we[ot+_];Se[v+_*4+0]=N>>>0&255,Se[v+_*4+1]=N>>>8&255,Se[v+_*4+2]=N>>>16&255,Se[v+_*4+3]=N>>>24&255}}var Vt=typeof setImmediate<"u"?setImmediate:setTimeout;function gt(v,_,N,p,V){(function ce(){Vt(function(){p(v,v+N<_?v+N:_),v+=N,v<_?ce():V()})})()}function wt(v){var _=D(t,Se,x);return v==="base64"?et(_):v==="hex"?it(_):v==="binary"?new Uint8Array(_):_}function br(){for(var v=0;v<Ae;v++)rr(v*128*c),Bt(0,ge),Ht(0,ge),lt(v*128*c);y(wt(g))}function nr(v){rr(v*128*c),gt(0,ge,u*2,Bt,function(){gt(0,ge,u*2,Ht,function(){lt(v*128*c),v+1<Ae?Vt(function(){nr(v+1)}):y(wt(g))})})}typeof u=="function"&&(g=y,y=u,u=1e3),u<=0?br():nr(0)}typeof Fr<"u"&&(Fr.exports=no)});var Mn=Jt((c0,Ar)=>{(function(t){"use strict";var r=function(n){var i,o=new Float64Array(16);if(n)for(i=0;i<n.length;i++)o[i]=n[i];return o},f=function(){throw new Error("no PRNG")},c=new Uint8Array(16),x=new Uint8Array(32);x[0]=9;var u=r(),y=r([1]),g=r([56129,1]),U=r([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),D=r([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),A=r([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),H=r([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),me=r([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function ke(n,i,o,e){n[i]=o>>24&255,n[i+1]=o>>16&255,n[i+2]=o>>8&255,n[i+3]=o&255,n[i+4]=e>>24&255,n[i+5]=e>>16&255,n[i+6]=e>>8&255,n[i+7]=e&255}function se(n,i,o,e,s){var d,l=0;for(d=0;d<s;d++)l|=n[i+d]^o[e+d];return(1&l-1>>>8)-1}function Ie(n,i,o,e){return se(n,i,o,e,16)}function it(n,i,o,e){return se(n,i,o,e,32)}function et(n,i,o,e){for(var s=e[0]&255|(e[1]&255)<<8|(e[2]&255)<<16|(e[3]&255)<<24,d=o[0]&255|(o[1]&255)<<8|(o[2]&255)<<16|(o[3]&255)<<24,l=o[4]&255|(o[5]&255)<<8|(o[6]&255)<<16|(o[7]&255)<<24,m=o[8]&255|(o[9]&255)<<8|(o[10]&255)<<16|(o[11]&255)<<24,T=o[12]&255|(o[13]&255)<<8|(o[14]&255)<<16|(o[15]&255)<<24,F=e[4]&255|(e[5]&255)<<8|(e[6]&255)<<16|(e[7]&255)<<24,C=i[0]&255|(i[1]&255)<<8|(i[2]&255)<<16|(i[3]&255)<<24,ue=i[4]&255|(i[5]&255)<<8|(i[6]&255)<<16|(i[7]&255)<<24,z=i[8]&255|(i[9]&255)<<8|(i[10]&255)<<16|(i[11]&255)<<24,J=i[12]&255|(i[13]&255)<<8|(i[14]&255)<<16|(i[15]&255)<<24,q=e[8]&255|(e[9]&255)<<8|(e[10]&255)<<16|(e[11]&255)<<24,Q=o[16]&255|(o[17]&255)<<8|(o[18]&255)<<16|(o[19]&255)<<24,Z=o[20]&255|(o[21]&255)<<8|(o[22]&255)<<16|(o[23]&255)<<24,G=o[24]&255|(o[25]&255)<<8|(o[26]&255)<<16|(o[27]&255)<<24,W=o[28]&255|(o[29]&255)<<8|(o[30]&255)<<16|(o[31]&255)<<24,X=e[12]&255|(e[13]&255)<<8|(e[14]&255)<<16|(e[15]&255)<<24,R=s,B=d,I=l,M=m,Y=T,L=F,b=C,h=ue,O=z,w=J,E=q,k=Q,$=Z,ee=G,ne=W,te=X,a,oe=0;oe<20;oe+=2)a=R+$|0,Y^=a<<7|a>>>25,a=Y+R|0,O^=a<<9|a>>>23,a=O+Y|0,$^=a<<13|a>>>19,a=$+O|0,R^=a<<18|a>>>14,a=L+B|0,w^=a<<7|a>>>25,a=w+L|0,ee^=a<<9|a>>>23,a=ee+w|0,B^=a<<13|a>>>19,a=B+ee|0,L^=a<<18|a>>>14,a=E+b|0,ne^=a<<7|a>>>25,a=ne+E|0,I^=a<<9|a>>>23,a=I+ne|0,b^=a<<13|a>>>19,a=b+I|0,E^=a<<18|a>>>14,a=te+k|0,M^=a<<7|a>>>25,a=M+te|0,h^=a<<9|a>>>23,a=h+M|0,k^=a<<13|a>>>19,a=k+h|0,te^=a<<18|a>>>14,a=R+M|0,B^=a<<7|a>>>25,a=B+R|0,I^=a<<9|a>>>23,a=I+B|0,M^=a<<13|a>>>19,a=M+I|0,R^=a<<18|a>>>14,a=L+Y|0,b^=a<<7|a>>>25,a=b+L|0,h^=a<<9|a>>>23,a=h+b|0,Y^=a<<13|a>>>19,a=Y+h|0,L^=a<<18|a>>>14,a=E+w|0,k^=a<<7|a>>>25,a=k+E|0,O^=a<<9|a>>>23,a=O+k|0,w^=a<<13|a>>>19,a=w+O|0,E^=a<<18|a>>>14,a=te+ne|0,$^=a<<7|a>>>25,a=$+te|0,ee^=a<<9|a>>>23,a=ee+$|0,ne^=a<<13|a>>>19,a=ne+ee|0,te^=a<<18|a>>>14;R=R+s|0,B=B+d|0,I=I+l|0,M=M+m|0,Y=Y+T|0,L=L+F|0,b=b+C|0,h=h+ue|0,O=O+z|0,w=w+J|0,E=E+q|0,k=k+Q|0,$=$+Z|0,ee=ee+G|0,ne=ne+W|0,te=te+X|0,n[0]=R>>>0&255,n[1]=R>>>8&255,n[2]=R>>>16&255,n[3]=R>>>24&255,n[4]=B>>>0&255,n[5]=B>>>8&255,n[6]=B>>>16&255,n[7]=B>>>24&255,n[8]=I>>>0&255,n[9]=I>>>8&255,n[10]=I>>>16&255,n[11]=I>>>24&255,n[12]=M>>>0&255,n[13]=M>>>8&255,n[14]=M>>>16&255,n[15]=M>>>24&255,n[16]=Y>>>0&255,n[17]=Y>>>8&255,n[18]=Y>>>16&255,n[19]=Y>>>24&255,n[20]=L>>>0&255,n[21]=L>>>8&255,n[22]=L>>>16&255,n[23]=L>>>24&255,n[24]=b>>>0&255,n[25]=b>>>8&255,n[26]=b>>>16&255,n[27]=b>>>24&255,n[28]=h>>>0&255,n[29]=h>>>8&255,n[30]=h>>>16&255,n[31]=h>>>24&255,n[32]=O>>>0&255,n[33]=O>>>8&255,n[34]=O>>>16&255,n[35]=O>>>24&255,n[36]=w>>>0&255,n[37]=w>>>8&255,n[38]=w>>>16&255,n[39]=w>>>24&255,n[40]=E>>>0&255,n[41]=E>>>8&255,n[42]=E>>>16&255,n[43]=E>>>24&255,n[44]=k>>>0&255,n[45]=k>>>8&255,n[46]=k>>>16&255,n[47]=k>>>24&255,n[48]=$>>>0&255,n[49]=$>>>8&255,n[50]=$>>>16&255,n[51]=$>>>24&255,n[52]=ee>>>0&255,n[53]=ee>>>8&255,n[54]=ee>>>16&255,n[55]=ee>>>24&255,n[56]=ne>>>0&255,n[57]=ne>>>8&255,n[58]=ne>>>16&255,n[59]=ne>>>24&255,n[60]=te>>>0&255,n[61]=te>>>8&255,n[62]=te>>>16&255,n[63]=te>>>24&255}function Be(n,i,o,e){for(var s=e[0]&255|(e[1]&255)<<8|(e[2]&255)<<16|(e[3]&255)<<24,d=o[0]&255|(o[1]&255)<<8|(o[2]&255)<<16|(o[3]&255)<<24,l=o[4]&255|(o[5]&255)<<8|(o[6]&255)<<16|(o[7]&255)<<24,m=o[8]&255|(o[9]&255)<<8|(o[10]&255)<<16|(o[11]&255)<<24,T=o[12]&255|(o[13]&255)<<8|(o[14]&255)<<16|(o[15]&255)<<24,F=e[4]&255|(e[5]&255)<<8|(e[6]&255)<<16|(e[7]&255)<<24,C=i[0]&255|(i[1]&255)<<8|(i[2]&255)<<16|(i[3]&255)<<24,ue=i[4]&255|(i[5]&255)<<8|(i[6]&255)<<16|(i[7]&255)<<24,z=i[8]&255|(i[9]&255)<<8|(i[10]&255)<<16|(i[11]&255)<<24,J=i[12]&255|(i[13]&255)<<8|(i[14]&255)<<16|(i[15]&255)<<24,q=e[8]&255|(e[9]&255)<<8|(e[10]&255)<<16|(e[11]&255)<<24,Q=o[16]&255|(o[17]&255)<<8|(o[18]&255)<<16|(o[19]&255)<<24,Z=o[20]&255|(o[21]&255)<<8|(o[22]&255)<<16|(o[23]&255)<<24,G=o[24]&255|(o[25]&255)<<8|(o[26]&255)<<16|(o[27]&255)<<24,W=o[28]&255|(o[29]&255)<<8|(o[30]&255)<<16|(o[31]&255)<<24,X=e[12]&255|(e[13]&255)<<8|(e[14]&255)<<16|(e[15]&255)<<24,R=s,B=d,I=l,M=m,Y=T,L=F,b=C,h=ue,O=z,w=J,E=q,k=Q,$=Z,ee=G,ne=W,te=X,a,oe=0;oe<20;oe+=2)a=R+$|0,Y^=a<<7|a>>>25,a=Y+R|0,O^=a<<9|a>>>23,a=O+Y|0,$^=a<<13|a>>>19,a=$+O|0,R^=a<<18|a>>>14,a=L+B|0,w^=a<<7|a>>>25,a=w+L|0,ee^=a<<9|a>>>23,a=ee+w|0,B^=a<<13|a>>>19,a=B+ee|0,L^=a<<18|a>>>14,a=E+b|0,ne^=a<<7|a>>>25,a=ne+E|0,I^=a<<9|a>>>23,a=I+ne|0,b^=a<<13|a>>>19,a=b+I|0,E^=a<<18|a>>>14,a=te+k|0,M^=a<<7|a>>>25,a=M+te|0,h^=a<<9|a>>>23,a=h+M|0,k^=a<<13|a>>>19,a=k+h|0,te^=a<<18|a>>>14,a=R+M|0,B^=a<<7|a>>>25,a=B+R|0,I^=a<<9|a>>>23,a=I+B|0,M^=a<<13|a>>>19,a=M+I|0,R^=a<<18|a>>>14,a=L+Y|0,b^=a<<7|a>>>25,a=b+L|0,h^=a<<9|a>>>23,a=h+b|0,Y^=a<<13|a>>>19,a=Y+h|0,L^=a<<18|a>>>14,a=E+w|0,k^=a<<7|a>>>25,a=k+E|0,O^=a<<9|a>>>23,a=O+k|0,w^=a<<13|a>>>19,a=w+O|0,E^=a<<18|a>>>14,a=te+ne|0,$^=a<<7|a>>>25,a=$+te|0,ee^=a<<9|a>>>23,a=ee+$|0,ne^=a<<13|a>>>19,a=ne+ee|0,te^=a<<18|a>>>14;n[0]=R>>>0&255,n[1]=R>>>8&255,n[2]=R>>>16&255,n[3]=R>>>24&255,n[4]=L>>>0&255,n[5]=L>>>8&255,n[6]=L>>>16&255,n[7]=L>>>24&255,n[8]=E>>>0&255,n[9]=E>>>8&255,n[10]=E>>>16&255,n[11]=E>>>24&255,n[12]=te>>>0&255,n[13]=te>>>8&255,n[14]=te>>>16&255,n[15]=te>>>24&255,n[16]=b>>>0&255,n[17]=b>>>8&255,n[18]=b>>>16&255,n[19]=b>>>24&255,n[20]=h>>>0&255,n[21]=h>>>8&255,n[22]=h>>>16&255,n[23]=h>>>24&255,n[24]=O>>>0&255,n[25]=O>>>8&255,n[26]=O>>>16&255,n[27]=O>>>24&255,n[28]=w>>>0&255,n[29]=w>>>8&255,n[30]=w>>>16&255,n[31]=w>>>24&255}function Ae(n,i,o,e){et(n,i,o,e)}function he(n,i,o,e){Be(n,i,o,e)}var ge=new Uint8Array([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]);function we(n,i,o,e,s,d,l){var m=new Uint8Array(16),T=new Uint8Array(64),F,C;for(C=0;C<16;C++)m[C]=0;for(C=0;C<8;C++)m[C]=d[C];for(;s>=64;){for(Ae(T,m,l,ge),C=0;C<64;C++)n[i+C]=o[e+C]^T[C];for(F=1,C=8;C<16;C++)F=F+(m[C]&255)|0,m[C]=F&255,F>>>=8;s-=64,i+=64,e+=64}if(s>0)for(Ae(T,m,l,ge),C=0;C<s;C++)n[i+C]=o[e+C]^T[C];return 0}function Ke(n,i,o,e,s){var d=new Uint8Array(16),l=new Uint8Array(64),m,T;for(T=0;T<16;T++)d[T]=0;for(T=0;T<8;T++)d[T]=e[T];for(;o>=64;){for(Ae(l,d,s,ge),T=0;T<64;T++)n[i+T]=l[T];for(m=1,T=8;T<16;T++)m=m+(d[T]&255)|0,d[T]=m&255,m>>>=8;o-=64,i+=64}if(o>0)for(Ae(l,d,s,ge),T=0;T<o;T++)n[i+T]=l[T];return 0}function Se(n,i,o,e,s){var d=new Uint8Array(32);he(d,e,s,ge);for(var l=new Uint8Array(8),m=0;m<8;m++)l[m]=e[m+16];return Ke(n,i,o,l,d)}function tt(n,i,o,e,s,d,l){var m=new Uint8Array(32);he(m,d,l,ge);for(var T=new Uint8Array(8),F=0;F<8;F++)T[F]=d[F+16];return we(n,i,o,e,s,T,m)}var ot=function(n){this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.leftover=0,this.fin=0;var i,o,e,s,d,l,m,T;i=n[0]&255|(n[1]&255)<<8,this.r[0]=i&8191,o=n[2]&255|(n[3]&255)<<8,this.r[1]=(i>>>13|o<<3)&8191,e=n[4]&255|(n[5]&255)<<8,this.r[2]=(o>>>10|e<<6)&7939,s=n[6]&255|(n[7]&255)<<8,this.r[3]=(e>>>7|s<<9)&8191,d=n[8]&255|(n[9]&255)<<8,this.r[4]=(s>>>4|d<<12)&255,this.r[5]=d>>>1&8190,l=n[10]&255|(n[11]&255)<<8,this.r[6]=(d>>>14|l<<2)&8191,m=n[12]&255|(n[13]&255)<<8,this.r[7]=(l>>>11|m<<5)&8065,T=n[14]&255|(n[15]&255)<<8,this.r[8]=(m>>>8|T<<8)&8191,this.r[9]=T>>>5&127,this.pad[0]=n[16]&255|(n[17]&255)<<8,this.pad[1]=n[18]&255|(n[19]&255)<<8,this.pad[2]=n[20]&255|(n[21]&255)<<8,this.pad[3]=n[22]&255|(n[23]&255)<<8,this.pad[4]=n[24]&255|(n[25]&255)<<8,this.pad[5]=n[26]&255|(n[27]&255)<<8,this.pad[6]=n[28]&255|(n[29]&255)<<8,this.pad[7]=n[30]&255|(n[31]&255)<<8};ot.prototype.blocks=function(n,i,o){for(var e=this.fin?0:2048,s,d,l,m,T,F,C,ue,z,J,q,Q,Z,G,W,X,R,B,I,M=this.h[0],Y=this.h[1],L=this.h[2],b=this.h[3],h=this.h[4],O=this.h[5],w=this.h[6],E=this.h[7],k=this.h[8],$=this.h[9],ee=this.r[0],ne=this.r[1],te=this.r[2],a=this.r[3],oe=this.r[4],de=this.r[5],le=this.r[6],fe=this.r[7],ae=this.r[8],xe=this.r[9];o>=16;)s=n[i+0]&255|(n[i+1]&255)<<8,M+=s&8191,d=n[i+2]&255|(n[i+3]&255)<<8,Y+=(s>>>13|d<<3)&8191,l=n[i+4]&255|(n[i+5]&255)<<8,L+=(d>>>10|l<<6)&8191,m=n[i+6]&255|(n[i+7]&255)<<8,b+=(l>>>7|m<<9)&8191,T=n[i+8]&255|(n[i+9]&255)<<8,h+=(m>>>4|T<<12)&8191,O+=T>>>1&8191,F=n[i+10]&255|(n[i+11]&255)<<8,w+=(T>>>14|F<<2)&8191,C=n[i+12]&255|(n[i+13]&255)<<8,E+=(F>>>11|C<<5)&8191,ue=n[i+14]&255|(n[i+15]&255)<<8,k+=(C>>>8|ue<<8)&8191,$+=ue>>>5|e,z=0,J=z,J+=M*ee,J+=Y*(5*xe),J+=L*(5*ae),J+=b*(5*fe),J+=h*(5*le),z=J>>>13,J&=8191,J+=O*(5*de),J+=w*(5*oe),J+=E*(5*a),J+=k*(5*te),J+=$*(5*ne),z+=J>>>13,J&=8191,q=z,q+=M*ne,q+=Y*ee,q+=L*(5*xe),q+=b*(5*ae),q+=h*(5*fe),z=q>>>13,q&=8191,q+=O*(5*le),q+=w*(5*de),q+=E*(5*oe),q+=k*(5*a),q+=$*(5*te),z+=q>>>13,q&=8191,Q=z,Q+=M*te,Q+=Y*ne,Q+=L*ee,Q+=b*(5*xe),Q+=h*(5*ae),z=Q>>>13,Q&=8191,Q+=O*(5*fe),Q+=w*(5*le),Q+=E*(5*de),Q+=k*(5*oe),Q+=$*(5*a),z+=Q>>>13,Q&=8191,Z=z,Z+=M*a,Z+=Y*te,Z+=L*ne,Z+=b*ee,Z+=h*(5*xe),z=Z>>>13,Z&=8191,Z+=O*(5*ae),Z+=w*(5*fe),Z+=E*(5*le),Z+=k*(5*de),Z+=$*(5*oe),z+=Z>>>13,Z&=8191,G=z,G+=M*oe,G+=Y*a,G+=L*te,G+=b*ne,G+=h*ee,z=G>>>13,G&=8191,G+=O*(5*xe),G+=w*(5*ae),G+=E*(5*fe),G+=k*(5*le),G+=$*(5*de),z+=G>>>13,G&=8191,W=z,W+=M*de,W+=Y*oe,W+=L*a,W+=b*te,W+=h*ne,z=W>>>13,W&=8191,W+=O*ee,W+=w*(5*xe),W+=E*(5*ae),W+=k*(5*fe),W+=$*(5*le),z+=W>>>13,W&=8191,X=z,X+=M*le,X+=Y*de,X+=L*oe,X+=b*a,X+=h*te,z=X>>>13,X&=8191,X+=O*ne,X+=w*ee,X+=E*(5*xe),X+=k*(5*ae),X+=$*(5*fe),z+=X>>>13,X&=8191,R=z,R+=M*fe,R+=Y*le,R+=L*de,R+=b*oe,R+=h*a,z=R>>>13,R&=8191,R+=O*te,R+=w*ne,R+=E*ee,R+=k*(5*xe),R+=$*(5*ae),z+=R>>>13,R&=8191,B=z,B+=M*ae,B+=Y*fe,B+=L*le,B+=b*de,B+=h*oe,z=B>>>13,B&=8191,B+=O*a,B+=w*te,B+=E*ne,B+=k*ee,B+=$*(5*xe),z+=B>>>13,B&=8191,I=z,I+=M*xe,I+=Y*ae,I+=L*fe,I+=b*le,I+=h*de,z=I>>>13,I&=8191,I+=O*oe,I+=w*a,I+=E*te,I+=k*ne,I+=$*ee,z+=I>>>13,I&=8191,z=(z<<2)+z|0,z=z+J|0,J=z&8191,z=z>>>13,q+=z,M=J,Y=q,L=Q,b=Z,h=G,O=W,w=X,E=R,k=B,$=I,i+=16,o-=16;this.h[0]=M,this.h[1]=Y,this.h[2]=L,this.h[3]=b,this.h[4]=h,this.h[5]=O,this.h[6]=w,this.h[7]=E,this.h[8]=k,this.h[9]=$},ot.prototype.finish=function(n,i){var o=new Uint16Array(10),e,s,d,l;if(this.leftover){for(l=this.leftover,this.buffer[l++]=1;l<16;l++)this.buffer[l]=0;this.fin=1,this.blocks(this.buffer,0,16)}for(e=this.h[1]>>>13,this.h[1]&=8191,l=2;l<10;l++)this.h[l]+=e,e=this.h[l]>>>13,this.h[l]&=8191;for(this.h[0]+=e*5,e=this.h[0]>>>13,this.h[0]&=8191,this.h[1]+=e,e=this.h[1]>>>13,this.h[1]&=8191,this.h[2]+=e,o[0]=this.h[0]+5,e=o[0]>>>13,o[0]&=8191,l=1;l<10;l++)o[l]=this.h[l]+e,e=o[l]>>>13,o[l]&=8191;for(o[9]-=8192,s=(e^1)-1,l=0;l<10;l++)o[l]&=s;for(s=~s,l=0;l<10;l++)this.h[l]=this.h[l]&s|o[l];for(this.h[0]=(this.h[0]|this.h[1]<<13)&65535,this.h[1]=(this.h[1]>>>3|this.h[2]<<10)&65535,this.h[2]=(this.h[2]>>>6|this.h[3]<<7)&65535,this.h[3]=(this.h[3]>>>9|this.h[4]<<4)&65535,this.h[4]=(this.h[4]>>>12|this.h[5]<<1|this.h[6]<<14)&65535,this.h[5]=(this.h[6]>>>2|this.h[7]<<11)&65535,this.h[6]=(this.h[7]>>>5|this.h[8]<<8)&65535,this.h[7]=(this.h[8]>>>8|this.h[9]<<5)&65535,d=this.h[0]+this.pad[0],this.h[0]=d&65535,l=1;l<8;l++)d=(this.h[l]+this.pad[l]|0)+(d>>>16)|0,this.h[l]=d&65535;n[i+0]=this.h[0]>>>0&255,n[i+1]=this.h[0]>>>8&255,n[i+2]=this.h[1]>>>0&255,n[i+3]=this.h[1]>>>8&255,n[i+4]=this.h[2]>>>0&255,n[i+5]=this.h[2]>>>8&255,n[i+6]=this.h[3]>>>0&255,n[i+7]=this.h[3]>>>8&255,n[i+8]=this.h[4]>>>0&255,n[i+9]=this.h[4]>>>8&255,n[i+10]=this.h[5]>>>0&255,n[i+11]=this.h[5]>>>8&255,n[i+12]=this.h[6]>>>0&255,n[i+13]=this.h[6]>>>8&255,n[i+14]=this.h[7]>>>0&255,n[i+15]=this.h[7]>>>8&255},ot.prototype.update=function(n,i,o){var e,s;if(this.leftover){for(s=16-this.leftover,s>o&&(s=o),e=0;e<s;e++)this.buffer[this.leftover+e]=n[i+e];if(o-=s,i+=s,this.leftover+=s,this.leftover<16)return;this.blocks(this.buffer,0,16),this.leftover=0}if(o>=16&&(s=o-o%16,this.blocks(n,i,s),i+=s,o-=s),o){for(e=0;e<o;e++)this.buffer[this.leftover+e]=n[i+e];this.leftover+=o}};function ht(n,i,o,e,s,d){var l=new ot(d);return l.update(o,e,s),l.finish(n,i),0}function rr(n,i,o,e,s,d){var l=new Uint8Array(16);return ht(l,0,o,e,s,d),Ie(n,i,l,0)}function Bt(n,i,o,e,s){var d;if(o<32)return-1;for(tt(n,0,i,0,o,e,s),ht(n,16,n,32,o-32,n),d=0;d<16;d++)n[d]=0;return 0}function Ht(n,i,o,e,s){var d,l=new Uint8Array(32);if(o<32||(Se(l,0,32,e,s),rr(i,16,i,32,o-32,l)!==0))return-1;for(tt(n,0,i,0,o,e,s),d=0;d<32;d++)n[d]=0;return 0}function lt(n,i){var o;for(o=0;o<16;o++)n[o]=i[o]|0}function Vt(n){var i,o,e=1;for(i=0;i<16;i++)o=n[i]+e+65535,e=Math.floor(o/65536),n[i]=o-e*65536;n[0]+=e-1+37*(e-1)}function gt(n,i,o){for(var e,s=~(o-1),d=0;d<16;d++)e=s&(n[d]^i[d]),n[d]^=e,i[d]^=e}function wt(n,i){var o,e,s,d=r(),l=r();for(o=0;o<16;o++)l[o]=i[o];for(Vt(l),Vt(l),Vt(l),e=0;e<2;e++){for(d[0]=l[0]-65517,o=1;o<15;o++)d[o]=l[o]-65535-(d[o-1]>>16&1),d[o-1]&=65535;d[15]=l[15]-32767-(d[14]>>16&1),s=d[15]>>16&1,d[14]&=65535,gt(l,d,1-s)}for(o=0;o<16;o++)n[2*o]=l[o]&255,n[2*o+1]=l[o]>>8}function br(n,i){var o=new Uint8Array(32),e=new Uint8Array(32);return wt(o,n),wt(e,i),it(o,0,e,0)}function nr(n){var i=new Uint8Array(32);return wt(i,n),i[0]&1}function v(n,i){var o;for(o=0;o<16;o++)n[o]=i[2*o]+(i[2*o+1]<<8);n[15]&=32767}function _(n,i,o){for(var e=0;e<16;e++)n[e]=i[e]+o[e]}function N(n,i,o){for(var e=0;e<16;e++)n[e]=i[e]-o[e]}function p(n,i,o){var e,s,d=0,l=0,m=0,T=0,F=0,C=0,ue=0,z=0,J=0,q=0,Q=0,Z=0,G=0,W=0,X=0,R=0,B=0,I=0,M=0,Y=0,L=0,b=0,h=0,O=0,w=0,E=0,k=0,$=0,ee=0,ne=0,te=0,a=o[0],oe=o[1],de=o[2],le=o[3],fe=o[4],ae=o[5],xe=o[6],Ce=o[7],ye=o[8],Te=o[9],Ne=o[10],De=o[11],je=o[12],Ge=o[13],Xe=o[14],We=o[15];e=i[0],d+=e*a,l+=e*oe,m+=e*de,T+=e*le,F+=e*fe,C+=e*ae,ue+=e*xe,z+=e*Ce,J+=e*ye,q+=e*Te,Q+=e*Ne,Z+=e*De,G+=e*je,W+=e*Ge,X+=e*Xe,R+=e*We,e=i[1],l+=e*a,m+=e*oe,T+=e*de,F+=e*le,C+=e*fe,ue+=e*ae,z+=e*xe,J+=e*Ce,q+=e*ye,Q+=e*Te,Z+=e*Ne,G+=e*De,W+=e*je,X+=e*Ge,R+=e*Xe,B+=e*We,e=i[2],m+=e*a,T+=e*oe,F+=e*de,C+=e*le,ue+=e*fe,z+=e*ae,J+=e*xe,q+=e*Ce,Q+=e*ye,Z+=e*Te,G+=e*Ne,W+=e*De,X+=e*je,R+=e*Ge,B+=e*Xe,I+=e*We,e=i[3],T+=e*a,F+=e*oe,C+=e*de,ue+=e*le,z+=e*fe,J+=e*ae,q+=e*xe,Q+=e*Ce,Z+=e*ye,G+=e*Te,W+=e*Ne,X+=e*De,R+=e*je,B+=e*Ge,I+=e*Xe,M+=e*We,e=i[4],F+=e*a,C+=e*oe,ue+=e*de,z+=e*le,J+=e*fe,q+=e*ae,Q+=e*xe,Z+=e*Ce,G+=e*ye,W+=e*Te,X+=e*Ne,R+=e*De,B+=e*je,I+=e*Ge,M+=e*Xe,Y+=e*We,e=i[5],C+=e*a,ue+=e*oe,z+=e*de,J+=e*le,q+=e*fe,Q+=e*ae,Z+=e*xe,G+=e*Ce,W+=e*ye,X+=e*Te,R+=e*Ne,B+=e*De,I+=e*je,M+=e*Ge,Y+=e*Xe,L+=e*We,e=i[6],ue+=e*a,z+=e*oe,J+=e*de,q+=e*le,Q+=e*fe,Z+=e*ae,G+=e*xe,W+=e*Ce,X+=e*ye,R+=e*Te,B+=e*Ne,I+=e*De,M+=e*je,Y+=e*Ge,L+=e*Xe,b+=e*We,e=i[7],z+=e*a,J+=e*oe,q+=e*de,Q+=e*le,Z+=e*fe,G+=e*ae,W+=e*xe,X+=e*Ce,R+=e*ye,B+=e*Te,I+=e*Ne,M+=e*De,Y+=e*je,L+=e*Ge,b+=e*Xe,h+=e*We,e=i[8],J+=e*a,q+=e*oe,Q+=e*de,Z+=e*le,G+=e*fe,W+=e*ae,X+=e*xe,R+=e*Ce,B+=e*ye,I+=e*Te,M+=e*Ne,Y+=e*De,L+=e*je,b+=e*Ge,h+=e*Xe,O+=e*We,e=i[9],q+=e*a,Q+=e*oe,Z+=e*de,G+=e*le,W+=e*fe,X+=e*ae,R+=e*xe,B+=e*Ce,I+=e*ye,M+=e*Te,Y+=e*Ne,L+=e*De,b+=e*je,h+=e*Ge,O+=e*Xe,w+=e*We,e=i[10],Q+=e*a,Z+=e*oe,G+=e*de,W+=e*le,X+=e*fe,R+=e*ae,B+=e*xe,I+=e*Ce,M+=e*ye,Y+=e*Te,L+=e*Ne,b+=e*De,h+=e*je,O+=e*Ge,w+=e*Xe,E+=e*We,e=i[11],Z+=e*a,G+=e*oe,W+=e*de,X+=e*le,R+=e*fe,B+=e*ae,I+=e*xe,M+=e*Ce,Y+=e*ye,L+=e*Te,b+=e*Ne,h+=e*De,O+=e*je,w+=e*Ge,E+=e*Xe,k+=e*We,e=i[12],G+=e*a,W+=e*oe,X+=e*de,R+=e*le,B+=e*fe,I+=e*ae,M+=e*xe,Y+=e*Ce,L+=e*ye,b+=e*Te,h+=e*Ne,O+=e*De,w+=e*je,E+=e*Ge,k+=e*Xe,$+=e*We,e=i[13],W+=e*a,X+=e*oe,R+=e*de,B+=e*le,I+=e*fe,M+=e*ae,Y+=e*xe,L+=e*Ce,b+=e*ye,h+=e*Te,O+=e*Ne,w+=e*De,E+=e*je,k+=e*Ge,$+=e*Xe,ee+=e*We,e=i[14],X+=e*a,R+=e*oe,B+=e*de,I+=e*le,M+=e*fe,Y+=e*ae,L+=e*xe,b+=e*Ce,h+=e*ye,O+=e*Te,w+=e*Ne,E+=e*De,k+=e*je,$+=e*Ge,ee+=e*Xe,ne+=e*We,e=i[15],R+=e*a,B+=e*oe,I+=e*de,M+=e*le,Y+=e*fe,L+=e*ae,b+=e*xe,h+=e*Ce,O+=e*ye,w+=e*Te,E+=e*Ne,k+=e*De,$+=e*je,ee+=e*Ge,ne+=e*Xe,te+=e*We,d+=38*B,l+=38*I,m+=38*M,T+=38*Y,F+=38*L,C+=38*b,ue+=38*h,z+=38*O,J+=38*w,q+=38*E,Q+=38*k,Z+=38*$,G+=38*ee,W+=38*ne,X+=38*te,s=1,e=d+s+65535,s=Math.floor(e/65536),d=e-s*65536,e=l+s+65535,s=Math.floor(e/65536),l=e-s*65536,e=m+s+65535,s=Math.floor(e/65536),m=e-s*65536,e=T+s+65535,s=Math.floor(e/65536),T=e-s*65536,e=F+s+65535,s=Math.floor(e/65536),F=e-s*65536,e=C+s+65535,s=Math.floor(e/65536),C=e-s*65536,e=ue+s+65535,s=Math.floor(e/65536),ue=e-s*65536,e=z+s+65535,s=Math.floor(e/65536),z=e-s*65536,e=J+s+65535,s=Math.floor(e/65536),J=e-s*65536,e=q+s+65535,s=Math.floor(e/65536),q=e-s*65536,e=Q+s+65535,s=Math.floor(e/65536),Q=e-s*65536,e=Z+s+65535,s=Math.floor(e/65536),Z=e-s*65536,e=G+s+65535,s=Math.floor(e/65536),G=e-s*65536,e=W+s+65535,s=Math.floor(e/65536),W=e-s*65536,e=X+s+65535,s=Math.floor(e/65536),X=e-s*65536,e=R+s+65535,s=Math.floor(e/65536),R=e-s*65536,d+=s-1+37*(s-1),s=1,e=d+s+65535,s=Math.floor(e/65536),d=e-s*65536,e=l+s+65535,s=Math.floor(e/65536),l=e-s*65536,e=m+s+65535,s=Math.floor(e/65536),m=e-s*65536,e=T+s+65535,s=Math.floor(e/65536),T=e-s*65536,e=F+s+65535,s=Math.floor(e/65536),F=e-s*65536,e=C+s+65535,s=Math.floor(e/65536),C=e-s*65536,e=ue+s+65535,s=Math.floor(e/65536),ue=e-s*65536,e=z+s+65535,s=Math.floor(e/65536),z=e-s*65536,e=J+s+65535,s=Math.floor(e/65536),J=e-s*65536,e=q+s+65535,s=Math.floor(e/65536),q=e-s*65536,e=Q+s+65535,s=Math.floor(e/65536),Q=e-s*65536,e=Z+s+65535,s=Math.floor(e/65536),Z=e-s*65536,e=G+s+65535,s=Math.floor(e/65536),G=e-s*65536,e=W+s+65535,s=Math.floor(e/65536),W=e-s*65536,e=X+s+65535,s=Math.floor(e/65536),X=e-s*65536,e=R+s+65535,s=Math.floor(e/65536),R=e-s*65536,d+=s-1+37*(s-1),n[0]=d,n[1]=l,n[2]=m,n[3]=T,n[4]=F,n[5]=C,n[6]=ue,n[7]=z,n[8]=J,n[9]=q,n[10]=Q,n[11]=Z,n[12]=G,n[13]=W,n[14]=X,n[15]=R}function V(n,i){p(n,i,i)}function ce(n,i){var o=r(),e;for(e=0;e<16;e++)o[e]=i[e];for(e=253;e>=0;e--)V(o,o),e!==2&&e!==4&&p(o,o,i);for(e=0;e<16;e++)n[e]=o[e]}function Le(n,i){var o=r(),e;for(e=0;e<16;e++)o[e]=i[e];for(e=250;e>=0;e--)V(o,o),e!==1&&p(o,o,i);for(e=0;e<16;e++)n[e]=o[e]}function Ee(n,i,o){var e=new Uint8Array(32),s=new Float64Array(80),d,l,m=r(),T=r(),F=r(),C=r(),ue=r(),z=r();for(l=0;l<31;l++)e[l]=i[l];for(e[31]=i[31]&127|64,e[0]&=248,v(s,o),l=0;l<16;l++)T[l]=s[l],C[l]=m[l]=F[l]=0;for(m[0]=C[0]=1,l=254;l>=0;--l)d=e[l>>>3]>>>(l&7)&1,gt(m,T,d),gt(F,C,d),_(ue,m,F),N(m,m,F),_(F,T,C),N(T,T,C),V(C,ue),V(z,m),p(m,F,m),p(F,T,ue),_(ue,m,F),N(m,m,F),V(T,m),N(F,C,z),p(m,F,g),_(m,m,C),p(F,F,m),p(m,C,z),p(C,T,s),V(T,ue),gt(m,T,d),gt(F,C,d);for(l=0;l<16;l++)s[l+16]=m[l],s[l+32]=F[l],s[l+48]=T[l],s[l+64]=C[l];var J=s.subarray(32),q=s.subarray(16);return ce(J,J),p(q,q,J),wt(n,q),0}function ve(n,i){return Ee(n,i,x)}function Pe(n,i){return f(i,32),ve(n,i)}function rt(n,i,o){var e=new Uint8Array(32);return Ee(e,o,i),he(n,c,e,ge)}var _t=Bt,At=Ht;function St(n,i,o,e,s,d){var l=new Uint8Array(32);return rt(l,s,d),_t(n,i,o,e,l)}function mt(n,i,o,e,s,d){var l=new Uint8Array(32);return rt(l,s,d),At(n,i,o,e,l)}var yt=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function Pt(n,i,o,e){for(var s=new Int32Array(16),d=new Int32Array(16),l,m,T,F,C,ue,z,J,q,Q,Z,G,W,X,R,B,I,M,Y,L,b,h,O,w,E,k,$=n[0],ee=n[1],ne=n[2],te=n[3],a=n[4],oe=n[5],de=n[6],le=n[7],fe=i[0],ae=i[1],xe=i[2],Ce=i[3],ye=i[4],Te=i[5],Ne=i[6],De=i[7],je=0;e>=128;){for(Y=0;Y<16;Y++)L=8*Y+je,s[Y]=o[L+0]<<24|o[L+1]<<16|o[L+2]<<8|o[L+3],d[Y]=o[L+4]<<24|o[L+5]<<16|o[L+6]<<8|o[L+7];for(Y=0;Y<80;Y++)if(l=$,m=ee,T=ne,F=te,C=a,ue=oe,z=de,J=le,q=fe,Q=ae,Z=xe,G=Ce,W=ye,X=Te,R=Ne,B=De,b=le,h=De,O=h&65535,w=h>>>16,E=b&65535,k=b>>>16,b=(a>>>14|ye<<18)^(a>>>18|ye<<14)^(ye>>>9|a<<23),h=(ye>>>14|a<<18)^(ye>>>18|a<<14)^(a>>>9|ye<<23),O+=h&65535,w+=h>>>16,E+=b&65535,k+=b>>>16,b=a&oe^~a&de,h=ye&Te^~ye&Ne,O+=h&65535,w+=h>>>16,E+=b&65535,k+=b>>>16,b=yt[Y*2],h=yt[Y*2+1],O+=h&65535,w+=h>>>16,E+=b&65535,k+=b>>>16,b=s[Y%16],h=d[Y%16],O+=h&65535,w+=h>>>16,E+=b&65535,k+=b>>>16,w+=O>>>16,E+=w>>>16,k+=E>>>16,I=E&65535|k<<16,M=O&65535|w<<16,b=I,h=M,O=h&65535,w=h>>>16,E=b&65535,k=b>>>16,b=($>>>28|fe<<4)^(fe>>>2|$<<30)^(fe>>>7|$<<25),h=(fe>>>28|$<<4)^($>>>2|fe<<30)^($>>>7|fe<<25),O+=h&65535,w+=h>>>16,E+=b&65535,k+=b>>>16,b=$&ee^$&ne^ee&ne,h=fe&ae^fe&xe^ae&xe,O+=h&65535,w+=h>>>16,E+=b&65535,k+=b>>>16,w+=O>>>16,E+=w>>>16,k+=E>>>16,J=E&65535|k<<16,B=O&65535|w<<16,b=F,h=G,O=h&65535,w=h>>>16,E=b&65535,k=b>>>16,b=I,h=M,O+=h&65535,w+=h>>>16,E+=b&65535,k+=b>>>16,w+=O>>>16,E+=w>>>16,k+=E>>>16,F=E&65535|k<<16,G=O&65535|w<<16,ee=l,ne=m,te=T,a=F,oe=C,de=ue,le=z,$=J,ae=q,xe=Q,Ce=Z,ye=G,Te=W,Ne=X,De=R,fe=B,Y%16===15)for(L=0;L<16;L++)b=s[L],h=d[L],O=h&65535,w=h>>>16,E=b&65535,k=b>>>16,b=s[(L+9)%16],h=d[(L+9)%16],O+=h&65535,w+=h>>>16,E+=b&65535,k+=b>>>16,I=s[(L+1)%16],M=d[(L+1)%16],b=(I>>>1|M<<31)^(I>>>8|M<<24)^I>>>7,h=(M>>>1|I<<31)^(M>>>8|I<<24)^(M>>>7|I<<25),O+=h&65535,w+=h>>>16,E+=b&65535,k+=b>>>16,I=s[(L+14)%16],M=d[(L+14)%16],b=(I>>>19|M<<13)^(M>>>29|I<<3)^I>>>6,h=(M>>>19|I<<13)^(I>>>29|M<<3)^(M>>>6|I<<26),O+=h&65535,w+=h>>>16,E+=b&65535,k+=b>>>16,w+=O>>>16,E+=w>>>16,k+=E>>>16,s[L]=E&65535|k<<16,d[L]=O&65535|w<<16;b=$,h=fe,O=h&65535,w=h>>>16,E=b&65535,k=b>>>16,b=n[0],h=i[0],O+=h&65535,w+=h>>>16,E+=b&65535,k+=b>>>16,w+=O>>>16,E+=w>>>16,k+=E>>>16,n[0]=$=E&65535|k<<16,i[0]=fe=O&65535|w<<16,b=ee,h=ae,O=h&65535,w=h>>>16,E=b&65535,k=b>>>16,b=n[1],h=i[1],O+=h&65535,w+=h>>>16,E+=b&65535,k+=b>>>16,w+=O>>>16,E+=w>>>16,k+=E>>>16,n[1]=ee=E&65535|k<<16,i[1]=ae=O&65535|w<<16,b=ne,h=xe,O=h&65535,w=h>>>16,E=b&65535,k=b>>>16,b=n[2],h=i[2],O+=h&65535,w+=h>>>16,E+=b&65535,k+=b>>>16,w+=O>>>16,E+=w>>>16,k+=E>>>16,n[2]=ne=E&65535|k<<16,i[2]=xe=O&65535|w<<16,b=te,h=Ce,O=h&65535,w=h>>>16,E=b&65535,k=b>>>16,b=n[3],h=i[3],O+=h&65535,w+=h>>>16,E+=b&65535,k+=b>>>16,w+=O>>>16,E+=w>>>16,k+=E>>>16,n[3]=te=E&65535|k<<16,i[3]=Ce=O&65535|w<<16,b=a,h=ye,O=h&65535,w=h>>>16,E=b&65535,k=b>>>16,b=n[4],h=i[4],O+=h&65535,w+=h>>>16,E+=b&65535,k+=b>>>16,w+=O>>>16,E+=w>>>16,k+=E>>>16,n[4]=a=E&65535|k<<16,i[4]=ye=O&65535|w<<16,b=oe,h=Te,O=h&65535,w=h>>>16,E=b&65535,k=b>>>16,b=n[5],h=i[5],O+=h&65535,w+=h>>>16,E+=b&65535,k+=b>>>16,w+=O>>>16,E+=w>>>16,k+=E>>>16,n[5]=oe=E&65535|k<<16,i[5]=Te=O&65535|w<<16,b=de,h=Ne,O=h&65535,w=h>>>16,E=b&65535,k=b>>>16,b=n[6],h=i[6],O+=h&65535,w+=h>>>16,E+=b&65535,k+=b>>>16,w+=O>>>16,E+=w>>>16,k+=E>>>16,n[6]=de=E&65535|k<<16,i[6]=Ne=O&65535|w<<16,b=le,h=De,O=h&65535,w=h>>>16,E=b&65535,k=b>>>16,b=n[7],h=i[7],O+=h&65535,w+=h>>>16,E+=b&65535,k+=b>>>16,w+=O>>>16,E+=w>>>16,k+=E>>>16,n[7]=le=E&65535|k<<16,i[7]=De=O&65535|w<<16,je+=128,e-=128}return e}function Ue(n,i,o){var e=new Int32Array(8),s=new Int32Array(8),d=new Uint8Array(256),l,m=o;for(e[0]=1779033703,e[1]=3144134277,e[2]=1013904242,e[3]=2773480762,e[4]=1359893119,e[5]=2600822924,e[6]=528734635,e[7]=1541459225,s[0]=4089235720,s[1]=2227873595,s[2]=4271175723,s[3]=1595750129,s[4]=2917565137,s[5]=725511199,s[6]=4215389547,s[7]=327033209,Pt(e,s,i,o),o%=128,l=0;l<o;l++)d[l]=i[m-o+l];for(d[o]=128,o=256-128*(o<112?1:0),d[o-9]=0,ke(d,o-8,m/536870912|0,m<<3),Pt(e,s,d,o),l=0;l<8;l++)ke(n,8*l,e[l],s[l]);return 0}function st(n,i){var o=r(),e=r(),s=r(),d=r(),l=r(),m=r(),T=r(),F=r(),C=r();N(o,n[1],n[0]),N(C,i[1],i[0]),p(o,o,C),_(e,n[0],n[1]),_(C,i[0],i[1]),p(e,e,C),p(s,n[3],i[3]),p(s,s,D),p(d,n[2],i[2]),_(d,d,d),N(l,e,o),N(m,d,s),_(T,d,s),_(F,e,o),p(n[0],l,m),p(n[1],F,T),p(n[2],T,m),p(n[3],l,F)}function Ot(n,i,o){var e;for(e=0;e<4;e++)gt(n[e],i[e],o)}function S(n,i){var o=r(),e=r(),s=r();ce(s,i[2]),p(o,i[0],s),p(e,i[1],s),wt(n,e),n[31]^=nr(o)<<7}function ze(n,i,o){var e,s;for(lt(n[0],u),lt(n[1],y),lt(n[2],y),lt(n[3],u),s=255;s>=0;--s)e=o[s/8|0]>>(s&7)&1,Ot(n,i,e),st(i,n),st(n,n),Ot(n,i,e)}function Ye(n,i){var o=[r(),r(),r(),r()];lt(o[0],A),lt(o[1],H),lt(o[2],y),p(o[3],A,H),ze(n,o,i)}function He(n,i,o){var e=new Uint8Array(64),s=[r(),r(),r(),r()],d;for(o||f(i,32),Ue(e,i,32),e[0]&=248,e[31]&=127,e[31]|=64,Ye(s,e),S(n,s),d=0;d<32;d++)i[d+32]=n[d];return 0}var Je=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function Oe(n,i){var o,e,s,d;for(e=63;e>=32;--e){for(o=0,s=e-32,d=e-12;s<d;++s)i[s]+=o-16*i[e]*Je[s-(e-32)],o=Math.floor((i[s]+128)/256),i[s]-=o*256;i[s]+=o,i[e]=0}for(o=0,s=0;s<32;s++)i[s]+=o-(i[31]>>4)*Je[s],o=i[s]>>8,i[s]&=255;for(s=0;s<32;s++)i[s]-=o*Je[s];for(e=0;e<32;e++)i[e+1]+=i[e]>>8,n[e]=i[e]&255}function qe(n){var i=new Float64Array(64),o;for(o=0;o<64;o++)i[o]=n[o];for(o=0;o<64;o++)n[o]=0;Oe(n,i)}function nt(n,i,o,e){var s=new Uint8Array(64),d=new Uint8Array(64),l=new Uint8Array(64),m,T,F=new Float64Array(64),C=[r(),r(),r(),r()];Ue(s,e,32),s[0]&=248,s[31]&=127,s[31]|=64;var ue=o+64;for(m=0;m<o;m++)n[64+m]=i[m];for(m=0;m<32;m++)n[32+m]=s[32+m];for(Ue(l,n.subarray(32),o+32),qe(l),Ye(C,l),S(n,C),m=32;m<64;m++)n[m]=e[m];for(Ue(d,n,o+64),qe(d),m=0;m<64;m++)F[m]=0;for(m=0;m<32;m++)F[m]=l[m];for(m=0;m<32;m++)for(T=0;T<32;T++)F[m+T]+=d[m]*s[T];return Oe(n.subarray(32),F),ue}function ct(n,i){var o=r(),e=r(),s=r(),d=r(),l=r(),m=r(),T=r();return lt(n[2],y),v(n[1],i),V(s,n[1]),p(d,s,U),N(s,s,n[2]),_(d,n[2],d),V(l,d),V(m,l),p(T,m,l),p(o,T,s),p(o,o,d),Le(o,o),p(o,o,s),p(o,o,d),p(o,o,d),p(n[0],o,d),V(e,n[0]),p(e,e,d),br(e,s)&&p(n[0],n[0],me),V(e,n[0]),p(e,e,d),br(e,s)?-1:(nr(n[0])===i[31]>>7&&N(n[0],u,n[0]),p(n[3],n[0],n[1]),0)}function _e(n,i,o,e){var s,d=new Uint8Array(32),l=new Uint8Array(64),m=[r(),r(),r(),r()],T=[r(),r(),r(),r()];if(o<64||ct(T,e))return-1;for(s=0;s<o;s++)n[s]=i[s];for(s=0;s<32;s++)n[s+32]=e[s];if(Ue(l,n,o),qe(l),ze(m,T,l),Ye(T,i.subarray(32)),st(m,T),S(d,m),o-=64,it(i,0,d,0)){for(s=0;s<o;s++)n[s]=0;return-1}for(s=0;s<o;s++)n[s]=i[s+64];return o}var pe=32,Fe=24,Re=32,Me=16,at=32,bt=32,xt=32,ut=32,Or=32,qr=Fe,rf=Re,nf=Me,Et=64,zt=32,$t=64,kr=32,Ur=64;t.lowlevel={crypto_core_hsalsa20:he,crypto_stream_xor:tt,crypto_stream:Se,crypto_stream_salsa20_xor:we,crypto_stream_salsa20:Ke,crypto_onetimeauth:ht,crypto_onetimeauth_verify:rr,crypto_verify_16:Ie,crypto_verify_32:it,crypto_secretbox:Bt,crypto_secretbox_open:Ht,crypto_scalarmult:Ee,crypto_scalarmult_base:ve,crypto_box_beforenm:rt,crypto_box_afternm:_t,crypto_box:St,crypto_box_open:mt,crypto_box_keypair:Pe,crypto_hash:Ue,crypto_sign:nt,crypto_sign_keypair:He,crypto_sign_open:_e,crypto_secretbox_KEYBYTES:pe,crypto_secretbox_NONCEBYTES:Fe,crypto_secretbox_ZEROBYTES:Re,crypto_secretbox_BOXZEROBYTES:Me,crypto_scalarmult_BYTES:at,crypto_scalarmult_SCALARBYTES:bt,crypto_box_PUBLICKEYBYTES:xt,crypto_box_SECRETKEYBYTES:ut,crypto_box_BEFORENMBYTES:Or,crypto_box_NONCEBYTES:qr,crypto_box_ZEROBYTES:rf,crypto_box_BOXZEROBYTES:nf,crypto_sign_BYTES:Et,crypto_sign_PUBLICKEYBYTES:zt,crypto_sign_SECRETKEYBYTES:$t,crypto_sign_SEEDBYTES:kr,crypto_hash_BYTES:Ur,gf:r,D:U,L:Je,pack25519:wt,unpack25519:v,M:p,A:_,S:V,Z:N,pow2523:Le,add:st,set25519:lt,modL:Oe,scalarmult:ze,scalarbase:Ye};function Gr(n,i){if(n.length!==pe)throw new Error("bad key size");if(i.length!==Fe)throw new Error("bad nonce size")}function ff(n,i){if(n.length!==xt)throw new Error("bad public key size");if(i.length!==ut)throw new Error("bad secret key size")}function dt(){for(var n=0;n<arguments.length;n++)if(!(arguments[n]instanceof Uint8Array))throw new TypeError("unexpected type, use Uint8Array")}function Xr(n){for(var i=0;i<n.length;i++)n[i]=0}t.randomBytes=function(n){var i=new Uint8Array(n);return f(i,n),i},t.secretbox=function(n,i,o){dt(n,i,o),Gr(o,i);for(var e=new Uint8Array(Re+n.length),s=new Uint8Array(e.length),d=0;d<n.length;d++)e[d+Re]=n[d];return Bt(s,e,e.length,i,o),s.subarray(Me)},t.secretbox.open=function(n,i,o){dt(n,i,o),Gr(o,i);for(var e=new Uint8Array(Me+n.length),s=new Uint8Array(e.length),d=0;d<n.length;d++)e[d+Me]=n[d];return e.length<32||Ht(s,e,e.length,i,o)!==0?null:s.subarray(Re)},t.secretbox.keyLength=pe,t.secretbox.nonceLength=Fe,t.secretbox.overheadLength=Me,t.scalarMult=function(n,i){if(dt(n,i),n.length!==bt)throw new Error("bad n size");if(i.length!==at)throw new Error("bad p size");var o=new Uint8Array(at);return Ee(o,n,i),o},t.scalarMult.base=function(n){if(dt(n),n.length!==bt)throw new Error("bad n size");var i=new Uint8Array(at);return ve(i,n),i},t.scalarMult.scalarLength=bt,t.scalarMult.groupElementLength=at,t.box=function(n,i,o,e){var s=t.box.before(o,e);return t.secretbox(n,i,s)},t.box.before=function(n,i){dt(n,i),ff(n,i);var o=new Uint8Array(Or);return rt(o,n,i),o},t.box.after=t.secretbox,t.box.open=function(n,i,o,e){var s=t.box.before(o,e);return t.secretbox.open(n,i,s)},t.box.open.after=t.secretbox.open,t.box.keyPair=function(){var n=new Uint8Array(xt),i=new Uint8Array(ut);return Pe(n,i),{publicKey:n,secretKey:i}},t.box.keyPair.fromSecretKey=function(n){if(dt(n),n.length!==ut)throw new Error("bad secret key size");var i=new Uint8Array(xt);return ve(i,n),{publicKey:i,secretKey:new Uint8Array(n)}},t.box.publicKeyLength=xt,t.box.secretKeyLength=ut,t.box.sharedKeyLength=Or,t.box.nonceLength=qr,t.box.overheadLength=t.secretbox.overheadLength,t.sign=function(n,i){if(dt(n,i),i.length!==$t)throw new Error("bad secret key size");var o=new Uint8Array(Et+n.length);return nt(o,n,n.length,i),o},t.sign.open=function(n,i){if(dt(n,i),i.length!==zt)throw new Error("bad public key size");var o=new Uint8Array(n.length),e=_e(o,n,n.length,i);if(e<0)return null;for(var s=new Uint8Array(e),d=0;d<s.length;d++)s[d]=o[d];return s},t.sign.detached=function(n,i){for(var o=t.sign(n,i),e=new Uint8Array(Et),s=0;s<e.length;s++)e[s]=o[s];return e},t.sign.detached.verify=function(n,i,o){if(dt(n,i,o),i.length!==Et)throw new Error("bad signature size");if(o.length!==zt)throw new Error("bad public key size");var e=new Uint8Array(Et+n.length),s=new Uint8Array(Et+n.length),d;for(d=0;d<Et;d++)e[d]=i[d];for(d=0;d<n.length;d++)e[d+Et]=n[d];return _e(s,e,e.length,o)>=0},t.sign.keyPair=function(){var n=new Uint8Array(zt),i=new Uint8Array($t);return He(n,i),{publicKey:n,secretKey:i}},t.sign.keyPair.fromSecretKey=function(n){if(dt(n),n.length!==$t)throw new Error("bad secret key size");for(var i=new Uint8Array(zt),o=0;o<i.length;o++)i[o]=n[32+o];return{publicKey:i,secretKey:new Uint8Array(n)}},t.sign.keyPair.fromSeed=function(n){if(dt(n),n.length!==kr)throw new Error("bad seed size");for(var i=new Uint8Array(zt),o=new Uint8Array($t),e=0;e<32;e++)o[e]=n[e];return He(i,o,!0),{publicKey:i,secretKey:o}},t.sign.publicKeyLength=zt,t.sign.secretKeyLength=$t,t.sign.seedLength=kr,t.sign.signatureLength=Et,t.hash=function(n){dt(n);var i=new Uint8Array(Ur);return Ue(i,n,n.length),i},t.hash.hashLength=Ur,t.verify=function(n,i){return dt(n,i),n.length===0||i.length===0||n.length!==i.length?!1:se(n,0,i,0,n.length)===0},t.setPRNG=function(n){f=n},function(){var n=typeof self<"u"?self.crypto||self.msCrypto:null;if(n&&n.getRandomValues){var i=65536;t.setPRNG(function(o,e){var s,d=new Uint8Array(e);for(s=0;s<e;s+=i)n.getRandomValues(d.subarray(s,s+Math.min(e-s,i)));for(s=0;s<e;s++)o[s]=d[s];Xr(d)})}else typeof Tr<"u"&&(n=Tr("crypto"),n&&n.randomBytes&&t.setPRNG(function(o,e){var s,d=n.randomBytes(e);for(s=0;s<e;s++)o[s]=d[s];Xr(d)}))}()})(typeof Ar<"u"&&Ar.exports?Ar.exports:self.nacl=self.nacl||{})});function lo(t){return JSON.parse(JSON.stringify(t))}var qt=Function.prototype.call.bind(Object.prototype.hasOwnProperty);var ho=new Uint8Array(0);function nn(t,r){if(t===r)return!0;if(t.byteLength!==r.byteLength)return!1;for(let f=0;f<t.byteLength;f++)if(t[f]!==r[f])return!1;return!0}function K(t){if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")}function sf(t,r){if(t.length>=255)throw new TypeError("Alphabet too long");for(var f=new Uint8Array(256),c=0;c<f.length;c++)f[c]=255;for(var x=0;x<t.length;x++){var u=t.charAt(x),y=u.charCodeAt(0);if(f[y]!==255)throw new TypeError(u+" is ambiguous");f[y]=x}var g=t.length,U=t.charAt(0),D=Math.log(g)/Math.log(256),A=Math.log(256)/Math.log(g);function H(se){if(se instanceof Uint8Array||(ArrayBuffer.isView(se)?se=new Uint8Array(se.buffer,se.byteOffset,se.byteLength):Array.isArray(se)&&(se=Uint8Array.from(se))),!(se instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(se.length===0)return"";for(var Ie=0,it=0,et=0,Be=se.length;et!==Be&&se[et]===0;)et++,Ie++;for(var Ae=(Be-et)*A+1>>>0,he=new Uint8Array(Ae);et!==Be;){for(var ge=se[et],we=0,Ke=Ae-1;(ge!==0||we<it)&&Ke!==-1;Ke--,we++)ge+=256*he[Ke]>>>0,he[Ke]=ge%g>>>0,ge=ge/g>>>0;if(ge!==0)throw new Error("Non-zero carry");it=we,et++}for(var Se=Ae-it;Se!==Ae&&he[Se]===0;)Se++;for(var tt=U.repeat(Ie);Se<Ae;++Se)tt+=t.charAt(he[Se]);return tt}function me(se){if(typeof se!="string")throw new TypeError("Expected String");if(se.length===0)return new Uint8Array;var Ie=0;if(se[Ie]!==" "){for(var it=0,et=0;se[Ie]===U;)it++,Ie++;for(var Be=(se.length-Ie)*D+1>>>0,Ae=new Uint8Array(Be);se[Ie];){var he=f[se.charCodeAt(Ie)];if(he===255)return;for(var ge=0,we=Be-1;(he!==0||ge<et)&&we!==-1;we--,ge++)he+=g*Ae[we]>>>0,Ae[we]=he%256>>>0,he=he/256>>>0;if(he!==0)throw new Error("Non-zero carry");et=ge,Ie++}if(se[Ie]!==" "){for(var Ke=Be-et;Ke!==Be&&Ae[Ke]===0;)Ke++;for(var Se=new Uint8Array(it+(Be-Ke)),tt=it;Ke!==Be;)Se[tt++]=Ae[Ke++];return Se}}}function ke(se){var Ie=me(se);if(Ie)return Ie;throw new Error(`Non-${r} character`)}return{encode:H,decodeUnsafe:me,decode:ke}}var cf=sf,af=cf,on=af;var Nr=class{constructor(r,f,c){this.name=r,this.prefix=f,this.baseEncode=c}encode(r){if(r instanceof Uint8Array)return`${this.prefix}${this.baseEncode(r)}`;throw Error("Unknown type, must be binary type")}},Dr=class{constructor(r,f,c){if(this.name=r,this.prefix=f,f.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=f.codePointAt(0),this.baseDecode=c}decode(r){if(typeof r=="string"){if(r.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(r)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(r.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(r){return sn(this,r)}},Kr=class{constructor(r){this.decoders=r}or(r){return sn(this,r)}decode(r){let f=r[0],c=this.decoders[f];if(c!=null)return c.decode(r);throw RangeError(`Unable to decode multibase string ${JSON.stringify(r)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};function sn(t,r){var f,c;return new Kr(Object.assign(Object.assign({},(f=t.decoders)!==null&&f!==void 0?f:{[t.prefix]:t}),(c=r.decoders)!==null&&c!==void 0?c:{[r.prefix]:r}))}var pr=class{constructor(r,f,c,x){this.name=r,this.prefix=f,this.baseEncode=c,this.baseDecode=x,this.encoder=new Nr(r,f,c),this.decoder=new Dr(r,f,x)}encode(r){return this.encoder.encode(r)}decode(r){return this.decoder.decode(r)}};function Lr({name:t,prefix:r,encode:f,decode:c}){return new pr(t,r,f,c)}function yr({name:t,prefix:r,alphabet:f}){let{encode:c,decode:x}=on(f,t);return Lr({prefix:r,name:t,encode:c,decode:u=>K(x(u))})}function xf(t,r,f,c){let x={};for(let A=0;A<r.length;++A)x[r[A]]=A;let u=t.length;for(;t[u-1]==="=";)--u;let y=new Uint8Array(u*f/8|0),g=0,U=0,D=0;for(let A=0;A<u;++A){let H=x[t[A]];if(H===void 0)throw new SyntaxError(`Non-${c} character`);U=U<<f|H,g+=f,g>=8&&(g-=8,y[D++]=255&U>>g)}if(g>=f||255&U<<8-g)throw new SyntaxError("Unexpected end of data");return y}function uf(t,r,f){let c=r[r.length-1]==="=",x=(1<<f)-1,u="",y=0,g=0;for(let U=0;U<t.length;++U)for(g=g<<8|t[U],y+=8;y>f;)y-=f,u+=r[x&g>>y];if(y!==0&&(u+=r[x&g<<f-y]),c)for(;u.length*f&7;)u+="=";return u}function pt({name:t,prefix:r,bitsPerChar:f,alphabet:c}){return Lr({prefix:r,name:t,encode(x){return uf(x,c,f)},decode(x){return xf(x,c,f,t)}})}var Gt=pt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),df=pt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),lf=pt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),bf=pt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),hf=pt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Eo=pt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),vo=pt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),pf=pt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),yf=pt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var ft=yr({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),gf=yr({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var Kn=fr(zr(),1);var Uf=Tn,kn=128,Tf=127,Nf=~Tf,Df=Math.pow(2,31);function Tn(t,r,f){r=r||[],f=f||0;for(var c=f;t>=Df;)r[f++]=t&255|kn,t/=128;for(;t&Nf;)r[f++]=t&255|kn,t>>>=7;return r[f]=t|0,Tn.bytes=f-c+1,r}var Kf=Rr,Lf=128,Un=127;function Rr(t,c){var f=0,c=c||0,x=0,u=c,y,g=t.length;do{if(u>=g)throw Rr.bytes=0,new RangeError("Could not decode varint");y=t[u++],f+=x<28?(y&Un)<<x:(y&Un)*Math.pow(2,x),x+=7}while(y>=Lf);return Rr.bytes=u-c,f}var Cf=Math.pow(2,7),If=Math.pow(2,14),Pf=Math.pow(2,21),zf=Math.pow(2,28),Rf=Math.pow(2,35),Mf=Math.pow(2,42),jf=Math.pow(2,49),Yf=Math.pow(2,56),Ff=Math.pow(2,63),Bf=function(t){return t<Cf?1:t<If?2:t<Pf?3:t<zf?4:t<Rf?5:t<Mf?6:t<jf?7:t<Yf?8:t<Ff?9:10},Hf={encode:Uf,decode:Kf,encodingLength:Bf},Vf=Hf,ar=Vf;function xr(t,r=0){return[ar.decode(t,r),ar.decode.bytes]}function Xt(t,r,f=0){return ar.encode(t,r,f),r}function Wt(t){return ar.encodingLength(t)}function Zt(t,r){let f=r.byteLength,c=Wt(t),x=c+Wt(f),u=new Uint8Array(x+f);return Xt(t,u,0),Xt(f,u,c),u.set(r,x),new Mt(t,f,r,u)}function Mr(t){let r=K(t),[f,c]=xr(r),[x,u]=xr(r.subarray(c)),y=r.subarray(c+u);if(y.byteLength!==x)throw new Error("Incorrect length");return new Mt(f,x,y,r)}function jr(t,r){if(t===r)return!0;{let f=r;return t.code===f.code&&t.size===f.size&&f.bytes instanceof Uint8Array&&nn(t.bytes,f.bytes)}}var Mt=class{constructor(r,f,c,x){this.code=r,this.size=f,this.digest=c,this.bytes=x}};function P({name:t,code:r,encode:f}){return new vr(t,r,f)}var vr=class{constructor(r,f,c){this.name=r,this.code=f,this.encode=c}digest(r){if(r instanceof Uint8Array||r instanceof ReadableStream){let f=this.encode(r);return f instanceof Uint8Array?Zt(this.code,f):f.then(c=>Zt(this.code,c))}else throw Error("Unknown type, must be binary type")}};var{blake2b:j}=Kn.default,Io=P({name:"blake2b-8",code:45569,encode:t=>K(j(t,void 0,1))}),Po=P({name:"blake2b-16",code:45570,encode:t=>K(j(t,void 0,2))}),zo=P({name:"blake2b-24",code:45571,encode:t=>K(j(t,void 0,3))}),Ro=P({name:"blake2b-32",code:45572,encode:t=>K(j(t,void 0,4))}),Mo=P({name:"blake2b-40",code:45573,encode:t=>K(j(t,void 0,5))}),jo=P({name:"blake2b-48",code:45574,encode:t=>K(j(t,void 0,6))}),Yo=P({name:"blake2b-56",code:45575,encode:t=>K(j(t,void 0,7))}),Fo=P({name:"blake2b-64",code:45576,encode:t=>K(j(t,void 0,8))}),Bo=P({name:"blake2b-72",code:45577,encode:t=>K(j(t,void 0,9))}),Ho=P({name:"blake2b-80",code:45578,encode:t=>K(j(t,void 0,10))}),Vo=P({name:"blake2b-88",code:45579,encode:t=>K(j(t,void 0,11))}),$o=P({name:"blake2b-96",code:45580,encode:t=>K(j(t,void 0,12))}),Jo=P({name:"blake2b-104",code:45581,encode:t=>K(j(t,void 0,13))}),qo=P({name:"blake2b-112",code:45582,encode:t=>K(j(t,void 0,14))}),Go=P({name:"blake2b-120",code:45583,encode:t=>K(j(t,void 0,15))}),Xo=P({name:"blake2b-128",code:45584,encode:t=>K(j(t,void 0,16))}),Wo=P({name:"blake2b-136",code:45585,encode:t=>K(j(t,void 0,17))}),Zo=P({name:"blake2b-144",code:45586,encode:t=>K(j(t,void 0,18))}),Qo=P({name:"blake2b-152",code:45587,encode:t=>K(j(t,void 0,19))}),ei=P({name:"blake2b-160",code:45588,encode:t=>K(j(t,void 0,20))}),ti=P({name:"blake2b-168",code:45589,encode:t=>K(j(t,void 0,21))}),ri=P({name:"blake2b-176",code:45590,encode:t=>K(j(t,void 0,22))}),ni=P({name:"blake2b-184",code:45591,encode:t=>K(j(t,void 0,23))}),fi=P({name:"blake2b-192",code:45592,encode:t=>K(j(t,void 0,24))}),oi=P({name:"blake2b-200",code:45593,encode:t=>K(j(t,void 0,25))}),ii=P({name:"blake2b-208",code:45594,encode:t=>K(j(t,void 0,26))}),si=P({name:"blake2b-216",code:45595,encode:t=>K(j(t,void 0,27))}),ci=P({name:"blake2b-224",code:45596,encode:t=>K(j(t,void 0,28))}),ai=P({name:"blake2b-232",code:45597,encode:t=>K(j(t,void 0,29))}),xi=P({name:"blake2b-240",code:45598,encode:t=>K(j(t,void 0,30))}),ui=P({name:"blake2b-248",code:45599,encode:t=>K(j(t,void 0,31))}),ur=P({name:"blake2b-256",code:45600,encode:t=>K(j(t,void 0,32))}),di=P({name:"blake2b-264",code:45601,encode:t=>K(j(t,void 0,33))}),li=P({name:"blake2b-272",code:45602,encode:t=>K(j(t,void 0,34))}),bi=P({name:"blake2b-280",code:45603,encode:t=>K(j(t,void 0,35))}),hi=P({name:"blake2b-288",code:45604,encode:t=>K(j(t,void 0,36))}),pi=P({name:"blake2b-296",code:45605,encode:t=>K(j(t,void 0,37))}),yi=P({name:"blake2b-304",code:45606,encode:t=>K(j(t,void 0,38))}),gi=P({name:"blake2b-312",code:45607,encode:t=>K(j(t,void 0,39))}),wi=P({name:"blake2b-320",code:45608,encode:t=>K(j(t,void 0,40))}),mi=P({name:"blake2b-328",code:45609,encode:t=>K(j(t,void 0,41))}),Ei=P({name:"blake2b-336",code:45610,encode:t=>K(j(t,void 0,42))}),vi=P({name:"blake2b-344",code:45611,encode:t=>K(j(t,void 0,43))}),_i=P({name:"blake2b-352",code:45612,encode:t=>K(j(t,void 0,44))}),Ai=P({name:"blake2b-360",code:45613,encode:t=>K(j(t,void 0,45))}),Si=P({name:"blake2b-368",code:45614,encode:t=>K(j(t,void 0,46))}),Oi=P({name:"blake2b-376",code:45615,encode:t=>K(j(t,void 0,47))}),ki=P({name:"blake2b-384",code:45616,encode:t=>K(j(t,void 0,48))}),Ui=P({name:"blake2b-392",code:45617,encode:t=>K(j(t,void 0,49))}),Ti=P({name:"blake2b-400",code:45618,encode:t=>K(j(t,void 0,50))}),Ni=P({name:"blake2b-408",code:45619,encode:t=>K(j(t,void 0,51))}),Di=P({name:"blake2b-416",code:45620,encode:t=>K(j(t,void 0,52))}),Ki=P({name:"blake2b-424",code:45621,encode:t=>K(j(t,void 0,53))}),Li=P({name:"blake2b-432",code:45622,encode:t=>K(j(t,void 0,54))}),Ci=P({name:"blake2b-440",code:45623,encode:t=>K(j(t,void 0,55))}),Ii=P({name:"blake2b-448",code:45624,encode:t=>K(j(t,void 0,56))}),Pi=P({name:"blake2b-456",code:45625,encode:t=>K(j(t,void 0,57))}),zi=P({name:"blake2b-464",code:45626,encode:t=>K(j(t,void 0,58))}),Ri=P({name:"blake2b-472",code:45627,encode:t=>K(j(t,void 0,59))}),Mi=P({name:"blake2b-480",code:45628,encode:t=>K(j(t,void 0,60))}),ji=P({name:"blake2b-488",code:45629,encode:t=>K(j(t,void 0,61))}),Yi=P({name:"blake2b-496",code:45630,encode:t=>K(j(t,void 0,62))}),Fi=P({name:"blake2b-504",code:45631,encode:t=>K(j(t,void 0,63))}),Bi=P({name:"blake2b-512",code:45632,encode:t=>K(j(t,void 0,64))});var Ln=fr(zr(),1);var $f=function(t,r,f,c){function x(u){return u instanceof f?u:new f(function(y){y(u)})}return new(f||(f=Promise))(function(u,y){function g(A){try{D(c.next(A))}catch(H){y(H)}}function U(A){try{D(c.throw(A))}catch(H){y(H)}}function D(A){A.done?u(A.value):x(A.value).then(g,U)}D((c=c.apply(t,r||[])).next())})},{blake2b:Jf,blake2bInit:qf,blake2bUpdate:Gf,blake2bFinal:Xf}=Ln.default,Wf=P({name:"blake2b-256",code:45600,encode:t=>$f(void 0,void 0,void 0,function*(){if(t instanceof ReadableStream){let r=qf(32),f=t.getReader();for(;;){let c=yield f.read();if(c.done)break;Gf(r,K(c.value))}return Xf(r)}else return K(Jf(t,void 0,32))})});var Cn;function In(t,r){let{bytes:f,version:c}=t;switch(c){case 0:return Qf(f,Yr(t),r??ft.encoder);default:return eo(f,Yr(t),r??Gt.encoder)}}var Pn=new WeakMap;function Yr(t){let r=Pn.get(t);if(r==null){let f=new Map;return Pn.set(t,f),f}return r}var _r=class t{constructor(r,f,c,x){this[Cn]="CID",this.code=f,this.version=r,this.multihash=c,this.bytes=x,this["/"]=x}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{let{code:r,multihash:f}=this;if(r!==dr)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(f.code!==to)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return t.createV0(f)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{let{code:r,digest:f}=this.multihash,c=Zt(r,f);return t.createV1(this.code,c)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(r){return t.equals(this,r)}static equals(r,f){let c=f;return c!=null&&r.code===c.code&&r.version===c.version&&jr(r.multihash,c.multihash)}toString(r){return In(this,r)}toJSON(){return{"/":In(this)}}link(){return this}[(Cn=Symbol.toStringTag,Symbol.for("nodejs.util.inspect.custom"))](){return`CID(${this.toString()})`}static asCID(r){if(r==null)return null;let f=r;if(f instanceof t)return f;if(f["/"]!=null&&f["/"]===f.bytes||f.asCID===f){let{version:c,code:x,multihash:u,bytes:y}=f;return new t(c,x,u,y??zn(c,x,u.bytes))}else if(f[ro]===!0){let{version:c,multihash:x,code:u}=f,y=Mr(x);return t.create(c,u,y)}else return null}static create(r,f,c){if(typeof f!="number")throw new Error("String codecs are no longer supported");if(!(c.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(r){case 0:{if(f!==dr)throw new Error(`Version 0 CID must use dag-pb (code: ${dr}) block encoding`);return new t(r,f,c,c.bytes)}case 1:{let x=zn(r,f,c.bytes);return new t(r,f,c,x)}default:throw new Error("Invalid version")}}static createV0(r){return t.create(0,dr,r)}static createV1(r,f){return t.create(1,r,f)}static decode(r){let[f,c]=t.decodeFirst(r);if(c.length!==0)throw new Error("Incorrect length");return f}static decodeFirst(r){let f=t.inspectBytes(r),c=f.size-f.multihashSize,x=K(r.subarray(c,c+f.multihashSize));if(x.byteLength!==f.multihashSize)throw new Error("Incorrect length");let u=x.subarray(f.multihashSize-f.digestSize),y=new Mt(f.multihashCode,f.digestSize,u,x);return[f.version===0?t.createV0(y):t.createV1(f.codec,y),r.subarray(f.size)]}static inspectBytes(r){let f=0,c=()=>{let[H,me]=xr(r.subarray(f));return f+=me,H},x=c(),u=dr;if(x===18?(x=0,f=0):u=c(),x!==0&&x!==1)throw new RangeError(`Invalid CID version ${x}`);let y=f,g=c(),U=c(),D=f+U,A=D-y;return{version:x,codec:u,multihashCode:g,digestSize:U,multihashSize:A,size:D}}static parse(r,f){let[c,x]=Zf(r,f),u=t.decode(x);if(u.version===0&&r[0]!=="Q")throw Error("Version 0 CID string must not include multibase prefix");return Yr(u).set(c,r),u}};function Zf(t,r){switch(t[0]){case"Q":{let f=r??ft;return[ft.prefix,f.decode(`${ft.prefix}${t}`)]}case ft.prefix:{let f=r??ft;return[ft.prefix,f.decode(t)]}case Gt.prefix:{let f=r??Gt;return[Gt.prefix,f.decode(t)]}default:{if(r==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[t[0],r.decode(t)]}}}function Qf(t,r,f){let{prefix:c}=f;if(c!==ft.prefix)throw Error(`Cannot string encode V0 in ${f.name} encoding`);let x=r.get(c);if(x==null){let u=f.encode(t).slice(1);return r.set(c,u),u}else return x}function eo(t,r,f){let{prefix:c}=f,x=r.get(c);if(x==null){let u=f.encode(t);return r.set(c,u),u}else return x}var dr=112,to=18;function zn(t,r,f){let c=Wt(t),x=c+Wt(r),u=new Uint8Array(x+f.byteLength);return Xt(t,u,0),Xt(r,u,c),u.set(f,x),u}var ro=Symbol.for("@ipld/js-cid/CID");var Yn=fr(Rn(),1),ie=fr(Mn(),1),jn=(()=>{let t=new TextDecoder;return r=>t.decode(r)})(),Dt=(()=>{let t=new TextEncoder;return r=>t.encode(r)})(),fo=t=>{let r=typeof t=="string"?Dt(t):t,f=ur.digest(r);return ft.encode(f.bytes)},Nt=t=>new Uint8Array(atob(t).split("").map(r=>r.charCodeAt(0)));var jt="edwards25519sha512batch",Kt="curve25519xsalsa20poly1305",Lt="xsalsa20poly1305",oo="externalkm32",Qt=t=>{if(!(t instanceof Uint8Array))throw TypeError("Unsupported type");return btoa(Array.from(t).map(r=>String.fromCharCode(r)).join(""))},u0=t=>{if(t===jt){let r=ie.default.sign.keyPair(),f={type:t,publicKey:r.publicKey};return Object.defineProperty(f,"secretKey",{value:r.secretKey}),f}else if(t===Kt){let r=ie.default.box.keyPair(),f={type:t,publicKey:r.publicKey};return Object.defineProperty(f,"secretKey",{value:r.secretKey}),f}else if(t===Lt){let r={type:t};return Object.defineProperty(r,"secretKey",{value:ie.default.randomBytes(ie.default.secretbox.keyLength)}),r}else if(t===oo){let r={type:t};return Object.defineProperty(r,"secretKey",{value:ie.default.randomBytes(32)}),r}throw new Error("Unsupported key type")},d0=()=>Qt(ie.default.randomBytes(18)),l0=(t,r,f)=>[jt,Kt,Lt].includes(t)?new Promise(c=>{(0,Yn.default)(r,f,{N:16384,r:8,p:1,dkLen:t===jt?ie.default.sign.seedLength:t===Kt?ie.default.box.secretKeyLength:t===Lt?ie.default.secretbox.keyLength:0,encoding:"binary"},x=>{let u=new Uint8Array(x);if(t===jt){let y=ie.default.sign.keyPair.fromSeed(u);c({type:t,secretKey:y.secretKey,publicKey:y.publicKey})}else if(t===Kt){let y=ie.default.box.keyPair.fromSecretKey(u);c({type:t,secretKey:y.secretKey,publicKey:y.publicKey})}else t===Lt&&c({type:t,secretKey:u})})}):Promise.reject(new Error("Unsupported type")),Br=(t,r)=>{if(t.type===jt||t.type===Kt){if(!r){if(!t.publicKey)throw new Error("Unsupported operation: no public key to export");return JSON.stringify([t.type,Qt(t.publicKey),null],void 0,0)}if(!t.secretKey)throw new Error("Unsupported operation: no secret key to export");return JSON.stringify([t.type,null,Qt(t.secretKey)],void 0,0)}else if(t.type===Lt){if(!r)throw new Error("Unsupported operation: no public key to export");if(!t.secretKey)throw new Error("Unsupported operation: no secret key to export");return JSON.stringify([t.type,null,Qt(t.secretKey)],void 0,0)}throw new Error("Unsupported key type")},Ct=t=>{let r=JSON.parse(t);if(!r||r.length!==3)throw new Error("Invalid key object");if(r[0]===jt){if(r[2]){let f=ie.default.sign.keyPair.fromSecretKey(Nt(r[2])),c={type:r[0],publicKey:f.publicKey};return Object.defineProperty(c,"secretKey",{value:f.secretKey}),c}else if(r[1])return{type:r[0],publicKey:new Uint8Array(Nt(r[1]))};throw new Error("Missing secret or public key")}else if(r[0]===Kt){if(r[2]){let f=ie.default.box.keyPair.fromSecretKey(Nt(r[2])),c={type:r[0],publicKey:f.publicKey};return Object.defineProperty(c,"secretKey",{value:f.secretKey}),c}else if(r[1])return{type:r[0],publicKey:new Uint8Array(Nt(r[1]))};throw new Error("Missing secret or public key")}else if(r[0]===Lt){if(!r[2])throw new Error("Secret key missing");let f={type:r[0]};return Object.defineProperty(f,"secretKey",{value:new Uint8Array(Nt(r[2]))}),f}throw new Error("Unsupported key type")};var Yt=t=>{let r=typeof t=="string"?Ct(t):t,f=Br(r,!r.publicKey);return fo(f)};var Fn=(t,r,f)=>{let c=typeof t=="string"?Ct(t):t;if(c.type!==jt)throw new Error("Unsupported algorithm");if(!c.publicKey)throw new Error("Public key missing");let x=Nt(f),u=Dt(r);if(!ie.default.sign.detached.verify(u,x,c.publicKey))throw new Error("Invalid signature")},Bn=(t,r,f)=>{let c=typeof t=="string"?Ct(t):t;if(c.type===Lt){if(!c.secretKey)throw new Error("Secret key missing");let x=ie.default.randomBytes(ie.default.secretbox.nonceLength),u;if(f){u=new Uint8Array(x);let A=ie.default.hash(Dt(f)),H=Math.min(A.length,x.length);for(let me=0;me<H;me++)u[me]^=A[me]}else u=x;let y=Dt(r),g=ie.default.secretbox(y,u,c.secretKey),U=new Uint8Array(x.length+g.length);return U.set(x),U.set(g,x.length),Qt(U)}else if(c.type===Kt){if(!c.publicKey)throw new Error("Public key missing");let x=ie.default.randomBytes(ie.default.box.nonceLength),u;if(f){u=new Uint8Array(x);let H=ie.default.hash(Dt(f)),me=Math.min(H.length,x.length);for(let ke=0;ke<me;ke++)u[ke]^=H[ke]}else u=x;let y=Dt(r),g=ie.default.box.keyPair(),U=ie.default.box(y,u,c.publicKey,g.secretKey);crypto.getRandomValues(g.secretKey),g.secretKey.fill(0);let D=new Uint8Array(ie.default.box.publicKeyLength+x.length+U.length);return D.set(g.publicKey),D.set(x,ie.default.box.publicKeyLength),D.set(U,ie.default.box.publicKeyLength+x.length),Qt(D)}throw new Error("Unsupported algorithm")},Hn=(t,r,f)=>{let c=typeof t=="string"?Ct(t):t;if(c.type===Lt){if(!c.secretKey)throw new Error("Secret key missing");let x=Nt(r),u=x.slice(0,ie.default.secretbox.nonceLength),y=x.slice(ie.default.secretbox.nonceLength,x.length);if(f){let U=ie.default.hash(Dt(f)),D=Math.min(U.length,u.length);for(let A=0;A<D;A++)u[A]^=U[A]}let g=ie.default.secretbox.open(y,u,c.secretKey);if(!g)throw new Error("Could not decrypt message");return jn(g)}else if(c.type===Kt){if(!c.secretKey)throw new Error("Secret key missing");let x=Nt(r),u=x.slice(0,ie.default.box.publicKeyLength),y=x.slice(ie.default.box.publicKeyLength,ie.default.box.publicKeyLength+ie.default.box.nonceLength),g=x.slice(ie.default.box.publicKeyLength+ie.default.box.nonceLength);if(f){let D=ie.default.hash(Dt(f)),A=Math.min(D.length,y.length);for(let H=0;H<A;H++)y[H]^=D[H]}let U=ie.default.box.open(g,y,u,c.secretKey);if(!U)throw new Error("Could not decrypt message");return jn(U)}throw new Error("Unsupported algorithm")};var Vn=fr(of(),1),er={RAW:0,JSON:512,SHELTER_CONTRACT_MANIFEST:5316096,SHELTER_CONTRACT_TEXT:5316097,SHELTER_CONTRACT_DATA:5316098,SHELTER_FILE_MANIFEST:5316099,SHELTER_FILE_CHUNK:5316100};function lr(t,r=er.RAW){let f=typeof t=="string"?new TextEncoder().encode(t):t,c=ur.digest(f);return _r.create(1,r,c).toString(ft)}function Sr(t){let r=typeof t=="string"?new TextEncoder().encode(t):t,f=ur.digest(r);return ft.encode(f.bytes)}var w0=async t=>{let r=new TextEncoder,f=r.encode(t.endpoint),c=r.encode(t.keys.p256dh),x=r.encode(t.keys.auth),u=new ArrayBuffer(8+(4+f.byteLength)+(2+c.byteLength)+(2+x.byteLength)),y=new Uint8Array(u),g=new DataView(u),U=0;g.setFloat64(U,t.expirationTime==null?NaN:t.expirationTime,!1),U+=8,g.setUint32(U,f.byteLength,!1),U+=4,y.set(f,U),U+=f.byteLength,g.setUint16(U,c.byteLength,!1),U+=2,y.set(c,U),U+=c.byteLength,g.setUint16(U,x.byteLength,!1),U+=2,y.set(x,U);let D=await crypto.subtle.digest("SHA-384",u),A=Vn.Buffer.from(D.slice(0,16));return A[6]=128|A[6]&15,A[8]=128|A[8]&63,[A.slice(0,4),A.slice(4,6),A.slice(6,8),A.slice(8,10),A.slice(10,16)].map(H=>H.toString("hex")).join("-")};var io=()=>hr("chelonia/rootState"),so=Object.create(null,{_isSignedData:{value:!0}}),$n=t=>Object.setPrototypeOf(t,so),Jn=t=>!!t&&!!Object.getPrototypeOf(t)?._isSignedData;var co=function(t,r,f,c){if(!t)throw new Rt("Missing contract state");if(!It(f))throw new Rt("Invalid message format");if(!Number.isSafeInteger(r)||r<0)throw new Rt(`Height ${r} is invalid or out of range`);let[x,u,y]=f._signedData,g=t._vm?.authorizedKeys?.[u];if(!g||r>g._notAfterHeight||r<g._notBeforeHeight||!g.purpose.includes("sig"))throw new Qr(`Key ${u} is unauthorized or expired for the current contract`);let U=g.data,D=Sr(`${Sr(c)}${Sr(x)}`);try{Fn(U,D,y);let A=JSON.parse(x);return[u,A]}catch(A){throw new Rt(A?.message||A)}};var Ft=(t,r,f,c,x,u)=>{let y=()=>f,g,U=()=>(g||(g=co(r||io()[t],c,f,x),u&&(g[1]=u(g[1]))),g[1]);return $n({get signingKeyId(){return g?g[0]:qn(f)},get serialize(){return y},get context(){return[t,f,c,x]},get toString(){return()=>JSON.stringify(this.serialize())},get valueOf(){return U},get toJSON(){return this.serialize},get get(){return D=>D!=="_signedData"?f[D]:void 0}})},qn=t=>{if(!It(t))throw new Rt("Invalid message format");return t._signedData[1]},It=t=>!(!t||typeof t!="object"||!qt(t,"_signedData")||!Array.isArray(t._signedData)||t._signedData.length!==3||t._signedData.map(r=>typeof r).filter(r=>r!=="string").length!==0),Gn=t=>{if(!It(t))throw new Rt("Invalid message format");let r=()=>t,f,c=()=>(f||(f=[t._signedData[1],JSON.parse(t._signedData[0])]),f[1]);return $n({get signingKeyId(){return f?f[0]:qn(t)},get serialize(){return r},get toString(){return()=>JSON.stringify(this.serialize())},get valueOf(){return c},get toJSON(){return this.serialize},get get(){return x=>x!=="_signedData"?t[x]:void 0}})};var Hr=()=>hr("chelonia/rootState"),ao=Object.create(null,{_isEncryptedData:{value:!0}}),Vr=t=>Object.setPrototypeOf(t,ao),xo=t=>!!t&&!!Object.getPrototypeOf(t)?._isEncryptedData,uo=function(t,r,f,c){let x=typeof t=="string"?Hr()[t]:t,u=x?._vm?.authorizedKeys?.[r];if(!u?.purpose.includes("enc"))throw new Error(`Encryption key ID ${r} is missing or is missing encryption purpose`);if(u._notAfterHeight!=null){let U=x._vm.authorizedKeys[r].name,D=Object.values(x._vm?.authorizedKeys).find(A=>A._notAfterHeight==null&&A.name===U&&A.purpose.includes("enc"))?.id;if(!D)throw new Error(`Encryption key ID ${r} has been revoked and no new key exists by the same name (${U})`);r=D}let y=x._vm?.authorizedKeys?.[r].data;if(!y)throw new Error(`Missing encryption key ${r}`);let g=typeof y=="string"?Ct(y):y;return[Yt(g),Bn(g,JSON.stringify(f,(U,D)=>D&&qt(D,"serialize")&&typeof D.serialize=="function"?D.serialize.length===1?D.serialize(c):D.serialize():D),c)]},Xn=function(t,r,f,c,x,u){if(!t)throw new or("Missing contract state");if(typeof f.valueOf=="function"&&(f=f.valueOf()),!$r(f))throw new or("Invalid message format");let[y,g]=f,U=c[y];if(!U)throw new Zr(`Key ${y} not found`,{cause:y});let D=t._vm?.authorizedKeys?.[y];if(!D||r>D._notAfterHeight||r<D._notBeforeHeight||!D.purpose.includes("enc"))throw new Wr(`Key ${y} is unauthorized or expired for the current contract`);let A=typeof U=="string"?Ct(U):U;try{let H=JSON.parse(Hn(A,g,x));return typeof u=="function"&&u(H,y),H}catch(H){throw new or(H?.message||H)}},C0=(t,r,f)=>{if(!t||f===void 0||!r)throw new TypeError("Invalid invocation");let c=uo.bind(null,t,r,f);return Vr({get encryptionKeyId(){return r},get serialize(){return x=>c(x||"")},get toString(){return x=>JSON.stringify(this.serialize(x))},get valueOf(){return()=>f}})};var tr=(t,r,f,c,x,u,y)=>{let g,U=()=>{if(g)return g;if(!r||!x){let D=Hr();r=r||D[t],x=x??D.secretKeys}return g=Xn(r,c,f,x,u||"",y),It(g)&&(g=Ft(t,r,g,c,u||"")),g};return Vr({get encryptionKeyId(){return Zn(f)},get serialize(){return()=>f},get toString(){return()=>JSON.stringify(this.serialize())},get valueOf(){return U},get toJSON(){return this.serialize}})},Wn=(t,r,f,c,x,u,y)=>{let g,U=()=>{if(g)return g;let D=Hr(),A=D[t];return g=Xn(A,NaN,f,x??D.secretKeys,u||"",y),It(g)?Ft(t,A,g,NaN,u||""):g};return Vr({get encryptionKeyId(){return Zn(f)},get serialize(){return()=>f},get toString(){return()=>JSON.stringify(this.serialize())},get valueOf(){return U},get toJSON(){return this.serialize}})};var Zn=t=>{if(!$r(t))throw new or("Invalid message format");return t[0]},$r=t=>!(!Array.isArray(t)||t.length!==2||t.map(r=>typeof r).filter(r=>r!=="string").length!==0),Jr=t=>{if(t!=null)if(xo(t))try{return{encryptionKeyId:t.encryptionKeyId,data:t.valueOf()}}catch(r){console.warn("unwrapMaybeEncryptedData: Unable to decrypt",r)}else return{encryptionKeyId:null,data:t}},vt=(t,r,f,c,x,u,y)=>$r(f)?tr(t,r,f,c,x,u,y):(y?.(f,""),f);var tf=(t,r,f,c,x,u)=>{let y=t.op,g=t.height,U=y===$e.OP_ACTION_ENCRYPTED?tr(f,u,c,g,x,r,void 0):c;return[$e.OP_KEY_ADD,$e.OP_KEY_UPDATE].includes(y)?U.map(D=>vt(f,u,D,g,x,r,A=>{if(A.meta?.private?.content&&(A.meta.private.content=tr(f,u,A.meta.private.content,g,x,r,H=>{let me=Yt(H);if(me!==A.id)throw new Error(`Key ID mismatch. Expected to decrypt key ID ${A.id} but got ${me}`)})),A.meta?.keyRequest?.reference)try{A.meta.keyRequest.reference=vt(f,u,A.meta.keyRequest.reference,g,x,r)?.valueOf()}catch{delete A.meta.keyRequest.reference}if(A.meta?.keyRequest?.contractID)try{A.meta.keyRequest.contractID=vt(f,u,A.meta.keyRequest.contractID,g,x,r)?.valueOf()}catch{delete A.meta.keyRequest.contractID}})):(y===$e.OP_CONTRACT&&(U.keys=U.keys?.map(D=>vt(f,u,D,g,x,r,A=>{if(!A.meta?.private?.content)return;let H=tr,me=f;A.meta.private.content=H(me,u,A.meta.private.content,g,x,r,ke=>{let se=Yt(ke);if(se!==A.id)throw new Error(`Key ID mismatch. Expected to decrypt key ID ${A.id} but got ${se}`)})}))),y===$e.OP_KEY_SHARE?vt(f,u,U,g,x,r,D=>{D.keys?.forEach(A=>{if(!A.meta?.private?.content)return;let H=D.foreignContractID?Wn:tr,me=D.foreignContractID||f;A.meta.private.content=H(me,u,A.meta.private.content,g,x,r,ke=>{let se=Yt(ke);if(se!==A.id)throw new Error(`Key ID mismatch. Expected to decrypt key ID ${A.id} but got ${se}`)})})}):y===$e.OP_KEY_REQUEST?vt(f,u,U,g,x,r,D=>{D.replyWith=Ft(D.contractID,void 0,D.replyWith,D.height,r)}):y===$e.OP_ACTION_UNENCRYPTED&&It(U)?Ft(f,u,U,g,r):y===$e.OP_ACTION_ENCRYPTED?U:y===$e.OP_KEY_DEL?U.map(D=>vt(f,u,D,g,x,r,void 0)):y===$e.OP_KEY_REQUEST_SEEN?vt(f,u,c,g,x,r,void 0):y===$e.OP_ATOMIC?U.map(([D,A])=>[D,tf({...t,op:D},r,f,A,x,u)]):U)},$e=class t{_mapping;_head;_message;_signedMessageData;_direction;_decryptedValue;_innerSigningKeyId;static OP_CONTRACT="c";static OP_ACTION_ENCRYPTED="ae";static OP_ACTION_UNENCRYPTED="au";static OP_KEY_ADD="ka";static OP_KEY_DEL="kd";static OP_KEY_UPDATE="ku";static OP_PROTOCOL_UPGRADE="pu";static OP_PROP_SET="ps";static OP_PROP_DEL="pd";static OP_CONTRACT_AUTH="ca";static OP_CONTRACT_DEAUTH="cd";static OP_ATOMIC="a";static OP_KEY_SHARE="ks";static OP_KEY_REQUEST="kr";static OP_KEY_REQUEST_SEEN="krs";static createV1_0({contractID:r,previousHEAD:f=null,previousKeyOp:c=null,height:x=Number.MAX_SAFE_INTEGER,op:u,manifest:y}){let g={version:"1.0.0",previousHEAD:f,previousKeyOp:c,height:x,contractID:r,op:u[0],manifest:y};return new this(Qn(g,u[1]))}static cloneWith(r,f,c){let x=Object.assign({},r,c);return new this(Qn(x,f[1]))}static deserialize(r,f,c,x=Jr){if(!r)throw new Error(`deserialize bad value: ${r}`);let{head:u,...y}=JSON.parse(r),g=JSON.parse(u),U=g.op===t.OP_CONTRACT?lr(r,er.SHELTER_CONTRACT_DATA):g.contractID;if(!c?._vm?.authorizedKeys&&g.op===t.OP_CONTRACT){let A=Gn(y),H=Object.fromEntries(A.valueOf()?.keys.map(me=>{let ke=x(me);return ke?[ke.data.id,ke.data]:null}).filter(Boolean));c={_vm:{type:g.type,authorizedKeys:H}}}let D=Ft(U,c,y,g.height,u,A=>tf(g,u,U,A,f,c));return new this({direction:"incoming",mapping:{key:lr(r,er.SHELTER_CONTRACT_DATA),value:r},head:g,signedMessageData:D})}static deserializeHEAD(r){if(!r)throw new Error(`deserialize bad value: ${r}`);let f,c,x={get head(){return f===void 0&&(f=JSON.parse(JSON.parse(r).head)),f},get hash(){return c||(c=lr(r,er.SHELTER_CONTRACT_DATA)),c},get contractID(){return x.head?.contractID??x.hash},description(){return`<op_${this.head.op}|${this.hash} of ${this.contractID}>`},get isFirstMessage(){return!x.head?.contractID}};return x}constructor(r){this._direction=r.direction,this._mapping=r.mapping,this._head=r.head,this._signedMessageData=r.signedMessageData;let f=this.opType(),c=!0,x=(u,y)=>{switch(u){case t.OP_CONTRACT:if(!this.isFirstMessage()||!c)throw new Error("OP_CONTRACT: must be first message");break;case t.OP_ATOMIC:if(!c)throw new Error("OP_ATOMIC not allowed inside of OP_ATOMIC");if(!Array.isArray(y))throw new TypeError("OP_ATOMIC must be of an array type");c=!1,y.forEach(([g,U])=>x(g,U));break;case t.OP_KEY_ADD:case t.OP_KEY_DEL:case t.OP_KEY_UPDATE:if(!Array.isArray(y))throw new TypeError("OP_KEY_{ADD|DEL|UPDATE} must be of an array type");break;case t.OP_KEY_SHARE:case t.OP_KEY_REQUEST:case t.OP_KEY_REQUEST_SEEN:case t.OP_ACTION_ENCRYPTED:case t.OP_ACTION_UNENCRYPTED:break;default:throw new Error(`unsupported op: ${u}`)}};Object.defineProperty(this,"_message",{get:(u=>()=>{let y=this._signedMessageData.valueOf();return u||(x(f,y),u=!0),y})()})}decryptedValue(){if(this._decryptedValue)return this._decryptedValue;try{let r=this.message(),f=Jr(r);return f?.data&&(Jn(f.data)?(this._innerSigningKeyId=f.data.signingKeyId,this._decryptedValue=f.data.valueOf()):this._decryptedValue=f.data),this._decryptedValue}catch{return}}innerSigningKeyId(){return this._decryptedValue||this.decryptedValue(),this._innerSigningKeyId}head(){return this._head}message(){return this._message}op(){return[this.head().op,this.message()]}rawOp(){return[this.head().op,this._signedMessageData]}opType(){return this.head().op}opValue(){return this.message()}signingKeyId(){return this._signedMessageData.signingKeyId}manifest(){return this.head().manifest}description(){let r=this.opType(),f=`<op_${r}`;if(r===t.OP_ACTION_UNENCRYPTED)try{let c=this.opValue().valueOf();typeof c.action=="string"&&(f+=`|${c.action}`)}catch(c){console.warn("Error on .description()",this.hash(),c)}return`${f}|${this.hash()} of ${this.contractID()}>`}isFirstMessage(){return!this.head().contractID}contractID(){return this.head().contractID||this.hash()}serialize(){return this._mapping.value}hash(){return this._mapping.key}previousKeyOp(){return this._head.previousKeyOp}height(){return this._head.height}id(){throw new Error("SPMessage.id() was called but it has been removed")}direction(){return this._direction}isKeyOp(){let r;return!!(ef.includes(this.opType())||this.opType()===t.OP_ATOMIC&&Array.isArray(r=this.opValue())&&r.some(([f])=>ef.includes(f)))}static get[en](){return"SPMessage"}static[tn](r){return[r.serialize(),r.direction(),r.decryptedValue(),r.innerSigningKeyId()]}static[rn]([r,f,c,x]){let u=t.deserialize(r);return u._direction=f,u._decryptedValue=c,u._innerSigningKeyId=x,u}};function Qn(t,r){let f;return{direction:qt(r,"recreate")?"outgoing":"incoming",get mapping(){if(!f){let c=JSON.stringify(t),x={...r.serialize(c),head:c},u=JSON.stringify(x);f={key:lr(u,er.SHELTER_CONTRACT_DATA),value:u}}return f},head:t,signedMessageData:r}}var ef=[$e.OP_CONTRACT,$e.OP_KEY_ADD,$e.OP_KEY_DEL,$e.OP_KEY_UPDATE];export{lo as a,Rn as b,Mn as c,jt as d,Kt as e,u0 as f,d0 as g,l0 as h,Br as i,Yt as j,Bn as k,Hn as l,w0 as m,C0 as n,$e as o};
/*! Bundled license information:

scrypt-async/scrypt-async.js:
  (*!
   * Fast "async" scrypt implementation in JavaScript.
   * Copyright (c) 2013-2016 Dmitry Chestnykh | BSD License
   * https://github.com/dchest/scrypt-async-js
   *)
*/
//# sourceMappingURL=chunk-5SBNFUND-cached.js.map
