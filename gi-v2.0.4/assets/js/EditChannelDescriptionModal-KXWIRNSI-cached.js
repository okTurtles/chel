import{a as R}from"./chunk-LIW6QCF4-cached.js";import{a as x}from"./chunk-WMVHT3GJ-cached.js";import{a as y}from"./chunk-XHZPFS4B-cached.js";import{a as C,c as b}from"./chunk-6P74MMKF-cached.js";import"./chunk-VUYUNB2W-cached.js";import{a as E}from"./chunk-FTWBMR5D-cached.js";import{a as S}from"./chunk-GA3LN23N-cached.js";import"./chunk-3VFZYJBQ-cached.js";import"./chunk-MEHASGB7-cached.js";import"./chunk-Z7X5SDSD-cached.js";import"./chunk-TEH4GFTX-cached.js";import{b as p}from"./chunk-QVCKPSEU-cached.js";import{a as h}from"./chunk-OMOH7TRL-cached.js";import{b as v,d as g}from"./chunk-WBBXU2FL-cached.js";import{e as I}from"./chunk-XMZXE55N-cached.js";var D=I(E());var N={name:"EditChannelDescriptionModal",mixins:[D.validationMixin,y],components:{ModalTemplate:S,BannerSimple:C,BannerScoped:b,ButtonSubmit:x,CharLengthIndicator:R},data(){return{form:{description:null}}},computed:{...v(["currentGroupId"]),...g(["currentChatRoomId","groupSettings","currentChatRoomState"]),maxDescriptionCharacters(){return this.currentChatRoomState.settings.maxDescriptionLength},code(){return p("DELETE {GROUP_NAME}",{GROUP_NAME:this.groupSettings.groupName.toUpperCase()})}},created(){this.form.description=this.currentChatRoomState.attributes.description},mounted(){this.$refs.description.focus()},methods:{close(){this.$refs.modal.close()},async submit(){try{await h("gi.actions/group/changeChatRoomDescription",{contractID:this.currentGroupId,data:{chatRoomID:this.currentChatRoomId,description:this.form.description}})}catch(e){console.error("ChangeChannelDescriptionModal submit() error:",e),this.$refs.formMsg.danger(e.message)}this.close()}},validations:{form:{description:{[p("Reached character limit.")]:function(e){return!e||Number(e.length)<=this.maxDescriptionCharacters}}}}},T=function(){var e=this,o=e.$createElement,n=e._self._c||o;return n("modal-template",{ref:"modal",attrs:{a11yTitle:e.L("Channel description")}},[n("template",{slot:"title"},[n("i18n",[e._v("Channel description")])],1),n("form",{attrs:{novalidate:"novalidate"},on:{submit:function(i){i.preventDefault()}}},[n("label",{staticClass:"field"},[n("div",{staticClass:"c-label-group"},[n("i18n",{staticClass:"label"},[e._v("Description")]),n("char-length-indicator",{attrs:{"current-length":e.form.description.length||0,max:e.maxDescriptionCharacters,error:e.$v.form.description.$error}})],1),n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.form.description,expression:"form.description"},{name:"error",rawName:"v-error:description",arg:"description"}],ref:"description",staticClass:"textarea",class:{error:e.$v.form.description.$error},attrs:{name:"description",placeholder:e.L("Description of the channel"),maxlength:e.maxDescriptionCharacters,"data-test":"updateChannelDescription"},domProps:{value:e.form.description},on:{input:[function(i){i.target.composing||e.$set(e.form,"description",i.target.value)},function(i){return e.debounceField("description")}],blur:function(i){return e.updateField("description")}}}),n("i18n",{staticClass:"helper"},[e._v("This is optional.")])],1),n("banner-scoped",{ref:"formMsg"}),n("div",{staticClass:"buttons"},[n("i18n",{staticClass:"button is-outlined",on:{click:function(i){return i.preventDefault(),e.close(i)}}},[e._v("Cancel")]),n("button-submit",{staticClass:"is-success",attrs:{type:"button",disabled:e.$v.form.$invalid,"data-test":"updateChannelDescriptionSubmit"},on:{click:e.submit}},[n("i18n",[e._v("Save")])],1)],1)],1)],2)},M=[],L=function(e){e&&e("data-v-0c6811e9_0",{source:".c-banner[data-v-0c6811e9]{margin:1.5rem 0}.c-label-group[data-v-0c6811e9]{display:flex;justify-content:space-between;align-items:flex-end}.is-danger[data-v-0c6811e9]{color:var(--danger_0)}",map:void 0,media:void 0})},A="data-v-0c6811e9",U=void 0,j=!1;function w(e,o,n,i,a,u,r,c,d,l){let t=(typeof n=="function"?n.options:n)||{};t.__file=`style>
`,t.render||(t.render=e.render,t.staticRenderFns=e.staticRenderFns,t._compiled=!0,a&&(t.functional=!0)),t._scopeId=i;{let m;if(o&&(m=r?function(s){o.call(this,l(s,this.$root.$options.shadowRoot))}:function(s){o.call(this,c(s))}),m!==void 0)if(t.functional){let s=t.render;t.render=function($,_){return m.call(_),s($,_)}}else{let s=t.beforeCreate;t.beforeCreate=s?[].concat(s,m):[m]}}return t}function f(){let e=f.styles||(f.styles={}),o=typeof navigator<"u"&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());return function(i,a){if(document.querySelector('style[data-vue-ssr-id~="'+i+'"]'))return;let u=o?a.media||"default":i,r=e[u]||(e[u]={ids:[],parts:[],element:void 0});if(!r.ids.includes(i)){let c=a.source,d=r.ids.length;if(r.ids.push(i),a.map&&(c+=`
/*# sourceURL=`+a.map.sources[0]+" */",c+=`
/*# sourceMappingURL=data:application/json;base64,`+btoa(unescape(encodeURIComponent(JSON.stringify(a.map))))+" */"),o&&(r.element=r.element||document.querySelector("style[data-group="+u+"]")),!r.element){let l=document.head||document.getElementsByTagName("head")[0],t=r.element=document.createElement("style");t.type="text/css",a.media&&t.setAttribute("media",a.media),o&&(t.setAttribute("data-group",u),t.setAttribute("data-next-index","0")),l.appendChild(t)}if(o&&(d=parseInt(r.element.getAttribute("data-next-index")),r.element.setAttribute("data-next-index",d+1)),r.element.styleSheet)r.parts.push(c),r.element.styleSheet.cssText=r.parts.filter(Boolean).join(`
`);else{let l=document.createTextNode(c),t=r.element.childNodes;t[d]&&r.element.removeChild(t[d]),t.length?r.element.insertBefore(l,t[d]):r.element.appendChild(l)}}}}var B=w({render:T,staticRenderFns:M},L,N,A,j,U,!1,f,void 0,void 0),W=B;export{W as default};
//# sourceMappingURL=EditChannelDescriptionModal-KXWIRNSI-cached.js.map
